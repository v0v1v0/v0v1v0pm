<div class="container">

<table style="width: 100%;"><tr>
<td>Balance_MAGMA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Balance_MAGMA</h2>

<h3>Description</h3>

<p>This function computes all four balance criteria of 'MAGMA.R', namely
<em>Pillai's Trace</em>, <em>d-ratio</em>, <em>mean g</em>, and <em>adjusted d-ratio</em>. The
estimation considers the scale level of the variables. Balance
estimation is performed across various sample sizes. See Details for more
information.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Balance_MAGMA(
  Data,
  group,
  covariates,
  step = "step",
  verbose = TRUE,
  covariates_ordinal = NULL,
  covariates_nominal = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Data</code></td>
<td>
<p>A data frame containing at least the <em>grouping</em> variable, the
<em>step</em> variable from the main MAGMA-function (or other matching algorithms),
and all <em>covariates</em> of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A character specifying the name of
your grouping variable in data. Note that MAGMA can only match your data for
a maximum of four groups. For matching over two grouping variables (e.g., 2x2
design) is possible by specifying group as a character vector with a length
of two. In this case, each of the two grouping variables can only have two
levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>A character vector listing the names of all binary and
metric covariates of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step</code></td>
<td>
<p>A character specifying the step variable of the matching. Per
default, it is set to <em>step</em>, which corresponds the resulting
name of the main MAGMA function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE indicating whether matching information should
be printed to the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates_ordinal</code></td>
<td>
<p>A character vector listing the names of all ordinal
covariates of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates_nominal</code></td>
<td>
<p>A character vector listing the names of all nominal
covariates of interest.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function computes all four balance criteria of 'MAGMA.R', namely
Pillai's Trace, d-ratio, mean g, and adjusted d-ratio. This is an iterative
process including more cases with each iteration according to the step
variable. Thus, starting with cases having a small within-match distance,
larger distances are included with increasing iterations. As a minimum the
function specifies n &gt;= 20 per group. This does not imply that balance
criteria with such a small sample size can be estimated consistently. For
Pillai's Trace a higher minimum sample size can be possible. It depends on
the number of covariates to ensure a positive model identification.
Missing data for Pillai's Trace are excluded listwise, while for the other
balance criteria pairwise exclusion is applied.
</p>


<h3>Value</h3>

<p>A list of length four containing all balance criteria and all
pairwise effects with respect to group sample size.
</p>


<h3>Author(s)</h3>

<p>Julian Urban
</p>


<h3>References</h3>

<p>Pastore, M., Loro, P.A.D., Mingione, M., Calcagni, A. (2022). <em>overlapping: Estimation of Overlapping in Empirical Distributions</em>. R package version
2.1, (<a href="https://CRAN.R-project.org/package=overlapping">https://CRAN.R-project.org/package=overlapping</a>).
</p>
<p>Revelle, W. (2023). <em>psych: Procedures for Psychological, Psychometric, and Personality Research</em>. Northwestern University, Evanston, Illinois. R package version 2.3.6, (<a href="https://CRAN.R-project.org/package=psych">https://CRAN.R-project.org/package=psych</a>).
</p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. Journal of Statistical Software, 36(3), 1-48. (<a href="https://doi.org/10.18637/jss.v036.i03">doi:10.18637/jss.v036.i03</a>)
</p>
<p>Fisher, Z., Tipton, E., Zhipeng, H. (2023). <em>robumeta: Robust Variance Meta-Regression</em>. R package version 2.1,
(<a href="https://CRAN.R-project.org/package=robumeta">https://CRAN.R-project.org/package=robumeta</a>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Defining the names of the metric and binary covariates
covariates_vector &lt;- c("GPA_school", "IQ_score", "Motivation", "parents_academic", "gender")


# Estimating balance of a two-group matching using the data set
# 'MAGMA_sim_data'.
# Matching variable 'gifted_support' (received giftedness support yes or no)
# Using subsample only for faster execution.
Balance_gifted &lt;- Balance_MAGMA(Data = MAGMA_sim_data[MAGMA_sim_data$step_gifted &lt; 200, ],
                                group = "gifted_support",
                                covariates = covariates_vector,
                                step = "step_gifted")
str(Balance_gifted)


# 2x2 matching using the data set 'MAGMA_sim_data'
# Matching variables are 'gifted_support' (received giftedness support yes
# or no) and 'enrichment' (participated in enrichment or not)
# 'MAGMA_sim_data_gift_enrich' contains the result of the matching
# 2x2 matching is equivalent to four-group matching
MAGMA_sim_data_gift_enrich &lt;- MAGMA(Data = MAGMA_sim_data,
                                   group = c("gifted_support", "enrichment"),
                                   dist = "ps_2x2",
                                   cores = 2)


# Estimating balance. Covariates same as above
Balance_2x2 &lt;- Balance_MAGMA(Data = MAGMA_sim_data_gift_enrich,
                             group = c("gifted_support", "enrichment"),
                             covariates = covariates_vector,
                             step = "step") # step created during matching
str(Balance_2x2)



</code></pre>


</div>