<div class="container">

<table style="width: 100%;"><tr>
<td>match.closest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Relaxed Value Matching</h2>

<h3>Description</h3>

<p><code>match.closest</code> returns a vector of the positions of (first) matches
its first arguments in its second. In contrast to the similar
<code>match</code> it just accept <code>numeric</code> arguments but
has an additional <code>tolerance</code> argument that allows relaxed
matching.
</p>


<h3>Usage</h3>

<pre><code class="language-R">match.closest(x, table, tolerance = Inf, nomatch = NA_integer_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>numeric</code>, the values to be matched.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p><code>numeric</code>, the values to be matched against. In contrast to
<code>match</code> <code>table</code> has to be sorted in increasing order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p><code>numeric</code>, accepted tolerance. Use <code>Inf</code> to match without
restrictions. Could be of length one or the same length as <code>table</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nomatch</code></td>
<td>
<p><code>numeric</code>, if the difference
between the value in <code>x</code> and <code>table</code> is larger than
<code>tolerance</code> <code>nomatch</code> is returned. Has to be of length one.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>integer</code> vector of the same length as <code>x</code> giving the
closest position in <code>table</code> of the first match or <code>nomatch</code> if
there is no match.
</p>


<h3>See Also</h3>

<p><code>match</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("MALDIquant")
match.closest(c(1.1, 1.4, 9.8), 1:10)
# [1]  1  1 10
match.closest(c(1.1, 1.4, 9.8), 1:10, tolerance=0.25)
# [1]  1 NA 10
match.closest(c(1.1, 1.4, 9.8), 1:10, tolerance=0.25, nomatch=0)
# [1]  1  0 10

## this function is most useful if you want to subset an intensityMatrix
## by a few (reference) peaks

## create an example intensityMatrix
im &lt;- matrix(1:10, nrow=2, dimnames=list(NULL, 1:5))
attr(im, "mass") &lt;- 1:5
im
#      1 2 3 4  5
# [1,] 1 3 5 7  9
# [2,] 2 4 6 8 10
# attr(,"mass")
# [1] 1 2 3 4 5

## reference peaks
ref &lt;- c(2.2, 4.8)

im[, match.closest(ref, attr(im, "mass"), tolerance=0.25, nomatch=0)]
#      2  5
# [1,] 3  9
# [2,] 4 10

</code></pre>


</div>