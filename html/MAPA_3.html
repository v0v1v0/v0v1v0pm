<div class="container">

<table style="width: 100%;"><tr>
<td>mapacalc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>MAPA Internal Calculation of Forecasts</h2>

<h3>Description</h3>

<p>The following function produces a simple MAPA forecast from a given origin. 
This is meant to be an internal function. Use mapafor instead.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mapacalc(y, mapafit, fh = 0, comb = c("w.mean","w.median","mean","median","wght"), 
         outplot = c(0,1,2), hybrid = c(TRUE,FALSE), xreg=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>In sample observations of a time series (vector).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapafit</code></td>
<td>

<p>Fitted MAPA model (from mapaest).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fh</code></td>
<td>

<p>Forecast horizon. Default = ppy.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comb</code></td>
<td>

<p>Combination operator. This can be: "mean"; "median"; "wght" - where each aggregation level is weighted inversly to aggregation; "w.mean" - level and trend components are averaged, but seasonal and xreg follow the wght combination; "w.median" - as w.mean, but with median. It is suggested that for data with high sampling frequency to use one of the "w.mean" and "w.median".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outplot</code></td>
<td>

<p>Provide output plot. 0 = no; 1 = time series and forecast only; 2 = time series, forecasts and components. For the components the spectral colouring scheme is used. Dark red is aggregation level 1. Default is 1. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hybrid</code></td>
<td>

<p>Provide hybrid forecasts, as in Kourentzes et al. paper. If minimumAL &gt; 1 then the minimumAL ETS forecasts are used. Default is TRUE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xreg</code></td>
<td>

<p>Vector or matrix of exogenous variables to be included in the MAPA. If matrix then rows are observations and columns are variables. Must be at least as long as in-sample plus fh. Additional observations are unused. 
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>forecasts</code></td>
<td>
<p>Vector with forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>components</code></td>
<td>
<p>Array with MAPA components.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>; Fotios Petropoulos.
</p>


<h3>References</h3>


<ul>
<li>
<p>Kourentzes N., Petropoulos F., Trapero J.R. (2014) Improving forecasting by estimating time 
series structural components across multiple frequencies. <em>International Journal of Forecasting</em>, <b>30</b>(<b>2</b>), 291â€“302.
</p>
</li>
<li>
<p>Kourentzes N., Petropoulos F. (2015) Forecasting with multivariate temporal aggregation: The case of promotional modelling. <em>International Journal of Production Economics</em>.
</p>
</li>
<li>
<p>You can find more information about MAPA at Nikos' <a href="https://kourentzes.com/forecasting/tag/mapa/">blog</a>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>mapafor</code>, <code>mapa</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mapafit &lt;- mapaest(admissions,outplot=0)
mapacalc(admissions,mapafit,outplot=2)
</code></pre>


</div>