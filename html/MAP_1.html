<div class="container">

<table style="width: 100%;"><tr>
<td>MAP</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>MAP algorithm</h2>

<h3>Description</h3>

<p>Main function to perform MAP algorithm to calculate predicted
probabilities of positive phenotype for each patient
based on NLP and ICD counts adjusted for healthcare utilization.
</p>


<h3>Usage</h3>

<pre><code class="language-R">MAP(mat = NULL, note = NULL, yes.con = FALSE, full.output = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mat</code></td>
<td>
<p>Count data (sparse matrix). One of the columns has to be ICD
data with name being ICD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>note</code></td>
<td>
<p>Note count (sparse matrix) indicating health utilization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yes.con</code></td>
<td>
<p>A logical variable indicating if concomitant is desired. Not
used for now.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full.output</code></td>
<td>
<p>A logical variable indicating if full outputs are desired.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a list with following objects:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>scores</code></td>
<td>
<p>indicates predicted probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut.MAP</code></td>
<td>
<p>the cutoff value that can be used to derive binary phenotype.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>High-throughput Multimodal Automated Phenotyping (MAP) with
Application to PheWAS. Katherine P. Liao, Jiehuan Sun,
Tianrun A. Cai, Nicholas Link, Chuan Hong, Jie Huang, Jennifer Huffman,
Jessica Gronsbell, Yichi Zhang, Yuk-Lam Ho, Victor Castro, Vivian Gainer,
Shawn Murphy, Christopher J. Oâ€™Donnell, J. Michael Gaziano, Kelly Cho,
Peter Szolovits, Isaac Kohane, Sheng Yu, and Tianxi Cai
with the VA Million Veteran Program (2019) &lt;doi:10.1101/587436&gt;.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## simulate data to test the algorithm
n = 400
ICD = c(rpois(n/4,10), rpois(n/4,1), rep(0,n/2) )
NLP = c(rpois(n/4,10), rpois(n/4,1), rep(0,n/2) )
mat = Matrix(data=cbind(ICD,NLP),sparse = TRUE)
note = Matrix(rpois(n,10)+5,ncol=1,sparse = TRUE)
res = MAP(mat = mat,  note=note)
head(res$scores)
res$cut.MAP
</code></pre>


</div>