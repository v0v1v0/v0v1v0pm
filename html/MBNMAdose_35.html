<div class="container">

<table style="width: 100%;"><tr>
<td>mbnma.nodesplit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Node-splitting model for testing consistency at the treatment level using MBNMA</h2>

<h3>Description</h3>

<p>Splits contributions for a given set of treatment comparisons into direct and
indirect evidence. A discrepancy between the two suggests that the consistency
assumption required for NMA and MBNMA may violated.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mbnma.nodesplit(
  network,
  fun = dpoly(degree = 1),
  method = "common",
  comparisons = NULL,
  incldr = TRUE,
  ...
)

## S3 method for class 'nodesplit'
plot(x, plot.type = "forest", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparisons</code></td>
<td>
<p>A matrix specifying the comparisons to be split (one row per comparison).
The matrix must have two columns indicating each treatment for each comparison. Values can
either be character (corresponding to the treatment names given in <code>network</code>) or
numeric (corresponding to treatment codes within the <code>network</code> - note that these
may change if <code>drop.discon = TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incldr</code></td>
<td>
<p>A boolean object indicating whether or not to allow for indirect evidence contributions via
the dose-response relationship. This can be used when node-splitting in dose-response MBNMA to allow
for a greater number of potential loops in which to check for consistency.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot2::ggplot()</code> or <code>forestplot::forestplot()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of <code>class("nodesplit")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.type</code></td>
<td>
<p>A character string that can take the value of <code>"forest"</code> to plot
forest plots or <code>"density"</code> to plot posterior density plots.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The S3 method <code>plot()</code> on an <code>nodesplit</code> object generates either
forest plots of posterior medians and 95\% credible intervals, or density plots
of posterior densities for direct and indirect evidence.
</p>


<h3>Value</h3>

<p>Plots the desired graph if <code>plot.type="forest"</code> and plots and returns an object
of <code>class(c("gg", "ggplot"))</code> if <code>plot.type="density"</code>.
</p>


<h3>Functions</h3>


<ul><li> <p><code>plot(nodesplit)</code>: Plot outputs from treatment-level nodesplit MBNMA models
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">
# Using the triptans data
network &lt;- mbnma.network(triptans)

split &lt;- mbnma.nodesplit(network, fun=demax(), likelihood = "binomial", link="logit",
  method="common")


#### To perform nodesplit on selected comparisons ####

# Check for closed loops of treatments with independent evidence sources
# Including indirect evidence via the dose-response relationship
loops &lt;- inconsistency.loops(network$data.ab, incldr=TRUE)

# This...
single.split &lt;- mbnma.nodesplit(network, fun=dexp(), likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c("sumatriptan_1", "almotriptan_1")))

#...is the same as...
single.split &lt;- mbnma.nodesplit(network, fun=dexp(), likelihood = "binomial", link="logit",
             method="random", comparisons=rbind(c(6, 12)))


# Plot results
plot(split, plot.type="density") # Plot density plots of posterior densities
plot(split, txt_gp=forestplot::fpTxtGp(cex=0.5)) # Plot forest plots (with smaller label size)

# Print and summarise results
print(split)
summary(split) # Generate a data frame of summary results

</code></pre>


</div>