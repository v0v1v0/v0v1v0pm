<div class="container">

<table style="width: 100%;"><tr>
<td>mbnma.update</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update MBNMA to monitor deviance nodes in the model</h2>

<h3>Description</h3>

<p>Useful for obtaining deviance contributions or fitted values. Same function used in MBNMAdose and MBNMAtime packages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mbnma.update(
  mbnma,
  param = "theta",
  armdat = TRUE,
  n.iter = mbnma$BUGSoutput$n.iter,
  n.thin = mbnma$BUGSoutput$n.thin
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a dose-response MBNMA model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>Used to indicate which node to monitor in the model. Can be any parameter
in the model code that varies by all arms within all studies. These are some typical
parameters that it might be of interest to monitor, provided they are in the original
model code:
</p>

<ul>
<li> <p><code>"theta"</code> for fitted values
</p>
</li>
<li> <p><code>"psi"</code> for fitted values on natural scale (e.g. probabilities)
</p>
</li>
<li> <p><code>"dev"</code> for deviance contributions
</p>
</li>
<li> <p><code>"resdev"</code> for residual deviance contributions
</p>
</li>
<li> <p><code>"delta"</code> for within-study relative effects versus the study reference treatment
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>armdat</code></td>
<td>
<p>Include raw arm-level data for each data point (agent, dose, study grouping)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.thin</code></td>
<td>
<p>thinning rate. Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame containing the posterior mean of the updates by arm and study,
with arm and study identifiers.
</p>
<p>For MBNMAdose:
</p>

<ul>
<li> <p><code>facet</code> indicates the agent identifier in the given arm of a study
</p>
</li>
<li> <p><code>fupdose</code> indicates the dose in the given arm of a study
</p>
</li>
</ul>
<p>For MBNMAtime:
</p>

<ul>
<li> <p><code>facet</code> indicates the treatment identifier in the given arm of the study
</p>
</li>
<li> <p><code>fupdose</code> indicates the follow-up time at the given observation in the given
arm of the study
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# Using the triptans data
network &lt;- mbnma.network(triptans)

# Fit a dose-response MBNMA, monitoring "psi" and "resdev"
result &lt;- mbnma.run(network, fun=dloglin(), method="random",
  parameters.to.save=c("psi", "resdev"))

mbnma.update(result, param="theta") # monitor theta

mbnma.update(result, param="rhat") # monitor rhat

mbnma.update(result, param="delta") # monitor delta


</code></pre>


</div>