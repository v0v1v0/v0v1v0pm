<div class="container">

<table style="width: 100%;"><tr>
<td>mbnma.write</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write MBNMA dose-response model JAGS code</h2>

<h3>Description</h3>

<p>Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mbnma.write(
  fun = dpoly(degree = 1),
  method = "common",
  regress.mat = NULL,
  regress.effect = "common",
  sdscale = FALSE,
  cor = FALSE,
  cor.prior = "wishart",
  omega = NULL,
  om = list(rel = 5, abs = 10),
  class.effect = list(),
  UME = FALSE,
  likelihood = "binomial",
  link = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>An object of <code>class("dosefun")</code> that specifies a functional form to be assigned to the
dose-response. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Can take either <code>"common"</code> or <code>"random"</code> to indicate whether relative effects
should be modelled with between-study heterogeneity or not (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regress.mat</code></td>
<td>
<p>A Nstudy x Ncovariate design matrix of meta-regression covariates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regress.effect</code></td>
<td>
<p>Indicates whether effect modification should be assumed to be
<code>"common"</code> (assumed to be equal versus Placebo throughout the network),
<code>"random"</code> (assumed to be exchangeable versus Placebo throughout the network),
<code>"agent"</code> (assumed to be equal versus Placebo within each agent), or
<code>"class"</code> (assumed to be equal versus Placebo within each class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor</code></td>
<td>
<p>A boolean object that indicates whether correlation should be modelled
between relative effect dose-response parameters. This is
automatically set to <code>FALSE</code> if class effects are modelled or if multiple dose-response
functions are fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor.prior</code></td>
<td>
<p>NOT CURRENTLY IN USE - indicates the prior distribution to use for the correlation/covariance
between relative effects. Must be kept as <code>"wishart"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega</code></td>
<td>
<p>A scale matrix for the inverse-Wishart prior for the covariance matrix used
to model the correlation between dose-response parameters (see Details for dose-response functions). <code>omega</code> must
be a symmetric positive definite matrix with dimensions equal to the number of dose-response parameters modelled using
relative effects (<code>"rel"</code>). If left as <code>NULL</code> (the default) a diagonal matrix with elements equal to 100
is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>om</code></td>
<td>
<p>a list with two elements that report the maximum relative (<code>"rel"</code>) and maximum absolute (<code>"abs"</code>) efficacies
on the link scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class.effect</code></td>
<td>
<p>A list of named strings that determines which dose-response
parameters to model with a class effect and what that effect should be
(<code>"common"</code> or <code>"random"</code>). Element names should match dose-response parameter names.
Note that assuming class effects on some dose-response parameters may be unreasonable if
the range of doses differ substantially across agents within a class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When relative effects are modelled on more than one dose-response parameter and
<code>cor = TRUE</code>, correlation between the dose-response parameters is automatically
estimated using a vague Wishart prior. This prior can be made slightly more informative
by specifying the relative scale of variances between the dose-response parameters using
<code>omega</code>. <code>cor</code> will automatically be set to <code>FALSE</code> if class effects are modelled.
</p>


<h3>Value</h3>

<p>A single long character string containing the JAGS model generated
based on the arguments passed to the function.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Write model code for a model with an exponential dose-response function,
# with random treatment effects
model &lt;- mbnma.write(fun=dexp(),
             method="random",
             likelihood="binomial",
             link="logit"
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax with a random effects model,
# a single parameter estimated for ED50 with a common effects model
model &lt;- mbnma.write(fun=demax(emax="rel", ed50="common"),
             likelihood="normal",
             link="identity"
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax and ED50.
# Class effects modelled on ED50 with common effects
model &lt;- mbnma.write(fun=demax(),
             likelihood="normal",
             link="identity",
             class.effect=list("ed50"="common")
             )
names(model) &lt;- NULL
print(model)

# Write model code for a model with an Emax dose-response function,
# relative effects modelled on Emax and ED50 with a
# random effects model that automatically models a correlation between
# both parameters.
model &lt;- mbnma.write(fun=demax(),
             method="random",
             likelihood="normal",
             link="identity",
             )
names(model) &lt;- NULL
print(model)
</code></pre>


</div>