<div class="container">

<table style="width: 100%;"><tr>
<td>plot.nma</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run an NMA model</h2>

<h3>Description</h3>

<p>Used for calculating treatment-level NMA results, either when comparing MBNMA models to models that
make no assumptions regarding dose-response , or to estimate split results for <code>overlay.split</code>.
Results can also be compared between consistency (<code>UME=FALSE</code>) and inconsistency
(<code>UME=TRUE</code>) models to test the validity of the consistency assumption at the treatment-level.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'nma'
plot(x, bydose = TRUE, scales = "free_x", ...)

nma.run(
  network,
  method = "common",
  likelihood = NULL,
  link = NULL,
  priors = NULL,
  sdscale = FALSE,
  warn.rhat = TRUE,
  n.iter = 20000,
  drop.discon = TRUE,
  UME = FALSE,
  pd = "pd.kl",
  parameters.to.save = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of <code>class("nma")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bydose</code></td>
<td>
<p>A boolean object indicating whether to plot responses with dose
on the x-axis (<code>TRUE</code>) to be able to examine potential dose-response shapes, or
to plot a conventional forest plot with all treatments on the same plot (<code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scales</code></td>
<td>
<p>Should scales be fixed (<code>"fixed"</code>, the default),
free (<code>"free"</code>), or free in one dimension (<code>"free_x"</code>,
<code>"free_y"</code>)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be sent to <code>ggplot2::ggplot()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>network</code></td>
<td>
<p>An object of class <code>mbnma.network</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Indicates the type of split (treatment-level) NMA to perform when <code>overlay.split=TRUE</code>. Can
take either <code>"common"</code> or <code>"random"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>likelihood</code></td>
<td>
<p>A string indicating the likelihood to use in the model. Can take either <code>"binomial"</code>,
<code>"normal"</code> or <code>"poisson"</code>. If left as <code>NULL</code> the likelihood will be inferred from the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>A string indicating the link function to use in the model. Can take any link function
defined within JAGS (e.g. <code>"logit"</code>, <code>"log"</code>, <code>"probit"</code>, <code>"cloglog"</code>), be assigned the value <code>"identity"</code> for
an identity link function, or be assigned the value <code>"smd"</code> for modelling Standardised Mean Differences using an
identity link function. If left as <code>NULL</code> the link function will be automatically assigned based
on the likelihood.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>priors</code></td>
<td>
<p>A named list of parameter values (without indices) and
replacement prior distribution values given as strings
<strong>using distributions as specified in JAGS syntax</strong> (see Plummer (2017)). Note
that normal distributions in JAGS are specified as </p>
<p style="text-align: center;"><code class="reqn">N(\mu, prec)</code>
</p>
<p>, where </p>
<p style="text-align: center;"><code class="reqn">prec = 1 / {\sigma^2}</code>
</p>
<p>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn.rhat</code></td>
<td>
<p>A boolean object to indicate whether to return a warning if Rhat values
for any monitored parameter are &gt;1.02 (suggestive of non-convergence).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in; default: 20000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.discon</code></td>
<td>
<p>A boolean object that indicates whether or not to drop disconnected
studies from the network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UME</code></td>
<td>
<p>A boolean object to indicate whether to fit an Unrelated Mean Effects model
that does not assume consistency and so can be used to test if the consistency
assumption is valid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pd</code></td>
<td>
<p>Can take either:
</p>

<ul>
<li> <p><code>pv</code> only pV will be reported (as automatically outputted by <code>R2jags</code>).
</p>
</li>
<li> <p><code>plugin</code> calculates pD by the plug-in
method (Spiegelhalter et al. 2002). It is faster, but may output negative
non-sensical values, due to skewed deviances that can arise with non-linear models.
</p>
</li>
<li> <p><code>pd.kl</code> calculates pD by the Kullback-Leibler divergence (Plummer 2008). This
will require running the model for additional iterations but is a more robust calculation for the effective
number of parameters in non-linear models.
</p>
</li>
<li> <p><code>popt</code> calculates pD using an optimism adjustment which allows for calculation
of the penalized expected deviance (Plummer 2008).
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters.to.save</code></td>
<td>
<p>A character vector containing names of parameters
to monitor in JAGS</p>
</td>
</tr>
</table>
<h3>Functions</h3>


<ul><li> <p><code>plot(nma)</code>: Plot outputs from treatment-level NMA models
</p>
<p>Results can be plotted either as a single forest plot, or facetted by agent
and plotted with increasing dose in order to identify potential dose-response
relationships. If Placebo (or any agents with dose=0) is included in the network
then this will be used as the reference treatment, but if it is not then results
will be plotted versus the network reference used in the NMA object (<code>x</code>).
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">
# Run random effects NMA on the alogliptin dataset
alognet &lt;- mbnma.network(alog_pcfb)
nma &lt;- nma.run(alognet, method="random")
print(nma)
plot(nma)

# Run common effects NMA keeping treatments that are disconnected in the NMA
goutnet &lt;- mbnma.network(gout)
nma &lt;- nma.run(goutnet, method="common", drop.discon=FALSE)

# Run an Unrelated Mean Effects (UME) inconsistency model on triptans dataset
tripnet &lt;- mbnma.network(triptans)
ume &lt;- nma.run(tripnet, method="random", UME=TRUE)


</code></pre>


</div>