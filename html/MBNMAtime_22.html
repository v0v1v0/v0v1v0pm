<div class="container">

<table style="width: 100%;"><tr>
<td>getnmadata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepares NMA data for JAGS</h2>

<h3>Description</h3>

<p>Converts data frame to a list for use in JAGS NMA model
</p>


<h3>Usage</h3>

<pre><code class="language-R">getnmadata(data.ab, link = "identity", sdscale = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.ab</code></td>
<td>
<p>A data frame of arm-level data in "long" format containing the columns:
</p>

<ul>
<li> <p><code>studyID</code> Study identifiers
</p>
</li>
<li> <p><code>time</code> Numeric data indicating follow-up times
</p>
</li>
<li> <p><code>y</code> Numeric data indicating the aggregate response for a given observation (e.g. mean)
</p>
</li>
<li> <p><code>se</code> Numeric data indicating the standard error for a given observation
</p>
</li>
<li> <p><code>treatment</code> Treatment identifiers (can be numeric, factor or character)
</p>
</li>
<li> <p><code>class</code> An optional column indicating a particular class identifier. Observations with the same treatment
identifier must also have the same class identifier.
</p>
</li>
<li> <p><code>n</code> An optional column indicating the number of participants used to calculate the
response at a given observation (required if modelling using Standardised Mean Differences)
</p>
</li>
<li> <p><code>standsd</code> An optional column of numeric data indicating reference SDs used to standardise
treatment effects when modelling using Standardised Mean Differences (SMD).
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>Can take either <code>"identity"</code> (the default),
<code>"log"</code> (for modelling Ratios of Means (Friedrich et al. 2011)) or
<code>"smd"</code> (for modelling Standardised Mean Differences - although this also corresponds to an identity link function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A named list of numbers, vector, matrices and arrays to be sent to
JAGS. List elements are:
</p>

<ul>
<li> <p><code>y</code> An array of mean responses for each observation in each arm within each study
</p>
</li>
<li> <p><code>se</code> An array of standard errors for each observation in each arm within each study
</p>
</li>
<li> <p><code>narm</code> A numeric vector with the number of arms per study
</p>
</li>
<li> <p><code>NS</code> The total number of studies in the dataset
</p>
</li>
<li> <p><code>NT</code> The total number of treatments in the dataset
</p>
</li>
<li> <p><code>treat</code> A matrix of treatment codes within each study
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># Using the alogliptin dataset
network &lt;- mb.network(alog_pcfb)

# Construct a dataset with the latest time point in each study
data.ab &lt;- get.latest.time(network)$data.ab
getnmadata(data.ab)

</code></pre>


</div>