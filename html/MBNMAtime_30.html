<div class="container">

<table style="width: 100%;"><tr>
<td>plot.nodesplit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform node-splitting on a MBNMA time-course network</h2>

<h3>Description</h3>

<p>Within a MBNMA time-course network, split contributions into direct and indirect evidence and test
for consistency between them. Closed loops of treatments in which it is possible to test for
consistency are those in which direct and indirect evidence are available from independent sources
van Valkenhoef van Valkenhoef et al. (2016).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'nodesplit'
plot(x, plot.type = NULL, params = NULL, ...)

mb.nodesplit(
  network,
  comparisons = mb.nodesplit.comparisons(network),
  nodesplit.parameters = "all",
  fun = tpoly(degree = 1),
  times = NULL,
  lim = "cred",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of <code>class("nodesplit")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.type</code></td>
<td>
<p>A character string that can take the value of <code>"forest"</code> to plot
only forest plots, <code>"density"</code> to plot only density plots, or left as <code>NULL</code> (the
default) to plot both types of plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>A character vector corresponding to a time-course parameter(s) for which to plot results.
If left as <code>NULL</code> (the default), nodes-split results for all time-course parameters will be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be sent to <code>mb.run()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>network</code></td>
<td>
<p>An object of class <code>"mb.network"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparisons</code></td>
<td>
<p>A data frame specifying the comparisons to be split (one row per comparison).
The frame has two columns indicating each treatment for each comparison: <code>t1</code> and <code>t2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodesplit.parameters</code></td>
<td>
<p>A character vector of named time-course parameters on which to
node-split (e.g. c("beta.1", "beta.2")). Can use "all" to split on all time-course parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>An object of class <code>"timefun"</code> generated (see Details) using any of
<code>tloglin()</code>, <code>tpoly()</code>, <code>titp()</code>, <code>temax()</code>, <code>tfpoly()</code>, <code>tspline()</code> or <code>tuser()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A sequence of positive numbers indicating which time points to
predict mean responses for (or at which to conduct a node-split if used with <code>mb.nodesplit()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lim</code></td>
<td>
<p>Specifies calculation of either 95% credible intervals (<code>lim="cred"</code>) or 95% prediction intervals (<code>lim="pred"</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The S3 method <code>plot()</code> on an <code>mb.nodesplit</code> object generates either
forest plots of posterior medians and 95\% credible intervals, or density plots
of posterior densities for direct and indirect evidence.
</p>
<p>Note that by specifying the <code>times</code> argument a user can perform a node-split of treatment
effects at a specific time-point. This will give the treatment effect for both direct, indirect, and
MBNMA estimates at this time point.
</p>


<h3>Value</h3>

<p>Plots the desired graph(s) and returns an object (or list of objects if
<code>plot.type=NULL</code>) of <code>class(c("gg", "ggplot"))</code>, which can be edited using <code>ggplot</code> commands.
</p>
<p>A an object of <code>class("mb.nodesplit")</code> that is a list containing elements
<code>d.X.Y</code> (treatment 1 = <code>X</code>, treatment 2 = <code>Y</code>). Each element (corresponding to each
comparison) contains additional numbered elements corresponding to each parameter in the
time-course function on which node splitting was performed. These elements then contain:
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠overlap matrix⁠</code> MCMC results for the difference between direct and indirect evidence
</p>
</li>
<li> <p><code>p.values</code> Bayesian p-value for the test of consistency between direct and indirect evidence
</p>
</li>
<li> <p><code>quantiles</code>
</p>
</li>
<li> <p><code>forest.plot</code>
</p>
</li>
<li> <p><code>density.plot</code>
</p>
</li>
<li> <p><code>direct</code> MCMC results for the direct evidence
</p>
</li>
<li> <p><code>indirect</code> MCMC results for the indirect evidence
</p>
</li>
</ul>
<h3>Functions</h3>


<ul><li> <p><code>plot(nodesplit)</code>: Plot outputs from nodesplit models
</p>
</li></ul>
<h3>References</h3>

<p>van Valkenhoef G, Dias S, Ades AE, Welton NJ (2016).
“Automated generation of node-splitting models for assessment of inconsistency in network meta-analysis.”
<em>Res Synth Methods</em>, <b>7</b>(1), 80-93.
ISSN 1759-2887 (Electronic) 1759-2879 (Linking), <a href="https://doi.org/10.1002/jrsm.1167">doi:10.1002/jrsm.1167</a>, <a href="https://pubmed.ncbi.nlm.nih.gov/26461181/">https://pubmed.ncbi.nlm.nih.gov/26461181/</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Create mb.network object
painnet &lt;- mb.network(osteopain)

# Identify comparisons informed by direct and indirect evidence
splits &lt;- mb.nodesplit.comparisons(painnet)

# Fit a log-linear time-course MBNMA (takes a while to run)
result &lt;- mb.nodesplit(painnet, comparisons=splits, nodesplit.parameters="all",
  fun=tloglin(pool.rate="rel", method.rate="common"),
  rho="dunif(0,1)", covar="varadj"
  )

# Fit an emax time-course MBNMA with a node-split on emax parameters only
result &lt;- mb.nodesplit(painnet, comparisons=splits, nodesplit.parameters="emax",
  fun=temax(pool.emax="rel", method.emax="common",
    pool.et50="rel", method.et50="common"))

# Inspect results
print(result)
summary(result)

# Plot results
plot(result)

</code></pre>


</div>