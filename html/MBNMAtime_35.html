<div class="container">

<table style="width: 100%;"><tr>
<td>mb.write</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write MBNMA time-course models JAGS code</h2>

<h3>Description</h3>

<p>Writes JAGS code for a Bayesian time-course model for model-based network
meta-analysis (MBNMA).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mb.write(
  fun = tpoly(degree = 1),
  link = "identity",
  positive.scale = TRUE,
  intercept = NULL,
  rho = 0,
  covar = "varadj",
  omega = NULL,
  corparam = TRUE,
  sdscale = FALSE,
  class.effect = list(),
  UME = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>An object of class <code>"timefun"</code> generated (see Details) using any of
<code>tloglin()</code>, <code>tpoly()</code>, <code>titp()</code>, <code>temax()</code>, <code>tfpoly()</code>, <code>tspline()</code> or <code>tuser()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>Can take either <code>"identity"</code> (the default),
<code>"log"</code> (for modelling Ratios of Means (Friedrich et al. 2011)) or
<code>"smd"</code> (for modelling Standardised Mean Differences - although this also corresponds to an identity link function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positive.scale</code></td>
<td>
<p>A boolean object that indicates whether all continuous
mean responses (y) are positive and therefore whether the baseline response
should be given a prior that constrains it to be positive (e.g. for scales that cannot be &lt;0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intercept</code></td>
<td>
<p>A boolean object that indicates whether an intercept (written
as <code>alpha</code> in the model) is to be included. If left as <code>NULL</code> (the default), an intercept will
be included only for studies reporting absolute means, and will be excluded for
studies reporting change from baseline (as indicated in <code>network$cfb</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>The correlation coefficient when modelling within-study correlation between time points. The default is a string representing a
prior distribution in JAGS, indicating that it be estimated from the data (e.g. <code>rho="dunif(0,1)"</code>). <code>rho</code> also be assigned a
numeric value (e.g. <code>rho=0.7</code>), which fixes <code>rho</code> in the model to this value (e.g. for use in a deterministic sensitivity analysis).
If set to <code>rho=0</code> (the default) then this implies modelling no correlation between time points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covar</code></td>
<td>
<p>A character specifying the covariance structure to use for modelling within-study correlation between time-points. This can
be done by specifying one of the following:
</p>

<ul>
<li> <p><code>"varadj"</code> - a univariate likelihood with a variance adjustment to assume a constant correlation between subsequent
time points (Jansen et al. 2015). This is the default.
</p>
</li>
<li> <p><code>"CS"</code> - a multivariate normal likelihood with a
<a href="https://support.sas.com/resources/papers/proceedings/proceedings/sugi30/198-30.pdf">compound symmetry</a> structure
</p>
</li>
<li> <p><code>"AR1"</code> - a multivariate normal likelihood with an
<a href="https://support.sas.com/resources/papers/proceedings/proceedings/sugi30/198-30.pdf">autoregressive AR1</a> structure
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega</code></td>
<td>
<p>DEPRECATED IN VERSION 0.2.3 ONWARDS (~uniform(-1,1) now used for correlation between parameters
rather than a Wishart prior).
A scale matrix for the inverse-Wishart prior for the covariance matrix used
to model the correlation between time-course parameters (see Details for time-course functions). <code>omega</code> must
be a symmetric positive definite matrix with dimensions equal to the number of time-course parameters modelled using
relative effects (<code>pool="rel"</code>). If left as <code>NULL</code> (the default) a diagonal matrix with elements equal to 1
is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corparam</code></td>
<td>
<p>A boolean object that indicates whether correlation should be modeled
between relative effect time-course parameters. Default is <code>FALSE</code> and this is automatically set to <code>FALSE</code> if class effects are modeled.
Setting it to <code>TRUE</code> models correlation between time-course parameters. This can help identify parameters
that are estimated poorly for some treatments by allowing sharing of information between
parameters for different treatments in the network, but may also cause some shrinkage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdscale</code></td>
<td>
<p>Logical object to indicate whether to write a model that specifies a reference SD
for standardising when modelling using Standardised Mean Differences. Specifying <code>sdscale=TRUE</code>
will therefore only modify the model if link function is set to SMD (<code>link="smd"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class.effect</code></td>
<td>
<p>A list of named strings that determines which time-course
parameters to model with a class effect and what that effect should be
(<code>"common"</code> or <code>"random"</code>). For example: <code>list(emax="common", et50="random")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UME</code></td>
<td>
<p>Can take either <code>TRUE</code> or <code>FALSE</code> (for an unrelated mean effects
model on all or no time-course parameters respectively) or can be a vector
of parameter name strings to model as UME. For example: <code>c("beta.1", "beta.2")</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A single long character string containing the JAGS model generated
based on the arguments passed to the function.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Write a linear time-course MBNMA:
# random treatment effects on beta.1
# equal baselines in study arms
model &lt;- mb.write(fun=tpoly(degree=1, pool.1="rel", method.1="random"))

# Write an emax time-course MBNMA with:
# a Hill parameter
# no intercept
model &lt;- mb.write(fun=temax(pool.emax="rel", method.emax="common",
    pool.et50="abs", method.et50="common", pool.hill="abs", method.hill="common"),
  intercept=TRUE)

# Write a log-linear time-course MBNMA with:
# AR1 correlation between time points
model &lt;- mb.write(fun=tloglin(),
  rho="dunif(0,1)", covar="AR1")

# Define a user-defined time-course relationship for the MBNMA JAGS model
userfun &lt;- ~ (exp(beta.1 * time) / (beta.2 * time))
model &lt;- mb.write(fun=tuser(fun=userfun,
    pool.1="rel", method.1="random",
    pool.2="rel", method.2="common"))

</code></pre>


</div>