<div class="container">

<table style="width: 100%;"><tr>
<td>predict.mbnma</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predict effects over time in a given population based on MBNMA time-course
models</h2>

<h3>Description</h3>

<p>Used to predict effects over time for different treatments or to predict
the results of a new study. For MBNMA models that include consistency
relative effects on time-course parameters, this is calculated by combining
relative treatment effects with a given reference treatment response
(specific to the population of interest).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'mbnma'
predict(
  object,
  times = seq(0, max(object$model.arg$jagsdata$time, na.rm = TRUE), length.out = 30),
  E0 = 0,
  treats = NULL,
  level = "treatment",
  ref.resp = NULL,
  synth = "common",
  lim = "cred",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An S3 object of <code>class("mbnma")</code> generated by running
a time-course MBNMA model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A sequence of positive numbers indicating which time points to
predict mean responses for (or at which to conduct a node-split if used with <code>mb.nodesplit()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>E0</code></td>
<td>
<p>An object to indicate the value(s) to use for the response at time = 0
in the prediction. This can take a number of different formats depending
on how it will be used/calculated. The default is 0 but this may lead
to non-sensical predictions if Ratio of Means are modeled.
</p>

<ul>
<li> <p><code>numeric()</code> A single numeric value representing the deterministic response at time = 0
</p>
</li>
<li> <p><code>formula()</code> A formula representing a stochastic distribution for the response
at time = 0. This is specified as a random number generator
(RNG) given as a string, and can take any RNG distribution for which a function exists
in R. For example: <code>~rnorm(n, 7, 0.5)</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treats</code></td>
<td>
<p>A character vector of treatment/class names or a numeric vector of treatment/class codes (as coded
in <code>mbnma</code>) that indicates which treatments/classes to calculate predictions for. If left as <code>NULL</code> then
predictions will be calculated for all treatments/classes. Whether the vector should correspond to treatments or
classes depends on the value of <code>level</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Can take either <code>"treatment"</code> to make predictions for treatments, or <code>"class"</code> to make predictions for classes (in
which case <code>object</code> must be a class effect model).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref.resp</code></td>
<td>
<p>An object to indicate the value(s) to use for the reference treatment response in MBNMA models
in which the reference treatment response is not estimated within the model (i.e. those that model any time-
course parameters using <code>pool="rel"</code>). This can take a number of different formats depending
on how it will be used/calculated. There are two approaches for this:
</p>

<ol>
<li>
<p> The reference response can be estimated from a dataset of studies investigating the reference
treatment using meta-analysis. This dataset could be a set of observational
studies that are specific to the population on which to make
predictions, or it could be a subset of the study arms within the MBNMA dataset
that investigate the reference treatment. The data should be provided to <code>ref.resp</code> as a
<code>data.frame()</code> containing the data in long format (one row per observation). See <code>ref.synth()</code>
</p>
</li>
<li>
<p> Values for the reference treatment response can be assigned to different time-course parameters
within the model that have been modelled using consistency relative effects (<code>pool="rel"</code>).
These are given as a list, in which each named element corresponds to a time-course
parameter modelled in <code>mbnma</code>, specified on the corresponding scale (i.e. specified on the log scale if modelled
on the log scale using Ratios of Means). Their values can be either of the following:
</p>
</li>
</ol>
<ul>
<li> <p><code>numeric()</code> A numeric value representing the deterministic value of the time-course parameter in
question in individuals given the reference treatment. <code>0</code> is used as the default, which assumes no
effect of time on the reference treatment (i.e. mean differences / relative effects versus the
reference treatment are modeled).
</p>
</li>
<li> <p><code>formula()</code> A formula representing a stochastic distribution for the value of the time-course
parameter in question. This is specified as a random number generator (RNG) given as a formula,
and can take any RNG distribution for which a function exists in R. For example: <code>~rnorm(n, -3, 0.2)</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>synth</code></td>
<td>
<p>A character object that can take the value <code>"common"</code> or <code>"random"</code> that
specifies the the type of pooling to use for synthesis of <code>ref.resp</code>. Using <code>"random"</code> rather
than <code>"common"</code> for <code>synth</code> will result in wider 95\% CrI for predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lim</code></td>
<td>
<p>Specifies calculation of either 95% credible intervals (<code>lim="cred"</code>) or 95% prediction intervals (<code>lim="pred"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be sent to R2jags for synthesis of the network
reference treatment effect (using <code>ref.synth()</code>)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default the network reference treatment baseline (<code>E0</code>) and time-course
parameter values are set to zero so that <code>predict()</code> estimates mean differences
(/relative treatment effects) over time versus the network reference treatment.
</p>
<p><code>ref.resp</code> only needs to be specified if <code>mbnma</code> has
been estimated using consistency relative effects (<code>pool="rel"</code>) for
any time-course parameters, as these inform the absolute values of the
network reference treatment parameters which can then be added to the
relative effects to calculate specific predictions.
</p>


<h3>Value</h3>

<p>An S3 object of class <code>mb.predict</code> that contains the following
elements:
</p>

<ul>
<li> <p><code>summary</code> A named list of data frames. Each data frame contains
a summary of predicted responses at follow-up times specified in <code>times</code>
for each treatment specified in <code>treats</code>
</p>
</li>
<li> <p><code>pred.mat</code> A named list of
matrices. Each matrix contains the MCMC results of predicted responses at
follow-up times specified in <code>times</code> for each treatment specified in
<code>treats</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# Create an mb.network object from a dataset
network &lt;- mb.network(osteopain)

# Run an MBNMA model with an Emax time-course
emax &lt;- mb.run(network,
  fun=temax(pool.emax="rel", method.emax="common",
    pool.et50="abs", method.et50="common"))

# Predict responses using a stochastic baseline (E0) and a distribution for the
#network reference treatment
preds &lt;- predict(emax, times=c(0:10),
  E0=~rnorm(n, 7, 0.5),
  ref.resp=list(emax=~rnorm(n, -0.5, 0.05)))
summary(preds)

# Predict responses using the original dataset to estimate the network reference
#treatment response
paindata.ref &lt;- osteopain[osteopain$treatname=="Placebo_0",]
preds &lt;- predict(emax, times=c(5:15),
  E0=10,
  ref.resp=paindata.ref)
summary(preds)

# Repeat the above prediction but using a random effects meta-analysis of the
#network reference treatment response
preds &lt;- predict(emax, times=c(5:15),
  E0=10,
  ref.resp=paindata.ref,
  synth="random")
summary(preds)


</code></pre>


</div>