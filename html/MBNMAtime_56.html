<div class="container">

<table style="width: 100%;"><tr>
<td>rankauc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates ranking probabilities for AUC from a time-course MBNMA</h2>

<h3>Description</h3>

<p>Calculates ranking probabilities for AUC from a time-course MBNMA
</p>


<h3>Usage</h3>

<pre><code class="language-R">rankauc(
  mbnma,
  lower_better = FALSE,
  treats = NULL,
  level = "treatments",
  int.range = c(0, max(mbnma$network$data.ab$time)),
  n.iter = mbnma$BUGSoutput$n.sims,
  subdivisions = 100,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mbnma</code></td>
<td>
<p>An S3 object of class <code>"mbnma"</code> generated by running
a time-course MBNMA model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower_better</code></td>
<td>
<p>Indicates whether negative responses are better (<code>lower_better=TRUE</code>) or
positive responses are better (<code>lower_better=FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treats</code></td>
<td>
<p>A character vector of treatment/class names (depending on the value of <code>level</code>). If left <code style="white-space: pre;">⁠NULL`` then rankings will be calculated for all treatments/classes. Note that unlike ⁠</code>rank.mbnma()' this argument
cannot take a numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Can take either <code>"treatment"</code> to make predictions for treatments, or <code>"class"</code> to make predictions for classes (in
which case <code>object</code> must be a class effect model).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.range</code></td>
<td>
<p>A numeric vector with two elements that indicates the range
over which to calculate AUC. Takes the form c(lower bound, upper bound). If left
as <code>NULL</code> (the default) then the range will be between zero and the maximum follow-up
time in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.iter</code></td>
<td>
<p>The number of iterations for which to calculate AUC (if <code>"auc"</code> is included in <code>params</code>).
Must be a positive integer. Default is the value used in <code>mbnma</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdivisions</code></td>
<td>
<p>The number of subdivisions over which to integrate (see <code>integrate</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be sent to R2jags for synthesis of the network
reference treatment effect (using <code>ref.synth()</code>)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>"auc"</code> can be specified in <code>param</code> to rank treatments based on
Area Under the Curve (AUC). This accounts for the effect of multiple
time-course parameters simultaneously on the treatment response, but will
be impacted by the range of time over which AUC is calculated (<code>int.range</code>).
This requires integration over <code>int.range</code> and can take some time to run (particularly)
for spline functions as this uses the trapezoid method rather than adaptive quadrature).
Note that <code>"auc"</code> can only be calculated at the treatment-level in class effect models.
</p>
<p>As with other post-estimation functions, <code>rank()</code> should only be performed on
models which have successfully converged. Note that rankings can be very sensitive to
even small changes in treatment effects and therefore failure to converge in only
one parameter may have substantial impact on rankings.
</p>


<h3>Value</h3>

<p>A named list whose elements include:
</p>

<ul>
<li> <p><code>summary.rank</code> A data frame containing
mean, sd, and quantiles for the ranks of each treatment given in <code>treats</code>
</p>
</li>
<li> <p><code>prob.matrix</code> A matrix of the proportions of MCMC results for which each
treatment/class in <code>treats</code> ranked in which position for the given parameter
</p>
</li>
<li> <p><code>rank.matrix</code> A matrix of the ranks of MCMC results for each treatment/class in
<code>treats</code> for the given parameter.
</p>
</li>
</ul>
</div>