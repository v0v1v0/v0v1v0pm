<div class="container">

<table style="width: 100%;"><tr>
<td>ijmatrix.shares</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Market shares in interaction matrix
</h2>

<h3>Description</h3>

<p>Calculating market shares in an interaction matrix based on the observations of the regarded variable. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">ijmatrix.shares(rawmatrix, submarkets, suppliers, observations, 
varname_total = "freq_i_total", varname_shares = "p_ij_obs")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rawmatrix</code></td>
<td>

<p>a <code>data.frame</code> containing the submarkets, suppliers and the observed data
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>submarkets</code></td>
<td>

<p>the column in the dataset containing the submarkets (e.g. ZIP codes)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppliers</code></td>
<td>

<p>the column in the dataset containing the suppliers (e.g. store codes)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>

<p>the column with the regarded variable (e.g. frequencies, expenditures, turnovers)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varname_total</code></td>
<td>

<p>character value, name of the variable for the total absolute values of the <code class="reqn">i</code> submarkets in the output (default: <code>varname_total = "freq_i_total"</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varname_shares</code></td>
<td>

<p>character value, name of the variable for the market shares <code class="reqn">p_{ij}</code> in the output (default: <code>varname_shares = "p_ij_obs"</code>)
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calculates the market shares of every <code class="reqn">j</code> in every <code class="reqn">i</code> (<code class="reqn">p_{ij}</code>) based on an existing interaction matrix.
</p>


<h3>Value</h3>

<p>The input interaction matrix which is a <code>data.frame</code> with a new column <code>'p_ij_obs'</code> (or another stated name in the argument <code>varname_shares</code>) or, if used after <code>ijmatrix.create</code>, an update of the columns <code>'freq_i_total'</code> and <code>'p_ij_obs'</code> (or different stated names in the arguments <code>varname_total</code> and/or <code>varname_shares</code>).
</p>


<h3>Author(s)</h3>

<p>Thomas Wieland
</p>


<h3>References</h3>

<p>Cooper, L. G./Nakanishi, M. (2010): “Market-Share Analysis: Evaluating competitive marketing effectiveness”. Boston, Dordrecht, London : Kluwer (first published 1988). E-book version from 2010: <a href="http://www.anderson.ucla.edu/faculty/lee.cooper/MCI_Book/BOOKI2010.pdf">http://www.anderson.ucla.edu/faculty/lee.cooper/MCI_Book/BOOKI2010.pdf</a>
</p>
<p>Huff, D. L./McCallum, D. (2008): “Calibrating the Huff Model Using ArcGIS Business Analyst”. <em>ESRI White Paper</em>, September 2008. <a href="https://www.esri.com/library/whitepapers/pdfs/calibrating-huff-model.pdf">https://www.esri.com/library/whitepapers/pdfs/calibrating-huff-model.pdf</a>
</p>
<p>Wieland, T. (2015): “Raeumliches Einkaufsverhalten und Standortpolitik im Einzelhandel unter Beruecksichtigung von Agglomerationseffekten. Theoretische Erklaerungsansaetze, modellanalytische Zugaenge und eine empirisch-oekonometrische Marktgebietsanalyse anhand eines Fallbeispiels aus dem laendlichen Raum Ostwestfalens/Suedniedersachsens”. <em>Geographische Handelsforschung</em>, <b>23</b>. 289 pages. Mannheim : MetaGIS.
</p>


<h3>See Also</h3>

<p><code>ijmatrix.create</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(grocery1)
# Loads the data

mymcidata &lt;- ijmatrix.create (grocery1, "plz_submarket", "store_code")
# Creates an interaction matrix with market shares based on the frequencies 
# of visited grocery stores and saves results directly in a new dataset
mymcidata$freq_ij_corr &lt;- var.correct(mymcidata$freq_ij_abs, 1)
# Corrects the frequency variable (no zero or negative values allowed)
mymcidata_shares &lt;- ijmatrix.shares(mymcidata, "plz_submarket", "store_code", "freq_ij_corr")
# Calculates market shares based on the corrected frequencies
# and saves the results as a new dataset
</code></pre>


</div>