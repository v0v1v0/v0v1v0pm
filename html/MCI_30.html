<div class="container">

<table style="width: 100%;"><tr>
<td>shopping2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Distance matrix for the point-of-sale survey in Karlsruhe
</h2>

<h3>Description</h3>

<p>The dataset contains a distance matrix (OD matrix: Origins-Destinations matrix) including the street distance and the travel time from the customer origins to the shopping destinations, both stored in the dataset <code>shopping1</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data("shopping2")</code></pre>


<h3>Format</h3>

<p>A data frame with 3723 observations on the following 5 variables.
</p>

<dl>
<dt><code>from</code></dt>
<dd>
<p>a factor containing the customer origin (place of residence) as internal code</p>
</dd>
<dt><code>to</code></dt>
<dd>
<p>a factor containing the shopping destination</p>
</dd>
<dt><code>d_km</code></dt>
<dd>
<p>a numeric vector containing the street distance from the origins to the destinations in km</p>
</dd>
<dt><code>d_time</code></dt>
<dd>
<p>a numeric vector containing the driving time from the origins to the destinations in km</p>
</dd>
<dt><code>route</code></dt>
<dd>
<p>a factor containing the interaction/route code between origins and destinations (from-to)</p>
</dd>
</dl>
<h3>Source</h3>

<p>Primary empirical sources:
POS (point of sale) survey in the authors' course (“Praktikum Empirische Sozialforschung: Stadtteilzentren als Einzelhandelsstandorte - Das Fallbeispiel Karlsruhe-Durlach”, Karlsruhe Institute of Technology, Institute for Geography and Geoecology, May 2016), own calculations
</p>
<p>The street distance and travel time was calculated using the package <span class="pkg">ggmap</span>.
</p>


<h3>See Also</h3>

<p><code>shopping1</code>, <code>shopping3</code>, <code>shopping4</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Market area segmentation based on the POS survey in shopping1 #

data(shopping1)
# The survey dataset
data(shopping2)
# Dataset with distances and travel times

shopping1_adj &lt;- shopping1[(shopping1$weekday != 3) &amp; (shopping1$holiday != 1) 
&amp; (shopping1$survey != "pretest"),]
# Removing every case from tuesday, holidays and the ones belonging to the pretest

ijmatrix_POS &lt;- ijmatrix.create(shopping1_adj, "resid_code", "POS", "POS_expen")
# Creates an interaction matrix based on the observed frequencies (automatically)
# and the POS expenditures (Variable "POS_expen" separately stated)

ijmatrix_POS_data &lt;- merge(ijmatrix_POS, shopping2, by.x="interaction", by.y="route", 
all.x = TRUE)
# Adding the distances and travel times

ijmatrix_POS_data_segm_visit &lt;- shares.segm(ijmatrix_POS_data, "resid_code", "POS",
"d_time", "freq_ij_abs", 0,10,20,30)
# Segmentation by travel time using the number of customers/visitors
# Parameters: interaction matrix (data frame), columns with origins and destinations,
# variable to divide in classes, absolute frequencies/expenditures, class segments

ijmatrix_POS_data_segm_exp &lt;- shares.segm(ijmatrix_POS_data, "resid_code", "POS",
"d_time", "freq_ij_abs_POS_expen", 0,10,20,30)
# Segmentation by travel time using the POS expenditures
</code></pre>


</div>