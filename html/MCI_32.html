<div class="container">

<table style="width: 100%;"><tr>
<td>shopping4</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Grocery store data for the point-of-sale survey in Karlsruhe
</h2>

<h3>Description</h3>

<p>This dataset contains information about the regarded grocery stores in the east of Karlsruhe, based on the POS survey stored in the dataset <code>shopping1</code> and the related information in <code>shopping2</code>..
</p>


<h3>Usage</h3>

<pre><code class="language-R">data("shopping4")</code></pre>


<h3>Format</h3>

<p>A data frame with 11 observations on the following 4 variables.
</p>

<dl>
<dt><code>location_code</code></dt>
<dd>
<p>a factor containing the grocery store codes</p>
</dd>
<dt><code>salesarea_qm</code></dt>
<dd>
<p>a numeric vector containing the sales area of the stores in sqm</p>
</dd>
<dt><code>storetype_dc</code></dt>
<dd>
<p>a numeric vector containing a dummy variable that indicates if the store is a discounter or not</p>
</dd>
<dt><code>store_chain</code></dt>
<dd>
<p>a factor containing the store chain</p>
</dd>
</dl>
<h3>Source</h3>

<p>Primary empirical sources:
POS (point of sale) survey in the authors' course (“Praktikum Empirische Sozialforschung: Stadtteilzentren als Einzelhandelsstandorte - Das Fallbeispiel Karlsruhe-Durlach”, Karlsruhe Institute of Technology, Institute for Geography and Geoecology, May 2016), own calculations
</p>
<p>Mapping of grocery stores in the east of Karlsruhe in June 2016 with additional research
</p>


<h3>See Also</h3>

<p><code>shopping1</code>, <code>shopping2</code>, <code>shopping3</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># MCI analysis for the grocery store market areas based on the POS survey in shopping1 #

data(shopping1)
# Loading the survey dataset
data(shopping2)
# Loading the distance/travel time dataset
data(shopping3)
# Loading the dataset containing information about the city districts
data(shopping4)
# Loading the grocery store data

shopping1_KAeast &lt;- shopping1[shopping1$resid_code %in% 
shopping3$resid_code[shopping3$KA_east == 1],]
# Extracting only inhabitants of the eastern districts of Karlsruhe

ijmatrix_gro_adj &lt;- ijmatrix.create(shopping1_KAeast, "resid_code",
"gro_purchase_code", "gro_purchase_expen", remSing = TRUE, remSing.val = 1,
remSingSupp.val = 2, correctVar = TRUE, correctVar.val = 0.1)
# Removing singular instances/outliers (remSing = TRUE) incorporating
# only suppliers which are at least obtained three times (remSingSupp.val = 2)
# Correcting the values (correctVar = TRUE)
# by adding 0.1 to the absolute values (correctVar.val = 0.1)

ijmatrix_gro_adj &lt;- ijmatrix_gro_adj[(ijmatrix_gro_adj$gro_purchase_code !=
"REFORMHAUSBOESER") &amp; (ijmatrix_gro_adj$gro_purchase_code != "WMARKT_DURLACH")
&amp; (ijmatrix_gro_adj$gro_purchase_code != "X_INCOMPLETE_STORE"),]
# Remove non-regarded observations

ijmatrix_gro_adj_dist &lt;- merge (ijmatrix_gro_adj, shopping2, by.x="interaction",
by.y="route")
# Include the distances and travel times (shopping2)
ijmatrix_gro_adj_dist_stores &lt;- merge (ijmatrix_gro_adj_dist, shopping4,
by.x = "gro_purchase_code", by.y = "location_code")
# Adding the store information (shopping4)

mci.transvar(ijmatrix_gro_adj_dist_stores, "resid_code", "gro_purchase_code", 
"p_ij_obs")
# Log-centering transformation of one variable (p_ij_obs)

ijmatrix_gro_transf &lt;- mci.transmat(ijmatrix_gro_adj_dist_stores, "resid_code",
"gro_purchase_code", "p_ij_obs", "d_time", "salesarea_qm")
# Log-centering transformation of the interaction matrix

mcimodel_gro_trips &lt;- mci.fit(ijmatrix_gro_adj_dist_stores, "resid_code",
"gro_purchase_code", "p_ij_obs", "d_time", "salesarea_qm")
# MCI model for the grocery store market areas
# shares: "p_ij_obs", explanatory variables: "d_time", "salesarea_qm"

summary(mcimodel_gro_trips)
# Use like lm
</code></pre>


</div>