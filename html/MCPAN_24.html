<div class="container">

<table style="width: 100%;"><tr>
<td>binomRRci</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Simultaneous confidence intervals for ratios of independent binomial proportions </h2>

<h3>Description</h3>

<p>Simultaneous asymptotic CI for contrasts of binomial proportions,
assuming that standard normal approximation holds on the log scale.
Confidence intervals for ratios of (weighted geometric means) of proportions are calculated
based on differences of log-proportions, and normal approximation on the log-scale.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
binomRRci(x,...)

## Default S3 method:
binomRRci(x, n, names=NULL,
 type="Dunnett", cmat=NULL,
 alternative="two.sided", conf.level=0.95,
 dist="MVN", ...)

## S3 method for class 'formula'
binomRRci(formula, data,
 type="Dunnett", cmat=NULL,
 alternative="two.sided", conf.level=0.95,
 dist="MVN",...)

## S3 method for class 'table'
binomRRci(x, type="Dunnett",
 cmat=NULL, alternative="two.sided",
 conf.level=0.95, dist="MVN",...)

## S3 method for class 'matrix'
binomRRci(x, type="Dunnett",
 cmat=NULL, alternative="two.sided",
 conf.level=0.95, dist="MVN",...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> a numeric vector, giving the number of successes in I independent samples,
or an object of class <kbd>"table"</kbd>, representing the 2xk-table,
or an object of class <kbd>"matrix"</kbd>, representing the 2xk-table
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p> a numeric vector, giving the number of trials (i.e. the sample size) in each of the I groups
(only required if <kbd>x</kbd> is a numeric vector, ignored otherwise) </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>an optional character string, giving the names of the groups/ sample in <kbd>x</kbd>, <kbd>n</kbd>;
if not specified the possible names of x are taken as group names (ignored if <kbd>x</kbd> is a table or matrix)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a two-sided formula of the style 'response ~ treatment', where 'response' should be a categorical variable with two levels,
while treatment should be a factor specifying the treatment levels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data.frame, containing the variables specified in formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p> a character string, giving the name of a contrast method,
as defined in <kbd>contrMat(multcomp)</kbd>; ignored if <kbd>cmat</kbd> is specified </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmat</code></td>
<td>
<p> a optional contrast matrix </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative</code></td>
<td>
<p> a single character string, one of "two.sided", "less", "greater" </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p> a single numeric value, simultaneous confidence level </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>a character string, <kbd>"MVN"</kbd> invokes multiplicity adjustment via the multivariate normal distribution,
<kbd>"N"</kbd> invokes use of quantiles of the univariate normal distribution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> arguments to be passed to binomest, currently only <kbd>success</kbd> labelling the event which should be considered as success</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The interval for the ratio of two independent proportions, described in section "Crude Methods using first-order variance estimation" in Gart and Nam (1988) are extended
to multiple contrasts. Confidence intervals are constructed based on contrasts for differences of lp=log (x+0.5)/(n+0.5), using quantiles of the multivariate normal or normal approximation.
Applying the exponential functions to the bounds results in intervals for the risk ratio.
In case that 0 occur in both, the numerator and denominator of the ratio, the interval is expanded to [0,Inf], in case that only 0s numerator go to the numerator, the lower bound is expanded to 0,
in case that only 0s go to the denominator, the upper bound is expanded to Inf.
</p>
<p>See the examples for different usages.
</p>


<h3>Value</h3>

<p>A object of class "binomRDci", a list containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>a matrix with 2 columns: lower and upper confidence bounds, and M rows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative </code></td>
<td>
<p>character string, as input</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>single numeric value, as input</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile</code></td>
<td>
<p>the quantile used to construct the confidence intervals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate</code></td>
<td>
<p>a matrix with 1 column: containing the estimates of the contrasts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the observed number of successes in the treatment groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>the number of trials in the treatment groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>the estimated proportions in the treatment groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>success</code></td>
<td>
<p>a character string labelling the event considered as success</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>the group names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string, specifying the method of interval construction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmat</code></td>
<td>
<p>the contrast matrix used</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p> Note, that all implemented methods are approximate only. The coverage probability of the 
intervals might seriously deviate from the nominal level for small sample sizes and extreme success probabilities.
</p>


<h3>References</h3>

 
<p>Gart, JJ and Nam,J-m (1988): Approximate interval estimation of the ratio of binomial parameters: a review and corrections for skewness. Biometrics 44, 323-338.
</p>


<h3>See Also</h3>

 <p>summary.binomRDci for the risk difference, summary.binomORci for the odds ratio, plot.sci for plotting</p>


<h3>Examples</h3>

<pre><code class="language-R">
# In simple cases, counts of successes
# and number of trials can be just typed:

ntrials &lt;- c(40,20,20,20)
xsuccesses &lt;- c(1,2,2,4)
names(xsuccesses) &lt;- LETTERS[1:4]
ex1D&lt;-binomRRci(x=xsuccesses, n=ntrials,
 type="Dunnett")
ex1D

ex1W&lt;-binomRRci(x=xsuccesses, n=ntrials,
 type="Williams", alternative="greater")
ex1W

# results can be plotted:
plot(ex1D, main="Comparisons to control group A")

# summary gives a more detailed print out:
summary(ex1W)

# if data are represented as dichotomous variable
# in a data.frame one can make use of table:


data(liarozole)

head(liarozole)

# here, it might be important to define which level of the
# variable 'Improved' is to be considered as success

binomRRci(Improved ~ Treatment, data=liarozole,
 type="Dunnett", success="y", base=4, alternative="greater")

# If data are available as a named kx2-contigency table:

tab&lt;-table(liarozole)
tab

binomRRci(tab, type="Dunnett", success="y", base=4, alternative="greater")


# Performance for extreme cases:


binomRRci(x=c(0,0,20,5),n=c(20,20,20,20),names=c("A","B","C","D"),
 type="Dunnett", alternative="greater")


</code></pre>


</div>