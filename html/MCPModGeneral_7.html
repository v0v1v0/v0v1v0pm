<div class="container">

<table style="width: 100%;"><tr>
<td>prepareGen</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare General Data for the MCPMod Function</h2>

<h3>Description</h3>

<p>This function serves as an alternative for using the MCPModGen function
directly for general data. The function returns the estimates for <code class="reqn">\mu</code> and
<code class="reqn">S</code>, which are needed for MCPMod.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepareGen(
  family = c("negative binomial", "binomial", "poisson"),
  link = c("log", "logit", "probit", "cauchit", "cloglog", "identity", "log risk ratio",
    "risk ratio", "sqrt"),
  w = NULL,
  dose,
  resp,
  data = NULL,
  addCovars = ~1,
  placAdj = FALSE,
  offset = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>A character string containing the error distribution to be used
in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>A character string for the model link function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>Either a numeric vector of the same length as dose and resp, or a
character vector denoting the column name in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dose, resp</code></td>
<td>
<p>Either vectors of equal length specifying dose and response
values, or character vectors specifying the names of variables in the data
frame specified in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame with names specified in 'dose', 'resp', and optionally
'w'. If data is not specified, it is assumed that 'dose' and 'resp' are
numerical vectors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addCovars</code></td>
<td>
<p>Formula specifying additive linear covariates (e.g. '~
factor(gender)').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>placAdj</code></td>
<td>
<p>Logical specifying whether the provided by 'resp' are to be
treated as placebo-adjusted estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>Either a numeric vector of the same length as dose and resp, or a
character vector denoting the column name in the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to <code>glm</code> or <code>glm.nb</code>.
This is especially useful when a fitting error is returned. In these cases,
it may be useful to supply a <code>start</code> vector for the parameters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the <code class="reqn">\mu</code> vector and <code class="reqn">S</code> matrix.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Analyze the binary migraine data from the DoseFinding package.
data(migraine)
models = Mods(linear = NULL, emax = 1, quadratic = c(-0.004), doses = migraine$dose)

# Now analyze using binomial weights
PFrate &lt;- migraine$painfree/migraine$ntrt
migraine$pfrat = migraine$painfree / migraine$ntrt
muS = prepareGen("binomial", "logit", w = "ntrt", dose = "dose",
                 resp = "pfrat", data = migraine)
## Look at the elements of muS
muS
MCPMod(muS$data$dose, muS$data$resp, models = models, S = muS$S,
       type = "general", selModel = "aveAIC",Delta = 0.2)
</code></pre>


</div>