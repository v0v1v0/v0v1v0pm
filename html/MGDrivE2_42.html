<div class="container">

<table style="width: 100%;"><tr>
<td>split_aggregate_CSV_decoupled</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split CSV output for decoupled sampling with Imperial malaria model</h2>

<h3>Description</h3>

<p>This function reads in the output files from <code>sim_trajectory_CSV</code>
and splits them into smaller files. The files are output by patch, with the
appropriate patch numbers for mosquitoes or humans, and specific stages are
aggregated by a given metric. <br></p>


<h3>Usage</h3>

<pre><code class="language-R">split_aggregate_CSV_decoupled(
  read_dir,
  write_dir = read_dir,
  spn_P,
  tmax,
  dt,
  human_states,
  sum_fem = FALSE,
  rem_file = FALSE,
  verbose = TRUE,
  erlang = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>read_dir</code></td>
<td>
<p>Directory where output was written to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_dir</code></td>
<td>
<p>Directory to write output to. Default is read_dir</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spn_P</code></td>
<td>
<p>Places object, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmax</code></td>
<td>
<p>The final time to end simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>The time-step at which to return output (<strong>not</strong> the time-step of the sampling algorithm)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>human_states</code></td>
<td>
<p>human state distribution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sum_fem</code></td>
<td>
<p>if <code>TRUE</code>, in addition to FS, FE, FI output by node and repetition, output an
additional file F which sums over infection states (S,E,I). Does nothing if the
simulation did not include epi dynamics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rem_file</code></td>
<td>
<p>Remove original output? Default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Chatty? Default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>erlang</code></td>
<td>
<p>erlang distributed states</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given the <code>read_dir</code>, this function assumes the follow file structure: <br></p>

<ul><li>
<p> read_dir
</p>

<ul>
<li>
<p> repetition 1
</p>

<ul>
<li>
<p> M.csv
</p>
</li>
<li>
<p> FS.csv
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li>
<li>
<p> repetition 2
</p>

<ul>
<li>
<p> M.csv
</p>
</li>
<li>
<p> FS.csv
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li>
<li>
<p> repetition 3
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li></ul>
<p>This function expects the <code>write_dir</code> to be empty, and it sets up the
same file structure as the <code>read_dir</code>. For a 2-node simulation, the output
will be organized similar to: <br></p>

<ul><li>
<p> write_dir
</p>

<ul>
<li>
<p> repetition 1
</p>

<ul>
<li>
<p> M_0001.csv
</p>
</li>
<li>
<p> M_0002.csv
</p>
</li>
<li>
<p> FS_0001.csv
</p>
</li>
<li>
<p> FS_0001.csv
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li>
<li>
<p> repetition 2
</p>

<ul>
<li>
<p> M_0001.csv
</p>
</li>
<li>
<p> M_0002.csv
</p>
</li>
<li>
<p> FS_0001.csv
</p>
</li>
<li>
<p> FS_0001.csv
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li>
<li>
<p> repetition 3
</p>
</li>
<li>
<p> ... <br></p>
</li>
</ul>
</li></ul>
<p>The places (<code>spn_P</code>) object is generated from one of the following:
<code>spn_P_lifecycle_node</code>, <code>spn_P_lifecycle_network</code>,
<code>spn_P_epiSIS_node</code>, <code>spn_P_epiSIS_network</code>,
<code>spn_P_epiSEIR_node</code>, or <code>spn_P_epiSEIR_network</code>.
</p>
<p><code>tmax</code>, <code>dt</code> define the last sampling
time, and each sampling time in-between.
</p>
<p>For more details about using this function to process CSV output see:
<code>vignette("data-analysis", package = "MGDrivE2")</code>
</p>


<h3>Value</h3>

<p>Writes output to files in write_dir
</p>


</div>