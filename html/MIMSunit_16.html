<div class="container">

<table style="width: 100%;"><tr>
<td>iir</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply IIR filter to the signal</h2>

<h3>Description</h3>

<p><code>iir</code> function takes a multi-channel signal and applies an IIR filter to
the signal.
</p>


<h3>Usage</h3>

<pre><code class="language-R">iir(df, sr, cutoff_freq, order = 4, type = "high", filter_type = "butter")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>dataframe. The input multi-channel signal. The first column is
timestamps in POSXlct format. The rest columns are signal values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr</code></td>
<td>
<p>number. Sampling rate in Hz of the input signal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff_freq</code></td>
<td>
<p>number or numerical vector. The cutoff frequencies in Hz.
If the IIR filter is a bandpass or bandstop filter, it will be a 2-element
numerical vector specifying the low and high end cutoff frequencies
<code>c(low, high)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>number. The order of the filter. Default is 4.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>string. Filtering type, one of "low" for a low-pass filter,
"high" for a high-pass filter, "stop" for a stop-band (band-reject) filter,
or "pass" for a pass-band filter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_type</code></td>
<td>
<p>string. IIR filter type, one of "butter" for butterworth
filter, "chebyI" for Chebyshev Type I filter, or "ellip" for Elliptic filter.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function filters the input multi-channel signal by applying an IIR
filter. See
<a href="https://en.wikipedia.org/wiki/Infinite_impulse_response">wiki</a> for the
explanation of the filter. The implementations of IIR filters can be found in
<code>butter</code>, <code>cheby1</code>, and <code>ellip</code>.
</p>
<p>For Chebyshev Type I, Type II and Elliptic filter, the passband ripple is
fixed to be 0.05 dB. For Elliptic filter, the stopband ripple is fixed to be
-50dB.
</p>


<h3>Value</h3>

<p>dataframe. Filtered signal.
</p>


<h3>How is it used in MIMS-unit algorithm?</h3>

<p>This function has been used
as the main filtering method in MIMS-unit algorithm. Specifically, it uses
a 0.5 - 5 Hz bandpass butterworth filter during filtering.
</p>


<h3>See Also</h3>

<p>Other filtering functions: 
<code>bandlimited_interp()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  # Use sample data
  df = sample_raw_accel_data

  # View input
  illustrate_signal(df, plot_maxed_out_line = FALSE)

  # Apply filtering that uses the same setting as in MIMSunit algorithm
  output = iir(df, sr=80, cutoff_freq=c(0.2, 5), type='pass')

  # View output
  illustrate_signal(output, plot_maxed_out_line = FALSE)
</code></pre>


</div>