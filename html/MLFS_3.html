<div class="container">

<table style="width: 100%;"><tr>
<td>BAI_prediction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BAI_prediction</h2>

<h3>Description</h3>

<p>The Basal Area Increment BAI sub model that is run within the MLFS
</p>


<h3>Usage</h3>

<pre><code class="language-R">BAI_prediction(
  df_fit,
  df_predict,
  species_n_threshold = 100,
  site_vars,
  include_climate,
  eval_model_BAI = TRUE,
  rf_mtry = NULL,
  k = 10,
  blocked_cv = TRUE,
  measurement_thresholds = NULL,
  area_correction = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_fit</code></td>
<td>
<p>a data frame with Basal Area Increments (BAI) and all
independent variables as specified with the formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_predict</code></td>
<td>
<p>data frame which will be used for BAI predictions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species_n_threshold</code></td>
<td>
<p>a positive integer defining the minimum number of
observations required to treat a species as an independent group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site_vars</code></td>
<td>
<p>a character vector of variable names which are used as site
descriptors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_climate</code></td>
<td>
<p>logical, should climate variables be included as
predictors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval_model_BAI</code></td>
<td>
<p>logical, should the the BAI model be evaluated and
returned as the output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rf_mtry</code></td>
<td>
<p>a number of variables randomly sampled as candidates at
each split of a random forest model for predicting basal area increments
(BAI). If NULL, default settings are applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the number of folds to be used in the k fold cross-validation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocked_cv</code></td>
<td>
<p>logical, should the blocked cross-validation be used in the
evaluation phase?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measurement_thresholds</code></td>
<td>
<p>data frame with two variables: 1) DBH_threshold
and 2) weight. This information is used to assign the correct weights in BAI
and increment sub-model; and to upscale plot-level data to hectares.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>area_correction</code></td>
<td>
<p>an optional data frame with three variables: 1) plotID
and 2) DBH_threshold and 3) the correction factor to be multiplied by weight
for this particular category</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list with four elements:
</p>

<ol>
<li>
<p> $predicted_BAI - a data frame with calculated basal area increments (BAI)
</p>
</li>
<li>
<p> $eval_BAI - a data frame with predicted and observed basal area increments (BAI), or a character string indicating that BAI model was not evaluated
</p>
</li>
<li>
<p> $rf_model_species - the output model for BAI (species level)
</p>
</li>
<li>
<p> $rf_model_speciesGroups - the output model for BAI (species group level)
</p>
</li>
</ol>
<p># add BA to measurement thresholds
measurement_thresholds$BA_threshold &lt;- ((measurement_thresholds$DBH_threshold/2)^2 * pi)/10000
</p>
<p>BAI_outputs &lt;- BAI_prediction(df_fit = data_BAI,
df_predict = data_v6,
site_vars = c("slope", "elevation", "northness", "siteIndex"),
rf_mtry = 3,
species_n_threshold = 100,
include_climate = TRUE,
eval_model_BAI = FALSE,
k = 10, blocked_cv = TRUE,
measurement_thresholds = measurement_thresholds)
</p>
<p># get the ranger objects
BAI_outputs_model_species &lt;- BAI_outputs$rf_model_species
BAI_outputs_model_groups &lt;- BAI_outputs$rf_model_speciesGroups
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MLFS)
data(data_BAI)
data(data_v6)
data(measurement_thresholds)

</code></pre>


</div>