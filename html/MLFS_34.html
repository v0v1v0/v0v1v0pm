<div class="container">

<table style="width: 100%;"><tr>
<td>predict_ingrowth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>predict_ingrowth</h2>

<h3>Description</h3>

<p>ingrowth model for predicting new trees within the MLFS
</p>


<h3>Usage</h3>

<pre><code class="language-R">predict_ingrowth(
  df_fit,
  df_predict,
  site_vars = site_vars,
  include_climate = include_climate,
  eval_model_ingrowth = TRUE,
  k = 10,
  blocked_cv = TRUE,
  ingrowth_model = "glm",
  rf_mtry = NULL,
  ingrowth_table = NULL,
  DBH_distribution_parameters = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_fit</code></td>
<td>
<p>a plot-level data with plotID, stand variables and site
descriptors, and the two target variables describing the number of ingrowth
trees for inner (ingrowth_3) and outer (ingrowth_15) circles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_predict</code></td>
<td>
<p>data frame which will be used for ingrowth predictions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site_vars</code></td>
<td>
<p>a character vector of variable names which are used as site
descriptors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_climate</code></td>
<td>
<p>logical, should climate variables be included as
predictors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval_model_ingrowth</code></td>
<td>
<p>logical, should the the ingrowth model be
evaluated and returned as the output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the number of folds to be used in the k fold cross-validation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocked_cv</code></td>
<td>
<p>logical, should the blocked cross-validation be used in the
evaluation phase?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ingrowth_model</code></td>
<td>
<p>model to be used for ingrowth predictions. 'glm' for
generalized linear models (Poisson regression), 'ZIF_poiss' for zero inflated
Poisson regression and 'rf' for random forest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rf_mtry</code></td>
<td>
<p>a number of variables randomly sampled as candidates at
each split of a random forest model for predicting ingrowth. If NULL, default
settings are applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ingrowth_table</code></td>
<td>
<p>a data frame with 4 variables: (ingrowth) code,
DBH_threshold, DBH_max and weight. Ingrowth table is used within the ingrowth
sub model to correctly simulate different ingrowth levels and associated
upscale weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DBH_distribution_parameters</code></td>
<td>
<p>A list with deciles of DBH distributions
that are used to simulate DBH for new trees, separately for each ingrowth
category</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list with four elements:
</p>

<ol>
<li>
<p> $predicted_ingrowth - a data frame with newly added trees based on the ingrowth predictions
</p>
</li>
<li>
<p> $eval_ingrowth - a data frame with predicted and observed number of new trees, separately for each ingrowth level, or character string indicating that ingrowth model was not evaluated
</p>
</li>
<li>
<p> $mod_ing_3 - the output model for predicting the ingrowth of trees with code 3
</p>
</li>
<li>
<p> $mod_ing_15 - the output model for predicting the ingrowth of trees with code 15 (the output name depends on the code used for this particular ingrowth level)
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">
library(MLFS)

data(data_v6)
data(data_ingrowth)
data(ingrowth_table)
data(ingrowth_parameter_list)

ingrowth_outputs &lt;- predict_ingrowth(
   df_fit = data_ingrowth,
   df_predict = data_v6,
   site_vars = c("slope", "elevation", "northness", "siteIndex"),
   include_climate = TRUE,
   eval_model_ingrowth = FALSE,
   rf_mtry = 3,
   k = 10, blocked_cv = TRUE,
   ingrowth_model = 'rf',
   ingrowth_table = ingrowth_table,
   DBH_distribution_parameters = ingrowth_parameter_list)

</code></pre>


</div>