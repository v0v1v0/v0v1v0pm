<div class="container">

<table style="width: 100%;"><tr>
<td>getSampleTileMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2><code>getSampleTileMatrix</code></h2>

<h3>Description</h3>

<p><code>getSampleTileMatrix</code> takes the output of peak calling with
callOpenTiles and creates sample-tile matrices containing the signal
intensity at each tile.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getSampleTileMatrix(
  tileResults,
  cellPopulations = "ALL",
  groupColumn = NULL,
  threshold = 0.2,
  numCores = 1,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tileResults</code></td>
<td>
<p>a MultiAssayExperiment returned by callOpenTiles
containing containing peak calling results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cellPopulations</code></td>
<td>
<p>vector of strings. Cell subsets in TileResults for
which to generate sample-tile matrices. This list of group names must be
identical to names that appear in the ArchRProject metadata.  If
cellPopulations='ALL', then peak calling is done on all cell populations in
the ArchR project metadata. Default is 'ALL'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupColumn</code></td>
<td>
<p>Optional, the column containing sample group labels for
determining consensus tiles within sample groups. Default is NULL, all
samples will be used for determining consensus tiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Threshold for consensus tiles, the minimum % of samples
(within a sample group, if groupColumn is set) that a peak must be called
in to be retained. If set to 0, retain the union of all samples' peaks
(this is equivalent to a threshold of 1/numSamples). It is recommended to
tune this parameter to omit potentially spurious peaks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCores</code></td>
<td>
<p>Optional, the number of cores to use with multiprocessing.
Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Set TRUE to display additional messages. Default is FALSE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>SampleTileMatrices a MultiAssayExperiment containing a sample-tile
intensity matrix for each cell population
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Starting from GRangesList
if (
  require(BSgenome.Hsapiens.UCSC.hg19) &amp;&amp;
    require(TxDb.Hsapiens.UCSC.hg38.refGene) &amp;&amp;
    require(org.Hs.eg.db)
) {
  tiles &lt;- MOCHA::callOpenTiles(
    ATACFragments = MOCHA::exampleFragments,
    cellColData = MOCHA::exampleCellColData,
    blackList = MOCHA::exampleBlackList,
    genome = "BSgenome.Hsapiens.UCSC.hg19",
    TxDb = "TxDb.Hsapiens.UCSC.hg38.refGene",
    Org = "org.Hs.eg.db",
    outDir = tempdir(),
    cellPopLabel = "Clusters",
    cellPopulations = c("C2", "C5"),
    numCores = 1
  )

  SampleTileMatrices &lt;- MOCHA::getSampleTileMatrix(
    tiles,
    cellPopulations = c("C2", "C5"),
    threshold = 0 # Take union of all samples' open tiles
  )
}


</code></pre>


</div>