<div class="container">

<table style="width: 100%;"><tr>
<td>prep_MRF_covariates_spatial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-multiply response and covariate variables and build spatial splines</h2>

<h3>Description</h3>

<p>This function performs the cross-multiplication necessary
for prepping datasets to be used in <code>MRFcov_spatial</code> models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prep_MRF_covariates_spatial(data, n_nodes, coords)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Dataframe. The input data where the <code>n_nodes</code>
left-most variables are outcome variables to be represented by nodes in the graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_nodes</code></td>
<td>
<p>Integer. The index of the last column in data
which is represented by a node in the final graph. Columns with index
greater than n_nodes are taken as covariates. Default is the number of
columns in data, corresponding to no additional covariates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>A two-column <code>dataframe</code> (with <code>nrow(coords) == nrow(data)</code>)
representing the spatial coordinates of each observation in <code>data</code>. Ideally, these
coordinates will represent Latitude and Longitude GPS points for each observation. The coordinates
are used to create smoothed Gaussian Process spatial regression splines via
<code>smooth.construct2</code>.
Here, the basis dimension of the smoothed term
is chosen based on the number of unique GPS coordinates in <code>coords</code>.
If this number is less than <code>100</code>, then this number is used. If the number of
unique coordiantes is more than <code>100</code>, a value of <code>100</code> is used
(this parameter needs to be large in order to ensure enough degrees of freedom
for estimating 'wiggliness' of the smooth term; see
<code>choose.k</code> for details).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Observations of nodes (species) in <code>data</code> are prepped for
<code>MRFcov_spatial</code> analysis by multiplication. This function is useful if
users wish to prep the spatial splines beforehand and split the
data manually for out-of-sample cross-validation. To do so,
prep the splines here and set <code>prep_splines = FALSE</code> in <code>MRFcov_spatial</code>
</p>


<h3>Value</h3>

<p>Dataframe of the prepped response and covariate variables necessary for
input in <code>MRFcov_spatial</code> models
</p>


</div>