<div class="container">

<table style="width: 100%;"><tr>
<td>ggplot.mscmt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting Results of mscmt with ggplot2</h2>

<h3>Description</h3>

<p><code>ggplot.mscmt</code> plots results of <code>mscmt</code> based on 
<code>ggplot</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'mscmt'
ggplot(
  data,
  mapping = aes(),
  what,
  type = c("gaps", "comparison", "placebo.gaps", "placebo.data", "p.value"),
  treatment.time,
  zero.line = TRUE,
  ylab,
  xlab = "Date",
  main,
  col,
  lty,
  lwd,
  legend = TRUE,
  bw = FALSE,
  date.format,
  unit.name,
  full.legend = TRUE,
  include.smooth = FALSE,
  include.mean = FALSE,
  include.synth = FALSE,
  draw.estwindow = TRUE,
  what.set,
  limits = NULL,
  alpha = 1,
  alpha.min = 0.1,
  exclude.units = NULL,
  exclude.ratio = Inf,
  ratio.type = c("rmspe", "mspe"),
  alternative = c("two.sided", "less", "greater"),
  draw.points = TRUE,
  control.name = "control units",
  size = 1,
  treated.name = "treated unit",
  labels = c("actual data", "synthsized data"),
  ...,
  environment = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An object of class <code>"mscmt"</code>, usually obtained as
the result of a call to function <code>mscmt</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>
<p>An object necessary to match the definition of the
<code>ggplot</code> generic (passed to <code>ggplot</code> as is). Defaults to 
<code>aes()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>
<p>A character vector. Name(s) of the variables to be plotted. If 
missing, the (first) dependent variable will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A character scalar denoting the type of the plot containing 
either <code>"gaps"</code>, <code>"comparison"</code>, <code>"placebo.gaps"</code>, 
<code>"placebo.data"</code>, or <code>"p.value"</code>. 
Partial matching allowed, defaults to <code>"placebo.gaps"</code>, if results
of a placebo study are present, and to <code>"gaps"</code>, else.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment.time</code></td>
<td>
<p>An optional scalar (numeric, character, or 
<code>Date</code>) giving the treatment time. 
If <code>treatment.time</code> is numeric, Jan 01 of that year will be used. If 
<code>treatment.time</code> is a character string, it will be converted to a 
<code>Date</code> and must thus be in an unambiguous format.
A vertical dotted line at the given point in time is included in the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero.line</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a horizontal
dotted line (at zero level) is plotted for <code>"gaps"</code> and 
<code>"placebo.gaps"</code> plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Optional label for the y-axis, automatically generated if 
missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Optional label for the x-axis, defaults to <code>"Date"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Optional main title for the plot, automatically generated 
if missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Optional character vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>col</code> contains the
colours for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the colours for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>Optional numerical vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>lty</code> contains the
linetypes for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the linetypes for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>Optional numerical vector with length 1 (for gaps plots) or
2 (for all other plot types). For comparison plots, <code>lty</code> contains the
linewidths for the actual and synthesized data, for placebo.plots (with 
<code>full.legend==FALSE</code>), <code>col</code> contains the linewidths for 
the treated unit and the control units. Automatically generated 
if missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a legend is 
included in the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bw</code></td>
<td>
<p>A logical scalar. If <code>FALSE</code> (default), the automatically 
generated colours and line types are optimized for a colour plot, 
if <code>TRUE</code>, the automatic colours and line types are set for a black and
white plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date.format</code></td>
<td>
<p>A character string giving the format for the tick labels
of the x axis as documented in <code>strptime</code>. Defaults to
<code>"%b %y"</code> or <code>"%Y"</code>, depending on the granularity of the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit.name</code></td>
<td>
<p>A character string with the title of the legend 
for comparison and placebo plots. Defaults to "Estimation" for comparison 
and "Unit" for placebo plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full.legend</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), a full legend
of all units (donors) is constructed. If <code>FALSE</code>, only the treated and
the control units are distinguished.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.smooth</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, a geometric smoother
based on the control units is added to placebo plots. Default: <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.mean</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, the arithmetic mean
of all control units is added to placebo plots. Default: <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.synth</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code>, the synthesized data
for the treated unit are added to plots of type <code>"placebo.data"</code>.
Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw.estwindow</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), the time
range containing all optimization periods is shaded in the corresponding
plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what.set</code></td>
<td>
<p>An optional character string for a convenient selection of 
multiple variables. Accepted values are <code>"dependents"</code>, 
<code>"predictors"</code>, and <code>"all"</code>, which collects all dependent, all
predictor, or all variables of both types, respectively. Overrides parameter
<code>what</code> (if the latter is present).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limits</code></td>
<td>
<p>An optional vector of length 2 giving the range of the plot or
<code>NULL</code>.
If <code>limits</code> is numeric, Jan 01 of the corresponding years will be used.
If <code>limits</code> is of type character, both strings will be converted to 
Dates (via <code>as.Date</code>) and must thus be in an unambiguous 
format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Either a numerical scalar, a numerical vector of length 
corresponding to the number of units, or the character string <code>"auto"</code>.
If <code>alpha</code> is a numerical scalar (default with value <code>1</code>), a fixed
value for the alpha channel (transparency) is included for all units in 
placebo plots. If <code>alpha</code> is numeric and has length corresponding to the
number of units, these values are assigned as alpha channel to the individual 
units. If <code>"auto"</code>, the alpha channel information is obtained from the
w weights of the control units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.min</code></td>
<td>
<p>A numerical scalar (default: <code>0.1</code>). If <code>alpha</code> is
set to <code>"auto"</code>, the individual alpha channel information for control 
unit <code>i</code> is set to <code>alpha.min + (1-alpha.min) * w[i]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude.units</code></td>
<td>
<p>An optional (default: <code>NULL</code>) character vector with 
names for control units which shall be excluded from placebo plots and
p-value calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude.ratio</code></td>
<td>
<p>A numeric scalar (default: <code>Inf</code>). Control units 
with a pre-treatment (r)mspe of more than <code>exclude.ratio</code> times
the pre-treatment (r)mspe of the treated unit are excluded from placebo 
plots and p-value calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio.type</code></td>
<td>
<p>A character string. Either <code>rmspe</code> (default) or 
<code>mspe</code>. Selects whether root mean squared errors or mean squared errors 
are considered for the exclusion of control units (see <code>exclude.ratio</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative</code></td>
<td>
<p>A character string giving the alternative of the test for 
plots of type <code>"p.value"</code>. Either <code>"two.sided"</code> (default), 
<code>"less"</code>, or <code>"greater"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw.points</code></td>
<td>
<p>A logical scalar. If <code>TRUE</code> (default), points are
added to the line plots to enhance visibility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control.name</code></td>
<td>
<p>A character string for the naming of the non-treated
units in placebo plots. Defaults to <code>"control units"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>A numerical scalar (default: <code>1</code>). If <code>draw.points</code> is
<code>TRUE</code> (default), <code>size</code> specifies the size of the points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treated.name</code></td>
<td>
<p>A character string giving the label for the treated
unit. Defaults to <code>"treated unit"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>A character vector of length 2 giving the labels for the actual 
and synthesized data. Defaults to <code>c("actual data","synthsized data")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Necessary to match the definition of the
<code>"ggplot"</code> generic (passed to <code>ggplot</code> as is).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>environment</code></td>
<td>
<p>An object necessary to match the definition of the
<code>"ggplot"</code> generic (passed to <code>ggplot</code> as is). Defaults to 
<code>parent.frame()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A unified plot method for gaps plots, comparison of treated and synthetic
values, as well as plots for placebo studies, based on 
<code>ggplot</code>. <code>ggplot.mscmt</code> is the preferred
plot method and has more functionality than <code>plot.mscmt</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>ggplot</code>.
</p>


</div>