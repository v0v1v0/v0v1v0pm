<div class="container">

<table style="width: 100%;"><tr>
<td>CalcMPDynamics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate population dynamics from MP recommendation</h2>

<h3>Description</h3>

<p>An internal function to calculate the population dynamics for the next time
step based on the recent MP recommendation
</p>


<h3>Usage</h3>

<pre><code class="language-R">CalcMPDynamics(
  MPRecs,
  y,
  nyears,
  proyears,
  nsim,
  Biomass_P,
  VBiomass_P,
  LastTAE,
  histTAE,
  LastSpatial,
  LastAllocat,
  LastTAC,
  TACused,
  maxF,
  LR5_P,
  LFR_P,
  Rmaxlen_P,
  retL_P,
  retA_P,
  retA_P_real,
  retA_P_real_2,
  L5_P,
  LFS_P,
  Vmaxlen_P,
  SLarray_P,
  V_P,
  V_P_real,
  V_P_real_2,
  Fdisc_P,
  DR_P,
  FM_P,
  FM_Pret,
  Z_P,
  CB_P,
  CB_Pret,
  Effort_pot,
  StockPars,
  FleetPars,
  ImpPars,
  checks = FALSE,
  control = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>MPRecs</code></td>
<td>
<p>A named list of MP recommendations. The names are the same as <code>slotNames('Rec')</code>, except
for <code>Misc</code>. Each element in the list is a matrix. With the exception of <code>Spatial</code>, all elements in list
have <code>nrow=1</code> and <code>ncol=nsim</code>. <code>Spatial</code> has <code>nrow=nareas</code>. Matrices can be empty matrix, populated with all NAs
(both mean no change in management with respect to this element (e.g. <code>Effort</code>)), or populated with a recommendation.
MPs must either return a recommendation or no recommendation for every simulation for a particular slot (i.e. cannot have some NA and some values).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The projection year</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nyears</code></td>
<td>
<p>The number of historical years</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proyears</code></td>
<td>
<p>The number of projection years</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsim</code></td>
<td>
<p>The number of simulations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Biomass_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with total biomass in the projection years</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VBiomass_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with vulnerable biomass in the projection years</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LastTAE</code></td>
<td>
<p>A vector of length <code>nsim</code> with the most recent TAE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LastSpatial</code></td>
<td>
<p>A matrix of <code>nrow=nareas</code> and <code>ncol=nsim</code> with the most recent spatial management arrangements</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LastAllocat</code></td>
<td>
<p>A vector of length <code>nsim</code> with the most recent allocation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LastTAC</code></td>
<td>
<p>A vector of length <code>nsim</code> with the most recent TAC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TACused</code></td>
<td>
<p>A vector of length <code>nsim</code> with the most recent TAC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxF</code></td>
<td>
<p>A numeric value with maximum allowed F. From <code>OM@maxF</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LR5_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the first length at 5 percent retention.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LFR_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the first length at full retention.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rmaxlen_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the retention at maximum length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retL_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>nCALbins</code> and <code>nyears+proyears</code> with retention at length</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retA_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code> with retention at age</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retA_P_real</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code> with realized  retention at age. May not asymptote at one</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retA_P_real_2</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code> <code>retA_P_real</code> standardized to max 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L5_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the first length at 5 percent selectivity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LFS_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the first length at full selectivity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Vmaxlen_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the selectivity at maximum length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SLarray_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>nCALbins</code> and <code>nyears+proyears</code> with selectivity at length</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code> with selectivity at age</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V_P_real</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code> with realized selectivity at age. May not asymptote at one</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V_P_real_2</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code> and <code>nyears+proyears</code>. <code>V_P_real</code> standardized to max 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fdisc_P</code></td>
<td>
<p>vector of length <code>nsim</code> with discard mortality. From <code>OM@Fdisc</code> but can be updated by MP (<code>Rec@Fdisc</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DR_P</code></td>
<td>
<p>A matrix with <code>nyears+proyears</code> rows and <code>nsim</code> columns with the fraction discarded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FM_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with total fishing mortality</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FM_Pret</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with fishing mortality of the retained fish</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with total mortality</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CB_P</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with total catch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CB_Pret</code></td>
<td>
<p>An array with dimensions <code>nsim</code>, <code>maxage</code>, <code>proyears</code>, and <code>nareas</code> with retained catch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Effort_pot</code></td>
<td>
<p>A numeric vector of potential effort</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>StockPars</code></td>
<td>
<p>A list of stock parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FleetPars</code></td>
<td>
<p>A list of fleet parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ImpPars</code></td>
<td>
<p>A list of implementation error parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checks</code></td>
<td>
<p>Logical. Run internal checks? Currently not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>List of control parameters used internally.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A named list with updated population dynamics
</p>


<h3>Author(s)</h3>

<p>A. Hordyk
</p>


</div>