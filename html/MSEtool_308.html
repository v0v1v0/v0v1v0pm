<div class="container">

<table style="width: 100%;"><tr>
<td>simmov</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates movement matrices from user inputs</h2>

<h3>Description</h3>

<p>A wrapper function for makemov used to generate movement matrices for the operating model.
Calculates a movement matrix from user-specified unfished stock biomass fraction in each area and probability of
staying in the area in each time step.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simmov(
  OM,
  dist = c(0.1, 0.2, 0.3, 0.4),
  prob = 0.5,
  distE = 0.1,
  probE = 0.1,
  prob2 = NA,
  figure = TRUE
)

plot_mov(mov, age = 1, type = c("matrix", "all"), year = 1, qval = 0.9)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>OM</code></td>
<td>
<p>Operating model, an object of class OM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>A vector of fractions of unfished stock in each area. The length of this vector will determine the
number of areas (<code>nareas</code>) in the OM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>Mean probability of staying across all areas (single value) or a vector of the probability of
individuals staying in each area (same length as dist).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distE</code></td>
<td>
<p>Logit (normal) St.Dev error for sampling stock fractions from the fracs vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probE</code></td>
<td>
<p>Logit (normal) St.Dev error for sampling desired probability of staying either by area
(prob is same length as dist) or the mean probability of staying (prob is a single number).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob2</code></td>
<td>
<p>Optional vector as long as prob and dist. Upper bounds on uniform sampling of
probability of staying, lower bound is prob.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>figure</code></td>
<td>
<p>Logical to indicate if the movement matrix will be plotted (mean values and range
across <code>OM@nsim</code> simulations.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mov</code></td>
<td>
<p>A four-dimensional array of dimension <code>c(nsim, maxage, nareas, nareas)</code> or a five-dimensional
array of dimension <code>c(nsim, maxage, nareas, nareas, nyears + proyears)</code> specifying movement
in the operating model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>An age from 0 to maxage for the movement-at-age matrix figure when <code>type = "matrix"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Whether to plot a movement matrix for a single age (<code>"matrix"</code>) or the
full movement versus age figure (<code>"all"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>If <code>mov</code> is a 5-dimensional array, the year (from 1 to nyears + proyears) for which
to plot movement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qval</code></td>
<td>
<p>The quantile to plot or report the range of values among simulations.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The operating model <code>OM</code> with movement parameters in slot <code>cpars</code>.
The <code>mov</code> array is of dimension <code>nsim</code>, <code>maxage</code>, <code>nareas</code>, <code>nareas</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>simmov()</code>: Estimation function for creating movement matrix.
</p>
</li>
<li> <p><code>plot_mov()</code>: Plotting function.
</p>
</li>
</ul>
<h3>Note</h3>

<p>Array <code>mov</code> is age-specific, but currently the movement generated by <code>simmov</code> is
independent of age.
</p>


<h3>Author(s)</h3>

<p>T. Carruthers and Q. Huynh
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
movOM_5areas &lt;- simmov(testOM, dist = c(0.01,0.1,0.2,0.3,0.39), prob = c(0.1,0.6,0.6,0.7,0.9))
movOM_5areas@cpars$mov[1, 1, , ] # sim 1, age 1, movement from areas in column i to areas in row j
plot_mov(movOM_5areas@cpars$mov)
plot_mov(movOM_5areas@cpars$mov, type = "all")


## End(Not run)
</code></pre>


</div>