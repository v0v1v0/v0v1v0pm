<div class="container">

<table style="width: 100%;"><tr>
<td>CreateSpec</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Model specification.</h2>

<h3>Description</h3>

<p>Creates a model specification before fitting and
using the <span class="pkg">MSGARCH</span> functionalities.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CreateSpec(
  variance.spec = list(model = c("sGARCH", "sGARCH")),
  distribution.spec = list(distribution = c("norm", "norm")),
  switch.spec = list(do.mix = FALSE, K = NULL),
  constraint.spec = list(fixed = list(), regime.const = NULL),
  prior = list(mean = list(), sd = list())
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>variance.spec</code></td>
<td>
<p><code>list</code> with element <code>model</code>.
<code>model</code> is a <code>character</code> vector (of size K, number of regimes)
with the variance model specifications. Valid models  are  <code>"sARCH"</code>, <code>"sGARCH"</code>,
<code>"eGARCH"</code>, <code>"gjrGARCH"</code>, and <code>"tGARCH"</code> (see *Details*).
Default: <code>model = c("sGARCH", "sGARCH")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution.spec</code></td>
<td>
<p><code>list</code> with element <code>distribution</code>.
<code>distribution</code> is a <code>character</code> vector (of size K)
of conditional distributions. Valid distributions are <code>"norm"</code>, <code>"snorm"</code>,
<code>"std"</code>, <code>"sstd"</code>, <code>"ged"</code>, and <code>"sged"</code>  (see *Details*).
The vector must be of the same length as the models' vector in <code>variance.spec</code>.<br>
Default: <code>distribution = c("norm", "norm")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>switch.spec</code></td>
<td>
<p><code>list</code> with element <code>do.mix</code> and <code>K</code>.<br><code>do.mix</code> is a <code>logical</code> indicating if the specification is a mixture type.
If <code>do.mix = TRUE</code>, a Mixture of GARCH is created, while if <code>do.mix = FALSE</code>,
a Markov-Switching GARCH is created (see *Details*). Default: <code>do.mix = FALSE</code>.<br><code>K</code> is a optional <code>numeric</code> scalar indicating the number of regime.
In the case where a single regime is specified in <code>variance.spec</code> and <code>distribution.spec</code>,
this parameter allows to automatically expand this single regime to <code>K</code> similar
regimes without the need to explicitly define them in <code>variance.spec</code>
and <code>distribution.spec</code> (see *Examples*).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint.spec</code></td>
<td>
<p><code>list</code> with element <code>fixed</code> and <code>regime.const</code>.
Only one of <code>fixed</code> and <code>regime.const</code>
can be set by the user as it is not allowed to set both at the same time. <br><code>fixed</code> is a  <code>list</code> with <code>numeric</code> entries and named elements.
This argument controls for fixed parameters defined by the user.  The names of the entries
in the <code>list</code>  have to coincide with the names of the model parameters.<br>
For instance, if <code>contraint.spec  = list(fixed = list(beta_1 = 0))</code>, <code>beta_1</code>
will be fixed to <code>0</code> during optimization. <br><code>regime.const</code> is a <code>character</code> vector.
This argument controls for the parameters which are set equal across regimes.
The names of the entries in the <code>list</code>  have to coincide with the names of the model parameters
minus the regime indicator.<br>
For instance, if <code>contraint.spec  = list(regime.const = c("beta"))</code>,
all the parameters named <code>beta</code> will be the same in all regimes during optimization.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior</code></td>
<td>
<p><code>list</code> with element <code>mean</code> and <code>sd</code>. The element <code>mean</code> and <code>sd</code>
are <code>list</code>  with <code>numeric</code> and named elements that allow to adjust the prior mean and
standard deviation of the truncated Normal prior.
The names of the entries in the lists have to coincide with the names of the model parameters.<br>
For instance, if <code>prior = list(mean = list(beta_1 = 0.7), sd = list(beta_1 = 0.1))</code>,
the prior mean of <code>beta_1</code> will be set to <code>0.7</code> while the prior standard
deviation will set to <code>0.1</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The Markov-Switching specification is based on the
Haas et al. (2004a) MSGARCH specification. It is a MSGARCH model that is separated
in K single-regime specifications  which are updated in parallel. Under the Haas et al. (2004a)
specification, the conditional variance is a function of past data and the current state.
The Mixture of GARCH option (<code>do.mix = TRUE</code>) is based on Haas et al. (2004b). A Mixture of GARCH is a mixture of distributions
where the variance process of each distribution is a single-regime process.<br>
For the models, <code>"sARCH"</code> is the ARCH(1) model (Engle, 1982), <code>"sGARCH"</code> the GARCH(1,1) model
(Bollerslev, 1986), <code>"eGARCH"</code> the EGARCH(1,1) model (Nelson, 1991), <code>"gjrGARCH"</code>
the GJR(1,1) model (Glosten et al., 1993), and <code>"tGARCH"</code> the TGARCH(1,1) model (Zakoian, 1994).<br>
For the distributions, <code>"norm"</code> is the Normal distribution, <code>"std"</code> the
Student-t distribution, and <code>"ged"</code> the GED distribution.
Their skewed version, implemented via the Fernandez and &amp; Steel (1998) transformation,
are <code>"snorm"</code>, <code>"sstd"</code> and <code>"sged"</code>.
Please see Ardia et al. (2019) for more details on the models and distributions.<br>
The user must choose between <code>fixed</code> or <code>regime.const</code> in <code>contraint.spec</code>
as both cannot be set at the same time. The <code>list</code> <code>fixed.pars</code>
will ensure that the chosen fixed parameters will be fixed during optimization according to
the values set by the user.
Thus only the non-fixed parameters are optimized. The vector <code>regime.const</code> will
ensure that the chosen parameters will be the same across regime during optimization.<br>
The <code>list</code> <code>mean</code> and <code>sd</code> in <code>prior</code> will adjust the prior mean and
prior standard deviation of the truncated Normal prior for MCMC
estimation via <code>FitMCMC</code> according to the inputed prior mean and standard deviation.
Those prior means and standard deviations that are not set will take on preset default values (a mean 
of zero and a variance of 1,000).
</p>


<h3>Value</h3>

<p>A list of class <code>MSGARCH_SPEC</code> with the following elements:<br></p>

<ul>
<li> <p><code>par0</code>: Vector (of size d) of default parameters.
</p>
</li>
<li> <p><code>is.mix</code>: Logical indicating if the specification is a mixture.
</p>
</li>
<li> <p><code>K</code>: Number of regimes.
</p>
</li>
<li> <p><code>lower</code>: Vector (of size d) of lower parameters' bounds.
</p>
</li>
<li> <p><code>upper</code>: Vector (of size d) of upper parameters' bounds.
</p>
</li>
<li> <p><code>n.params</code>:  Vector (of size K) of the total number of parameters by
regime including distributions' parameters.
</p>
</li>
<li> <p><code>n.params.vol</code>:  Vector (of size K) of the total number of parameters
by regime excluding distributions' parameters.
</p>
</li>
<li> <p><code>label</code>: Vector (of size d) of parameters' labels.
</p>
</li>
<li> <p><code>name</code>: Vector (of size K) of model specifications' names.
</p>
</li>
<li> <p><code>func</code>: List of internally used <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> functions.
</p>
</li>
<li> <p><code>rcpp.func</code>: List of internally used <code>Rcpp</code> functions.
</p>
</li>
<li> <p><code>fixed.pars</code>: List of user inputed fixed parameters.
</p>
</li>
<li> <p><code>regime.const.pars</code>: Vector of user imputed parameter set equal across regimes.
</p>
</li>
<li> <p><code>regime.fixed.pars</code>: Logical indicating if there is any fixed parameteter set by the user.
</p>
</li>
<li> <p><code>regime.const.pars.bool</code>: Logical indicating if there is any parameteters
equal across regime set by the user.
</p>
</li>
</ul>
<p>The <code>MSGARCH_SPEC</code> class has the following methods:
</p>

<ul>
<li> <p><code>simulate</code>: Simulation.
</p>
</li>
<li> <p><code>Volatility</code>: In-sample conditional volatility.
</p>
</li>
<li> <p><code>predict</code>: Forecast of the conditional volatility (and predictive distribution).
</p>
</li>
<li> <p><code>UncVol</code>: Unconditional volatility.
</p>
</li>
<li> <p><code>PredPdf</code>: Predictive density (pdf).
</p>
</li>
<li> <p><code>PIT</code>: Probability Integral Transform.
</p>
</li>
<li> <p><code>Risk</code>: Value-at-Risk and Expected-Shortfall.
</p>
</li>
<li> <p><code>State</code>: State probabilities (smoothed, filtered, predictive, Viterbi).
</p>
</li>
<li> <p><code>FitML</code>: Maximum Likelihood estimation.
</p>
</li>
<li> <p><code>FitMCMC</code>: Bayesian estimation.
</p>
</li>
<li> <p><code>print</code> and <code>summary</code>: Summary of the created specification.
</p>
</li>
</ul>
<h3>References</h3>

<p>Ardia, D. Bluteau, K. Boudt, K. Catania, L. Trottier, D.-A. (2019).
Markov-switching GARCH models in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>: The <span class="pkg">MSGARCH</span> package.
<em>Journal of Statistical Software</em>, 91(4), 1-38.
doi: <a href="https://doi.org/10.18637/jss.v091.i04">10.18637/jss.v091.i04</a>
</p>
<p>Engle, R. (1982).
Autoregressive conditional heteroscedasticity with estimates of the variance of United Kingdom inflation
<em>Econometrica</em>, 50, 987-1008.
</p>
<p>Bollerslev, T. (1986).
Generalized autoregressive conditional heteroskedasticity.
<em>Journal of Econometrics</em>, 31, 307-327.
doi: <a href="https://doi.org/10.1016/0304-4076(86)90063-1">10.1016/0304-4076(86)90063-1</a>
</p>
<p>Fernandez, C. &amp; Steel, M. F. (1998).
On Bayesian modeling of fat tails and skewness.
<em>Journal of the American Statistical Association</em>, 93, 359-371.
doi: <a href="https://doi.org/10.1080/01621459.1998.10474117">10.1080/01621459.1998.10474117</a>
</p>
<p>Glosten, L. R. Jagannathan, R. &amp; Runkle, D. E. (1993).
On the relation between the expected value and the volatility of the nominal excess return on stocks.
<em>Journal of Finance</em>, 48, 1779-1801.
doi: <a href="https://doi.org/10.1111/j.1540-6261.1993.tb05128.x">10.1111/j.1540-6261.1993.tb05128.x</a>
</p>
<p>Haas, M. Mittnik, S. &amp; Paolella, M. S. (2004a).
A new approach to Markov-switching GARCH models.
<em>Journal of Financial Econometrics</em>, 2, 493-530.
doi: <a href="https://doi.org/10.1093/jjfinec/nbh020">10.1093/jjfinec/nbh020</a>
</p>
<p>Haas, M. Mittnik, S. &amp; Paolella, M. S. (2004b).
Mixed normal conditional heteroskedasticity.
<em>Journal of Financial Econometrics</em>, 2, 211-250.
doi: <a href="https://doi.org/10.1093/jjfinec/nbh009">10.1093/jjfinec/nbh009</a>
</p>
<p>Nelson, D. B. (1991).
Conditional heteroskedasticity in asset returns: A new approach.
<em>Econometrica</em>, 59, 347-370.
</p>
<p>Zakoian, J.-M. (1994).
Threshold heteroskedastic models.
<em>Journal of Economic Dynamics and Control</em>, 18, 931-955.
doi: <a href="https://doi.org/10.1016/0165-1889(94)90039-6">10.1016/0165-1889(94)90039-6</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># create a Markov-switching specification
# MS-GARCH(1,1)-GJR(1,1)-Student
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH","gjrGARCH")),
                   distribution.spec = list(distribution = c("std","std")),
                   switch.spec = list(do.mix = FALSE))
print(spec)

# create a 3-regime Markov-switching specification with the help of variable K
# MS(3)-GARCH(1,1)- Student
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH")),
                   distribution.spec = list(distribution = c("std")),
                   switch.spec = list(do.mix = FALSE, K = 3))
print(spec)

# create a mixture specification
# MIX-GARCH(1,1)-GJR(1,1)-Student
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH","gjrGARCH")),
                   distribution.spec = list(distribution = c("std","std")),
                   switch.spec = list(do.mix = TRUE))
print(spec)

# setting fixed parameter for the sGARCH beta parameter
# MS-GARCH(1,1)-GJR(1,1)-Student with beta_1 fixed to 0
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH","gjrGARCH")),
                   distribution.spec = list(distribution = c("std","std")),
                   switch.spec = list(do.mix = FALSE),
                   constraint.spec = list(fixed = list(beta_1 = 0)))
print(spec)

# setting restriction for the shape parameter of the Student-t across regimes
# MS-GARCH(1,1)-GJR(1,1)-Student with shape parameter constraint across regime
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH","gjrGARCH")),
                   distribution.spec = list(distribution = c("std","std")),
                   switch.spec = list(do.mix = FALSE),
                   constraint.spec = list(regime.const = c("nu")))
print(spec)

# setting custom parameter priors for the beta parameters
# MS-GARCH(1,1)-GJR(1,1)-Student with prior modification
spec &lt;- CreateSpec(variance.spec = list(model = c("sGARCH","gjrGARCH")),
                   distribution.spec = list(distribution = c("std","std")),
                   switch.spec = list(do.mix = FALSE),
                   prior = list(mean = list(beta_1 = 0.9, beta_2 = 0.3),
                                sd = list(beta_1 = 0.05, beta_2 = 0.01)))
print(spec)
</code></pre>


</div>