<div class="container">

<table style="width: 100%;"><tr>
<td>OCandASN.MSPRT</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Operating characteristics (OC) and Average Sample Number (ASN) of a designed MSPRT
</h2>

<h3>Description</h3>

<p>This function obtains the operating characteristics, that is the probability of accepting <code class="reqn">H_0</code> and the sample size required on average for reaching a decision, for a designed MSPRT at the specified effect size(s).
</p>


<h3>Usage</h3>

<pre><code class="language-R">OCandASN.MSPRT(theta, design.MSPRT.object, 
               termination.threshold, test.type, side = "right", 
               theta0, Type1.target = 0.005, Type2.target = 0.2,
               N.max, N1.max, N2.max,
               sigma = 1, sigma1 = 1, sigma2 = 1, 
               batch.size, batch1.size, batch2.size, 
               nReplicate = 1e+06, nCore = max(1, detectCores() - 1),
               verbose = T, seed = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>

<p>Numeric vector. Vector of effect size(s) where the operating characteristics of the MSPRT is desired.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design.MSPRT.object</code></td>
<td>

<p>List. The output returned from <code>design.MSPRT</code> corresponding to the MSPRT for which the operating characteristics are desired.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>termination.threshold</code></td>
<td>

<p>Positive numeric. Termination threshold of the designed MSPRT.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.type</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>side</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta0</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Type1.target</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Type2.target</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N.max</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N1.max</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N2.max</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma1</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma2</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch.size</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch1.size</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch2.size</code></td>
<td>

<p>Same as in <code>design.MSPRT</code>. Not required if <code>design.MSPRT.object</code> is provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nReplicate</code></td>
<td>

<p>Positive integer. Total number of replications to be used in Monte Carlo simulation for calculating the termination threshold and the operating characteristics of the MSPRT. 
</p>
<p><strong>Default:</strong> 1,000,000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Logical. If <code>TRUE</code> (<strong>default</strong>), returns messages of the current proceedings. Otherwise it doesn't.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCore</code></td>
<td>

<p>Positive integer. Total number of cores available for computation. Can be anything <code class="reqn">\ge 1</code>. 
</p>
<p><strong>Default:</strong> <code>detectCores() - 1</code>. That is, 1 less than the total number of available cores.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>Integer. Random number generating seed. 
</p>
<p><strong>Default:</strong> 1.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>design.MSPRT.object</code> is provided, one can only additionally provide <code>nReplicate</code>, <code>nCore</code>, <code>verbose</code> and <code>seed</code> (Easier option). Otherwise, just like in <code>design.MSPRT</code>, all the other arguments together with <code>termination.threshold</code> (obtained from <code>design.MSPRT</code>) needs to be provided adequately.
</p>


<h3>Value</h3>

<p>Data frame.
</p>

<ul>
<li>
<p> One-sample tests: The data frame has 3 columns named <code>theta</code>, <code>acceptH0.prob</code> and <code>EN</code>, and the number of rows equals to the number of effect sizes (length of <code>theta</code>) where the operating characteristics are evaluated. Each row corresponds to a particular value of theta (effect size). The columns respectively contain the value of a particular theta (effect size), and the probability of accepting the $H_0$ and the average sample size required by the MSPRT for reaching a decision thereat.
</p>
</li>
<li>
<p> Two-sample tests: The data frame has 4 columns named <code>theta</code>, <code>acceptH0.prob</code>, <code>EN1</code> and <code>EN2</code>, and the number of rows equals to the number of effect sizes (length of <code>theta</code>) where the operating characteristics are evaluated. Each row corresponds to a particular value of theta (effect size). The columns respectively contain the value of a particular theta (effect size), and the probability of accepting the <code class="reqn">H_0</code> at that effect size, and the average sample size from Group-1 &amp; 2 that is required by the MSPRT for reaching a decision thereat.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Sandipan Pramanik, Valen E. Johnson and Anirban Bhattacharya
</p>


<h3>References</h3>

<p>Pramanik S., Johnson V. E. and Bhattacharya A. (2020+). A Modified Sequential Probability Ratio Test. <a href="https://arxiv.org/pdf/1811.08478.pdf">[Arxiv]</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#################### one-sample proportion test ####################

#### right sided ####
### design
#design.oneprop.right &lt;- design.MSPRT(test.type = 'oneProp', side = 'right',
#                                     N.max = 20)

### OC and ASN
#OC.oneprop.right &lt;- OCandASN.MSPRT(theta = seq(design.oneprop.right$theta0, 1,
#                                               length.out = 3),
#                                   design.MSPRT.object = design.oneprop.right)

#### left sided ####
### design
#design.oneprop.left = design.MSPRT(test.type = 'oneProp', side = 'left',
#                                   N.max = 20)

### OC and ASN
#OC.oneprop.left = OCandASN.MSPRT(theta = seq(0, design.oneprop.right$theta0,
#                                             length.out = 3),
#                                 design.MSPRT.object = design.oneprop.left)

#### both sided ####
### design
#design.oneprop.both = design.MSPRT(test.type = 'oneProp', side = 'both',
#                                   N.max = 20)

### OC and ASN
#OC.oneprop.both = OCandASN.MSPRT(theta = seq(0, 1, length.out = 3),
#                                 design.MSPRT.object = design.oneprop.both)


#################### one-sample z test ####################

#### right sided ####
### design
#design.onez.right = design.MSPRT(test.type = 'oneZ', side = 'right',
#                                 N.max = 20)

### OC and ASN
#OC.onez.right = OCandASN.MSPRT(theta = seq(design.onez.right$theta0,
#                                           design.onez.right$theta0 + 3*design.onez.right$sigma,
#                                           length.out = 3),
#                               design.MSPRT.object = design.onez.right)

#### left sided ####
### design
#design.onez.left = design.MSPRT(test.type = 'oneZ', side = 'left',
#                                N.max = 20)

### OC and ASN
#OC.onez.left = OCandASN.MSPRT(theta = seq(design.onez.left$theta0 - 3*design.onez.left$sigma,
#                                          design.onez.left$theta0,
#                                          length.out = 3),
#                              design.MSPRT.object = design.onez.left)

#### both sided ####
### design
#design.onez.both = design.MSPRT(test.type = 'oneZ', side = 'both',
#                                N.max = 20)

### OC and ASN
#OC.onez.both = OCandASN.MSPRT(theta = seq(design.onez.both$theta0 - 3*design.onez.both$sigma,
#                                          design.onez.both$theta0 + 3*design.onez.both$sigma,
#                                          length.out = 3),
#                              design.MSPRT.object = design.onez.both)


#################### one-sample t test ####################

#### right sided ####
### design
#design.onet.right = design.MSPRT(test.type = 'oneT', side = 'right',
#                                 N.max = 20)

### OC and ASN
#OC.onet.right = OCandASN.MSPRT(theta = seq(design.onet.right$theta0, 1,
#                                           length.out = 3),
#                               design.MSPRT.object = design.onet.right)

#### left sided ####
### design
#design.onet.left = design.MSPRT(test.type = 'oneT', side = 'left',
#                                N.max = 20)

### OC and ASN
#OC.onet.left = OCandASN.MSPRT(theta = seq(-1, design.onet.left$theta0,
#                                          length.out = 3),
#                              design.MSPRT.object = design.onet.left)

#### both sided ####
### design
#design.onet.both = design.MSPRT(test.type = 'oneT', side = 'both',
#                                N.max = 20)

### OC and ASN
#OC.onet.both = OCandASN.MSPRT(theta = seq(-1, 1, length.out = 3),
#                              design.MSPRT.object = design.onet.both)


#################### two-sample z test ####################

#### right sided ####
### design
#design.twoz.right = design.MSPRT(test.type = 'twoZ', side = 'right',
#                                 N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twoz.right = OCandASN.MSPRT(theta = seq(design.twoz.right$theta0, 
#                                           design.twoz.right$theta0 + 2,
#                                           length.out = 3),
#                               design.MSPRT.object = design.twoz.right)

#### left sided ####
### design
#design.twoz.left = design.MSPRT(test.type = 'twoZ', side = 'left',
#                                N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twoz.left = OCandASN.MSPRT(theta = seq(design.twoz.left$theta0 - 2,
#                                          design.twoz.left$theta0,
#                                          length.out = 3),
#                              design.MSPRT.object = design.twoz.left)

#### both sided ####
### design
#design.twoz.both = design.MSPRT(test.type = 'twoZ', side = 'both',
#                                N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twoz.both = OCandASN.MSPRT(theta = seq(design.twoz.both$theta0 - 2,
#                                          design.twoz.both$theta0 + 2,
#                                          length.out = 3),
#                             design.MSPRT.object = design.twoz.both)


#################### two-sample t test ####################

#### right sided ####
### design
#design.twot.right = design.MSPRT(test.type = 'twoT', side = 'right',
#                                 N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twot.right = OCandASN.MSPRT(theta = seq(design.twot.right$theta0, 
#                                           design.twot.right$theta0 + 2,
#                                           length.out = 3),
#                               design.MSPRT.object = design.twot.right)

#### left sided ####
### design
#design.twot.left = design.MSPRT(test.type = 'twoT', side = 'left',
#                                N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twot.left = OCandASN.MSPRT(theta = seq(design.twot.left$theta0 - 2,
#                                          design.twot.left$theta0,
#                                          length.out = 3),
#                              design.MSPRT.object = design.twot.left)

#### both sided ####
### design
#design.twot.both = design.MSPRT(test.type = 'twoT', side = 'both',
#                                N1.max = 20, N2.max = 20)

### OC and ASN
#OC.twot.both = OCandASN.MSPRT(theta = seq(design.twot.both$theta0 - 2,
#                                          design.twot.both$theta0 + 2,
#                                          length.out = 3),
#                              design.MSPRT.object = design.twot.both)
</code></pre>


</div>