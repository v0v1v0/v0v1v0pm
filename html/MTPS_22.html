<div class="container">

<table style="width: 100%;"><tr>
<td>MTPS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit Models using Revised Stacking Algorithm</h2>

<h3>Description</h3>

<p>Fit a model using standard stacking algorithm or revised stacking algorithms to simultaneous predicte multiple outcomes
</p>


<h3>Usage</h3>

<pre><code class="language-R">MTPS(xmat, ymat, family,
  cv = FALSE, residual = TRUE, nfold = 5,
  method.step1, method.step2,
  resid.type = c("deviance", "pearson", "raw"), resid.std = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xmat</code></td>
<td>
<p>Predictor matrix, each row is an observation vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymat</code></td>
<td>
<p>Responses matrix. Quantitative for family = "gaussian" and a factor of two levels for family = "binomial"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>Response type for each response. If all response variable are within the same family it can be "gaussian" or "binomial", otherwise it is a vector with elements "gaussian" and "binomial" to indicate each response family</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv</code></td>
<td>
<p>Logical, indicate if use Cross-Validation Stacking algorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residual</code></td>
<td>
<p>Logical, indicate if use Residual Stacking algorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold</code></td>
<td>
<p>Integer, number of folds for Cross-Validation Stacking algorithm. The default value is 5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method.step1</code></td>
<td>
<p>Base Learners for fitting models in Step 1 of Stacking Algorithm. It can be one base learner function for all outcomes or a list of base learner functions for each outcome. The list of all base learners can be obtained by <code>list.learners()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method.step2</code></td>
<td>
<p>Base Learners for fitting models in Step 2 of Stacking Algorithm. (see above)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resid.type</code></td>
<td>
<p>The residual type for Residual Stacking</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resid.std</code></td>
<td>
<p>Logical, whether or not use standardized residual</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>It returns a MTPS object. It is a list of 4 parameters containing information about step 1 and step 2 models and the revised stacking algorithm method.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("HIV")
set.seed(1)
xmat &lt;- as.matrix(XX)
ymat &lt;- as.matrix(YY)
id &lt;- createFolds(rowMeans(XX), k=5, list=FALSE)
training.id &lt;- id != 1
y.train &lt;- ymat[training.id, ]
y.test  &lt;- ymat[!training.id, ]
x.train &lt;- xmat[training.id, ]
x.test  &lt;- xmat[!training.id, ]

# Residual Stacking
fit.rs &lt;- MTPS(xmat = x.train, ymat = y.train,
  family = "gaussian",cv = FALSE, residual = TRUE,
  method.step1 = rpart1, method.step2 = lm1)
predict(fit.rs, x.test)

# using different base learners for different outcomes
 fit.mixOut &lt;- MTPS(xmat=x.train, ymat=y.train,
  family="gaussian",cv = FALSE, residual = TRUE,
  method.step1 = c(rpart1,glmnet.ridge,rpart1,lm1,lm1),
  method.step2 = c(rpart1,lm1,lm1,lm1, glmnet.ridge))
predict(fit.mixOut, x.test)
</code></pre>


</div>