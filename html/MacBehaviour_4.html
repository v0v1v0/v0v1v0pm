<div class="container">

<table style="width: 100%;"><tr>
<td>preCheck</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Step4: Pre-check for token usage in experiment design.</h2>

<h3>Description</h3>

<p>Configures experimental parameters before execution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">preCheck(
  data,
  checkToken = FALSE,
  systemPrompt = "",
  imgDetail = "auto",
  version = "2023-06-01",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame that has been structured by the 'experimentDesign' function, containing the experimental setup.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkToken</code></td>
<td>
<p>Whether to perform token count check, select TRUE to submit your experiment to our server's tokenizer for token count check, the default selection is FALSE (i.e., no token check will be performed, but you need to manually check if the number of tokens exceeds the model limit to avoid errors in the experiment).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>systemPrompt</code></td>
<td>
<p>The system prompt text used in the chatGPT model interaction. If left empty, a space character is assumed.Note: This parameter does not work in models that do not support system prompts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>imgDetail</code></td>
<td>
<p>The image quality of the img modality is set to auto by default, with low/high as selectable options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>When using the Claude model, the version parameter required defaults to "2023-06-01".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Variable parameter lists allow you to input additional parameters supported by the model you're using, such as n=2 / logprobs=TRUE... Note: You must ensure the validity of the parameters you enter; otherwise, an error will occur.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the original data and the parameters for the chatGPT model interaction, confirming that the setup has passed the token checks or indicating issues if found.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
df &lt;- data.frame(
Run = c(1,2),
Item = c(1,2),
Event =c(1,1),
Condition = c(1,2),
TargetPrompt = c("please repeat this sentence: test1","please repeat this sentence: test2")
)

ExperimentItem=loadData(df$Run,df$Item,df$Event,df$Condition,promptList = df$TargetPrompt)

Design=experimentDesign(ExperimentItem,session=1)

gptConfig=preCheck(Design, systemPrompt="You are a participant in a psychological experiment",
                    imgDetail="low",temperature=0.7)

</code></pre>


</div>