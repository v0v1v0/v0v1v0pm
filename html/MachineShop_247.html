<div class="container">

<table style="width: 100%;"><tr>
<td>set_optim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tuning Parameter Optimization</h2>

<h3>Description</h3>

<p>Set the optimization method and control parameters for tuning of model
parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_optim_bayes(object, ...)

## S3 method for class 'ModelSpecification'
set_optim_bayes(
  object,
  num_init = 5,
  times = 10,
  each = 1,
  acquisition = c("ucb", "ei", "eips", "poi"),
  kappa = stats::qnorm(conf),
  conf = 0.995,
  epsilon = 0,
  control = list(),
  packages = c("ParBayesianOptimization", "rBayesianOptimization"),
  random = FALSE,
  progress = verbose,
  verbose = 0,
  ...
)

set_optim_bfgs(object, ...)

## S3 method for class 'ModelSpecification'
set_optim_bfgs(
  object,
  times = 10,
  control = list(),
  random = FALSE,
  progress = FALSE,
  verbose = 0,
  ...
)

set_optim_grid(object, ...)

## S3 method for class 'TrainingParams'
set_optim_grid(object, random = FALSE, progress = FALSE, ...)

## S3 method for class 'ModelSpecification'
set_optim_grid(object, ...)

## S3 method for class 'TunedInput'
set_optim_grid(object, ...)

## S3 method for class 'TunedModel'
set_optim_grid(object, ...)

set_optim_pso(object, ...)

## S3 method for class 'ModelSpecification'
set_optim_pso(
  object,
  times = 10,
  each = NULL,
  control = list(),
  random = FALSE,
  progress = FALSE,
  verbose = 0,
  ...
)

set_optim_sann(object, ...)

## S3 method for class 'ModelSpecification'
set_optim_sann(
  object,
  times = 10,
  control = list(),
  random = FALSE,
  progress = FALSE,
  verbose = 0,
  ...
)

set_optim_method(object, ...)

## S3 method for class 'ModelSpecification'
set_optim_method(
  object,
  fun,
  label = "Optimization Function",
  packages = character(),
  params = list(),
  random = FALSE,
  progress = FALSE,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>input or model object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to the <code>TrainingParams</code> method of
<code>set_optim_grid</code> from its other methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_init</code></td>
<td>
<p>number of grid points to sample for the initialization of
Bayesian optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>maximum number of times to repeat the optimization step.
Multiple sets of model parameters are evaluated automatically at each step
of the BFGS algorithm to compute a finite-difference approximation to the
gradient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>each</code></td>
<td>
<p>number of times to sample and evaluate model parameters at each
optimization step.  This is the swarm size in particle swarm optimization,
which defaults to <code>floor(10 + 2 * sqrt(length(bounds)))</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acquisition</code></td>
<td>
<p>character string specifying the acquisition function as
<code>"ucb"</code> (upper confidence bound), <code>"ei"</code> (expected improvement),
<code>"eips"</code> (expected improvement per second), or <code>"poi"</code>
(probability of improvement).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa, conf</code></td>
<td>
<p>upper confidence bound (<code>"ucb"</code>) quantile or its
probability to balance exploitation against exploration.  Argument
<code>kappa</code> takes precedence if both are given and multiplies the
predictive standard deviation added to the predictive mean in the
acquisition function.  Larger values encourage exploration of the model
parameter space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon</code></td>
<td>
<p>improvement methods (<code>"ei"</code>, <code>"eips"</code>, and
<code>"poi"</code>) parameter to balance exploitation against exploration.
Values should be between -0.1 and 0.1 with larger ones encouraging
exploration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>list of control parameters passed to
<code>bayesOpt</code> by <code>set_optim_bayes</code>
with package <code>"ParBayesianOptimization"</code>, to
<code>BayesianOptimization</code> by
<code>set_optim_bayes</code> with package <code>"rBayesianOptimization"</code>, to
<code>optim</code> by <code>set_optim_bfgs</code> and
<code>set_optim_sann</code>, and to <code>psoptim</code> by
<code>set_optim_pso</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>packages</code></td>
<td>
<p>R package or packages to use for the optimization method, or
an empty vector if none are needed.  The first package in
<code>set_optim_bayes</code> is used unless otherwise specified by the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random</code></td>
<td>
<p>number of points to sample for a random grid search, or
<code>FALSE</code> for an exhaustive grid search.  Used when a grid search is
specified or as the fallback method for non-numeric model parameters
present during other optimization methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>logical indicating whether to display iterative progress
during optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>numeric or logical value specifying the level of progress
detail to print, with 0 (<code>FALSE</code>) indicating none and 1 (<code>TRUE</code>)
or higher indicating increasing amounts of detail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>user-defined optimization function to which the arguments below
are passed in order.  An ellipsis can be included in the function
definition when using only a subset of the arguments and ignoring others.
A tibble returned by the function with the same number of rows as model
evaluations will be included in a <code>TrainingStep</code> summary of
optimization results; other types of return values will be ignored.
</p>

<dl>
<dt>optim</dt>
<dd>
<p>function that takes a numeric vector or list of named
model parameters as the first argument, optionally accepts the maximum
number of iterations as argument <code>max_iter</code>, and returns a scalar
measure of performance to be maximized.  Parameter names are available
from the <code>grid</code> and <code>bounds</code> arguments described below.  If
the function cannot be evaluated at a given set of parameter values,
then <code>-Inf</code> is returned.</p>
</dd>
<dt>grid</dt>
<dd>
<p>data frame containing a tuning grid of all model parameters.</p>
</dd>
<dt>bounds</dt>
<dd>
<p>named list of lower and upper bounds for each finite
numeric model parameter in <code>grid</code>.  The types (integer or double)
of the original parameter values are preserved in the bounds.</p>
</dd>
<dt>params</dt>
<dd>
<p>list of optimization parameters as supplied to
<code>set_optim_method</code>.</p>
</dd>
<dt>monitor</dt>
<dd>
<p>list of the <code>progress</code> and <code>verbose</code> values.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>character descriptor for the optimization method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>list of user-specified model parameters to be passed to
<code>fun</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The optimization functions implement the following methods.
</p>

<dl>
<dt><code>set_optim_bayes</code></dt>
<dd>
<p>Bayesian optimization with a Gaussian process
model (Snoek et al. 2012).</p>
</dd>
<dt><code>set_optim_bfgs</code></dt>
<dd>
<p>limited-memory modification of quasi-Newton
BFGS optimization (Byrd et al. 1995).</p>
</dd>
<dt><code>set_optim_grid</code></dt>
<dd>
<p>exhaustive or random grid search.</p>
</dd>
<dt><code>set_optim_pso</code></dt>
<dd>
<p>particle swarm optimization (Bratton and
Kennedy 2007, Zambrano-Bigiarini et al. 2013).</p>
</dd>
<dt><code>set_optim_sann</code></dt>
<dd>
<p>simulated annealing (Belisle 1992).  This
method depends critically on the control parameter settings.  It is
not a general-purpose method but can be very useful in getting to good
parameter values on a very rough optimization surface.</p>
</dd>
<dt><code>set_optim_method</code></dt>
<dd>
<p>user-defined optimization function.</p>
</dd>
</dl>
<p>The package-defined optimization functions evaluate and return values of the
tuning parameters that are of same type (e.g. integer, double, character) as
given in the <code>object</code> grid.  Sequential optimization of numeric tuning
parameters is performed over a hypercube defined by their minimum and maximum
grid values.  Non-numeric parameters are optimized with grid searches.
</p>


<h3>Value</h3>

<p>Argument <code>object</code> updated with the specified optimization method
and control parameters.
</p>


<h3>References</h3>

<p>Belisle, C. J. P. (1992). Convergence theorems for a class of simulated
annealing algorithms on Rd. <em>Journal of Applied Probability</em>,
<em>29</em>, 885–895.
</p>
<p>Bratton, D. &amp; Kennedy, J. (2007), Defining a standard for particle swarm
optimization. In <em>IEEE Swarm Intelligence Symposium, 2007</em> (pp.
120-127).
</p>
<p>Byrd, R. H., Lu, P., Nocedal, J., &amp; Zhu, C. (1995). A limited memory
algorithm for bound constrained optimization. <em>SIAM Journal on
Scientific Computing</em>, <em>16</em>, 1190–1208.
</p>
<p>Snoek, J., Larochelle, H., &amp; Adams, R.P. (2012). Practical Bayesian
Optimization of Machine Learning Algorithms. arXiv:1206.2944 [stat.ML].
</p>
<p>Zambrano-Bigiarini, M., Clerc, M., &amp; Rojas, R. (2013). Standard particle
swarm optimisation 2011 at CEC-2013: A baseline for future PSO improvements.
In <em>IEEE Congress on Evolutionary Computation, 2013</em> (pp. 2337-2344).
</p>


<h3>See Also</h3>

<p><code>BayesianOptimization</code>,
<code>bayesOpt</code>, <code>optim</code>,
<code>psoptim</code>, <code>set_monitor</code>,
<code>set_predict</code>, <code>set_strata</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">ModelSpecification(
  sale_amount ~ ., data = ICHomes,
  model = TunedModel(GBMModel)
) %&gt;% set_optim_bayes

</code></pre>


</div>