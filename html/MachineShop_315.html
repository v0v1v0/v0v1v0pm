<div class="container">

<table style="width: 100%;"><tr>
<td>varimp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Variable Importance</h2>

<h3>Description</h3>

<p>Calculate measures of relative importance for model predictor variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">varimp(
  object,
  method = c("permute", "model"),
  scale = TRUE,
  sort = c("decreasing", "increasing", "asis"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>model fit result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character string specifying the calculation of variable
importance as permutation-base (<code>"permute"</code>) or model-specific
(<code>"model"</code>).  If model-specific importance is specified but not
defined, the permutation-based method will be used instead with its default
values (below).  Permutation-based variable importance is defined as the
relative change in model predictive performances between datasets with and
without permuted values for the associated variable (Fisher et al. 2019).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>logical value or vector indicating whether importance values are
scaled to a maximum of 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>character string specifying the sort order of importance values
to be <code>"decreasing"</code>, <code>"increasing"</code>, or as predictors appear in
the model formula (<code>"asis"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to model-specific or permutation-based variable
importance functions.  These include the following arguments and default
values for <code>method = "permute"</code>.
</p>

<dl>
<dt><code>select = NULL</code></dt>
<dd>
<p>expression indicating predictor variables for
which to compute variable importance (see <code>subset</code>
for syntax) [default: all].</p>
</dd>
<dt><code>samples = 1</code></dt>
<dd>
<p>number of times to permute the values of each
variable.  Larger numbers of samples decrease variability in the
estimates at the expense of increased computation time.</p>
</dd>
<dt><code>prop = numeric()</code></dt>
<dd>
<p>proportion of observations to sample
without replacement at each round of variable permutations [default:
all].  Subsampling of observations can decrease computation time.</p>
</dd>
<dt><code>size = integer()</code></dt>
<dd>
<p>number of observations to sample at each
round of permutations [default: all].</p>
</dd>
<dt><code>times = numeric()</code></dt>
<dd>
<p>numeric vector of follow-up times at
which to predict survival probabilities or <code>NULL</code> for predicted
survival means.</p>
</dd>
<dt><code>metric = NULL</code></dt>
<dd>
<p>metric function or function
name with which to calculate performance.  If not specified, the first
applicable default metric from the performance functions is
used.</p>
</dd>
<dt><code>compare = c("-", "/")</code></dt>
<dd>
<p>character specifying the relative
change to compute in comparing model predictive performances between
datasets with and without permuted values.  The choices are difference
(<code>"-"</code>) and ratio (<code>"/"</code>).</p>
</dd>
<dt><code>stats = MachineShop::settings("stat.TrainingParams")</code></dt>
<dd>
<p>function, function name, or vector of these with which to compute
summary statistics on the set of variable importance values from the
permuted datasets.</p>
</dd>
<dt><code>na.rm = TRUE</code></dt>
<dd>
<p>logical indicating whether to exclude missing
variable importance values from the calculation of summary statistics.</p>
</dd>
<dt><code>progress = TRUE</code></dt>
<dd>
<p>logical indicating whether to display
iterative progress during computation.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>varimp</code> function supports calculation of variable importance with
the permutation-based method of Fisher et al. (2019) or with model-based
methods where defined.  Permutation-based importance is the default and has
the advantages of being available for any model, any performance metric
defined for the associated response variable type, and any predictor variable
in the original training dataset.  Conversely, model-specific importance is
not defined for some models and will fall back to the permutation method in
such cases; is generally limited to metrics implemented in the source
packages of models; and may be computed on derived, rather than original,
predictor variables.  These disadvantages can make comparisons of
model-specific importance across different classes of models infeasible.  A
downside of the permutation-based approach is increased computation time.  To
counter this, the permutation algorithm can be run in parallel simply by
loading a parallel backend for the <span class="pkg">foreach</span> package <code>%dopar%</code>
function, such as <span class="pkg">doParallel</span> or <span class="pkg">doSNOW</span>.
</p>
<p>Permutation variable importance is interpreted as the contribution of a
predictor variable to the predictive performance of a model as measured by
the performance metric used in the calculation.  Importance of a predictor is
conditional on and, with the default scaling, relative to the values of all
other predictors in the analysis.
</p>


<h3>Value</h3>

<p><code>VariableImportance</code> class object.
</p>


<h3>References</h3>

<p>Fisher, A., Rudin, C., &amp; Dominici, F. (2019). All models are wrong, but many
are useful: Learning a variable's importance by studying an entire class of
prediction models simultaneously. <em>Journal of Machine Learning
Research</em>, <em>20</em>, 1-81.
</p>


<h3>See Also</h3>

<p><code>plot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Requires prior installation of suggested package gbm to run

## Survival response example
library(survival)

gbm_fit &lt;- fit(Surv(time, status) ~ ., data = veteran, model = GBMModel)
(vi &lt;- varimp(gbm_fit))
plot(vi)


</code></pre>


</div>