<div class="container">

<table style="width: 100%;"><tr>
<td>anlzMWRdate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Analyze trends by date in results file</h2>

<h3>Description</h3>

<p>Analyze trends by date in results file
</p>


<h3>Usage</h3>

<pre><code class="language-R">anlzMWRdate(
  res = NULL,
  param,
  acc = NULL,
  sit = NULL,
  fset = NULL,
  thresh,
  group = c("site", "locgroup", "all"),
  threshlab = NULL,
  threshcol = "tan",
  site = NULL,
  resultatt = NULL,
  locgroup = NULL,
  dtrng = NULL,
  ptsize = 2,
  repel = FALSE,
  labsize = 3,
  expand = c(0.05, 0.1),
  confint = FALSE,
  palcol = "Set2",
  yscl = "auto",
  sumfun = yscl,
  colleg = FALSE,
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code>readMWRresults</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code>paramsMWR</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code>readMWRacc</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sit</code></td>
<td>
<p>optional character string of path to the site metadata file or <code>data.frame</code> of site metadata returned by <code>readMWRsites</code>, required if <code>locgroup</code> is not <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code>, or a single numeric value to override the values included with the package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>character indicating whether the results are grouped by site (default), combined across location groups, or combined across sites, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshlab</code></td>
<td>
<p>optional character string indicating legend label for the threshold, required only if <code>thresh</code> is numeric</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshcol</code></td>
<td>
<p>character indicating color of threshold lines if available</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site</code></td>
<td>
<p>character string of sites to include, default all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resultatt</code></td>
<td>
<p>character string of result attributes to plot, default all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locgroup</code></td>
<td>
<p>character string of location groups to plot from the <code>"Location Group"</code> column in the site metadata file, optional and only if <code>sit</code> is not <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, default all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptsize</code></td>
<td>
<p>numeric indicating size of the points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repel</code></td>
<td>
<p>logical indicating if overlapping site labels are offset, default <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labsize</code></td>
<td>
<p>numeric indicating font size for the site labels, only if <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expand</code></td>
<td>
<p>numeric of length two indicating expansion proportions on the x-axis to include labels outside of the plot range if <code>repel = F</code> and <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>
<p>logical indicating if confidence intervals are shown, only applies if data are summarized using <code>group</code> as <code>"locgroup"</code> or <code>"all"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palcol</code></td>
<td>
<p>character string indicating the color palette for points and lines from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sumfun</code></td>
<td>
<p>character indicating one of <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colleg</code></td>
<td>
<p>logical indicating if a color legend for sites or location groups is included if <code>group = "site"</code> or <code>group = "locgroup"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runchk</code></td>
<td>
<p>logical to run data checks with <code>checkMWRresults</code> or <code>checkMWRacc</code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Results are shown for the selected parameter as continuous line plots over time. Specifying <code>group = "site"</code> plot a separate line for each site.  Specifying <code>group = "locgroup"</code> will summarize results across sites in the <code>locgroup</code> argument based on the value passed to <code>sumfun</code> or <code>yscl</code> if no value is passed to <code>sumfun</code>.  The site metadata file must be passed to the <code>`sit`</code> argument to use this option.  Specifying <code>group = "all"</code> will summarize results across sites for each date based on the value passed to <code>sumfun</code> or <code>yscl</code> if no value is passed to <code>sumfun</code>. Summarized results will include confidence intervals if <code>confint = TRUE</code> and they can be calculated (i.e., more than one point is used in the summary and data are summarized using <code>group</code> as <code>"locgroup"</code> or <code>"all"</code>).
</p>
<p>Threshold lines applicable to marine or freshwater environments can be included in the plot by using the <code>thresh</code> argument.  These thresholds are specific to each parameter and can be found in the <code>thresholdMWR</code> file.  Threshold lines are plotted only for those parameters with entries in <code>thresholdMWR</code> and only if the value in <code>`Result Unit`</code> matches those in <code>thresholdMWR</code>. The threshold lines can be suppressed by setting <code>thresh = 'none'</code>. A user-supplied numeric value can also be used for the <code>thresh</code> argument to override the default values. An appropriate label must also be supplied to <code>threshlab</code> if <code>thresh</code> is numeric.
</p>
<p>Any acceptable color palette for from <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">RColorBrewer</a> for the points and lines can be used for <code>palcol</code>, which is passed to the <code>palette</code> argument in <code>scale_color_brewer</code>. These could include any of the qualitative color palettes, e.g., <code>"Set1"</code>, <code>"Set2"</code>, etc.  The continuous and diverging palettes will also work, but may return color scales for points and lines that are difficult to distinguish.  The <code>palcol</code> argument does not apply if <code>group = "all"</code>.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with "log" in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Similarly, the data will be summarized appropriately for <code>group</code> (only applies if <code>group</code> is not site) based on the value passed to <code>sumfun</code>.  The default if no value is provided to <code>sumfun</code> is to use the appropriate summary based on the value provided to <code>yscl</code>.  If <code>yscl = "auto"</code> (default), then <code>sumfun = "auto"</code>, and the mean or geometric mean is used for the summary based on information in the data quality objective file for accuracy. Using <code>yscl = "linear"</code> or <code>yscl = "log"</code> will default to the mean or geometric mean summary if no value is provided to <code>sumfun</code>.  Any other appropriate value passed to <code>sumfun</code> will override the value passed to <code>yscl</code>.  Valid summary functions for <code>sumfun</code> include <code>"auto"</code>, <code>"mean"</code>, <code>"geomean"</code>, <code>"median"</code>, <code>"min"</code>, or <code>"max"</code>).
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object that can be further modified.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# site data path
sitpth &lt;- system.file('extdata/ExampleSites.xlsx', package = 'MassWateR')

# site data
sitdat &lt;- readMWRsites(sitpth)

# select sites
anlzMWRdate(res = resdat, param = 'DO', acc = accdat, group = 'site', thresh = 'fresh',
     site = c("ABT-026", "ABT-077"))
</code></pre>


</div>