<div class="container">

<table style="width: 100%;"><tr>
<td>anlzMWRoutlier</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Analyze outliers in results file</h2>

<h3>Description</h3>

<p>Analyze outliers in results file
</p>


<h3>Usage</h3>

<pre><code class="language-R">anlzMWRoutlier(
  res = NULL,
  param,
  acc = NULL,
  fset = NULL,
  type = c("box", "jitterbox", "jitter"),
  group,
  dtrng = NULL,
  repel = TRUE,
  outliers = FALSE,
  labsize = 3,
  fill = "lightgrey",
  alpha = 0.8,
  width = 0.8,
  yscl = "auto",
  ttlsize = 1.2,
  runchk = TRUE,
  warn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>character string of path to the results file or <code>data.frame</code> for results returned by <code>readMWRresults</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code>paramsMWR</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc</code></td>
<td>
<p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code>readMWRacc</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fset</code></td>
<td>
<p>optional list of inputs with elements named <code>res</code>, <code>acc</code>, <code>frecom</code>, <code>sit</code>, or <code>wqx</code> overrides the other arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character indicating <code>"box"</code>, <code>"jitterbox"</code>, or <code>"jitter"</code>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>character indicating whether the summaries are grouped by month, site, or week of year</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dtrng</code></td>
<td>
<p>character string of length two for the date ranges as YYYY-MM-DD, optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repel</code></td>
<td>
<p>logical indicating if overlapping outlier labels are offset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outliers</code></td>
<td>
<p>logical indicating if outliers are returned to the console instead of plotting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labsize</code></td>
<td>
<p>numeric indicating font size for the outlier labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>numeric indicating fill color for boxplots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric from 0 to 1 indicating transparency of fill color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>numeric for width of boxplots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yscl</code></td>
<td>
<p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ttlsize</code></td>
<td>
<p>numeric value indicating font size of the title relative to other text in the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runchk</code></td>
<td>
<p>logical to run data checks with <code>checkMWRresults</code> or <code>checkMWRacc</code>, applies only if <code>res</code> or <code>acc</code> are file paths</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Outliers are defined following the standard <code>ggplot</code> definition as 1.5 times the inter-quartile range of each boxplot.  The data frame returned if <code>outliers = TRUE</code> may vary based on the boxplot groupings defined by <code>group</code>.
</p>
<p>Specifying <code>type = "box"</code> (default) will produce standard boxplots.  Specifying <code>type = "jitterbox"</code> will produce boxplots with non-outlier observations jittered on top.  Specifying <code>type = "jitter"</code> will suppress the boxplots and show only the jittered points and the outliers.
</p>
<p>Specifying <code>group = "week"</code> will group the samples by week of year using an integer specifying the week.  Note that there can be no common month/day indicating the start of the week between years and an integer is the only way to compare summaries if the results data span multiple years.
</p>
<p>The y-axis scaling as arithmetic (linear) or logarithmic can be set with the <code>yscl</code> argument.  If <code>yscl = "auto"</code> (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with "log" in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting <code>yscl = "linear"</code> or <code>yscl = "log"</code> will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy.
</p>
<p>Any entries in <code>resdat</code> in the <code>"Result Value"</code> column as <code>"BDL"</code> or <code>"AQL"</code> are replaced with appropriate values in the <code>"Quantitation Limit"</code> column, if present, otherwise the <code>"MDL"</code> or <code>"UQL"</code> columns from the data quality objectives file for accuracy are used.  Values as <code>"BDL"</code> use one half of the appropriate limit.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object that can be further modified if <code>outliers = FALSE</code>, otherwise a data frame of outliers is returned.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

# results data
resdat &lt;- readMWRresults(respth)

# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data
accdat &lt;- readMWRacc(accpth)

# outliers by month
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month')

# outliers by site
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'site')

# outliers by site, May through July 2021 only
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'site', 
     dtrng = c('2022-05-01', '2022-07-31'))

# outliers by month, type as jitterbox
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', type = 'jitterbox')

# outliers by month, type as jitter
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', type = 'jitter')

# data frame output
anlzMWRoutlier(res = resdat, param = 'DO', acc = accdat, group = 'month', outliers = TRUE)

</code></pre>


</div>