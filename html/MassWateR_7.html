<div class="container">

<table style="width: 100%;"><tr>
<td>checkMWRacc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check data quality objective accuracy data</h2>

<h3>Description</h3>

<p>Check data quality objective accuracy data
</p>


<h3>Usage</h3>

<pre><code class="language-R">checkMWRacc(accdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>accdat</code></td>
<td>
<p>input data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used internally within <code>readMWRacc</code> to run several checks on the input data for completeness and conformance to WQX requirements
</p>
<p>The following checks are made:
</p>

<ul>
<li>
<p> Column name spelling: Should be the following: Parameter, uom, MDL, UQL, Value Range, Field Duplicate, Lab Duplicate, Field Blank, Lab Blank, Spike/Check Accuracy
</p>
</li>
<li>
<p> Columns present: All columns from the previous check should be present
</p>
</li>
<li>
<p> Column types: All columns should be characters/text, except for MDL and UQL
</p>
</li>
<li> <p><code>Value Range</code> column na check: The character string <code>"na"</code> should not be in the <code>Value Range</code> column, <code>"all"</code> should be used if the entire range applies
</p>
</li>
<li>
<p> Unrecognized characters: Fields describing accuracy checks should not include symbols or text other than <code class="reqn">&lt;=</code>, <code class="reqn">\leq</code>, <code class="reqn">&lt;</code>, <code class="reqn">&gt;=</code>, <code class="reqn">\geq</code>, <code class="reqn">&gt;</code>, <code class="reqn">\pm</code>, <code>"%"</code>, <code>"BDL"</code>, <code>"AQL"</code>, <code>"log"</code>, or <code>"all"</code>
</p>
</li>
<li>
<p> Overlap in <code>Value Range</code> column: Entries in <code>Value Range</code> should not overlap for a parameter (excludes ascending ranges)
</p>
</li>
<li>
<p> Gap in <code>Value Range</code> column: Entries in <code>Value Range</code> should not include a gap for a parameter, warning only
</p>
</li>
<li>
<p> Parameter: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code>paramsMWR</code> data
</p>
</li>
<li>
<p> Units: No missing entries in units (<code>uom</code>), except pH which can be blank
</p>
</li>
<li>
<p> Single unit: Each unique <code>Parameter</code> should have only one type for the units (<code>uom</code>)
</p>
</li>
<li>
<p> Correct units: Each unique <code>Parameter</code> should have an entry in the units (<code>uom</code>) that matches one of the acceptable values in the <code>Units of measure</code> column of the <code>paramsMWR</code> data
</p>
</li>
<li>
<p> Empty columns: Columns with all missing or NA values will return a warning
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>accdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')

# accuracy data with no checks
accdat &lt;- readxl::read_excel(accpth, na = c('NA', ''), col_types = 'text')
accdat &lt;- dplyr::mutate(accdat, dplyr::across(-c(`Value Range`), ~ dplyr::na_if(.x, 'na'))) 
      
checkMWRacc(accdat)
</code></pre>


</div>