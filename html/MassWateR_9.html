<div class="container">

<table style="width: 100%;"><tr>
<td>checkMWRresults</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check water quality monitoring results</h2>

<h3>Description</h3>

<p>Check water quality monitoring results
</p>


<h3>Usage</h3>

<pre><code class="language-R">checkMWRresults(resdat, warn = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>resdat</code></td>
<td>
<p>input data frame for results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>
<p>logical to return warnings to the console (default)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used internally within <code>readMWRresults</code> to run several checks on the input data for completeness and conformance to WQX requirements.
</p>
<p>The following checks are made:
</p>

<ul>
<li>
<p> Column name spelling: Should be the following: Monitoring Location ID, Activity Type, Activity Start Date, Activity Start Time, Activity Depth/Height Measure, Activity Depth/Height Unit, Activity Relative Depth Name, Characteristic Name, Result Value, Result Unit, Quantitation Limit, QC Reference Value, Result Measure Qualifier, Result Attribute, Sample Collection Method ID, Project ID, Local Record ID, Result Comment
</p>
</li>
<li>
<p> Columns present: All columns from the previous check should be present
</p>
</li>
<li>
<p> Activity Type: Should be one of Field Msr/Obs, Sample-Routine, Quality Control Sample-Field Blank, Quality Control Sample-Lab Blank, Quality Control Sample-Lab Duplicate, Quality Control Sample-Lab Spike, Quality Control-Calibration Check, Quality Control-Meter Lab Duplicate, Quality Control-Meter Lab Blank
</p>
</li>
<li>
<p> Date formats: Should be mm/dd/yyyy and parsed correctly on import
</p>
</li>
<li>
<p> Depth data present: Depth data should be included in Activity Depth/Height Measure or Activity Relative Depth Name for all rows where Activity Type is Field Msr/Obs or Sample-Routine
</p>
</li>
<li>
<p> Non-numeric Activity Depth/Height Measure: All depth values should be numbers, excluding missing values
</p>
</li>
<li>
<p> Activity Depth/Height Unit: All entries should be <code>ft</code>, <code>m</code>, or blank
</p>
</li>
<li>
<p> Activity Relative Depth Name: Should be either Surface, Bottom, Midwater, Near Bottom, or blank (warning only)
</p>
</li>
<li>
<p> Activity Depth/Height Measure out of range: All depth values should be less than or equal to 1 meter / 3.3 feet or entered as Surface in the Activity Relative Depth Name column (warning only)
</p>
</li>
<li>
<p> Characteristic Name: Should match parameter names in the <code>Simple Parameter</code> or <code>WQX Parameter</code> columns of the <code>paramsMWR</code> data (warning only)
</p>
</li>
<li>
<p> Result Value: Should be a numeric value or a text value as AQL or BDL
</p>
</li>
<li>
<p> QC Reference Value: Should be a numeric value or a text value as AQL or BDL
</p>
</li>
<li>
<p> Result Unit: No missing entries in <code>Result Unit</code>, except pH which can be blank
</p>
</li>
<li>
<p> Single Result Unit: Each unique parameter in <code>Characteristic Name</code> should have only one entry in <code>Result Unit</code> (excludes entries for lab spikes reported as <code>%</code> or <code>% recovery</code>)
</p>
</li>
<li>
<p> Correct Result Unit: Each unique parameter in <code>Characteristic Name</code> should have an entry in <code>Result Unit</code> that matches one of the acceptable values in the <code>Units of measure</code> column of the <code>paramsMWR</code> data (excludes entries for lab spikes reported as <code>%</code> or <code>% recovery</code>)
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>resdat</code> is returned as is if no errors are found, otherwise an informative error message is returned prompting the user to make the required correction to the raw data before proceeding. Checks with warnings can be fixed at the discretion of the user before proceeding.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)

respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')

resdat &lt;- suppressWarnings(readxl::read_excel(respth, na = c('NA', 'na', ''), guess_max = Inf)) %&gt;% 
  dplyr::mutate_if(function(x) !lubridate::is.POSIXct(x), as.character)
             
checkMWRresults(resdat)
</code></pre>


</div>