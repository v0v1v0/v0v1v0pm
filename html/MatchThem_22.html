<div class="container">

<table style="width: 100%;"><tr>
<td>trim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Trim Weights</h2>

<h3>Description</h3>

<p>Trims (i.e., truncates) large weights by setting all weights higher than that at a given quantile to the weight at the quantile. This can be useful in controlling extreme weights, which can reduce effective sample size by enlarging the variability of the weights.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'wimids'
trim(x, at = 0, lower = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>wimids</code> object; the output of a call to <code>weightthem()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p><code>numeric</code>; either the quantile of the weights above which
weights are to be trimmed. A single number between .5 and 1, or the number
of weights to be trimmed (e.g., <code>at = 3</code> for the top 3 weights to be
set to the 4th largest weight).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>
<p><code>logical</code>; whether also to trim at the lower quantile
(e.g., for <code>at = .9</code>, trimming at both .1 and .9, or for <code>at = 3</code>,
trimming the top and bottom 3 weights). Default is <code>FALSE</code> to only trim the higher weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>trim.wimids()</code> works by calling <code>WeightIt::trim()</code> on each <code>weightit</code> object stored in the <code>models</code> component of the <code>wimids</code> object. Because <code>trim()</code> itself is not exported from <span class="pkg">MatchThem</span>, it must be called using <code>WeightIt::trim()</code> or by attaching <span class="pkg">WeightIt</span> (i.e., running <code>library(WeightIt)</code>) before use.
</p>


<h3>Value</h3>

<p>An object from the <code>wimids</code> class, identical to the original object except with <code>trim()</code> applied to each of the <code>weightit</code> objects in the <code>models</code> component.
</p>


<h3>Author(s)</h3>

<p>Noah Greifer
</p>


<h3>See Also</h3>

<p><code>WeightIt::trim()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Loading the dataset
data(osteoarthritis)

#Multiply imputing the missing values
imputed.datasets &lt;- mice::mice(osteoarthritis, m = 5)

#Estimating weights of observations in the multiply imputed datasets
weighted.datasets &lt;- weightthem(OSP ~ AGE + SEX + BMI + RAC + SMK,
                                imputed.datasets,
                                approach = 'within',
                                method = 'glm',
                                estimand = "ATE")

#Trimming the top 10% of weights in each dataset
#to the 90th percentile
trimmed.datasets &lt;- trim(weighted.datasets, at = 0.9)
</code></pre>


</div>