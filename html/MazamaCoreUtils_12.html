<div class="container">

<table style="width: 100%;"><tr>
<td>createLocationID</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create one or more unique locationIDs</h2>

<h3>Description</h3>

<p>A locationID is created for each incoming <code>longitude</code> and
<code>latitude</code>. Each locationID is unique to within a certain spatial scale.
With <code>algorithm = "geohash"</code>, the
<code>precision</code> argument determines the size of a geohash grid cell. At the
equator, the following grid cell sizes apply for different precision levels:
</p>
<pre>
precision   (maximum grid cell X axis, in m)
        5   ± 2400
        6   ± 610
        7   ± 76
        8   ± 19
        9   ± 2.4
       10   ± 0.6
</pre>
<p>Invalid locations will be assigned a locationID specified by the user with
the <code>invalidID</code> argument, typically <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createLocationID(
  longitude = NULL,
  latitude = NULL,
  algorithm = c("geohash", "digest"),
  precision = 10,
  invalidID = as.character(NA)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>longitude</code></td>
<td>
<p>Vector of longitudes in decimal degrees E.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latitude</code></td>
<td>
<p>Vector of latitudes in decimal degrees N.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>algorithm</code></td>
<td>
<p>Algorithm to use – either <code>"geohash"</code> or <code>"digest"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p><code>precision</code> argument used when encoding with <code>"geohash"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>invalidID</code></td>
<td>
<p>Identifier to use for invalid locations. This can be a
character string or <code>NA</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When the <code>"geohash"</code> algorithm is specified,
the following code is used to generate each locationID:
</p>
<pre>
  locationID &lt;-
    geohashTools::gh_encode(latitude, longitude, precision)
</pre>
<p>When the <code>"digest"</code> algorithm is specified,
the following code is used:
</p>
<pre>
# Retain accuracy up to ~.1m
locationString &lt;- paste0(
  sprintf("%.7f", longitude),
  "_",
  sprintf("%.7f", latitude)
)
# Avoid collisions until billions of records
locationID &lt;- digest::digest(locationString, algo = "xxhash64")
</pre>
<p>See the references for details on either algorithm.
</p>


<h3>Value</h3>

<p>Vector of character locationIDs.
</p>


<h3>Note</h3>

<p>The <code>"geohash"</code> algorithm is preferred but the <code>"digest"</code>
algorithm is retained because several existing databases
use the <code>"digest"</code> algorithm as a unique identifier.
</p>


<h3>References</h3>

<p><a href="https://en.wikipedia.org/wiki/Decimal_degrees">https://en.wikipedia.org/wiki/Decimal_degrees</a>
</p>
<p><a href="https://www.johndcook.com/blog/2017/01/10/probability-of-secure-hash-collisions/">https://www.johndcook.com/blog/2017/01/10/probability-of-secure-hash-collisions/</a>
</p>
<p><a href="https://michaelchirico.github.io/geohashTools/index.html">https://michaelchirico.github.io/geohashTools/index.html</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MazamaCoreUtils)

longitude &lt;- c(-122.5, 0, NA, -122.5, -122.5)
latitude &lt;- c( 47.5, 0, 47.5, NA, 47.5)

createLocationID(longitude, latitude)
createLocationID(longitude, latitude, invalidID = "bad")
createLocationID(longitude, latitude, algorithm = "digest")

</code></pre>


</div>