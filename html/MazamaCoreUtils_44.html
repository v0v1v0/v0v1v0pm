<div class="container">

<table style="width: 100%;"><tr>
<td>manageCache</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Manage the size of a cache</h2>

<h3>Description</h3>

<p>If <code>cacheDir</code> takes up more than <code>maxCacheSize</code>
megabytes on disk, files will be removed in order of access time by
default. Only files matching <code>extensions</code> are eligible for removal.
Files can also be removed in order of change time with <code>sortBy='ctime'</code>
or modification time with <code>sortBy='mtime'</code>.
</p>
<p>The <code>maxFileAge</code> parameter can also be used to remove files that haven't
been modified in a certain number of days. Fractional days are allowed. This
removal happens without regard to the size of the cache and is useful for
removing out-of-date data.
</p>
<p>It is important to understand precisely what these timestamps
represent:
</p>

<ul>
<li>
<p><code>atime</code> – File access time: updated whenever a file is opened.
</p>
</li>
<li>
<p><code>ctime</code> – File change time: updated whenever a file's metadata
changes e.g. name, permission, ownership.
</p>
</li>
<li>
<p><code>mtime</code> – file modification time: updated whenever a file's
contents change.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">manageCache(
  cacheDir = NULL,
  extensions = c("html", "json", "pdf", "png"),
  maxCacheSize = 100,
  sortBy = "atime",
  maxFileAge = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cacheDir</code></td>
<td>
<p>Location of cache directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extensions</code></td>
<td>
<p>Vector of file extensions eligible for removal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxCacheSize</code></td>
<td>
<p>Maximum cache size in megabytes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sortBy</code></td>
<td>
<p>Timestamp to sort by when sorting files eligible for removal.
One of <code>atime|ctime|mtime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxFileAge</code></td>
<td>
<p>Maximum age in days of files allowed in the cache.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly returns the number of files removed.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MazamaCoreUtils)

# Create a cache directory and fill it with 1.6 MB of data
CACHE_DIR &lt;- tempdir()
write.csv(matrix(1,400,500), file=file.path(CACHE_DIR,'m1.csv'))
write.csv(matrix(2,400,500), file=file.path(CACHE_DIR,'m2.csv'))
write.csv(matrix(3,400,500), file=file.path(CACHE_DIR,'m3.csv'))
write.csv(matrix(4,400,500), file=file.path(CACHE_DIR,'m4.csv'))
for (file in list.files(CACHE_DIR, full.names=TRUE)) {
  print(file.info(file)[,c(1,6)])
}

# Remove files based on access time until we get under 1 MB
manageCache(CACHE_DIR, extensions='csv', maxCacheSize=1, sortBy='atime')
for (file in list.files(CACHE_DIR, full.names=TRUE)) {
  print(file.info(file)[,c(1,6)])
}

# Or remove files based on modification time
manageCache(CACHE_DIR, extensions='csv', maxCacheSize=1, sortBy='mtime')
for (file in list.files(CACHE_DIR, full.names=TRUE)) {
  print(file.info(file)[,c(1,6)])
}
</code></pre>


</div>