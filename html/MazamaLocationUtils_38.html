<div class="container">

<table style="width: 100%;"><tr>
<td>table_initializeExisting</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Converts an existing table into a known location table</h2>

<h3>Description</h3>

<p>An existing table may have much of the data that is needed
for a known location table. This function accepts an incoming table and
searches for required columns:
</p>

<ul>
<li>
<p>locationID
</p>
</li>
<li>
<p>locationName
</p>
</li>
<li>
<p>longitude
</p>
</li>
<li>
<p>latitude
</p>
</li>
<li>
<p>elevation
</p>
</li>
<li>
<p>countryCode
</p>
</li>
<li>
<p>stateCode
</p>
</li>
<li>
<p>countyName
</p>
</li>
<li>
<p>timezone
</p>
</li>
<li>
<p>houseNumber
</p>
</li>
<li>
<p>street
</p>
</li>
<li>
<p>city
</p>
</li>
<li>
<p>postalCode
</p>
</li>
</ul>
<p>The <code>longitude</code> and <code>latitude</code> columns are required but all others
are optional.
</p>
<p>If any of these optional columns are found, they will be used and the often
slow and sometimes slightly inaccurate steps to generate that information
will be skipped for locations that have non-missing data. Any additional
columns of information that are
not part of the required core metadata will be retained.
</p>
<p>This method skips the assignment of columns like <code>elevation</code> and all
address related fields that require web service requests.
</p>
<p>Compared to initializing a brand new table and populating it one record at a
time, this is a much faster way of creating a known location table from a
pre-existing table of metadata.
</p>


<h3>Usage</h3>

<pre><code class="language-R">table_initializeExisting(
  locationTbl = NULL,
  stateDataset = "NaturalEarthAdm1",
  countryCodes = NULL,
  distanceThreshold = NULL,
  measure = c("geodesic", "haversine", "vincenty", "cheap"),
  precision = 10,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>locationTbl</code></td>
<td>
<p>Tibble of known locations. This input tibble need not be a
standardized "known location" table with all required columns. Missing
columns will be added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stateDataset</code></td>
<td>
<p>Name of spatial dataset to use for determining state
codes, Default: 'NaturalEarthAdm1'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>countryCodes</code></td>
<td>
<p>Vector of country codes used to optimize spatial
searching. (See ?MazamaSpatialUtils::getStateCode())</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distanceThreshold</code></td>
<td>
<p>Distance in meters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>One of "haversine" "vincenty", "geodesic", or "cheap"
specifying desired method of geodesic distance calculation. See
<code>?geodist::geodist</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p><code>precision</code> argument passed on to location_createID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical controlling the generation of progress messages.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Known location tibble with the specified metadata columns. Any
locations whose circles (as defined by <code>distanceThreshold</code>) overlap will
generate warning messages.
</p>
<p>It is incumbent upon the user to address overlapping locations by one of:
</p>

<ol>
<li>
<p>reduce the distanceThreshold until no overlaps occur
</p>
</li>
<li>
<p>assign one of the overlapping locations to the other location
</p>
</li>
</ol>
<h3>Note</h3>

<p>The measure <code>"cheap"</code> may be used to speed things up depending on
the spatial scale being considered. Distances calculated with
<code>measure = "cheap"</code> will vary by a few meters compared with those
calculated using <code>measure = "geodesic"</code>.
</p>


</div>