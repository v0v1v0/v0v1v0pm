<div class="container">

<table style="width: 100%;"><tr>
<td>mts_sample</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample time series for an <em>mts</em> time series object</h2>

<h3>Description</h3>

<p>Reduce the number of records (timesteps) in the <code>data</code>
dataframe of the incoming <code>mts</code> through random sampling.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mts_sample(
  mts = NULL,
  sampleSize = 5000,
  seed = NULL,
  keepOutliers = FALSE,
  width = 5,
  thresholdMin = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mts</code></td>
<td>
<p><em>mts</em> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampleSize</code></td>
<td>
<p>Non-negative integer giving the number of rows to choose.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Integer passed to <code>set.seed</code> for reproducible sampling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keepOutliers</code></td>
<td>
<p>Logical specifying a graphics focused sampling algorithm
that retains outliers (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Integer width of the rolling window used for outlier detection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholdMin</code></td>
<td>
<p>Numeric threshold for outlier detection.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When <code>keepOutliers = FALSE</code>, random sampling is used to provide
a statistically relevant subsample of the data.
</p>


<h3>Value</h3>

<p>A subset of the given <em>mts</em> object.
</p>
<p>An <em>mts</em> time series object with fewer timesteps.
(A list with <code>meta</code> and <code>data</code> dataframes.)
</p>


<h3>Outlier Detection</h3>

<p>When <code>keepOutliers = TRUE</code>, a customized sampling algorithm is used that
attempts to create subsets for use in plotting that create plots that are
visually identical to plots using all data. This is accomplished by
preserving outliers and only sampling data in regions where overplotting
is expected.
</p>
<p>The process is as follows:
</p>

<ol>
<li>
<p>find outliers using <code>MazamaRollUtils::findOutliers()</code>
</p>
</li>
<li>
<p>create a subset consisting of only outliers
</p>
</li>
<li>
<p>sample the remaining data
</p>
</li>
<li>
<p>merge the outliers and sampled data
</p>
</li>
</ol>
<p>This algorithm works best when the <em>mts</em> object has only one or two
timeseries.
</p>
<p>The <code>width</code> and <code>thresholdMin</code> parameters determine the number of
outliers detected. For hourly data, a <code>width</code> of 5 and a <code>thresholdMin</code>
of 3 or 4 seem to find many visually obvious outliers.
</p>
<p>Users attempting to optimize plotting speed for lengthy time series are
encouraged to experiment with these two parameters along with
<code>sampleSize</code> and review the results visually.
</p>
<p>See <code>MazamaRollUtils::findOutliers()</code>.
</p>


</div>