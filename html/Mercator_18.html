<div class="container">

<table style="width: 100%;"><tr>
<td>Mercator-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
The <code>Mercator</code> Distance Visualization Object
</h2>

<h3>Description</h3>

<p>The <code>Mercator</code> object represents a distance matrix together with
clustering assignments and a set of visualizations. It implements four
visualizations for clusters of large-scale, multi-dimensional data:
hierarchical clustering, multi-dimensional scaling, t-Stochastic
Neighbor Embedding (t-SNE), and iGraph. The default
<code>Mercator</code> constructor applies one of ten metrics of
<code>binaryDistance</code> to an object of the
<code>BinaryMatrix</code> class.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Mercator(X, metric, method, K, ...)
addVisualization(DV, method, ...)
getClusters(DV)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Either a <code>BinaryMatrix</code> or a <code>dist</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>A <code>binaryDistance</code> currently limited to the
names of 10 selected distance metrics: <code>jaccard</code>,
<code>sokalMichener</code>, <code>hamming</code>,
<code>russellRao</code>, <code>pearson</code>, <code>goodmanKruskal</code>,
<code>manhattan</code>,
<code>canberra</code>, <code>binary</code>, or <code>euclid</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>A visualization method, currently limited to
<code>hclust</code>, <code>mds</code>, <code>tsne</code>, <code>graph</code>,
<code>umap</code>, and <code>som</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>An <code>integer</code> specifying the number of desired clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DV</code></td>
<td>
<p>A distance visualization produced as the output of the 
<code>Mercator</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed on to the functions that
implement different methods for <code>addVisualization</code> (possibly
passed here through the <code>Mercator</code> function). These include
</p>

<dl>
<dt><code>any</code></dt>
<dd>
<p>Any arguments to the <code>cmdscale</code> function for an
<code>mds</code> visualization. Most commonly, this is likely to
include <code>k</code>, the number of dimensions to compute.</p>
</dd>
<dt><code>any</code></dt>
<dd>
<p>Any arguments to the <code>Rtsne</code> function for a
<code>tsne</code> visualization. Common examples include <code>dims</code>
and <code>perplexity</code>.</p>
</dd>
<dt><code>any</code></dt>
<dd>
<p>Any arguments to the <code>som</code> function
to construct or view a self-organizing map. Most commonly, this is likely to
include <code>somgrid</code>, to specify the size and layout of the
grid, or <code>type</code> to specify which data to show in the plot.</p>
</dd>
<dt><code>Q</code></dt>
<dd>
<p>A quantile cutoff for the creation of the IGraph visualization.
By default, the value is set at the 10th percentile.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>Mercator</code> function constructs and returns a distance
visualization object of the
<code>Mercator</code> class, including a distance matrix calculated on a 
given metric and given visualizations. It is also possible (though not
advisable) to construct a <code>Mercator</code> object directly using the
<code>new</code> function. Default clustering in <code>Mercator</code> is now
performed on the distance matrix using hierarchical clustering
(hclust) with the <code>wardD2</code> linkage method.
</p>
<p>The <code>addVisualizations</code> function can be used to add additional 
visualizations to an existing <code>Mercator</code> object.
</p>
<p>The <code>getClusters</code> function returns a vector of cluster assignments.
</p>


<h3>Slots</h3>


<dl>
<dt>
<code>metric</code>:</dt>
<dd>
<p>Object of class <code>"character"</code>; the name 
of the <code>binaryDistance</code> applied to create this object. </p>
</dd>
<dt>
<code>distance</code>:</dt>
<dd>
<p>Object of class <code>"dist"</code>; the distance 
matrix used and represented by this object.</p>
</dd>
<dt>
<code>view</code>:</dt>
<dd>
<p>Object of class <code>"list"</code>; contains the
results of calculations to generate each visualize the object.</p>
</dd>
<dt>
<code>clusters</code>:</dt>
<dd>
<p>A numeric vector of cluster assignments.</p>
</dd>
<dt>
<code>symbols</code>:</dt>
<dd>
<p>A numeric vector of valid plotting
characters, as used by <code>par(pch)</code>.</p>
</dd>
<dt>
<code>palette</code>:</dt>
<dd>
<p>A character vector of color names.</p>
</dd>
</dl>
<h3>Methods</h3>


<dl>
<dt>plot(x, view = NULL, ask = NULL, ...):</dt>
<dd>
<p>Produce a plot of one or more visualizations within a 
Mercator object. The default <code>view</code>, when omitted, is the
first one contained in the object. You can request multiple views
at once; if the current plot layout doesn't have enough space in
an interactive session, the <code>ask</code> parameters detemines whether
the system will ask you before advancing to the next plot. When
plotting a graph view, you can use an optional <code>layout</code>
parameter to select a specific layout by name.
</p>
</dd>
<dt>barplot(height, main = ‚Äù, sub = NULL, border = NA, space =
0, ...)</dt>
<dd>
<p>Produce a (colored) barplot of the silhouette widths for elements
clustered in this class. Arguments are as described in te base
function <code>barplot</code>. 
</p>
</dd>
<dt>scatter(object, view = NULL, ask = NULL, colramp = NULL, ...):</dt>
<dd>
<p>Produce a smooth scatter plot of one or more visualizations within a 
Mercator object. The default <code>view</code>, when omitted, is the
first one contained in the object. You can request multiple views
at once; if the current plot layout doesn't have enough space in
an interactive session, the <code>ask</code> parameters detemines whether
the system will ask you before advancing to the next plot. When
plotting a graph view, you can use an optional <code>layout</code>
parameter to select a specific layout by name. Arguments are
otherwise the same as the <code>smoothScatter</code> function,
execpt that the default color ramp is <code>topo.colors</code>.
</p>
</dd>
<dt>hist(x, breaks=123, ...):</dt>
<dd>
<p>Produce a histogram of distances calculated in the dissimilarity 
matrix generated in the <code>Mercator</code> object.
</p>
</dd>
<dt>summary(object, ...):</dt>
<dd>
<p>Returns the chosen distance metric, dimensions of the distance 
matrix, and available, calculated visualizations in this object.
</p>
</dd>
<dt>dim(x):</dt>
<dd>
<p>Returns the dimensions of the distance matrix of this object.
</p>
</dd>
<dt>[:</dt>
<dd>
<p>Subsets the distance matrix of this object.
</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Kevin R. Coombes &lt;krc@silicovore.com&gt;, Caitlin E. Coombes</p>


<h3>See Also</h3>

<p><code>silhouette</code>, <code>smoothScatter</code>,
<code>topo.colors</code>, <code>som</code>,
<code>umap</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Form a BinaryMatrix
data("iris")
my.data &lt;- as.matrix(iris[,c(1:4)])
my.rows &lt;- as.data.frame(c(1:length(my.data[,1])))
my.binmat &lt;- BinaryMatrix(my.data, , my.rows)
my.binmat &lt;- t(my.binmat)
summary(my.binmat)

# Form a Mercator object
# Set K to the known number of species in the dataset
my.vis &lt;- Mercator(my.binmat, "euclid", "hclust", K=3) 
summary(my.vis)
hist(my.vis)
barplot(my.vis)
my.vis &lt;- addVisualization(my.vis, "mds")
plot(my.vis, view = "hclust")
plot(my.vis, view = "mds")

scatter(my.vis, view ="mds")

# change the color palette
slot(my.vis, "palette") &lt;- c("purple", "red", "orange", "green")
scatter(my.vis, view ="mds")

# Recover cluster identities
# What species comprise cluster 1?
my.clust &lt;- getClusters(my.vis)
my.species &lt;- iris$Species[my.clust == 1]
my.species
</code></pre>


</div>