<div class="container">

<table style="width: 100%;"><tr>
<td>plot_metric</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot Distribution of Metabolite Quality Metrics for Each Split of Data</h2>

<h3>Description</h3>

<p>For a given number of splits of data based on pooled plasma missing rate, calculate the longest run metric (<code>run_metric</code>) and the correlation metric (<code>corr_metric</code>) for metabolites in each group. Plot the distribution of these metrics for each group color coding those that exceed thresholds.</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_metric(df,ppkey='PPP',sidkey='X',numsplit=5,mincut=.02,maxcut=0.95,
scut=0.5,cor_rates=c(.6,.65,.65,.65,.6),runlengths=c(NA,15,15,15,NA),
histcolors=c('white'))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>The metabolomics dataset, ideally read from the <code>read.met</code> function. Each column represents a sample and each row represents a metabolite. Columns should be labeled with some unique prefix denoting whether the column is from a biological sample or pooled plasma sample. For example, all pooled plasma samples may have columns identified by the prefix “PPP” and all biological samples may have columns identified by the prefix “X”. Missing data must be coded as NA. Columns must be ordered by injection order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ppkey</code></td>
<td>
<p>The unique prefix of pooled plasma samples. Default is <code>"PPP"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sidkey</code></td>
<td>
<p>The unique prefix of biological samples. Default is <code>"X"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numsplit</code></td>
<td>
<p>The number of equal sized sections to divide metabolites into based on missing rate of pooled plasma columns. Divides the range of missing rates between <code>mincut</code> and <code>maxcut</code> into equal sections. Default is <code>5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mincut</code></td>
<td>
<p>A cutoff to specify that any metabolite with pooled plasma missing rate less than or equal to this value should be retained. Default is <code>0.02</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxcut</code></td>
<td>
<p>A cutoff to specify that any metabolite with pooled plasma missing rate greater than this value should be removed. Default is <code>0.95</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scut</code></td>
<td>
<p>The cutoff of missingness to consider a metabolite as having data present in a given biological sample block. Relevant only to <code>run_metric</code> computation. Default is <code>0.5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_rates</code></td>
<td>
<p>A vector of length equal to <code>numsplit</code>. Each value represents the cutoff of the correlation metric in that section. Any metabolite with a value greater than or equal to the cutoff is deemed an artifact and anything less than the cutoff is deemed a true metabolite. If any value is set to NA, the correlation metric will not be considered for that group. Default is <code>c(.6, .65, .65, .65, .6)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runlengths</code></td>
<td>
<p>A vector of length equal to <code>numsplit</code>. Each values represents the cutoff for the longest run metric in that section. Any metabolite with a run greater than or equal to the cutoff is an artifact and anything less than the cutoff is a true metabolite. If any value is set to NA, the longest run metric will not be considered for that group. Default is <code>c(NA, 15, 15, 15, NA)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>histcolors</code></td>
<td>
<p>A vector of length equal to <code>numsplit</code>. Each value represents the color to use for that group. If no color is provided, they will be colored white.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns histograms showing the correlation metric and longest run metric distributions for each group of the metabolites based on pooled plasma missing rate.</p>


<h3>See Also</h3>

<p>See <code>MetProc-package</code> for examples of running the full process.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MetProc)

#Read in metabolomics data
metdata &lt;- read.met(system.file("extdata/sampledata.csv", package="MetProc"),
headrow=3, metidcol=1, fvalue=8, sep=",", ppkey="PPP", ippkey="BPP")

#Plot distributions of the two metrics for each group
plot_metric(metdata,ppkey='PPP',sidkey='X',numsplit=5,mincut=0.02,maxcut=0.95,
scut=0.5,cor_rates=c(.6,.65,.65,.65,.6),runlengths=c(NA,15,15,15,NA),
histcolors=c('red','yellow','green','blue','purple'))
</code></pre>


</div>