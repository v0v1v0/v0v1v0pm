<div class="container">

<table style="width: 100%;"><tr>
<td>pooledROCPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a plot with a pooled ROC curve</h2>

<h3>Description</h3>

<p>Given a <code>metaObject</code> with <code>$originalData</code> populated, this function calculates and
plots a "pooled" ROC curve that represents the average of all the individual ROC
curves. This version of the function is for use with MetaIntegrator.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pooledROCPlot(metaObject, filterObject, points = 1000,
  weighting = TRUE, title = NULL, size = 14, rounding = 3,
  smoothed = FALSE, auc1.thresh = 0.99, bootReps = 1000,
  minPoints = 5, numCores = 1, method = "random")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>metaObject</code></td>
<td>
<p>a metaObject which must have <code>metaObject$originalData</code> populated with a list of <code>datasetObjects</code> that will be used for discovery</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filterObject</code></td>
<td>
<p>a metaFilter object containing the signature genes that will be used for calculating the score</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>points</code></td>
<td>
<p>number of points to simulate for the approximated ROC curves during the linear interpolation (default: 1000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weighting</code></td>
<td>
<p>when calculating the mean AUC, if <code>weighting</code>=TRUE then the weighted mean AUC is calculated (default: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title of the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>size of the text/legend/etc (default: 14)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rounding</code></td>
<td>
<p>how many digits to round the AUC and CI to (default: 3)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothed</code></td>
<td>
<p>if TRUE, then a smoothed ROC curve is estimated using a modified version of the Kester and Buntinx Method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc1.thresh</code></td>
<td>
<p>(if <code>smoothed</code>=TRUE) if the AUC of a dataset is above this threshold, then it is treated as if the AUC were 1 (default: 0.99)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootReps</code></td>
<td>
<p>(if <code>smoothed</code>=TRUE) number of bootstrap iterations (default: 1000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minPoints</code></td>
<td>
<p>(if <code>smoothed</code>=TRUE) minimum number of points required for bootstrap to be used (default: 5)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCores</code></td>
<td>
<p>(if <code>smoothed</code>=TRUE) number of CPUs to use if parallel computing is desired (default: 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>(if <code>smoothed</code>=TRUE) method used to compute summary meta-statistics (default: "random")</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To make sure the input is correctly formatted, the input <code>metaObject</code> should be checked with
<code>checkDataObject(metaObject, "Meta", "Pre-Analysis")</code> before starting the meta-analysis.
</p>
<p>By default, this average ROC curve is calculated by first using linear
interpolation to create approximated versions of each given ROC curve that all
have the same set of FPR values. A pooled ROC curve is then calculated by
taking the weighted mean of the corresponding TPR values (weighting corresponds
to the number of samples in each dataset). This pooled curve is represented as
a black curve. In addition, the weighted standard deviation is calculated for
each TPR, which is represented by a grey area on the plot. The pooled AUC is
calculated by using the trapezoid method on the pooled ROC curve, and the 95%
confidence interval of the pooled AUC is calculated using the pooled standard
error of the individual ROC curves.
</p>
<p>If <code>smoothed</code>=TRUE, then a smoothed version of the pooled ROC curve will be
plotted instead, with the surrounding gray area representing the weighted
standard deviation of the pooled ROC curve. The statistics for this smoothed
curve are based on the Kester and Buntinx Method, from (Kester and Buntinx,
<em>Med Decis Making</em>, 2000). Methods have been added by Tim Sweeney (2015) for better
estimates in cases with low numbers of tpr/fpr values. Methods have also been
added by Aditya Rao (2018) to predict the curve's alpha parameter for a given
beta parameter and AUC, as well as to calculate the weighted standard deviation
of the given ROC curves.
</p>


<h3>Value</h3>

<p>Generates a plot with each individual ROC curve as well as the pooled ROC curve
</p>


<h3>Author(s)</h3>

<p>Aditya M. Rao (with help from Hayley Warsinske and Francesco Vallania, original idea from Madeleine Scott, and some code adapted from Tim Sweeney)
</p>


<h3>References</h3>

<p>Kester and Buntinx, <em>Med Decis Making</em>, 2000
</p>


<h3>See Also</h3>

<p><code>summaryROCPlot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">pooledROCPlot(tinyMetaObject, filterObject = 
   tinyMetaObject$filterResults$pValueFDR0.05_es0_nStudies1_looaTRUE_hetero0)
</code></pre>


</div>