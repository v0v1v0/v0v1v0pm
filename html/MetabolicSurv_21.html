<div class="container">

<table style="width: 100%;"><tr>
<td>Icvlasoel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Inner and Outer Cross Validations for Lasso Elastic Net Survival predictive models and Classification</h2>

<h3>Description</h3>

<p>The function does cross validation for Lasso, Elastic net and Ridge regressions models based on fixed or top selected metabolites from <code>CVLasoelacox</code> with classifier validated on a independent sample for the survial analysis and classification. The survival analysis is based on the selected metabolites in the presence or absene of prognostic factors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Icvlasoel(
  Survival,
  Censor,
  Prognostic = NULL,
  Mdata,
  Fold = 3,
  Ncv = 50,
  Nicv = 100,
  Alpha = 0.1,
  TopK,
  Weights = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Survival</code></td>
<td>
<p>A vector of survival time with length equals to number of subjects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Censor</code></td>
<td>
<p>A vector of censoring indicator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Prognostic</code></td>
<td>
<p>A dataframe containing possible prognostic(s) factor and/or treatment effect to be used in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mdata</code></td>
<td>
<p>A large or small metabolic profile matrix. A matrix with metabolic profiles where the number of rows should be equal to the number of metabolites and number of columns should be equal to number of patients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fold</code></td>
<td>
<p>number of folds to be used for the cross validation. Its value ranges between 3 and the numbe rof subjects in the dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ncv</code></td>
<td>
<p>Number of validations to be carried out. The default is 25.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nicv</code></td>
<td>
<p>Number of validations to be carried out for the inner loop. The default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Alpha</code></td>
<td>
<p>The mixing parameter for glmnet (see <code>glmnet</code>). The range is 0&lt;= Alpha &lt;= 1. The Default is 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TopK</code></td>
<td>
<p>Top list of metabolites. Usually this can be mostly selected metabolites by function <code>CVLasoelacox</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Weights</code></td>
<td>
<p>A logical flag indicating if a fixed or non-fixed weights should be used during the classifier evaluations. Default is FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function does cross validation for Lasso, Elastic net and Ridge regressions models based on fixed or top selected metabolites from <code>CVLasoelacox</code> with classifier validated on a independent sample for the survial analysis and classification. The survival analysis is based on the selected metabolites in the presence or absene of prognostic factors. The classifier is built on the weights obtain from the inner cross validations results and it is tested on out-of-bag data. These weights can be fixed or can be updated at each outer iteration. If weights are not fixed then patients are classified using majority votes. Otherwise, weights obtained from the inner cross validations are summarized by mean weights and used in the classifier. Inner cross validations are performed by calling to function <code>CVLasoelacox</code>. Hazard ratio for low risk group is estimated using out-of-bag data.
</p>


<h3>Value</h3>

<p>A object of class <code>fcv</code> is returned with the following values
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Runtime</code></td>
<td>
<p>A vector of runtime for each iteration measured in seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fold</code></td>
<td>
<p>Number of folds used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ncv</code></td>
<td>
<p>Number of outer cross validations used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nicv</code></td>
<td>
<p>Number of inner cross validations used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TopK</code></td>
<td>
<p>The Top metabolites used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HRInner</code></td>
<td>
<p>A 3-way array in which first, second, and third dimensions correspond to Nicv, 1, and Ncv respectively. This contains estimated HR for low risk group on the out of bag data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HRTest</code></td>
<td>
<p>A matrix of survival information for the test dataset based on the out of bag data. It has three columns representing the estimated HR, the 95% lower confidence interval and the 95% upper confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Weight</code></td>
<td>
<p>A matrix with columns equals number of TopK metabolites and rows Ncv. Note that Weights are estimated as colMeans of coefficients matrix return from the inner cross validations.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Olajumoke Evangelina Owokotomo, <a href="mailto:olajumoke.owokotomo@uhasselt.be">olajumoke.owokotomo@uhasselt.be</a>
</p>
<p>Ziv Shkedy
</p>


<h3>See Also</h3>

<p><code>CVLasoelacox</code>,
<code>EstimateHR</code>, <code>glmnet</code>, <code>Lasoelacox</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## FIRSTLY SIMULATING A METABOLIC SURVIVAL DATA
Data = MSData(nPatients = 100, nMet = 150, Prop = 0.5)

## USING THE FUNCTION
Results = Icvlasoel(Data$Survival, Data$Censor, Data$Prognostic,
t(Data$Mdata), Fold = 3,Ncv = 5, Nicv = 7, Alpha = 1,
TopK = colnames(Data$Mdata[,80:100]), Weights = FALSE)

## NUMBER OF Outer CV
Results@Ncv
## NUMBER OF Inner CV
Results@Nicv

## HR of low risk group for the Inner CV
Results@HRInner

## HR of low risk group for the out of bag dataset
Results@HRTest

## The weight for the analysis
Results@Weight

</code></pre>


</div>