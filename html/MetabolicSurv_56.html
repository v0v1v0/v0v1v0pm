<div class="container">

<table style="width: 100%;"><tr>
<td>SurvPcaClass</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Survival PCA and Classification for metabolic data</h2>

<h3>Description</h3>

<p>The function performs principal component analysis (PCA) on Metabolomics matrix and fit Cox proportional hazard model with covariates using also the first PCA as covariates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SurvPcaClass(
  Survival,
  Mdata,
  Censor,
  Reduce = TRUE,
  Select = 150,
  Prognostic = NULL,
  Plots = FALSE,
  Quantile = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Survival</code></td>
<td>
<p>A vector of survival time with length equals to number of subjects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mdata</code></td>
<td>
<p>A large or small metabolic profile matrix. A matrix with metabolic profiles where the number of rows should be equal to the number of metabolites and number of columns should be equal to number of patients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Censor</code></td>
<td>
<p>A vector of censoring indicator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Reduce</code></td>
<td>
<p>A boolean parameter indicating if the metabolic profile matrix should be reduced, default is TRUE and larger metabolic profile matrix is reduced by supervised pca approach and first pca is extracted from the reduced matrix to be used in the classifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Select</code></td>
<td>
<p>Number of metabolites (default is 15) to be selected from supervised PCA. This is valid only if th argument Reduce=TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Prognostic</code></td>
<td>
<p>A dataframe containing possible prognostic(s) factor and/or treatment effect to be used in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Plots</code></td>
<td>
<p>A boolean parameter indicating if the plots should be shown. Default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Quantile</code></td>
<td>
<p>The cut off value for the classifier, default is the median cutoff</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can also be used to perform the grid analysis where the grid will be several quantile values and default is 0.5 which is the median cut-off. This function can handle single and multiple metabolites. For larger Metabolomics matrix, this function will reduce larger Metabolomics matrix to smaller version using supervised pca approach and this is by default done and can be control by using the argument Reduce. Other prognostic factors can be included to the model.
</p>


<h3>Value</h3>

<p>A object of class SurvPca is returned with the following values
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Survfit</code></td>
<td>
<p>The cox proportional regression result using the first PCA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Riskscores</code></td>
<td>
<p>A vector of risk scores which is equal to the number of patents.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Riskgroup</code></td>
<td>
<p>The classification of the subjects based on the PCA into low or high risk group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc1</code></td>
<td>
<p>The First PCA scores based on either the reduced Metabolite matrix or the full matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>KMplot</code></td>
<td>
<p>The Kaplan-Meier survival plot of the riskgroup</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SurvBPlot</code></td>
<td>
<p>The distribution of the survival in the riskgroup</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Riskpca</code></td>
<td>
<p>The plot of  Risk scores vs first PCA</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Olajumoke Evangelina Owokotomo, <a href="mailto:olajumoke.owokotomo@uhasselt.be">olajumoke.owokotomo@uhasselt.be</a>
</p>
<p>Ziv Shkedy
</p>


<h3>References</h3>

<p>Bair E, Hastie T, Debashis P, Tibshirani R (2006).
“Prediction by supervised principal components.”
<em>American Statistics Association,</em>, <b>101</b>(473), 119–137.
</p>


<h3>See Also</h3>

<p><code>coxph</code>,
<code>EstimateHR</code>, <code>princomp</code>,
<code>SurvPlsClass</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## FIRSTLY SIMULATING A METABOLIC SURVIVAL DATA
Data = MSData(nPatients = 100, nMet = 150, Prop = 0.5)

## USING THE FUNCTION
Result = SurvPcaClass(Survival=Data$Survival, Mdata=t(Data$Mdata),
Censor=Data$Censor, Reduce = FALSE, Select = 150,
Prognostic = Data$Prognostic, Plots = FALSE, Quantile = 0.5)

## GETTING THE SURVIVAL REGRESSION OUTPUT
Result$SurvFit

## GETTING THE RISKSCORES
Result$Riskscores

### GETTING THE RISKGROUP
Result$Riskgroup

### OBTAINING THE FIRST PRINCIPAL COMPONENT SCORES
Result$pc1
</code></pre>


</div>