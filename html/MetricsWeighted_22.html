<div class="container">

<table style="width: 100%;"><tr>
<td>performance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Performance</h2>

<h3>Description</h3>

<p>Applies one or more metrics to a <code>data.frame</code> containing columns with
actual and predicted values as well as an optional column with case weights.
The results are returned as a <code>data.frame</code> and can be used in a pipe.
</p>


<h3>Usage</h3>

<pre><code class="language-R">performance(
  data,
  actual,
  predicted,
  w = NULL,
  metrics = rmse,
  key = "metric",
  value = "value",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> with columns <code>actual</code>, <code>predicted</code>, and optionally <code>w</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>actual</code></td>
<td>
<p>The column name in <code>data</code> referring to actual values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicted</code></td>
<td>
<p>The column name in <code>data</code> referring to predicted values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>The optional column name in <code>data</code> referring to case weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>Either a function or a named list of functions.
Each function represents a metric and has four arguments:
</p>

<ul>
<li> <p><code>observed</code>,
</p>
</li>
<li> <p><code>predicted</code>,
</p>
</li>
<li> <p><code style="white-space: pre;">⁠case weights⁠</code>, and
</p>
</li>
<li> <p><code>...</code>.
</p>
</li>
</ul>
<p>If not a named list but a single function, the name of the function is guessed by
<code>deparse(substitute(...))</code>, which would not provide the actual name of the
function if called within <code>lapply()</code> etc. In such cases, you can pass a named
list with one element, e.g., <code>list(rmse = rmse)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>Name of the resulting column containing the name of the metric.
Defaults to "metric".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>Name of the resulting column with the value of the metric.
Defaults to "value".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to the metric functions. E.g., if the metric
is <code>r_squared()</code>, you could pass the relevant deviance function as additional
argument (see examples).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Data frame with one row per metric and two columns: <code>key</code> and <code>value</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">ir &lt;- iris
fit_num &lt;- lm(Sepal.Length ~ ., data = ir)
ir$fitted &lt;- fit_num$fitted
performance(ir, "Sepal.Length", "fitted")
performance(ir, "Sepal.Length", "fitted", metrics = r_squared)
performance(
  ir,
  actual = "Sepal.Length",
  predicted = "fitted",
  metrics = c(`R-squared` = r_squared, rmse = rmse)
)
performance(
  ir,
  actual = "Sepal.Length",
  predicted = "fitted",
  metrics = r_squared,
  deviance_function = deviance_gamma
)
performance(
  ir,
  actual = "Sepal.Length",
  predicted = "fitted",
  metrics = r_squared,
  deviance_function = deviance_tweedie,
  tweedie_p = 2
)
</code></pre>


</div>