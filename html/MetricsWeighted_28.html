<div class="container">

<table style="width: 100%;"><tr>
<td>rsquared</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generalized R-Squared</h2>

<h3>Description</h3>

<p>Returns (weighted) proportion of deviance explained, see reference below.
For the mean-squared error as deviance, this equals the usual (weighted) R-squared.
The higher, the better.
</p>
<p>The convenience functions
</p>

<ul>
<li> <p><code>r_squared_poisson()</code>,
</p>
</li>
<li> <p><code>r_squared_gamma()</code>, and
</p>
</li>
<li> <p><code>r_squared_bernoulli()</code>
</p>
</li>
</ul>
<p>call the function <code>r_squared(..., deviance_function = fun)</code> with the right deviance
function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">r_squared(
  actual,
  predicted,
  w = NULL,
  deviance_function = mse,
  reference_mean = NULL,
  ...
)

r_squared_poisson(actual, predicted, w = NULL, reference_mean = NULL, ...)

r_squared_gamma(actual, predicted, w = NULL, reference_mean = NULL, ...)

r_squared_bernoulli(actual, predicted, w = NULL, reference_mean = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>actual</code></td>
<td>
<p>Observed values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicted</code></td>
<td>
<p>Predicted values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>Optional case weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviance_function</code></td>
<td>
<p>A positive (deviance) function taking four arguments:
"actual", "predicted", "w" and "...". The default is <code>mse()</code>, which equals
the average normal deviance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_mean</code></td>
<td>
<p>An optional reference mean used to derive the null deviance.
Recommended in out-of-sample applications.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>weighted_mean()</code> and <code>deviance_function()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The deviance gain is calculated regarding the null model derived from the actual
values. While fine for in-sample considerations, this is only an approximation
for out-of-sample considerations. There, it is recommended to calculate null
deviance regarding the in-sample (weighted) mean. This value can be passed by
the argument <code>reference_mean</code>.
</p>


<h3>Value</h3>

<p>A numeric vector of length one.
</p>


<h3>References</h3>

<p>Cohen, Jacob. et al. (2002). Applied Multiple Regression/Correlation Analysis for
the Behavioral Sciences (3rd ed.). Routledge. ISBN 978-0805822236.
</p>


<h3>Examples</h3>

<pre><code class="language-R">y &lt;- 1:10
pred &lt;- c(1, 1:9)
w &lt;- 1:10

r_squared(y, pred)
r_squared(y, pred, w = w)

r_squared(y, pred, w = w, deviance_function = deviance_gamma)
r_squared_gamma(y, pred, w = w)

# Poisson situation
y2 &lt;- 0:2
pred2 &lt;- c(0.1, 1, 2)
r_squared(y2, pred2, deviance_function = deviance_poisson)
r_squared_poisson(y2, pred2)

# Binary (probabilistic) classification
y3 &lt;- c(0, 0, 1, 1)
pred3 &lt;- c(0.1, 0.1, 0.9, 0.8)
r_squared_bernoulli(y3, pred3, w = 1:4)

# With respect to 'own' deviance formula
myTweedie &lt;- function(actual, predicted, w = NULL, ...) {
  deviance_tweedie(actual, predicted, w, tweedie_p = 1.5, ...)
}
r_squared(y, pred, deviance_function = myTweedie)
</code></pre>


</div>