<div class="container">

<table style="width: 100%;"><tr>
<td>convertToLongFormat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Reshaping microsimulation output into long format
</h2>

<h3>Description</h3>

<p>The function reshapes the output given by micSim or by micSimParallel into long format. In long format, the data comprises for each episode which an individual experiences one row. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">convertToLongFormat(pop,migr=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>

<p>The data frame <code>pop</code> contains the whole synthetic population considered during simulation including all events generated. For each individidual <code>pop</code> contains as many rows as the individual performed transitions during simulation.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>migr</code></td>
<td>

<p>A logical variable indicating whether the simulation model considers immigration. The default setting is "no immigration considered": <code>migr=FALSE</code>. 
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>convertToLongFormat</code> uses information from the definition of the microsimulation model. In particular, it uses <code>stateSpace</code>, <code>absTransitions</code>, <code>allTransitions</code>, <code>simHorizon</code>, and optionally <code>immigrPop</code>. (For a description of these objects see micSim.) <code>stateSpace</code>, <code>absTransitions</code>, <code>allTransitions</code>,  <code>simHorizon</code>, and <code>immigrPop</code> are globally defined, i.e., they are already part of the workspace. Thus, they do not have to be given to <code>convertToLongFormat</code> as extra input parameters.  
</p>


<h3>Value</h3>

<p>A data frame comprising the microsimulation output in long format.
</p>
<p>- <code>ID</code> is the unique numerical person identifier of an individual.
</p>
<p>- <code>birthDate</code> is the birth date of an individual.
</p>
<p>- The variables <code>Tstart</code> and <code>Tstop</code> mark the start und the ending dates of episodes.   
</p>
<p>- <code>statusEntry</code> specifies whether the entry into an episode has been observed. Value "1" marks an observed entry and "0" marks a left truncated episode.
</p>
<p>- <code>statusExit</code> specifies whether a transition between two states or right censoring completed an episode. Value "1" indicates a transition and "0" a censoring event. 
</p>
<p>- <code>OD</code> names the transition which completed an episode. Here, right censoring is marked by "cens".  
</p>
<p>- <code>ns</code> gives the number of episodes an individual has passed.
</p>
<p>- <code>Episode</code> enumerates the episodes an individual has passed.
</p>
<p>- The last columns of the data frame contain for each individual and episode the values of the state variables during that episode such as ‘sex’, ‘education’, etc. 
</p>
<p>- Birth and transition times are given as calendar dates in form of chron objects.
</p>


<h3>Author(s)</h3>

<p>Sabine Zinn
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Run microsimulation before, e.g., the complex example described on the 
# help page of the function "micSim".
## Not run: 
pop &lt;- micSim(initPop, immigrPop, transitionMatrix, absStates, initStates, initStatesProb, 
        maxAge, simHorizon, fertTr)
popLong &lt;- convertToLongFormat(pop,migr=TRUE)

## End(Not run)

</code></pre>


</div>