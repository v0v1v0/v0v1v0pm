<div class="container">

<table style="width: 100%;"><tr>
<td>identify_migrations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>identify_migrations</h2>

<h3>Description</h3>

<p>identify_migrations
</p>


<h3>Usage</h3>

<pre><code class="language-R">identify_migrations(
  segs,
  locs,
  min_res_length = 90,
  occurrence_locs = NULL,
  occurrence_times = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>segs</code></td>
<td>
<p>A vector of interval, a vector of intervals which indicate residence segments, such as detected by detect_segments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locs</code></td>
<td>
<p>A vector of Character, locations which correspond to <code>segs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_res_length</code></td>
<td>
<p>(Optional) Numeric. A vector of days indicating the minimum number of days for <code>segs</code> to quality as viable origin or destination of a migration. Default is <code>90</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>occurrence_locs</code></td>
<td>
<p>(Optional) Character. See <code>occurrence_times</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>occurrence_times</code></td>
<td>
<p>(Optional) If provided along with the matching <code>occurrence_times</code>, will try to find the optimal point in time during which the migration occurred.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>(Optional) logical. Output optional messages? Default is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble containing the detected true relocations, if any. Contains the fields: </p>

<ul>
<li>
<p><strong>from</strong> Character, the location from which the relocations started.
</p>
</li>
<li>
<p><strong>to</strong> Character, the location from which the relocations started.
</p>
</li>
<li>
<p><strong>movement_interval</strong> interval of the transitionary period, starting with the end of the prior residency and ending with the start of the new residency.
</p>
</li>
<li>
<p><strong>movement_length</strong> The duration of the transitionary period in seconds.
</p>
</li>
<li>
<p><strong>movement_midrange</strong> The midpoint of the transitionary period.
</p>
</li>
</ul>
<p>If <code>occurrence_locs</code> and <code>occurrence_times</code> were provided, find_best_split will be used to detect the optimum split time, and the following columns will be added:</p>

<ul>
<li>
<p><strong>split_time</strong>, a POSIXct which indicates the time of the optimal split. 
</p>
</li>
<li>
<p><strong>split_correctness</strong>, a numeric which as a quality measure of <code>splot_time</code> reports the split's ratio of wrongly assigned days to the correctly assigned days.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Johannes Mast <a href="mailto:Johannes.Mast@dlr.de">Johannes.Mast@dlr.de</a>, based on the algorithm by Guanghua Chi <a href="mailto:guanghua@berkeley.edu">guanghua@berkeley.edu</a>
</p>


<h3>References</h3>

<p>Chi, Guanghua, Fengyang Lin, Guangqing Chi, and Joshua Blumenstock. 2020. “A General Approach to Detecting Migration Events in Digital Trace Data.” Edited by Song Gao. PLOS ONE 15 (10): e0239408. https://doi.org/10.1371/journal.pone.0239408.
</p>


<h3>Examples</h3>

<pre><code class="language-R">trace &lt;- MigrationDetectR::example_trace
# Detect segments
segments &lt;-
  detect_segments(
      locs = trace$location,
      times = trace$timestamp,
      param_min_days = 3,
      param_prop_days = 0.06,
      param_window_size_days = 7)
 nrow(segments) # check the number of detected segments

 migrations &lt;-
 identify_migrations(
  segs = segments$segments,
  locs = segments$locs,
  min_res_length = 90,
  occurrence_locs = trace$location,
  occurrence_times = trace$timestamp
  )
  nrow(migrations) # check the number of identified migrations
  head(migrations) # check the detected migrations
</code></pre>


</div>