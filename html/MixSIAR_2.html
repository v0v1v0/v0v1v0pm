<div class="container">

<table style="width: 100%;"><tr>
<td>combine_sources</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Combine sources from a finished MixSIAR model (<em>a posteriori</em>)</h2>

<h3>Description</h3>

<p><code>combine_sources</code> aggregates the proportions from multiple sources.
Proportions are summed across posterior draws, since the source proportions
are correlated.
</p>


<h3>Usage</h3>

<pre><code class="language-R">combine_sources(jags.1, mix, source, alpha.prior = 1, groups)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>jags.1</code></td>
<td>
<p><code>rjags</code> model object, output from <code>run_model</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mix</code></td>
<td>
<p>list, output from <code>load_mix_data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>list, output from <code>load_source_data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.prior</code></td>
<td>
<p>vector with length = n.sources, Dirichlet prior on p.global (default = 1, uninformative)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>list, which sources to combine, and what names to give the new combined sources. See example.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><em>Note: Aggregating sources after running the mixing model (a posteriori)
effectively changes the prior weighting on the sources.</em> Aggregating
uneven numbers of sources will turn an 'uninformative'/generalist
prior into an informative one. Because of this, <code>combine_sources</code>
automatically generates a message describing this effect and a figure
showing the original prior, the effective/aggregated prior, and what the
'uninformative'/generalist prior would be if sources were instead grouped
before running the mixing model (a priori).
</p>


<h3>Value</h3>

<p><code>combined</code>, a list including:
</p>

<ul>
<li> <p><code>combined$post</code>: matrix, posterior draws with new source groupings
</p>
</li>
<li> <p><code>combined$source.new</code>: list, original <code>source</code> list with modified entries for <code>n.sources</code> and <code>source_names</code>
</p>
</li>
<li> <p><code>combined$groups</code>: (input) list, shows original and combined sources
</p>
</li>
<li> <p><code>combined$jags.1</code>: (input) <code>rjags</code> model object
</p>
</li>
<li> <p><code>combined$source.old</code>: (input) list of original source data
</p>
</li>
<li> <p><code>combined$mix</code>: (input) list of original mix data
</p>
</li>
<li> <p><code>combined$prior.old</code>: (input) prior vector on original sources
</p>
</li>
<li> <p><code>combined$prior.new</code>: (output) prior vector on combined sources
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>summary_stat</code> and <code>plot_intervals</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# first run mantis shrimp example
# combine 6 sources into 2 groups of interest (hard-shelled vs. soft-bodied)
#   'hard' = 'clam' + 'crab' + 'snail'           # group 1 = hard-shelled prey
#   'soft' = 'alphworm' + 'brittlestar' + 'fish' # group 2 = soft-bodied prey
combined &lt;- combine_sources(jags.1, mix, source, alpha.prior=alpha, 
                groups=list(hard=c("clam","crab","snail"), soft=c("alphworm","brittlestar","fish")))

# get posterior medians for new source groupings
apply(combined$post, 2, median)
summary_stat(combined, meanSD=FALSE, quantiles=c(.025,.5,.975), savetxt=FALSE)

## End(Not run)
</code></pre>


</div>