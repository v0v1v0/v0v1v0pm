<div class="container">

<table style="width: 100%;"><tr>
<td>model.diagnostics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Model Predictions and Diagnostics </h2>

<h3>Description</h3>

<p>Takes model object and makes predictions, runs model diagnostics, and creates graphs and tables of the results.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">model.diagnostics(model.obj = NULL, qdata.trainfn = NULL, qdata.testfn = NULL, 
folder = NULL, MODELfn = NULL, response.name = NULL, unique.rowname = NULL,
 diagnostic.flag=NULL, seed = NULL, prediction.type=NULL, MODELpredfn = NULL, 
 na.action = NULL, v.fold = 10, device.type = NULL, DIAGNOSTICfn = NULL, 
 res=NULL, jpeg.res = 72, device.width = 7,  device.height = 7, units="in", 
 pointsize=12, cex=par()$cex, req.sens, req.spec, FPC, FNC, quantiles=NULL, 
 all=TRUE, subset = NULL, weights = NULL, mtry = NULL, controls = NULL, 
 xtrafo = NULL, ytrafo = NULL, scores = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.obj</code></td>
<td>
 <p><code>R</code> model object.  The model object to use for prediction.  The model object must be of type <code>"RF"</code> (random forest), <code>"QRF"</code> (quantile random forest), or <code>"CF"</code> (conditional forest). The <code>ModelMap</code> package does not currently support <code>SGB</code> models. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qdata.trainfn</code></td>
<td>
<p>String.  The name (full path or base name with path specified by <code>folder</code>) of the training data file used for building the model (file should include columns for both response and predictor variables).  The file must be a comma-delimited file <code>*.csv</code> with column headings. <code>qdata.trainfn</code> can also be an <code>R</code> dataframe. If predictions will be made (<code>predict = TRUE</code> or <code>map=TRUE</code>) the predictor column headers must match the names of the raster layer files, or a <code>rastLUT</code> must be provided to match predictor columns to the appropriate raster and band.  If <code>qdata.trainfn = NULL</code> (the default), a GUI interface prompts user to browse to the training data file.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qdata.testfn</code></td>
<td>
<p>String.  The name (full path or base name with path specified by <code>folder</code>) of the independent data set for testing (validating) the model's predictions.  The file must be a comma-delimited file <code>".csv"</code> with column headings and the column headings must be the same as those in the training data file.  <code>qdata.testfn</code> can also be an <code>R</code> dataframe. If <code>qdata.testfn = NULL</code> (default), a GUI interface asks user if there is a test set available, then prompts user to browse to the test data file.  If no test set is desired (for example, cross-fold validation will be performed, or for RF models, Out-Of-Bag estimation, set <code>qdata.testfn = FALSE</code>. If no test set is given, and <code>qdata.testfn</code> is not set to <code>FALSE</code>, the GUI interface asks if a proportion of the data should be set aside as an independent test set.  If this is desired, the user will be prompted to specify the proportion to set aside as test data, and two new data files will be generated in the out put folder.  The new file names will be the original data file name with <code>"_train"</code> and <code>"_test"</code> appended to the end of the file names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folder</code></td>
<td>
<p> String.  The folder used for all output from predictions and/or maps.  Do not add ending slash to path string.  If <code>folder = NULL</code> (default), a GUI interface prompts user to browse to a folder.  To use the working directory, specify <code>folder = getwd()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MODELfn</code></td>
<td>
<p> String.  The file name to use to save the generated model object.  If <code>MODELfn = NULL</code> (the default), a default name is generated by pasting <code>model.type_response.type_response.name</code>. If the other output filenames are left unspecified, <code>MODELfn</code> will be used as the basic name to generate other output filenames. The filename can be the full path, or it can be the simple basename, in which case the output will be to the folder specified by <code>folder</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response.name</code></td>
<td>
<p> String.  The name of the response variable used to build the model. The <code>response.name</code> must be column name from the training/test data files. If the <code>model.obj</code> was constructed in <code>ModelMap</code> with the <code>model.build()</code> function, then the <code>model.diagnostics()</code> can extract the <code>response.name</code> from the <code>model.obj</code>. If the model was constructed outside of <code>ModelMap</code> the you may need to specify the <code>response.name</code>. In particular, if a SGB model was constructed with the aid of Elith's code, it is necessary to specify the <code>response.name</code> argument, as all models constructed with this code are given a response name of <code>"y.data"</code>. If the <code>response.name</code> argument differs from the response name in the <code>model.obj</code>, the specified argument is giver preference, and a warning generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unique.rowname</code></td>
<td>
<p> String.  The name of the unique identifier used to identify each row in the training data.  If <code>unique.rowname = NULL</code>, a GUI interface prompts user to select a variable from the list of column names from the training data file.  If <code>unique.rowname = FALSE</code>, a variable is generated of numbers from <code>1</code> to <code>nrow(qdata)</code> to index each row. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diagnostic.flag</code></td>
<td>
<p> String.  The name of a column used to identify a subset of rows in the training data or test data to 
use for model diagnostics. This column must be either a logical vector (<code>TRUE</code> and <code>FALSE</code>) or a vector of zeros ond ones (where <code>0=FALSE</code> and <code>1=TRUE</code>. If this argument is used model diagnostics that depend on predicted and observed values will be calculated from a subset of the training or test data. These include confusion matrix and threshold criteria for binary response models and the scatterplot for continuous response models. The output file of predicted and observed values will have an aditional column, indicating which rows were used in the diagnostic calculations. Note that for cross validation, the entire training dataset will be used to create cross validation predictions, but that only the predictions on the the rows indicated by <code>diagnostic.flag</code> will be used for the diagnostics. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p> Integer.  The number used to initialize randomization to build RF or SGB models.  If you want to produce the same model later, use the same seed.  If <code>seed = NULL</code> (the default), a new seed is created each run. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction.type</code></td>
<td>
<p> String. Prediction type.  <code>"TEST"</code>, <code>"CV"</code>, <code>"OOB"</code> or <code>"TRAIN"</code>.  If <code>predict = "TEST"</code>, validation predictions will be made on the test set provided by <code>qdata.testfn</code>.  If <code>predict = "CV"</code>, cross validation will be used on the training data provided by <code>qdata.trainfn</code>. If <code>model.obj</code> is a Random Forest model and <code>predict = "OOB"</code> the Out-of-Bag predictions will be calculated on the training data. If <code>model.obj</code> is a Stochastic Gradient Boosting model and <code>predict = "TRAIN"</code> the predictions will be calculated on the training data, but these predictions should be used with caution as this will lead to over optimistic estimates of model quality. A <code>*.csv</code> file of the unique id, observed, and predicted values is generated and put in the specified (or default) folder.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MODELpredfn</code></td>
<td>
<p> String.  Model validation.  A character string used to construct the output file names for the validation diagnostics, for example the prediction <code>*.csv</code> file, and the graphics <code>*.jpg</code>, <code>*.pdf</code> and <code>*.ps</code> files.  The filename can be the full path, or it can be the simple basename, in which case the output will be to the folder specified by <code>folder</code>. If <code>MODELpredfn = NULL</code> (the default), a default name is created by pasting <code>modelfn</code> and <code>"_pred"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>String.  Model validation.  Specifies the action to take if there are <code>NA</code> values in the predictor data or if there is a level or class of a categorical predictor variable in the validation test set, but not in the training data set.  By default, <code>model.daignostics()</code> will use the same <code>na.action</code> as was given to <code>model.build</code>. There are 2 options: (1) <code>na.action = "na.omit"</code> where any data point with <code>NA</code> or any new levels for any of the factored predictors is removed from the data; (2) <code>na.action = "na.roughfix"</code> where a missing categorical predictor is replaced with the most common category, and a missing continuous predictor is replaced with the median. Note: data points with missing response values will always be omitted.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v.fold</code></td>
<td>
<p> Integer (or logical <code>FALSE</code>).  Model validation.  The number of cross validation folds to use when making validation predictions on the training data.  Only used if  <code>prediction.type = "CV"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device.type</code></td>
<td>
<p> String or vector of strings.  Model validation.  One or more device types for graphical output from model validation diagnostics. 
</p>
<p>Current choices:
</p>

<table>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"default"</code> </td>
<td style="text-align: left;"> default graphics device</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"jpeg"</code> </td>
<td style="text-align: left;"> *.jpg files</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"none"</code> </td>
<td style="text-align: left;"> no graphics device generated</td>
</tr>
<tr>
<td style="text-align: left;">	
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"pdf"</code> </td>
<td style="text-align: left;"> *.pdf files</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"png"</code> </td>
<td style="text-align: left;"> *.png files</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"postscript"</code> </td>
<td style="text-align: left;"> *.ps files</td>
</tr>
<tr>
<td style="text-align: left;">
	  </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> <code>"tiff"</code> </td>
<td style="text-align: left;"> *.tif files </td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DIAGNOSTICfn</code></td>
<td>
<p> String.  Model validation.  Name used as base to create names for output files from model validation diagnostics.  The filename can be the full path, or it can be the simple basename, in which case the output will be to the folder specified by <code>folder</code>.  Defaults to <code>DIAGNOSTICfn = MODELfn</code> followed by the appropriate suffixes (i.e. <code>".csv"</code>, <code>".jpg"</code>, etc...). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p> Integer.  Model validation.  Pixels per inch for jpeg, png, and tiff plots.  The default is 72dpi, good for on screen viewing. For printing, suggested setting is 300dpi. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jpeg.res</code></td>
<td>
<p> Integer.  Model validation.  Deprecated. Ignored unless <code>res</code> not provided. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device.width</code></td>
<td>
<p> Integer.  Model validation.  The device width for diagnostic plots in inches. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device.height</code></td>
<td>
<p> Integer.  Model validation.  The device height for diagnostic plots in inches. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p> Model validation.  The units in which <code>device.height</code> and <code>device.width</code> are given. Can be <code>"px"</code> (pixels), <code>"in"</code> (inches, the default), <code>"cm"</code> or <code>"mm"</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pointsize</code></td>
<td>
<p> Integer.  Model validation.  The default pointsize of plotted text, interpreted as big points (1/72 inch) at <code>res</code> ppi</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p> Integer.  Model validation.  The cex for diagnostic plots. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>req.sens</code></td>
<td>
<p> Numeric.  Model validation.  The required sensitivity for threshold optimization for binary response model evaluation. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>req.spec</code></td>
<td>
<p> Numeric.  Model validation.  The required specificity for threshold optimization for binary response model evaluation. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FPC</code></td>
<td>
<p> Numeric.  Model validation.  The False Positive Cost for threshold optimization for binary response model evaluation. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FNC</code></td>
<td>
<p> Numeric.  Model validation.  The False Negative Cost for threshold optimization for binary response model evaluation. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantiles</code></td>
<td>
<p> Numeric Vector.  QRF models.  The quantiles to predict. A numeric vector with values between zero and one. If model was built without specifying quantiles, quantile importance can not be calculated, but <code>quantiles</code> can still be used to specify prediction quantiles. If model was built with quantiles specified, then the model quantiles will be used for  importance graph.  If quantiles are not specified for model building or diagnostics, prediction quantiles will default to <code>quantiles=c(0.1,0.5,0.9)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p> Logical.  QRF models. <code>all=TRUE</code> uses all observations for prediction. <code>all=FALSE</code> uses only a certain number of observations per node for prediction (set with argument obs). Unlike in the quantredForest package itself, the default in ModelMap is <code>all=TRUE</code>, to more closely parallel ordinary random forest models. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>CF models. NOT SUPPORTED. Only needed for <code>prediction.type="CV"</code> for CF models. An optional vector specifying a subset of observations to be used in the fitting process. Note: <code>subset</code> is not yet supported for cross validation diagnostics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>CF models. NOT SUPPORTED. Only needed for <code>prediction.type="CV"</code> for CF models. An optional vector of weights to be used in the fitting process. Non-negative integer valued weights are allowed as well as non-negative real weights. Observations are sampled (with or without replacement) according to probabilities <code>weights/sum(weights)</code>. The fraction of observations to be sampled (without replacement) is computed based on the sum of the weights if all weights are integer-valued and based on the number of weights greater zero else. Alternatively, <code>weights</code> can be a double matrix defining case weights for all <code>ncol(weights)</code> trees in the forest directly. This requires more storage but gives the user more control. Note: <code>weights</code> is not yet supported for cross validation diagnostics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mtry</code></td>
<td>
<p> Integer. Only needed for <code>prediction.type="CV"</code> for CF models (for RF and QRF models mtry will be determined from the model object).  Number of variables to try at each node of Random Forest trees. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>controls</code></td>
<td>
<p>CF models. Only needed for <code>prediction.type="CV"</code> for CF models. An object of class <code>ForestControl-class</code>, which can be obtained using cforest_control (and its convenience interfaces cforest_unbiased and cforest_classical). If <code>controls</code> is specified, then stand alone arguments <code>mtry</code> and <code>ntree</code> ignored and these parameters must be specified as part of the <code>controls</code> argument. If <code>controls</code> not specified, <code>model.build</code> defaults to <code>cforest_unbiased(mtry=mtry, ntree=ntree)</code> with the values of <code>mtry</code> and <code>ntree</code> specified by the stand alone arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtrafo</code></td>
<td>
<p>CF models. Only needed for <code>prediction.type="CV"</code> for CF models. A function to be applied to all input variables. By default, the <code>ptrafo</code> function from the <code>party</code> package is applied. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ytrafo</code></td>
<td>
<p>CF models. Only needed for <code>prediction.type="CV"</code> for CF models. A function to be applied to all response variables. By default, the <code>ptrafo</code> function from the <code>party</code> package is applied. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scores</code></td>
<td>
<p>CF models. NOT SUPPORTED. Only needed for <code>prediction.type="CV"</code> for CF models. An optional named list of scores to be attached to ordered factors. Note: <code>scores</code> is not yet supported for cross validation diagnostics.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>model.diagnostics()</code>takes model object and makes predictions, runs model diagnostics, and creates graphs and tables of the results.
</p>
<p><code>model.diagnostics()</code> can be run in a traditional R command mode, where all arguments are specified in the function call.  However it can also be used in a full push button mode, where you type in the simple command <code>model.map()</code>, and GUI pop up windows will ask questions about the type of model, the file locations of the data, etc...
</p>
<p>When running <code>model.map()</code> on non-Windows platforms, file names and folders need to be specified in the argument list, but other pushbutton selections are handled by the <code>select.list()</code> function, which is platform independent. 
</p>
<p>Diagnostic predictions are made my one of four methods, and a text file is generated consisting of three columns: Observation ID, observed values and predicted values. If <code>predition.type = "CV")</code> an additional column indicates which cross-fold each observation fell into. If the models response type is categorical then in addition a column giving the category predicted by majority vote, there are also categories for each possible response category giving the proportion of trees that predicted that category.
</p>
<p>A variable importance graph is made. If <code>response.type = "categorical"</code>, category specific graphs are generated for variable importance. These show how much the model accuracy for each category is affected when the values of each predictor variable is randomly permuted.
</p>
<p>The package <code>corrplot</code> is used to generate a plot of correlation between predictor variables. If there are highly correlated predictor variables, then the variable importances of <code>"RF"</code> and <code>"QRF"</code> models need to be interpreted with care, and users may want to consider looking at the conditional variable importances available for <code>"CF"</code> models produced by the <code>party</code> package.
</p>
<p>If <code>model.type = "RF"</code>, the OOB error is plotted as a function of number of trees in the model. If <code>response.type = "binary"</code> or If <code>response.type = "categorical"</code> category specific graphs are generated for  OOB error as a function of number of trees.
</p>
<p>If <code>response.type = "binary"</code>, a summary graph is made using the <code>PresenceAbsence</code> package and a <code>*.csv</code> spreadsheets are created of optimized thresholds by several methods with their associated error statistics, and predicted prevalence.
</p>
<p>If <code>response.type = "continuous"</code> a scatterplot of observed vs.  predicted is created with a simple linear regression line.  The graph is labeled with slope and intercept of this line as well as Pearson's and Spearman's correlation coefficients.
</p>
<p>If <code>response.type = "categorical"</code>, a confusion matrix is generated, that includes erros of ommission and comission, as well as Kappa, Percent Correctly Classified (PCC) and the Multicategorical Area Under the Curve (MAUC) as defined by Hand and Till (2001) and calculated by the package <code>HandTill2001</code>.
</p>


<h3>Value</h3>

<p>The function will return a dataframe of the row ID, and the Observed and predicted values. 
</p>
<p>For Binary response models the predicted probability of presence is returned. 
</p>
<p>For Categorical Response models the predicted category (by majority vote) is returned as well as a column for each category giving the probability of that category. If necessary, <code>make.names</code> is applied to the categories to create valid column names.
</p>
<p>For Continuous response models the predicted value is returned. 
</p>
<p>If <code>prediction.type = "CV"</code> the dataframe also includes a column indicating which cross-validation fold each datapoint was in. 
</p>


<h3>Note</h3>

<p>Importance currently unavailable for QRF models.
</p>
<p>If you are running cross validation diagnostics on a CF model, the model parameters will NOT automatically be passed to <code>model.diagnostics()</code>. For cross validation, it is the users responsibility to be certain that the CF arguments are the same in <code>model.build()</code> and <code>model.diagnostics()</code>.
</p>
<p>Also, for some CF model parameters (<code>subset</code>, <code>weights</code>, and <code>scores</code>) <code>ModelMap</code> only provides OOB and independent test set diagnostics, and does not support cross validation diagnostics.
</p>


<h3>Author(s)</h3>

<p> Elizabeth Freeman and Tracey Frescino </p>


<h3>References</h3>

 
<p>Breiman, L. (2001) Random Forests. Machine Learning, 45:5-32.
</p>
<p>Elith, J., Leathwick, J. R. and Hastie, T. (2008). A working guide to boosted regression trees. Journal of Animal Ecology. 77:802-813.
</p>
<p>Hand, D. J., &amp; Till, R. J. (2001). A simple generalisation of the area under the ROC curve for multiple class classification problems. Machine Learning, 45(2), 171-186.
</p>
<p>Liaw, A. and  Wiener, M. (2002). Classification and Regression by randomForest. R News 2(3), 18–22.
</p>
<p>Ridgeway, G., (1999). The state of boosting. Comp. Sci. Stat. 31:172-181
</p>


<h3>See Also</h3>

 <p><code>get.test</code>, <code>model.build</code>, <code>model.mapmake</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

###########################################################################
############################# Run this set up code: #######################
###########################################################################

# set seed:
seed=38

# Define training and test files:

qdata.trainfn = system.file("extdata", "helpexamples","DATATRAIN.csv", package = "ModelMap")
qdata.testfn = system.file("extdata", "helpexamples","DATATEST.csv", package = "ModelMap")

# Define folder for all output:
folder=getwd()	

#identifier for individual training and test data points

unique.rowname="ID"


###########################################################################
############## Pick one of the following sets of definitions: #############
###########################################################################


########## Continuous Response, Continuous Predictors ############

#file name to store model:
MODELfn="RF_Bio_TC"				

#predictors:
predList=c("TCB","TCG","TCW")	

#define which predictors are categorical:
predFactor=FALSE	

# Response name and type:
response.name="BIO"
response.type="continuous"


########## binary Response, Continuous Predictors ############

#file name to store model:
MODELfn="RF_CONIFTYP_TC"				

#predictors:
predList=c("TCB","TCG","TCW")		

#define which predictors are categorical:
predFactor=FALSE

# Response name and type:
response.name="CONIFTYP"

# This variable is 1 if a conifer or mixed conifer type is present, 
# otherwise 0.

response.type="binary"


########## Continuous Response, Categorical Predictors ############

# In this example, NLCD is a categorical predictor.
#
# You must decide what you want to happen if there are categories
# present in the data to be predicted (either the validation/test set
# or in the image file) that were not present in the original training data.
# Choices:
#       na.action =  "na.omit"
#                    Any validation datapoint or image pixel with a value for any
#                    categorical predictor not found in the training data will be
#                    returned as NA.
#       na.action =  "na.roughfix"
#                    Any validation datapoint or image pixel with a value for any
#                    categorical predictor not found in the training data will have
#                    the most common category for that predictor substituted,
#                    and the a prediction will be made.

# You must also let R know which of the predictors are categorical, in other
# words, which ones R needs to treat as factors.
# This vector must be a subset of the predictors given in predList

#file name to store model:
MODELfn="RF_BIO_TCandNLCD"			

#predictors:
predList=c("TCB","TCG","TCW","NLCD")

#define which predictors are categorical:
predFactor=c("NLCD")

# Response name and type:
response.name="BIO"
response.type="continuous"



###########################################################################
########################### build model: ##################################
###########################################################################


### create model ###

model.obj = model.build( model.type="RF",
                       qdata.trainfn=qdata.trainfn,
                       folder=folder,		
                       unique.rowname=unique.rowname,	
                       MODELfn=MODELfn,
                       predList=predList,
                       predFactor=predFactor,
                       response.name=response.name,
                       response.type=response.type,
                       seed=seed,
                       na.action="na.roughfix"
)

###########################################################################
#### Then Run this code make validation predictions and diagnostics: ######
###########################################################################


### for Out-of-Bag predictions ###

MODELpredfn&lt;-paste(MODELfn,"_OOB",sep="")
PRED.OOB&lt;-model.diagnostics( 	model.obj=model.obj,
				qdata.trainfn=qdata.trainfn,
                   		folder=folder,		
                  	 	unique.rowname=unique.rowname,
                	# Model Validation Arguments
                   		prediction.type="OOB",
                   		MODELpredfn=MODELpredfn,
                   		device.type=c("default","jpeg","pdf"),	
                   		na.action="na.roughfix"
)
PRED.OOB

### for Cross-Validation predictions ###

#MODELpredfn&lt;-paste(MODELfn,"_CV",sep="")
#PRED.CV&lt;-model.diagnostics( 	model.obj=model.obj,
#                   		qdata.trainfn=qdata.trainfn,
#                   		folder=folder,		
#                   		unique.rowname=unique.rowname,
#                   		seed=seed,
#                	# Model Validation Arguments
#                   		prediction.type="CV",
#                   		MODELpredfn=MODELpredfn,
#                   		device.type=c("default","jpeg","pdf"),	
#                   		v.fold=10,
#                   		na.action="na.roughfix"
#)
#PRED.CV

### for Independent Test Set predictions ###

#MODELpredfn&lt;-paste(MODELfn,"_TEST",sep="")
#PRED.TEST&lt;-model.diagnostics( 	model.obj=model.obj,
#                   		qdata.testfn=qdata.testfn,
#                   		folder=folder,		
#                   		unique.rowname=unique.rowname,
#                	# Model Validation Arguments
#                   		prediction.type="TEST",
#                   		MODELpredfn=MODELpredfn,
#                   		device.type=c("default","jpeg","pdf"),	
#                   		na.action="na.roughfix"
#)
#PRED.TEST
)


## End(Not run) # end dontrun

</code></pre>


</div>