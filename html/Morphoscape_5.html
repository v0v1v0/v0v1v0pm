<div class="container">

<table style="width: 100%;"><tr>
<td>calc_all_lscps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculate adaptive landscapes for a matrix of weights
</h2>

<h3>Description</h3>

<p><code>calc_all_lscps()</code> calculates adaptive landscapes from a set of kriged surfaces of functional characteristics and sets of weights for those characteristics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc_all_lscps(kr_data, grid_weights, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>kr_data</code></td>
<td>

<p>a <code>kriged_surfaces</code> object; the output of a call to <code>krige_surf</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_weights</code></td>
<td>

<p>a <code>grid_weights</code> object; the output of a call to <code>generate_weights</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>

<p>the path of a file to save the resulting output object, which may be quite large. The file path should contain an .rds or .rdata extension, which will be saved using <code>saveRDS</code> or <code>save</code>, respectively. See Details on how to load these files after saving them.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>calc_all_lscps()</code> computes a combined adaptive landscape for each of the supplied sets of weights. The optimal landscape overall or for certain subsets of the sample data can be found using <code>calcGrpWprime</code> or <code>calcWprimeBy</code>. <code>calc_lscp</code> can be used to extract the surface of the weighted functional characteristics for each set of weights (see Examples).
</p>
<p>Because the resulting objects are so large, it can be a good idea to save them after creation, which can be done automatically using the <code>file</code> argument. If the supplied file extension is <code>.rds</code>, <code>saveRDS</code> will be used to save the object to the supplied file path, and the file can be loaded using <code>readRDS</code>. If the supplied file extension is <code>.RData</code>, <code>save</code> will be used to save the object to the supplied file path, and the file can be loaded using <code>load</code>.
</p>


<h3>Value</h3>

<p>An <code>all_lscps</code> object containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>dataframe</code></td>
<td>
<p>a list of the <code>grid</code> and <code>new_data</code> data frames stored in <code>kr_data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wtd_lscps</code></td>
<td>
<p>a list containing the weightred fitness values for each set of weights for the <code>grid</code> and <code>new_data</code> datasets. These are stored in matrices with a row for each data point in <code>grid</code> and <code>new_data</code> and a column for each set of weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_weights</code></td>
<td>
<p>the <code>grid_weights</code> object supplied to <code>grid_weights</code>.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>calc_lscp</code> for computing a single weighted landscape or extracting the weighted surface of functional characteristics for a single set of weights.
</p>
<p><code>generate_weights</code> for generating the required matrix of weights.
</p>
<p><code>calcGrpWprime</code> and <code>calcWprimeBy</code> for finding optimal sets of weights and adaptive landscapes for subgroups.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("warps")
data("turtles")

warps_fnc &lt;- as_fnc_df(warps, 
                       func.names = c("hydro", "fea"))

kr_surf &lt;- krige_surf(warps_fnc, new_data = turtles)

grid_weights &lt;- generate_weights(n = 20, data = kr_surf)

all_lscps &lt;- calc_all_lscps(kr_surf,
                            grid_weights = grid_weights)
all_lscps

# Extract the weighted surface for a single set
# of weights (here, the 6th set of weights)

grid_weights[6,]

wtd_lscp_6 &lt;- calc_lscp(all_lscps, i = 6)
wtd_lscp_6

# This aligns with the weighted fitness value:
mean(all_lscps$wtd_lscps$new_data[,6])
</code></pre>


</div>