<div class="container">

<table style="width: 100%;"><tr>
<td>DoubleGap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit the DoubleGap Life Expectancy Forecasting Model</h2>

<h3>Description</h3>

<p>Fit a DoubleGap model for forecasting life expectancy.
The method combines separate forecasts to obtain joint male and female 
life expectancies that are coherent with a best-practice trend. See the entire 
description and mathematical formulation of the model in 
<a href="https://doi.org/10.1016/j.insmatheco.2017.09.011">Pascariu et. al (2017)</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DoubleGap(DF, DM, age, country, years, arima.order = NULL, drift = NULL,
  tau = NULL, A = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DF</code></td>
<td>
<p>data.frame containing life expectancy records for females. 
The table must contain the following 4 columns: country, year, age, ex.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DM</code></td>
<td>
<p>data.frame containing life expectancy records for males. 
The table must have the same format and dimensions as <code>DF</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>Indicate the age for which the model to be fitted. 
Assuming <code>DF</code> and <code>DM</code> contain recods for different ages, this 
argument it is used to subset the data. If you want to fit the model for age 0, 
add age = 0. Type: scalar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country</code></td>
<td>
<p>Indicate for which contry you want to fit the model. The country
name or code must exist in <code>DF</code> and <code>DM</code>.
Type: character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>Period of time to be used. Type: numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arima.order</code></td>
<td>
<p>A specification of the the ARIMA model to be used in 
fitting the best-practice gap. The ARIMA order is country specific.
The three integer components (p, d, q) are the AR order, 
the degree of differencing, and the MA order. Format: numerical vector of length 3.
If <code>arima.order = NULL</code> the function conducts a search over possible models 
according to AIC. See <code>auto.arima</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drift</code></td>
<td>
<p>Indicate whether the ARIMA model should include a linear drift 
term or not. Type: logical value. If <code>drift = NULL</code>, it will be estimate 
automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>The level of female life expectancy at which the sex-gap is 
expected to stop widening and to start narrowing. If <code>NULL</code> 
then the model will run an algorithm to find it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A</code></td>
<td>
<p>The level of female life expectancy where we assume no further 
change in the sex-gap. If <code>NULL</code> the model will estimate it.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The output is of <code>"DoubleGap"</code> class with the components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>List with arguments provided in input. Saved for convenience.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>Short information about the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>Estimated coefficients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitted.values</code></td>
<td>
<p>Fitted values of the selected model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed.values</code></td>
<td>
<p>Country specific observed values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.parts</code></td>
<td>
<p>Object containing detailed results of the fitted model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>Deviance residuals.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Marius D. Pascariu
</p>


<h3>References</h3>

<p>Pascariu M.D., Canudas-Romo V. and Vaupel W.J. 2017. 
<a href="https://doi.org/10.1016/j.insmatheco.2017.09.011">
The double-gap life expectancy forecasting model.</a>
Insurance: Mathematics and Economics Volume 78, January 2018, Pages 339-350.
</p>


<h3>See Also</h3>

<p><code>predict.DoubleGap</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Input data ------------------------------------
# Collection of life expectancies for female populations
exF &lt;- MortalityGaps.data$exF
# Life expectancy for male populations
exM &lt;- MortalityGaps.data$exM

# Example 1 ----------------------------------------------
# Fit DG model at age 0 for Australia using data from 1950 to 2014
M0 &lt;- DoubleGap(DF = exF,
                DM = exM,
                age = 0,
                country = "AUS",
                years = 1950:2014)
M0
summary(M0)
ls(M0)

# Forecast life expectancy in Australia until 2030
P0 &lt;- predict(M0, h = 16)
P0
# Plot the results
plot(P0)

## Not run: 
# Example 2 ----------------------------------------------
# Fit DG model at age 0 for Sweden. Provide details about models.
# Reproduce published results in the article.
M1 &lt;- DoubleGap(DF = exF, 
                DM = exM, 
                age = 0, 
                country = "SWE", 
                years = 1950:2014, 
                arima.order = c(2, 1, 1), 
                drift = TRUE, 
                tau = 75, 
                A = 86)
summary(M1)
# Predict model 
P1 &lt;- predict(M1, h = 36)
plot(P1)

# Example 3 ----------------------------------------------
# Fit DG model for USA at age 65.
M2 &lt;- DoubleGap(DF = exF, 
                DM = exM, 
                age = 65, 
                country = "USA", 
                years = 1950:2014, 
                arima.order = c(0, 1, 0), 
                drift = FALSE, 
                tau = 15, 
                A = 24)
summary(M2)
# Predict model 
P2 &lt;- predict(M2, h = 36)
plot(P2)

## End(Not run)
</code></pre>


</div>