<div class="container">

<table style="width: 100%;"><tr>
<td>causalmpt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Causal Mplus Trees</h2>

<h3>Description</h3>

<p>Uses M<em>plus</em> Trees to match on structural equation model parameters in matching subsample.
Then estimates Conditional Average Treatment Effects (CATEs) in holdout estimation subsample.
</p>


<h3>Usage</h3>

<pre><code class="language-R">causalmpt(
  script,
  data,
  rPartFormula,
  group = ~id,
  treat,
  outcome,
  est.samp = 0.2,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>script</code></td>
<td>
<p>An <code>MplusAutomation</code> script file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Dataset that is specified in the script</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rPartFormula</code></td>
<td>
<p>Formula of the form ~ variable names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>id variable. If not specified an id variable is created for each row</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>Treatment variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>Univariate outcome of interest (dependent variable in mean comparison tests)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.samp</code></td>
<td>
<p>Proportion of sample to be used as holdout sample (estimation subsample)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to <code>MplusTrees</code> for building Mplus Tree</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See documentation for <code>MplusTrees()</code> for further information on tree building process.
Takes terminal nodes from Mplus Tree and considers them "matched". Splits estimation subsample into
groups defined by covariate pattern in terminal nodes from Mplus Tree. Performs t tests in each group
with <code>treat</code> as independent variable and <code>outcome</code> as dependent variable to estimate CATEs.
Also performs ANOVA to determine if treatment effect differs by group (interaction).
</p>


<h3>Value</h3>

<p>An object of class '<code>causalmpt</code>'. Tree structure drawn from <code>MplusTrees()</code>. CATEs
estimated in estimation (holdout) subsample. Provides results of t tests to estimate CATEs in each
group and ANOVA to examine group differences in treatment effect.
</p>


<h3>Author(s)</h3>

<p>Sarfaraz Serang
</p>


<h3>References</h3>

<p>Serang, S., &amp; Sears, J. (2021). Tree-based matching on structural equation model
parameters. Behavioral Data Science, 1, 31-53.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(lavaan)

script = mplusObject(
   TITLE = "Causal Mplus Trees Example",
   MODEL = "f1 BY x1-x3;",
   usevariables = c('x1','x2','x3'),
   rdata = HolzingerSwineford1939)

fit.cmpt = causalmpt(script, HolzingerSwineford1939, group=~id,
   rPartFormula=~school+grade,
   control=rpart.control(minsplit=100, minbucket=100, cp=.01),
   treat="sex", outcome="x4")
fit.cmpt

## End(Not run)
</code></pre>


</div>