<div class="container">

<table style="width: 100%;"><tr>
<td>balance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Balance checking for causal mediation analysis in multisite trials</h2>

<h3>Description</h3>

<p>This function is used to check if, within a treatment group, the estimated nonresponse weight balances the distribution of the observed covariates between the respondents and the nonrespondents, or if the estimated RMPW weight balances the distribution of the observed covariates between those whose mediator takes value 1 and those whose mediator takes value 0.
</p>


<h3>Usage</h3>

<pre><code class="language-R">balance(data, y, treatment, mediator, response, XR1, XR0, XM1, XM0, X, site)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data set for analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The name of the outcome variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>The name of the treatment variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>The name of the mediator variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>The name of the response variable (string), which is equal to 1 if the individual responded and 0 otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XR1</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the response under the treatment condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XR0</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the response under the control condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XM1</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the mediator under the treatment condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XM0</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the mediator under the control condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A vector of variable names (string) of all the pretreatment covariates to be checked balance for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site</code></td>
<td>
<p>The variable name for the site ID (string).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of tables containing the balance checking results for the response before weighting ($balance.R$balance1 under the treatment condition and $balance.R$balance0 under the control condition) and after weighting ($balance.R$balance1.adj under the treatment condition and $balance.R$balance0.adj under the control condition); and the balance checking results for the mediator before weighting ($balance.M$balance1 under the treatment condition and $balance.M$balance0 under the control condition) and after weighting ($balance.M$balance1.adj under the treatment condition and $balance.M$balance0.adj under the control condition). It also contains a set of balance checking plots corresponding to the tables.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>balance.mean</code></td>
<td>
<p>Population average of standardized bias. The standardized bias is calculated by dividing the unweighted (before weighting) or weighted (after weighting) mean difference between response or mediator levels in each covariate by the standard deviation of the covariate </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance.sd</code></td>
<td>
<p>Between-site standard deviation of standardized bias.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance.lower</code></td>
<td>
<p>Lower bound of the 95% plausible value range of the site-specific standardized bias.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance.upper</code></td>
<td>
<p>Upper bound of the 95% plausible value range of the site-specific standardized bias.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Xu Qin, Guanglei Hong, Jonah Deutsch, and Edward Bein
</p>


<h3>References</h3>

<p>Qin, X., Hong, G., Deutsch, J., &amp; Bein, E. (2019). Multisite causal mediation analysis in the presence of complex sample and survey designs and non-random non-response. Journal of the Royal Statistical Society: Series A (Statistics in Society), 182(4), 1343-1370. doi: <a href="https://doi.org/10.1111/rssa.12446">10.1111/rssa.12446</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(sim.weights)

balance(data = sim.weights, y = "y", treatment = "tr", mediator = "me", response = "R",
    XR1 = c("x1", "x2", "x3"), XR0 = c("x1", "x2", "x3"), XM1 = c("x1", "x2", "x3"),
    XM0 = c("x1", "x2", "x3"), X = c("x1", "x2", "x3"), site = "site")
</code></pre>


</div>