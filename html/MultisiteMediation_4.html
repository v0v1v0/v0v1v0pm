<div class="container">

<table style="width: 100%;"><tr>
<td>msmediate.weights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Causal mediation analysis in multisite trials in the presence of complex sample and survey designs and non-random nonresponse</h2>

<h3>Description</h3>

<p>This function is used to estimate both the population average and between-site variance of natural direct effect, natural indirect effect, pure indirect effect, and treatment-by-mediator interaction effect. 
It incorporates a sample weight to adjust for complex sample and survey designs and employs an estimated nonresponse weight to account for non-random nonresponse.
</p>


<h3>Usage</h3>

<pre><code class="language-R">msmediate.weights(
  data,
  y,
  treatment,
  mediator,
  response,
  XR1,
  XR0,
  XM1,
  XM0,
  site,
  sample.weight
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data set for analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The name of the outcome variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>The name of the treatment variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>The name of the mediator variable (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>The name of the response variable (string), which is equal to 1 if the individual responded and 0 otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XR1</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the response under the treatment condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XR0</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the response under the control condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XM1</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the mediator under the treatment condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XM0</code></td>
<td>
<p>A vector of variable names (string) of pretreatment covariates in the propensity score model for the mediator under the control condition. For now, the multilevel propensity score model only allows for one random intercept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site</code></td>
<td>
<p>The variable name for the site ID (string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.weight</code></td>
<td>
<p>The variable name for the sample weight given by design (string).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list contains the estimates of the between-site variances of natural direct effect, natural indirect effect, pure indirect effect, and treatment-by-mediator interaction effect, and the correlations between the effects across sites ($Random_effects), and the population average effect estimates along with their hypothesis testing results ($Fixed_effects).
</p>


<h3>Author(s)</h3>

<p>Xu Qin, Guanglei Hong, Jonah Deutsch, and Edward Bein
</p>


<h3>References</h3>

<p>Qin, X., Hong, G., Deutsch, J., &amp; Bein, E. (2019). Multisite causal mediation analysis in the presence of complex sample and survey designs and non-random non-response. Journal of the Royal Statistical Society: Series A (Statistics in Society), 182(4), 1343-1370. doi: <a href="https://doi.org/10.1111/rssa.12446">10.1111/rssa.12446</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(sim.weights)

msmediate.weights(data = sim.weights, y = "y", treatment = "tr", mediator = "me",
    response = "R", XR1 = c("x1", "x2", "x3"), XR0 = c("x1", "x2", "x3"), XM1 = c("x1",
        "x2", "x3"), XM0 = c("x1", "x2", "x3"), site = "site", sample.weight = "WD")
</code></pre>


</div>