<div class="container">

<table style="width: 100%;"><tr>
<td>m61r</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create m61r object</h2>

<h3>Description</h3>

<p>Create a m61r object that enables to run a sequence of operations on a data.frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">m61r(df = NULL)

## S3 method for class 'm61r'
x[i, j, ...]

## S3 replacement method for class 'm61r'
x[i, j] &lt;- value

## S3 method for class 'm61r'
print(x, ...)

## S3 method for class 'm61r'
names(x, ...)

## S3 method for class 'm61r'
dim(x, ...)

## S3 method for class 'm61r'
as.data.frame(x, ...)

## S3 method for class 'm61r'
rbind(x, ...)

## S3 method for class 'm61r'
cbind(x, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>m61r</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>row</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>value to be assigned</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function <code>m61r</code> returns an object of type <code>m61r</code>.
</p>
<p>Argument <code>df</code> get stored internally to the object <code>m61r</code>.
One manipulates the internal <code>data.frame</code> by using internal functions similar to the ones implemented in package <code>m61r</code> for <code>data.frames</code> as <code>arrange</code>, <code>desange</code>, <code>filter</code>, <code>join</code> and its relatives, <code>mutate</code> and <code>transmutate</code>, <code>gather</code> and <code>spread</code>, <code>select</code>, <code>groupe_by</code>, <code>summarise</code>, <code>values</code> and <code>modify</code>.
The result of the last action is stored internally to the object <code>m61r</code> until the internal function <code>values</code> get called.
It is thus possible to create a readable sequence of actions on a <code>data.frame</code>.
</p>
<p>In addition,
</p>

<ul>
<li> <p><code>[.m61r</code> returns a subset of the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>[&lt;-.m61r</code> assigns <code>value</code> to the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>print.m61r</code> prints the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>names.m61r</code> provides the names of the column of the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>dim.m61r</code> provides the dimensions of the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>as.data.frame.m61r</code> extracts the internal <code>data.frame</code> embedded to the object <code>m61r</code>.
</p>
</li>
<li> <p><code>cbind.m61r</code> combines by _c_olumns two objects <code>m61r</code>.
</p>
</li>
<li> <p><code>rbind.m61r</code> combines by _r_ows two objects <code>m61r</code>.
</p>
</li>
<li> <p><code>left_join</code>, <code>anti_join</code>, <code>full_join</code>, <code>inner_join</code>, <code>right_join</code>, <code>semi_join</code> join two objects <code>m61r</code>.
</p>
</li>
</ul>
<p>Finally, it is possible to clone a <code>m61r</code> object into a new one by using the internal function <code>clone</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  # init
  co2 &lt;- m61r(df=CO2)

  # filter
  co2$filter(~Plant=="Qn1")
  co2

  co2$filter(~Type=="Quebec")
  co2

  # select
  co2$select(~Type)
  co2

  co2$select(~c(Plant,Type))
  co2

  co2$select(~-Type)
  co2

  co2$select(variable=~-(Plant:Treatment))
  co2

  # mutate/transmutate
  co2$mutate(z=~conc/uptake)
  co2

  co2$mutate(mean=~mean(uptake))
  co2

  co2$mutate(z1=~uptake/conc,y=~conc/100)
  co2

  co2$transmutate(z2=~uptake/conc,y2=~conc/100)
  co2

  # summarise
  co2$summarise(mean=~mean(uptake),sd=~sd(uptake))
  co2

  co2$group_by(~c(Type,Treatment))
  co2$summarise(mean=~mean(uptake),sd=~sd(uptake))
  co2

  # arrange/dessange
  co2$arrange(~c(conc))
  co2

  co2$arrange(~c(Treatment,conc,uptake))
  co2

  co2$desange(~c(Treatment,conc,uptake))
  co2

  # join
  authors &lt;- data.frame(
               surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
               nationality = c("US", "Australia", "US", "UK", "Australia"),
               deceased = c("yes", rep("no", 4)))

  books &lt;- data.frame(
             name = I(c("Tukey", "Venables", "Tierney","Ripley",
                   "Ripley", "McNeil", "R Core")),
            title = c("Exploratory Data Analysis",
                   "Modern Applied Statistics ...",
                   "LISP-STAT",
                   "Spatial Statistics", "Stochastic Simulation",
                   "Interactive Data Analysis",
                   "An Introduction to R"),
         other.author = c(NA, "Ripley", NA, NA, NA, NA,"Venables &amp; Smith"))

  ## inner join
  tmp &lt;- m61r(df=authors)

  tmp$inner_join(books, by.x = "surname", by.y = "name")
  tmp

  ## left join
  tmp$left_join(books, by.x = "surname", by.y = "name")
  tmp

  ## right join
  tmp$right_join(books, by.x = "surname", by.y = "name")
  tmp

  ## full join
  tmp$full_join(books, by.x = "surname", by.y = "name")
  tmp

  ## semi join
  tmp$semi_join(books, by.x = "surname", by.y = "name")
  tmp

  ## anti join #1
  tmp$anti_join(books, by.x = "surname", by.y = "name")
  tmp

  ## anti join #2
  tmp2 &lt;- m61r(df=books)
  tmp2$anti_join(authors, by.x = "name", by.y = "surname")
  tmp2

  ## with two m61r objects
  tmp1 &lt;- m61r(books)
  tmp2 &lt;- m61r(authors)
  tmp3 &lt;- anti_join(tmp1,tmp2, by.x = "name", by.y = "surname")
  tmp3

  # Reshape

  ## gather
  df3 &lt;- data.frame(id = 1:4,
                    age = c(40,50,60,50),
                    dose.a1 = c(1,2,1,2),
                    dose.a2 = c(2,1,2,1),
                    dose.a14 = c(3,3,3,3))

  df4 &lt;- m61r::m61r(df3)
  df4$gather(pivot = c("id","age"))
  df4

  ## spread
  df3 &lt;- data.frame(id = 1:4,
                    age = c(40,50,60,50),
                    dose.a1 = c(1,2,1,2),
                    dose.a2 = c(2,1,2,1),
                    dose.a14 = c(3,3,3,3))

  df4 &lt;- m61r::gather_(df3,pivot = c("id","age"))
  df4 &lt;- rbind(df4,
    data.frame(id=5, age=20,parameters="dose.a14",values=8),
    data.frame(id=6, age=10,parameters="dose.a1",values=5))

  tmp &lt;- m61r::m61r(df4)
  tmp$spread(col_name="parameters",col_values="values",pivot=c("id","age"))
  tmp


  # equivalence
  co2           # is not equivalent to co2[]
  co2[]         # is equivalent to co2$values()
  co2[1,]       # is equivalent to co2$values(1,)
  co2[,2:3]     # is equivalent to co2$values(,2:3)
  co2[1:10,1:3] # is equivalent to co2$values(1:10,2:3)
  co2[1,"Plant"]# is equivalent to co2$values(1,"Plant")

  # modification on m61r object only stay for one step
  co2[1,"conc"] &lt;- 100
  co2[1,] # temporary result
  co2[1,] # back to normal

  # WARNING:
  # Keep the brackets to manipulate the intern data.frame
  co2[] &lt;- co2[-1,]
  co2[1:3,] # temporary result
  co2[1:3,] # back to normal

  # ... OR you will destroy co2, and only keep the data.frame
  # co2 &lt;- co2[-1,]
  # class(co2) # data.frame

  # descriptive manipulation
  names(co2)
  dim(co2)
  str(co2)

  ## cloning
  # The following will only create a second variable that point on
  # the same object (!= cloning)
  foo &lt;- co2
  str(co2)
  str(foo)

  # Instead, cloning into a new environemnt
  foo &lt;- co2$clone()
  str(co2)
  str(foo)
</code></pre>


</div>