<div class="container">

<table style="width: 100%;"><tr>
<td>lag.data.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Lag a variable</h2>

<h3>Description</h3>

<p>creates lagged version of an existing variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'data.frame'
lag(x, var, by = NULL, new_var = NULL, last_obs = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>variable to be lagged</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>variable for grouped lagged version</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_var</code></td>
<td>
<p>name of new lagged variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last_obs</code></td>
<td>
<p><code>TRUE</code>retrieves the last observation per group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is often encountered in time-related analysis.
In a lagged variable, values from earlier points in time are placed in later
rows of dataset.
</p>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Note</h3>

<p>Before using <code>lagRows</code>, the dataset needs to be sorted by a id variable
or similar variable.
</p>


<h3>Author(s)</h3>

<p>Email: <a href="mailto:dr.myominnoo@gmail.com">dr.myominnoo@gmail.com</a>
</p>
<p>Website: <a href="https://myominnoo.github.io/">https://myominnoo.github.io/</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
set.seed(100)
## create a dataset with dates
x &lt;- data.frame(
    hospid = 1:100,
    docid = round(runif(100, 1, 10)),
    dis_date = formatDate(runif(100, 42700, 42800))
)

## lagged dis_date, not specifed "by"
lag(x, dis_date)

## Not run: 
## lagged dis_date by docid
## first we need to sort
y &lt;- x[order(x$docid), ]
y

## lag dates within groups
lag(y, dis_date, by = docid, new_var = lag_date)
lag(y, dis_date, by = docid, lag_date, TRUE)

## End(Not run)

</code></pre>


</div>