<div class="container">

<table style="width: 100%;"><tr>
<td>mhrr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculating Risk Ratios</h2>

<h3>Description</h3>

<p><code>mhrr()</code> calculates different measures of risk including risk
ratios (RR) as well as
Mantel-Haenszel pooled estimates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mhrr(
  data,
  exp,
  case,
  strata = NULL,
  exp_value = NULL,
  case_value = NULL,
  digits = 4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>exposure or independent variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case</code></td>
<td>
<p>case or dependent variables (outcomes)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>if specified, MH OR is calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp_value</code></td>
<td>
<p>value for exposure as reference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case_value</code></td>
<td>
<p>value for outcome as reference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>specify rounding of numbers. See <code>round</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Rows and Columns can be rearranged by specifying
<code>exp_value</code> and <code>case_value</code>. This is used
when the exposed and case values are not at the right place in 2x2 tables.
</p>
<p>Reference row value can be specified in <code>exp_value</code>.
</p>
<p>Attributable fractions, <code>Attr. Frac. Exp</code> and  <code>Attr. Frac. Pop</code>
among exposed and population are calculated when RR is greated than or
equal to 1.
If RR is less than 1, preventable fractions,  <code>Prev. Frac. Exp</code>
and  <code>Attr. Frac. Pop</code> are calculated.
</p>
<p>It produces a table with Risk Ratio, 95% CI as well as
p-value. If <code>strata</code> is specified, <code>Mantel-Haenzsel</code> Pooled
estimates of <code style="white-space: pre;">⁠Risk Ratio⁠</code> is generated along with Chi-squared test for
homogeneity.
</p>


<h3>Author(s)</h3>

<p>Email: <a href="mailto:dr.myominnoo@gmail.com">dr.myominnoo@gmail.com</a>
</p>
<p>Website: <a href="https://myominnoo.github.io/">https://myominnoo.github.io/</a>
</p>


<h3>References</h3>


<ol>
<li>
<p>  Betty R. Kirkwood, Jonathan A.C. Sterne (2006, ISBN:978–0–86542–871–3)
</p>
</li>
<li>
<p> B. Burt Gerstman (2013, ISBN:978-1-4443-3608-5)
</p>
</li>
<li>
<p> Douglas G Altman (2005, ISBN:0 7279 1375 1)
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">

### Example from Essential Medical Statistics
# Page 178, Chapter 18: Controlling for confounding: Stratification
lepto &lt;- expandtbl(
    male = c(36, 14, 50, 50), female = c(24, 126, 10, 90),
    exp_name = "area", exp_lvl = c("Rural", "Urban"),
    case_name = "ab", case_lvl = c("Yes", "No"),
    strata_name = "gender"
)

## label variables and data
lepto &lt;- label(lepto, "Prevalence survey of leptospirosis in West Indies")
lepto &lt;- label(lepto, area="Type of area", ab = "Leptospirosis Antibodies",
                  gender="Gener: Male or Female")

## Calculate RR
mhrr(lepto, area, ab)

## Calculate MHRR
mhrr(lepto, area, ab, gender)


## Not run: 
### Demonstration: Calculating Risk Ratios

## Essential Medical Statistics, Betty R. Kirkwood, Second Edition
## Chapter 16, Table 16.4, Page 154
## For Risk Ratio
lung &lt;- expandtbl(
    c(39, 29961, 6, 59994),
    exp_name = "smoking",
    exp_lvl = c("Smokers", "Non-smokers"),
    case_name = "cancer",
    case_lvl = c("Yes", "No")
)

## label variable and dataset
lung &lt;- labelVar(lung, smoking="Yes or No", cancer="Yes or no")
lung &lt;- labelData(lung, "Follow up lung cancer study")

## check dataset
codebook(lung)

## calculate RR
mhrr(lung, smoking, cancer, exp_value = "Smokers", case_value = "Yes")



## Simpson's paradox
## Burt Gerstman's Epidemiology, page 326, table 14.1
simpson &lt;- expandtbl("1" = c(1000, 9000, 50, 950),
                        "2" = c(95, 5, 5000, 5000),
                        exp_name = "trt",
                        exp_lvl = c("new", "standard"),
                        case_name = "case",
                        case_lvl = c("alive", "dead"),
                        strata_name = "clinic")

## calculate RR
mhrr(simpson, trt, case, exp_value = "new", case_value = "alive")

## calculate MH RR
mhrr(simpson, trt, case, clinic)


## End(Not run)

</code></pre>


</div>