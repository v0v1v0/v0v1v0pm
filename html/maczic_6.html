<div class="container">

<table style="width: 100%;"><tr>
<td>mediate_zi_vcoef</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mediation Sensitivity Analysis for Count and Zero-Inflated Count Data with
a Post-Treatment Confounder</h2>

<h3>Description</h3>

<script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script><p> 'mediate_zi_vcoef' is modified from <code>mediate_zi</code> function with 3
confounder-related parameters ('model.u', 'delta.beta.u', and 'confounder')
added. It is used to estimate causal mediation effects when there is a
treatment-induced mediator-outcome confounder, and the coefficient of treatment
in the confounder model is specified by users. Users can perform sensitivity
analysis with a range of specified coefficient values when there is a
post-treatment confounder.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mediate_zi_vcoef(
  model.u,
  delta.beta.u,
  model.m,
  model.y,
  sims = 1000,
  boot = FALSE,
  treat = "treat.name",
  mediator = "med.name",
  confounder = "confd.name",
  covariates = NULL,
  outcome = NULL,
  control = NULL,
  conf.level = 0.95,
  control.value = 0,
  treat.value = 1,
  long = TRUE,
  dropobs = FALSE,
  robustSE = FALSE,
  cluster = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.u</code></td>
<td>
<p>A fitted model object for confounder. Can be of class 'lm',
'polr', 'bayespolr', 'glm', 'bayesglm', 'gam', 'rq', or 'survreg'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.beta.u</code></td>
<td>
<p>Sensitivity parameter as difference from the estimated
treatment coefficient in the confounder model (model.u) based on the
observed data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.m</code></td>
<td>
<p>A fitted model object for mediator.  Can be of class 'lm',
'polr', 'bayespolr', 'glm', 'bayesglm', 'gam', 'rq', or 'survreg'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.y</code></td>
<td>
<p>A fitted model object for outcome.  Can be of class 'lm',
'polr', 'bayespolr', 'glm', 'bayesglm', 'gam', 'vglm', 'rq', 'survreg',
or 'zeroinfl'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sims</code></td>
<td>
<p>Number of Monte Carlo draws for nonparametric bootstrap or
quasi-Bayesian approximation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot</code></td>
<td>
<p>A logical value. if 'FALSE' a quasi-Bayesian approximation is
used for confidence intervals; if 'TRUE' nonparametric bootstrap will be
used. Default is 'FALSE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>A character string indicating the name of the treatment variable
used in the models.  The treatment can be either binary (integer or a
two-valued factor) or continuous (numeric).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>A character string indicating the name of the mediator
variable used in the models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confounder</code></td>
<td>
<p>A character string indicating the name of the confounder
variable used in the models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>A list or data frame containing values for a subset of the
pre-treatment covariates in 'model.m' and 'model.y'. If provided, the
function will return the estimates conditional on those covariate values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>A character string indicating the name of the outcome variable
in ‘model.y’. Only necessary if 'model.y' is of class 'survreg'; otherwise
ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>A character string indicating the name of the control group
indicator. Only relevant if 'model.y' is of class 'gam'. If provided, 'd0',
'z0' and 'n0' are allowed to differ from 'd1', 'z1' and 'n1', respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>Level of the returned two-sided confidence intervals.
Default is to return the 2.5 and 97.5 percentiles of the simulated
quantities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control.value</code></td>
<td>
<p>Value of the treatment variable used as the control
condition. Default is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat.value</code></td>
<td>
<p>Value of the treatment variable used as the treatment
condition. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long</code></td>
<td>
<p>A logical value. If 'TRUE', the output will contain the entire
sets of simulation draws of the the average causal mediation effects,
direct effects, proportions mediated, and total effect. Default is 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropobs</code></td>
<td>
<p>A logical value indicating the behavior when the model frames
of 'model.m' and 'model.y' (and the 'cluster' variable if included) are
composed of different observations. If 'TRUE', models will be re-fitted
using common data rows. If 'FALSE', error is returned. Default is 'FALSE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robustSE</code></td>
<td>
<p>A logical value. If 'TRUE', heteroskedasticity-consistent
standard errors will be used in quasi-Bayesian simulations. Ignored if
'boot' is 'TRUE' or neither 'model.m' nor 'model.y' has a method for
<code>vcovHC</code> in the <code>sandwich</code> package. Default is 'FALSE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>A variable indicating clusters for standard errors. Note that
this should be a vector of cluster indicators itself, not a character
string for the name of the variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to <code>vcovHC</code> in the <code>sandwich</code>
package: typically the 'type' argument, which is ignored if 'robustSE' is
'FALSE'. Arguments to the <code>boot</code> in the <code>boot</code> package may also
be passed, e.g. 'parallel' and 'ncpus'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>mediate_zi_vcoef</code> returns an object of class "<code>mediate</code>", (or
"<code>mediate.order</code>" if the outcome model used is 'polr' or 'bayespolr'),
a list that contains the components listed below.  Some of these elements
are not available if 'long' is set to 'FALSE' by the user.
</p>
<p>The function <code>summary</code> (i.e., <code>summary.mediate</code>,
or <code>summary.mediate.order</code>) can be used to obtain a table of the
results.  The function <code>plot</code> (i.e., <code>plot.mediate</code>, or
<code>plot.mediate.order</code>) can be used to produce a plot of the estimated
average causal mediation, average direct, and total effects along with
their confidence intervals.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>d0, d1</code></td>
<td>
<p>point estimates for average causal mediation effects under
the control and treatment conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d0.ci, d1.ci</code></td>
<td>
<p>confidence intervals for average causal mediation
effects. The confidence level is set at the value specified in
'conf.level'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d0.p, d1.p</code></td>
<td>
<p>two-sided p-values for average causal mediation effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d0.sims, d1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation
draws of average causal mediation effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0, z1</code></td>
<td>
<p>point estimates for average direct effect under the control
and treatment conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0.ci, z1.ci</code></td>
<td>
<p>confidence intervals for average direct effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0.p, z1.p</code></td>
<td>
<p>two-sided p-values for average causal direct effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0.sims, z1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation
draws of average direct effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0, n1</code></td>
<td>
<p>the "proportions mediated", or the size of the average causal
mediation effects relative to the total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0.ci, n1.ci</code></td>
<td>
<p>confidence intervals for the proportions mediated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0.p, n1.p</code></td>
<td>
<p>two-sided p-values for proportions mediated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0.sims, n1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation
draws of the proportions mediated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.coef</code></td>
<td>
<p>point estimate for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.ci</code></td>
<td>
<p>confidence interval for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.p</code></td>
<td>
<p>two-sided p-values for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.sims</code></td>
<td>
<p>a vector of length 'sims' containing simulation draws of
the total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d.avg, z.avg, n.avg</code></td>
<td>
<p>simple averages of d0 and d1, z0 and z1, n0 and
n1, respectively, which users may want to use as summary values when those
quantities differ.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d.avg.ci, z.avg.ci, n.avg.ci</code></td>
<td>
<p>confidence intervals for the above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d.avg.p, z.avg.p, n.avg.p</code></td>
<td>
<p>two-sided p-values for the above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d.avg.sims, z.avg.sims, n.avg.sims</code></td>
<td>
<p>vectors of length 'sims'
containing simulation draws of d.avg, z.avg and n.avg, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot</code></td>
<td>
<p>logical, the 'boot' argument used. If 'FALSE' a quasi-Bayesian
approximation was used for confidence intervals; if 'TRUE' nonparametric
bootstrap was used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.ci.type</code></td>
<td>
<p>a character string 'perc' indicating percentile
bootstrap confidence intervals were estimated if the argument boot = TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>a character string indicating the name of the 'treat' variable
used in the models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>a character string indicating the name of the 'mediator'
variable used in the models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>INT</code></td>
<td>
<p>a logical value indicating whether the model specification
allows the effects to differ between the treatment and control conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>the confidence level used. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.y</code></td>
<td>
<p>the outcome model used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.m</code></td>
<td>
<p>the mediator model used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control.value</code></td>
<td>
<p>value of the treatment variable used as the control
condition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat.value</code></td>
<td>
<p>value of the treatment variable used as the treatment
condition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nobs</code></td>
<td>
<p>number of observations in the model frame for 'model.m' and
'model.y'. May differ from the numbers in the original models input to
'mediate' if 'dropobs' was 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robustSE</code></td>
<td>
<p>‘TRUE’ or ‘FALSE’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>the clusters used.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Nancy Cheng,
<a href="mailto:Nancy.Cheng@ucsf.edu">Nancy.Cheng@ucsf.edu</a>; Jing Cheng,
<a href="mailto:Jing.Cheng@ucsf.edu">Jing.Cheng@ucsf.edu</a>.
</p>


<h3>References</h3>

<p>Cheng, J., Cheng, N.F., Guo, Z., Gregorich, S., Ismail, A.I.,
Gansky, S.A (2018) Mediation analysis for count and zero-inflated count
data. Statistical Methods in Medical Research. 27(9):2756-2774.
</p>
<p>Ismail AI, Ondersma S, Willem Jedele JM, et al. (2011) Evaluation of
a brief tailored motivational intervention to prevent early childhood caries.
Community Dentistry and Oral Epidemiology 39: 433–448.
</p>
<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L.
(2014). "mediation: R package for Causal Mediation Analysis", Journal of
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the
Black Box of Causality: Learning about Causal Mechanisms from Experimental
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp.
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) "Causal Mediation
Analysis Using R" in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code>plot_sensitivity</code>, <code>mediate_zi</code>,
<code>summary.mediate</code>, <code>plot.mediate</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("midvd_bt100")
uFit &lt;- glm (PDVisit_6 ~ intervention + BrushTimes_W2 + HealthyMeals_W2
                         + PDVisit_W2,
             family = 'binomial', data = midvd_bt100)
mFit &lt;- glm (PBrushBedt_6 ~ intervention + BrushTimes_W2 + HealthyMeals_W2
                            + PBrush_W2 + PDVisit_6,
             family = 'binomial', data = midvd_bt100)
yFit &lt;- zeroinfl(Untreated_W3 ~ intervention + PBrushBedt_6 + BrushTimes_W2
                                + HealthyMeals_W2 + PBrush_W2+ PDVisit_6,
                 data = midvd_bt100)
# For illustration purposes a small number of simulations are used
# Estimation via Quasi-Bayesian approximation
ee &lt;-mediate_zi_vcoef(uFit, delta.beta.u = 0.01, mFit, yFit, sims = 100,
                      treat = "intervention", mediator = "PBrushBedt_6",
                      confounder ="PDVisit_6")
summary(ee)

</code></pre>


</div>