<div class="container">

<table style="width: 100%;"><tr>
<td>madness-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Madness Class.</h2>

<h3>Description</h3>

<p>An S4 class to enable forward differentiation of multivariate computations.
Think of ‘madness’ as ‘multivariate automatic differentiation -ness.’
There is also a constructor method for <code>madness</code> objects, and a 
wrapper method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'madness'
initialize(
  .Object,
  val,
  dvdx,
  xtag = NA_character_,
  vtag = NA_character_,
  varx = matrix(nrow = 0, ncol = 0)
)

madness(val, dvdx = NULL, vtag = NULL, xtag = NULL, varx = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.Object</code></td>
<td>
<p>a <code>madness</code> object, or proto-object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>val</code></td>
<td>
<p>an <code>array</code> of some numeric value, of arbitrary
dimension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dvdx</code></td>
<td>
<p>a <code>matrix</code> of the derivative of 
(the vector of) <code>val</code> with respect to some independent 
variable, <code class="reqn">X</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtag</code></td>
<td>
<p>an optional name for the <code class="reqn">X</code> variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vtag</code></td>
<td>
<p>an optional name for the <code class="reqn">val</code> variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varx</code></td>
<td>
<p>an optional variance-covariance matrix of
the independent variable, <code class="reqn">X</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A <code>madness</code> object contains a (multidimensional) 
value, and the derivative of that with respect to some independent
variable. The purpose is to simplify computation of multivariate 
derivatives, especially for use in the Delta method. Towards this
usage, one may store the covariance of the independent variable
in the object as well, from which the approximate variance-covariance
matrix can easily be computed. See <code>vcov</code>.
</p>
<p>Note that derivatives are all implicitly 'flattened'. That is,
when we talk of the derivative of <code class="reqn">i \times j</code> 
matrix <code class="reqn">Y</code> with respect to <code class="reqn">m \times n</code>
matrix <code class="reqn">X</code>, we mean the derivative of the <code class="reqn">ij</code>
vector <code class="reqn">\mathrm{vec}\left(Y\right)</code> with
respect to the <code class="reqn">mn</code> vector
<code class="reqn">\mathrm{vec}\left(X\right)</code>. Moreover,
derivatives follow the 'numerator layout' convention: 
this derivative is a <code class="reqn">ij \times mn</code> matrix
whose first column is the derivative of 
<code class="reqn">\mathrm{vec}\left(Y\right)</code> with respect
to <code class="reqn">X_{1,1}</code>. Numerator layout feels unnatural
because it makes a gradient vector of a scalar-valued function
into a row vector. Despite this deficiency, it makes 
the product rule feel more natural. (2FIX: is this so?)
</p>


<h3>Value</h3>

<p>An object of class <code>madness</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>val</code></dt>
<dd>
<p>an <code>array</code> of some numeric value. (Note that
<code>array</code> includes <code>matrix</code> as a subclass.) The numeric
value can have arbitrary dimension.</p>
</dd>
<dt><code>dvdx</code></dt>
<dd>
<p>a <code>matrix</code> of the derivative of 
(the vector of) <code>val</code> with respect to some independent 
variable, <code class="reqn">X</code>. 
A Derivative is indeed a 2-dimensional matrix.
Derivatives have all been 'flattened'. See the details. 
If not given, defaults
to the identity matrix, in which case <code class="reqn">val=X</code>,
which is useful to initialization. Note that the derivative
is with respect to an 'unrestricted' <code class="reqn">X</code>.</p>
</dd>
<dt><code>xtag</code></dt>
<dd>
<p>an optional name for the <code class="reqn">X</code> variable. 
Operations between two objects of the class with distinct
<code>xtag</code> data will result in an error, since they are 
considered to have different independent variables.</p>
</dd>
<dt><code>vtag</code></dt>
<dd>
<p>an optional name for the <code class="reqn">val</code> variable. 
This will be propagated forward.</p>
</dd>
<dt><code>varx</code></dt>
<dd>
<p>an optional variance-covariance matrix of
the independent variable, <code class="reqn">X</code>.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Steven E. Pav <a href="mailto:shabbychef@gmail.com">shabbychef@gmail.com</a>
</p>


<h3>References</h3>

<p>Petersen, Kaare Brandt and Pedersen, Michael Syskind. "The Matrix Cookbook."
Technical University of Denmark (2012). 
<a href="http://www2.imm.dtu.dk/pubdb/pubs/3274-full.html">http://www2.imm.dtu.dk/pubdb/pubs/3274-full.html</a>
</p>
<p>Magnus, Jan R. and Neudecker, H. "Matrix Differential Calculus with Applications in Statistics and Econometrics."
3rd Edition. Wiley Series in Probability and Statistics: Texts and References Section (2007).
</p>


<h3>Examples</h3>

<pre><code class="language-R">obj &lt;- new("madness", val=matrix(rnorm(10*10),nrow=10), dvdx=diag(100), xtag="foo", vtag="foo")
obj2 &lt;- madness(val=matrix(rnorm(10*10),nrow=10), xtag="foo", vtag="foo^2")

</code></pre>


</div>