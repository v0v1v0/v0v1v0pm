<div class="container">

<table style="width: 100%;"><tr>
<td>twomoments</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the mean and covariance of values.</h2>

<h3>Description</h3>

<p>Given rows of observations of some vector (or multidimensional
data), estimates the mean and covariance of the values,
returning two <code>madness</code> objects. These have a common covariance
and 'xtag', so can be combined together.
</p>


<h3>Usage</h3>

<pre><code class="language-R">twomoments(X, diag.only=FALSE, vcov.func=vcov, xtag=NULL, df=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a multidimensional array (or a data frame) of observed values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag.only</code></td>
<td>
<p>logical flag, defaulting to <code>FALSE</code>. When
<code>TRUE</code>, only the diagonal of the covariance is computed, and
returned instead of the entire covariance. This should be used for
reasons of efficiency when only the marginal variances are needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov.func</code></td>
<td>
<p>a function which takes an object of class <code>lm</code>,
and computes a variance-covariance matrix. If equal to the string
"normal", we assume multivariate normal returns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtag</code></td>
<td>
<p>an optional string tag giving the name of the input data.
defaults to figuring it out from the input expression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>the number of degrees of freedom to subtract
from the sample size in the denominator of the covariance
matrix estimate. The default value is the number of elements in
the mean, the so-called Bessel's correction.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given a 
<code class="reqn">n\times k_1 \times k_2 \times ... \times k_l</code>
array whose 'rows' are independent observations of <code class="reqn">X</code>, computes the 
<code class="reqn">k_1 \times k_2 \times ... \times k_l</code>
array of the mean of <code class="reqn">X</code> and the 
<code class="reqn">k_1 \times k_2 \times ... \times k_l \times k_1 \times k_2 ... k_l</code>
array of the covariance, based on <code class="reqn">n</code> observations,
returned as two <code>madness</code> objects. The variance-covariance
of each is estimated. The two objects have the same 'xtag', and so
may be combined together.
When the <code>diag.only=TRUE</code>, only the diagonal of the covariance is
computed and returned.
</p>
<p>One may use the default method for computing covariance,
via the <code>vcov</code> function, or via a 'fancy' estimator,
like <code>sandwich:vcovHAC</code>, <code>sandwich:vcovHC</code>, <em>etc.</em>
</p>


<h3>Value</h3>

<p>A two element list. When <code>diag.only=FALSE</code>, the first
element of the list is <code>mu</code>, representing the mean,
a <code>madness</code> object, the second is <code>Sigma</code>, representing the covariance,
also a <code>madness</code> object. When <code>diag.only=TRUE</code>, the first element
is <code>mu</code>, but the second is <code>sigmasq</code>, a <code>madness</code> object
representing the diagonal of the covariance matrix.
</p>


<h3>Author(s)</h3>

<p>Steven E. Pav <a href="mailto:shabbychef@gmail.com">shabbychef@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>theta</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
X &lt;- matrix(rnorm(1000*8),ncol=8)
alst &lt;- twomoments(X)
markowitz &lt;- solve(alst$Sigma,alst$mu)
vcov(markowitz)

# now compute the Sharpe ratios:
alst &lt;- twomoments(X,diag.only=TRUE,df=1)
srs &lt;- alst$mu / sqrt(alst$sigmasq)

</code></pre>


</div>