<div class="container">

<table style="width: 100%;"><tr>
<td>maghist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Magically pretty histograms
</h2>

<h3>Description</h3>

<p>A fairly simple function that produces pretty histograms. The main difference to base <code>hist</code> is that it allows for easy truncation of the data provided via <span class="option">xlim</span> and useful logging options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">maghist(x, breaks = "Sturges", freq = TRUE, include.lowest = TRUE, right = TRUE,
density = NULL, angle = 45, col = NULL, border = NULL, xlim = NULL, ylim = NULL,
plot = TRUE, verbose = TRUE, add = FALSE, log = '', unlog = log, scale = 1,
cumsum = FALSE, p.test = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A vector of values for which the histogram is desired.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>

<p>One of:
</p>

<ul>
<li>
<p> A vector giving the breakpoints between histogram cells,
</p>
</li>
<li>
<p> A function to compute the vector of breakpoints,
</p>
</li>
<li>
<p> A single number giving the number of cells for the histogram,
</p>
</li>
<li>
<p> A character string naming an algorithm to compute the number of cells,
</p>
</li>
<li>
<p> A function to compute the number of cells.
</p>
</li>
</ul>
<p>In the last three cases the number is a suggestion only; the breakpoints will be set to <code>pretty</code> values. If breaks is a function, the x vector is supplied to it as the only argument.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>

<p>Logical; if TRUE, the histogram graphic is a representation of frequencies, the counts component of the result; if FALSE, probability densities, component density, are plotted (so that the histogram has a total area of one). Defaults to TRUE if and only if breaks are equidistant (and probability is not specified).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.lowest</code></td>
<td>

<p>Logical; if TRUE, an x[i] equal to the breaks value will be included in the first (or last, for right = FALSE) bar. This will be ignored (with a warning) unless breaks is a vector.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>right</code></td>
<td>

<p>Logical; if TRUE, the histogram cells are right-closed (left open) intervals.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>

<p>The density of shading lines, in lines per inch. The default value of NULL means that no shading lines are drawn. Non-positive values of density also inhibit the drawing of shading lines.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>

<p>The slope of shading lines, given as an angle in degrees (counter-clockwise).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>

<p>A colour to be used to fill the bars. The default of NULL yields unfilled bars.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>

<p>The color of the border around the bars. The default is to use the standard foreground color.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>

<p>Vector; range of <span class="option">x</span> values to use for both counting and plotting. The default NULL will span the range of histogram breaks. If length equals 1 then the argument is taken to mean the sigma range to select for plotting and the clipping is done by <code>magclip</code>. If this is set to 'auto' then the limits will be estimated from the data dynamically. See examples.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>

<p>Vector; range of y limits to show in the histogram plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>

<p>Logical; draw the histogram (otherwise it just returns the count data).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Logical; if TRUE and <span class="option">xlim</span> is used then the followign is printed out: summary of the data selected, standard-deviation the 1/2-sigma implied quantiles, and number and fraction of displayed data. Note all numbers are computed for the logged values of the <span class="option">x</span> input if <span class="option">log</span>= x | xy | yx.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>

<p>Logical, if TRUE the histogram will be added to the current plot. Be careful to match <span class="option">log</span> properties if adding, else the comparison will be of little use and hard to interpret.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>

<p>Log axis arguments to be passed to hist and plot. E.g. use 'x', 'y', 'xy' or 'yx' as appropriate. Default ‚Äù assumes no logging of any axes. If the x axis is logged then the histogram will be calculated in log-space.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unlog</code></td>
<td>

<p>Determines if axis labels should be unlogged. E.g. use 'x', 'y', 'xy' or 'yx' as appropriate. See <code>magaxis</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>

<p>Numeric scalar; an additional scaling parameter to apply to the frequnecy counts. This is useful if you want to get the y axis in to certain units, e.g. the counts represent objects in 10 square degrees of sky, so to get the y-axis into units of N/sq.deg you would set <span class="option">scale</span>=1/10.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumsum</code></td>
<td>

<p>Logical; if FALSE (default) then <span class="option">counts</span> and <span class="option">density</span> are totals for the current bin (usual sense of a histogram), if TRUE then <span class="option">counts</span> and <span class="option">density</span> are cumulative totals of all counts up to and including the current bin (always from lowest <span class="option">x</span> upwards).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.test</code></td>
<td>

<p>Function; optionally the user can provide a standard (or custom) p-test to be computed on the display (i.e. trimmed) data. This might be e.g. a Normality test with the <code>shapiro.test</code> function etc. The results are printed to screen below the other standard summary information if <span class="option">verbose</span>=TRUE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Arguments to be parsed to <code>magplot</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To better replicate the base <code>hist</code> plot you might consider setting <span class="option">frame.plot</span>=FALSE, which will be parsed to <code>magplot</code> and turn off the outer box. The default behaviour might change in the future.
</p>


<h3>Value</h3>

<p>An object of class "histogram", basically the same output as produced by <code>hist</code>. Note where axes are logged, the corresponding hist list values will not be logged when returned. This is to make it easy to take a histogram object and plot it with different log scalings on the axes (see Examples). For the x axis this means the "breaks" and the "mids" items, and for the y axis this means the "counts" and the "density" items.
</p>
<p>Appended to the end of the usual <code>hist</code> output are the summary of the sample (list element "summary") and the standard-deviation / 1 and 2-sigma quantile range (list element "ranges").
</p>


<h3>Author(s)</h3>

<p>Aaron Robotham
</p>


<h3>See Also</h3>

<p><code>hist</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">maghist(rnorm(1e4))
maghist(rnorm(1e4), xlim=c(-2,4))

#Notice the x-limits are close to -3/3, since  if we ask for xlim=3 (a 3-sigma range)

maghist(rnorm(1e4), xlim=3, verbose = FALSE)

#The 'auto' option allows magclip to dynamically estimate a clip value (which is similar
#in this case, but need not be in general).

maghist(rnorm(1e4), xlim='auto', verbose = FALSE)

#Test of log histograms:

testdata=10^(runif(1e3,0,4))
maghist(testdata)
maghist(testdata,log='x')
maghist(testdata,log='y')
maghist(testdata,log='xy')

maghist(testdata,freq=FALSE)
maghist(testdata,freq=FALSE,log='x')
maghist(testdata,freq=FALSE,log='y')
maghist(testdata,freq=FALSE,log='xy')

#Test of plotting histogram objects:

testhist=maghist(testdata,log='xy')
maghist(testhist)
maghist(testhist,log='x')
magplot(testhist,log='y')
magplot(testhist,log='xy')

#Nice to see a grid with large ranges:

maghist(rnorm(1e6), grid=TRUE)
maghist(rnorm(1e6), log='y', grid=TRUE)
</code></pre>


</div>