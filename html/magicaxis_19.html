<div class="container">

<table style="width: 100%;"><tr>
<td>magproj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Magic longitude / latitude projection function
</h2>

<h3>Description</h3>

<p>High level methods for producing pretty plot of projected data. Particularly useful in astronomy or geography, where many datasets are in longitude (right ascension) / latitude (declination) format. magproj is the highest level function, creating a projected image grid with labels and data. magprojgrid and magprojlabels are functions to simply overplot a grid and add labels respectively.
</p>


<h3>Usage</h3>

<pre><code class="language-R">magproj(long, lat, type = "b", plottext, longlim = c(-180, 180), latlim = c(-90, 90),
  projection = "aitoff", parameters = NULL, centre = c(0, 0), add = FALSE,
  fliplong = FALSE, nlat = 6, nlong = 6, prettybase = 30, labels = TRUE, grid = TRUE,
  grid.col = "grey", grid.lty = 2, auto = FALSE, upres = 100, box = TRUE,
  labloc = c(90, -45), labeltype = "deg", crunch = FALSE, ...)
  
magprojgrid(nlat = 6, nlong = 6, prettybase = 30, box = TRUE, ...)

magprojlabels(nlat = 6, nlong = 6, prettybase = 30, labloc = c(90, -45),
  labeltype = 'deg', crunch=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>long</code></td>
<td>

<p>Vector of longitude values to use. If this is a matrix or data.frame with two columns and <span class="option">lat</span> is missing then column 1 is taken to be longitude values and column 2 is taken to be latitude values. long should have 2 elements only when <span class="option">type</span>="b".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat</code></td>
<td>

<p>Vector of latitude values to use. If the input for <span class="option">long</span> is a matrix or data.frame with two columns and lat is missing then column 1 is taken to be longitude values and column 2 is taken to be latitude values. lat should have 2 elements only when type="b".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>The display type, either points (p), lines (l), polygon (pl), text (t), or box (b, the default). Points simply projects longitude and latitude positions into particle positions. Lines will join the positions together into a line, using <code>approxfun</code> to interpolate between positions at resolution <span class="option">upres</span>. Polygon will join the positions together into a polygon, using <code>approxfun</code> to interpolate between positions at resolution <span class="option">upres</span>. Text will display the text provided in plottext at the positions. Box will draw a polygon box, where the limits are given as a two element vector for <span class="option">long</span> and a two element vector for <span class="option">lat</span>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plottext</code></td>
<td>

<p>A vector of text to display at the provided longitude and latitude positions. Only used if <span class="option">type='t'</span>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longlim</code></td>
<td>

<p>The longitude limits to use in the plot. Vector of length 2.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latlim</code></td>
<td>

<p>The latitude limits to use in the plot. Vector of length 2.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projection</code></td>
<td>

<p>Map projection to use. This function directly uses <code>mapproject</code>, and all of the inputs allowed for the <span class="option">projection</span> argument in that function are also allowed here.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>

<p>Map parameters to use. For details see the <span class="option">parameters</span> argument in <code>mapproject</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centre</code></td>
<td>

<p>For most popular projections this argument specifies the longitude and latitude that is centred in the plot. Strictly <span class="option">orientation</span> in <code>mapproject</code> is set to <code>c(90+centre[2], centre[1], 0)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>

<p>Should a fresh plot be drawn (<span class="option">add=FALSE</span>), or should the new data be added to the current plot (<span class="option">add=TRUE</span>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fliplong</code></td>
<td>

<p>Should the the longitude axis be flipped so that low values are on the right hand side (normal for celestial sphere plots in astronomy).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlong</code></td>
<td>

<p>The target number of gridlines in the longitude direction. Uses <code>pretty</code>, so the result may not be what is requested.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlat</code></td>
<td>

<p>The target number of gridlines in the latitude direction. Uses <code>pretty</code>, so the result may not be what is requested.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prettybase</code></td>
<td>

<p>The unit of repitition desired for the grid lines and labels. See <span class="option">prettybase</span> in <code>maglab</code>. By default it is 30, implying a pretty plot is one with marks at 30, 60, 90 etc (i.e. attractive for large scale plots covering large longitude and latitude limits).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>

<p>Should text coordinate labels be added to the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>

<p>Should a background grid be drawn.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.col</code></td>
<td>

<p>The colour of the background grid.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.lty</code></td>
<td>

<p>The line type for the background grid.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto</code></td>
<td>

<p>If <span class="option">auto=FALSE</span> the plot is set up using all options specified. If <span class="option">auto=TRUE</span> then <span class="option">longlim</span>, <span class="option">latlim</span>, <span class="option">centre</span> and <span class="option">labloc</span> is estimated from the data. This mostly behaves sensibly, but do not be too surprised if the automatic plot is not ideal, and some manual tweaking is required.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upres</code></td>
<td>

<p>The resolution at which to do internal interpolation when drawing lines and boxes.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box</code></td>
<td>

<p>Should a black outline be drawn following the <span class="option">longlim</span> and <span class="option">latlim</span> limits.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labloc</code></td>
<td>

<p>The longitude and latitude at which labels should be drawn.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labeltype</code></td>
<td>

<p>Should the labels be drawn using degrees (deg) or colon delimited sexigesimal (sex).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crunch</code></td>
<td>

<p>If set to FALSE the full output of <code>deg2hms</code> and <code>deg2dms</code> is printed. If set to TRUE a simplified output is used, where only the hours and degrees parts are extracted and appended with a 'h' and a degree symbol respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>For magproj, Extra options that are either passed to <code>points</code> (<span class="option">type='p'</span>), <code>lines</code> (<span class="option">type='l'</span>), <code>polygon</code> (<span class="option">type='pl'</span>), <code>text</code> (<span class="option">type='t'</span>), or <code>polygon</code> (<span class="option">type='b'</span>). For magprojgrid dots are pased to <code>lines</code> for drawing the grid lines. For magprojlabels dots are passed to <code>text</code> for adding text labels.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>No output. Run for the side effect of producing nice projected plots.
</p>


<h3>Author(s)</h3>

<p>Aaron Robotham
</p>


<h3>See Also</h3>

<p><code>magplot</code>, <code>magaxis</code>, <code>maglab</code>, <code>magmap</code>, <code>magrun</code>, <code>magbar</code>, <code>magprojextra</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># GAMA fields:
par(mar=c(0.1,0.1,0.1,0.1))
magproj(c(129,141), c(-2,3), type='b', projection='aitoff', centre=c(180,0),
fliplong=TRUE, labloc=c(90,-45), col='red', labeltype = 'sex', crunch=TRUE)
magproj(c(211.5,223.5), c(-2,3), col='red', add=TRUE)
magproj(c(30.2,38.8), c(-10.25,-3.72), col='red', add=TRUE)
magproj(c(30.2,38.8), -6, type='l', add=TRUE, col='grey')
magproj(c(339,351), c(-35,-30), col='red', add=TRUE)

magecliptic(width=10,col=hsv(1/12,alpha=0.3),border=NA)
magecliptic(width=0,col='orange')
magMWplane(width=20,col=hsv(v=0,alpha=0.1),border=NA)
magMWplane(width=0,col='darkgrey')
magMW(pch=16, cex=2, col='darkgrey')
magsun(c(7,26), pch=16, cex=2, col='orange2') #An important date!

magproj(c(174,186), c(-3,2), col='red', add=TRUE)

#Plus SDSS:
magproj(c(110,260), c(-4,70), border='blue', add=TRUE)

magproj(c(35,135,180,217.5,345), c(-3.72,3,2,3,-30)+10, type='t',
plottext=c('G02','G09','G12','G15','G23'), add=TRUE)

legend('topleft', legend=c('GAMA Regions','SDSS Main Survey'), col=c('red','blue'),
pch=c(15,NA), lty=c(NA,1), bty='n')
legend('topright', legend=c('Ecliptic','MW Plane'), col=c(hsv(c(1/12,0), v=c(1,0),
alpha=0.5)), pch=c(15,15), lty=c(1,1), bty='n')
legend('bottomleft', legend=c('Sun', 'MW Centre'), col=c('orange2','darkgrey'), pch=16,
bty='n')
</code></pre>


</div>