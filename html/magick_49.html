<div class="container">

<table style="width: 100%;"><tr>
<td>device</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Magick Graphics Device</h2>

<h3>Description</h3>

<p>Graphics device that produces a Magick image. Can either be used like a regular
device for making plots, or alternatively via <code>image_draw</code> to open a device
which draws onto an existing image using pixel coordinates. The latter is vectorized,
i.e. drawing operations are applied to each frame in the image.
</p>


<h3>Usage</h3>

<pre><code class="language-R">image_graph(
  width = 800,
  height = 600,
  bg = "white",
  pointsize = 12,
  res = 72,
  clip = TRUE,
  antialias = TRUE
)

image_draw(image, pointsize = 12, res = 72, antialias = TRUE, ...)

image_capture()
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>in pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>in pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p>background color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pointsize</code></td>
<td>
<p>size of fonts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>resolution in pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clip</code></td>
<td>
<p>enable clipping in the device. Because clipping can slow things down
a lot, you can disable it if you don't need it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>antialias</code></td>
<td>
<p>TRUE/FALSE: enables anti-aliasing for text and strokes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>an existing image on which to start drawing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional device parameters passed to plot.window such as
<code>xlim</code>, <code>ylim</code>, or <code>mar</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The device is a relatively recent feature of the package. It should support all
operations but there might still be small inaccuracies. Also it is a bit slower than
some of the other devices, in particular for rendering text and clipping. Hopefully
this can be optimized in the next version.
</p>
<p>By default <code>image_draw</code> sets all margins to 0 and uses graphics coordinates to
match image size in pixels (width x height) where <code>(0,0)</code> is the top left corner.
Note that this means the y axis increases from top to bottom which is the opposite
of typical graphics coordinates.  You can override all this by passing custom
<code>xlim</code>, <code>ylim</code> or <code>mar</code> values to <code>image_draw</code>.
</p>
<p>The <code>image_capture</code> function returns the current device as an image. This only
works if the current device is a magick device or supports dev.capture.
</p>


<h3>See Also</h3>

<p>Other image: 
<code>_index_</code>,
<code>analysis</code>,
<code>animation</code>,
<code>attributes()</code>,
<code>color</code>,
<code>composite</code>,
<code>defines</code>,
<code>edges</code>,
<code>editing</code>,
<code>effects()</code>,
<code>fx</code>,
<code>geometry</code>,
<code>morphology</code>,
<code>ocr</code>,
<code>options()</code>,
<code>painting</code>,
<code>segmentation</code>,
<code>transform()</code>,
<code>video</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Regular image
frink &lt;- image_read("https://jeroen.github.io/images/frink.png")

# Produce image using graphics device
fig &lt;- image_graph(res = 96)
ggplot2::qplot(mpg, wt, data = mtcars, colour = cyl)
dev.off()

# Combine
out &lt;- image_composite(fig, frink, offset = "+70+30")
print(out)

# Or paint over an existing image
img &lt;- image_draw(frink)
rect(20, 20, 200, 100, border = "red", lty = "dashed", lwd = 5)
abline(h = 300, col = 'blue', lwd = '10', lty = "dotted")
text(10, 250, "Hoiven-Glaven", family = "monospace", cex = 4, srt = 90)
palette(rainbow(11, end = 0.9))
symbols(rep(200, 11), seq(0, 400, 40), circles = runif(11, 5, 35),
  bg = 1:11, inches = FALSE, add = TRUE)
dev.off()
print(img)


# Vectorized example with custom coordinates
earth &lt;- image_read("https://jeroen.github.io/images/earth.gif")
img &lt;- image_draw(earth, xlim = c(0,1), ylim = c(0,1))
rect(.1, .1, .9, .9, border = "red", lty = "dashed", lwd = 5)
text(.5, .9, "Our planet", cex = 3, col = "white")
dev.off()
print(img)

</code></pre>


</div>