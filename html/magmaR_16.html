<div class="container">

<table style="width: 100%;"><tr>
<td>updateValues</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Analogous to the '/update' function of magma</h2>

<h3>Description</h3>

<p>Analogous to the '/update' function of magma, allows data to be sent to magma (by users with at least "editor" authorization).
</p>


<h3>Usage</h3>

<pre><code class="language-R">updateValues(
  target,
  projectName,
  revisions = list(),
  auto.proceed = FALSE,
  autolink = FALSE,
  dryRun = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>A list, which can be created using <code>magmaRset</code>, containing your authorization 'token' (a string), a 'url' of magma to target (a string), and optional 'opts' for specifying additions parameters for curl requests (a named list).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projectName</code></td>
<td>
<p>Single string. The name of the project you would like to interact with. For options, see <code>retrieveProjects</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>revisions</code></td>
<td>
<p>A list of named lists containing the data to be updated.
</p>
<p>List structure:
</p>

<ul>
<li>
<p> top level name(s): modelNames, can be 1 or more.
</p>
</li>
<li>
<p> 2nd level name(s): recordNames, can be 1 or more.
</p>
</li>
<li>
<p> 3rd level name(s) &amp; contents: the attributes to update &amp; the values to use.
</p>
</li>
</ul>
<p>See <a href="https://mountetna.github.io/magma.html#update">https://mountetna.github.io/magma.html#update</a> for additional formatting details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto.proceed</code></td>
<td>
<p>Logical. When set to TRUE, the function does not ask before proceeding forward with the 'magma/update'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autolink</code></td>
<td>
<p>Logical. FALSE by default for safety, but often you will want to set it to TRUE. Passed through to magma, this parameter controls whether the system will attempt to connect all targeted records up with the project's root.
Specifically, this means the system will 
1) determine parent records of all targeted records if it can, based on the project's gnomon grammar, 
2) continue parent determination for those parent records, repeating this process until reaching the project's root (the project record),
then 3) creates any of these records that don't currently exist,
and finally 4) creates all the assumed parent-child linkages</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dryRun</code></td>
<td>
<p>Logical. FALSE by default. Passed through to magma, this parameter controls whether the system will only test whether the update is valid without making changes to the database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed along to the internal '.retrieve()', '.query()', or '.update()' functions,
for troubleshooting or advanced-user purposes only: </p>

<ul>
<li> <p><code>request.only</code> (Logical) &amp; <code>json.params.only</code> (Logical) which 1) stop the function before its main curl request to magma and 2) returns the values that would have been sent to magma in either of two formats.
</p>
</li>
<li> <p><code>verbose</code> (Logical) sets whether to report the status of the curl request after it is performed.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function mimics the activity of the magma/update function, documented here <a href="https://mountetna.github.io/magma.html#update">https://mountetna.github.io/magma.html#update</a>,
with the main difference being that the <code>revisions</code> input should be in nested list format rather than nested hash (because R does not support hash structures).
</p>
<p>Internally, the function:
</p>
<p>1. Summarizes records of each model that will be targeted for updating.
</p>
<p>2. Prompts the user before proceeding (unless <code>auto.proceed</code> is set to <code>TRUE</code>)
</p>
<p>3. Directly passes its inputs along to magma/update via a curl request.
</p>


<h3>Value</h3>

<p>None directly.
</p>
<p>The function sends data to magma, and the only outputs are information reported via the console.
</p>


<h3>See Also</h3>

<p><a href="https://mountetna.github.io/magma.html#update">https://mountetna.github.io/magma.html#update</a> for documentation of the underlying magma/update function.
</p>
<p><code>updateMatrix</code> for a matrix-dedicated version of this function which can be provided a matrix, or matrix's file location, directly.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (interactive()) {
    # First, we use magmaRset to create an object which will tell other magmaR
    #  functions our authentication token (as well as some other optional bits).
    # When run in this way, it will ask you to give your token.
    magma &lt;- magmaRset()
    
    # Note that you likely do not have write-permissions for the 'example'
    # project, so this code can be expected to give an authorization error.

    updateValues(
        target = magma,
        projectName = "example",
        autolink = TRUE,
        dryRun = FALSE,
        revisions = list(
            # model
            'rna_seq' = list(
                # record
                'EXAMPLE-HS1-WB1-RSQ1' = list(
                    # attribute
                    'fraction' = list(
                        # value(s)
                        "Tcells"
                        )
                    )
                )
            )
        )
}

</code></pre>


</div>