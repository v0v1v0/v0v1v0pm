<div class="container">

<table style="width: 100%;"><tr>
<td>query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search-like function that can obtain linked data from distinct models.</h2>

<h3>Description</h3>

<p>Analogous to the '/query' function of magma.
</p>


<h3>Usage</h3>

<pre><code class="language-R">query(target, projectName, queryTerms = list(), format = c("list", "df"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>A list, which can be created using <code>magmaRset</code>, containing your authorization 'token' (a string), a 'url' of magma to target (a string), and optional 'opts' for specifying additions parameters for curl requests (a named list).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projectName</code></td>
<td>
<p>Single string. The name of the project you would like to interact with. For options, see <code>retrieveProjects</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>queryTerms</code></td>
<td>
<p>A list of strings where list elements are query predicates and verbs. See <a href="https://mountetna.github.io/magma.html#query">https://mountetna.github.io/magma.html#query</a> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>Either "list" or "df" (=dataframe). This sets the desired output format. The list option is the more raw form.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed along to the internal '.retrieve()', '.query()', or '.update()' functions,
for troubleshooting or advanced-user purposes only: </p>

<ul>
<li> <p><code>request.only</code> (Logical) &amp; <code>json.params.only</code> (Logical) which 1) stop the function before its main curl request to magma and 2) returns the values that would have been sent to magma in either of two formats.
</p>
</li>
<li> <p><code>verbose</code> (Logical) sets whether to report the status of the curl request after it is performed.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function initially mimics the activity of the magma's /query functionality,
which is documented here <a href="https://mountetna.github.io/magma.html#query">https://mountetna.github.io/magma.html#query</a>.
</p>
<p>Afterwards, the json list output of magma/query is converted into an R list, and then the <code>format</code> input determines whether it should be wrangled further:
</p>

<ul>
<li> <p><code>format = "list"</code>, default: R list output directly.
</p>
</li>
<li> <p><code>format = "df"</code>: R list converted into a dataframe where data comes from the list$answer and column names come from the list$format
</p>
</li>
</ul>
<h3>Value</h3>

<p>A list, default, if <code>format == "list"</code>,
</p>
<p>OR A dataframe conversion if <code>format = "df"</code>
</p>


<h3>See Also</h3>

<p><a href="https://mountetna.github.io/magma.html#query">https://mountetna.github.io/magma.html#query</a> for documentation of the underlying magma/query function.
</p>
<p><code>retrieveProjects</code> for exploring options for the <code>projectName</code> input.
</p>
<p><code>retrieveModels</code>, <code>retrieveIds</code>, and <code>retrieveAttributes</code> and <code>retrieveTemplate</code> for exploring the project structure and determining <code>queryTerm</code> options.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (interactive()) {
    # First, we use magmaRset to create an object which will tell other magmaR
    #  functions our authentication token (as well as some other optional bits).
    # When run in this way, it will ask you to give your token.
    magma &lt;- magmaRset()
    
    ### To obtain the 'group' attribute, from the subject-model, that are
    #   associated with records of the rna_seq-model:

    # "Raw" output of query:
    query_list &lt;- query(
        target = magma,
        projectName = "example",
        queryTerms = 
            list('rna_seq',
                 '::all',
                 'biospecimen',
                 'subject',
                 'group'))
    print(query_list)
                 
    # Or instead re-formatted to a dataframe, which may be easier for
    #   downstream applications in R:
    query_df &lt;- query(
        target = magma,
        projectName = "example",
        queryTerms = 
            list('rna_seq',
                 '::all',
                 'biospecimen',
                 'subject',
                 'group'),
        format = 'df')
    print(query_df)
}

</code></pre>


</div>