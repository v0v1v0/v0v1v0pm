<div class="container">

<table style="width: 100%;"><tr>
<td>retrieveMetadata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download data from magma of one model, but transformed into the shape of a different model's records.</h2>

<h3>Description</h3>

<p>Retrieve data from one model ("meta") transformed into the shape of linked records of a different model ("target").
For example, one could get subject-level information for an RNAseq counts matrix with this function.
The output would contain columns of subject-level attributes, and rows that are the RNAseq-model records.
</p>


<h3>Usage</h3>

<pre><code class="language-R">retrieveMetadata(
  target,
  projectName,
  meta_modelName,
  meta_attributeNames = "all",
  target_modelName,
  target_recordNames = "all",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>A list, which can be created using <code>magmaRset</code>, containing your authorization 'token' (a string), a 'url' of magma to target (a string), and optional 'opts' for specifying additions parameters for curl requests (a named list).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projectName</code></td>
<td>
<p>Single string. The name of the project you would like to interact with. For options, see <code>retrieveProjects</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta_modelName, meta_attributeNames</code></td>
<td>
<p>Strings which indicate the "meta"data to retrieve.
They work the same as inputs of other functions without the <code>meta_</code> portion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_modelName, target_recordNames</code></td>
<td>
<p>Strings which indicate the "target" data that meta-data is desired to be reshaped into.
They work the same as inputs of other functions without the <code>target_</code> portion, and
these inputs ultimately set which records of "meta" model data to actually obtain.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed along to the internal '.retrieve()', '.query()', or '.update()' functions,
for troubleshooting or advanced-user purposes only: </p>

<ul>
<li> <p><code>request.only</code> (Logical) &amp; <code>json.params.only</code> (Logical) which 1) stop the function before its main curl request to magma and 2) returns the values that would have been sent to magma in either of two formats.
</p>
</li>
<li> <p><code>verbose</code> (Logical) sets whether to report the status of the curl request after it is performed.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function retrieves data from one model (the "meta" model) transformed so that rows of the returned dataframe correspond to records of a different model (the "target" model).
</p>
<p>Internally, it first determines the path, through child-parent model linkages, to navigate from the meta_model to the target_model.
</p>
<p>Then, it performs calls to <code>query</code> in order to retrieve identifier linkage along that path.
The identifier linkage is turned into a dataframe of identifier traces.
</p>
<p>Next, it performs a call to <code>retrieve</code> to obtain the wanted metadata as a dataframe.
</p>
<p>(If linkage paths would create any 1:many mappings of target data records to metadata records, data of extra records are shifted "rightwards" into columns appended with "_#" in their names.
This is a reliable, though imperfect, method so we hope to implement alternatives in the future.)
</p>
<p>Finally, the dataframe of linkage path identifiers is merged with the metadata dataframe, reshaping the metadata to properly have one row per requested <code>target_recordName</code>.
</p>


<h3>Value</h3>

<p>A dataframe with rows = <code>target_recordNames</code> and columns = model identifiers and either <code>meta_attributeNames</code> or repeats of <code>meta_attributeNames_#</code> when there are 1:many mappings of target data records to metadata records.
</p>


<h3>See Also</h3>

<p><code>retrieve</code> and <code>retrieveMatrix</code> which will likely be useful for retrieving associated "target" data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (interactive()) {
    # First, we use magmaRset to create an object which will tell other magmaR
    #  functions our authentication token (as well as some other optional bits).
    # When run in this way, it will ask you to give your token.
    magma &lt;- magmaRset()
    
    # Running like this will ask for input of your janus token one time.
    retrieveMetadata(
        target = magma,
        projectName = "example",
        meta_modelName = "subject",
        meta_attributeNames = "group",
        target_modelName = "rna_seq",
        target_recordNames = "all")
}

</code></pre>


</div>