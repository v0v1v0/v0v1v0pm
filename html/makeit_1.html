<div class="container">

<table style="width: 100%;"><tr>
<td>make</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run R Script if Needed</h2>

<h3>Description</h3>

<p>Run an R script if underlying files have changed, otherwise do nothing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make(recipe, prereq, target, include = TRUE, details = FALSE,
  force = FALSE, recon = FALSE, quiet = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recipe</code></td>
<td>
<p>script filename.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prereq</code></td>
<td>
<p>one or more files required by the script. For example, data
files, scripts, or <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>one or more output files produced by the script. Directory
names can also be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include</code></td>
<td>
<p>whether to automatically include the script itself as a
prerequisite file. This means that if the script file has been
modified, it should be run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>details</code></td>
<td>
<p>whether to show a diagnostic table of files and time last
modified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>whether to run the R script unconditionally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recon</code></td>
<td>
<p>whether to return <code>TRUE</code> or <code>FALSE</code>, without actually
running the R script.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>whether to suppress messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed to <code>source</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>TRUE</code> or <code>FALSE</code>, indicating whether the script was run.
</p>


<h3>Note</h3>

<p>This function provides functionality similar to makefile rules, to determine
whether a script should be (re)run or not.
</p>
<p>If any <code>target</code> is either missing or is older than any <code>prereq</code>,
then the script is run.
</p>


<h3>References</h3>

<p>Stallman, R. M. <em>et al</em>.
An introduction to makefiles.
Chapter 2 in the <em><a href="https://www.gnu.org/software/make/manual/">GNU
Make manual</a></em>.
</p>


<h3>See Also</h3>

<p>See <code>vignette("makeit")</code> for annotated examples and discussion.
</p>
<p><code>file.exists</code> and <code>file.mtime</code> are the underlying
functions used to check if files are missing or have changed.
</p>
<p><code>source</code> is the underlying function to run a script.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Copy examples 'analysis' and 'sequential' to temporary directory
exdir &lt;- tempdir()
file.copy(system.file("examples/analysis", package="makeit"),
          exdir, recursive=TRUE)
file.copy(system.file("examples/sequential", package="makeit"),
          exdir, recursive=TRUE)
owd &lt;- getwd()

# This analysis uses input.dat to produce output.dat
setwd(file.path(exdir, "analysis"))
dir()
make("analysis.R", "input.dat", "output.dat")  # Running analysis.R
dir()
make("analysis.R", "input.dat", "output.dat")  # Nothing to be done

# Suppress message, show last modified
make("analysis.R", "input.dat", "output.dat", quiet=TRUE)
make("analysis.R", "input.dat", "output.dat", details=TRUE)

# Sequential scripts
setwd(file.path(exdir, "sequential"))
print.simple.list(dir(recursive=TRUE))
make("01_model.R", "data.dat", "results.dat")
make("02_plots.R", "results.dat", c("plots/A.png", "plots/B.png"))
make("03_tables.R", "results.dat", c("tables/A.csv", "tables/B.csv"))
print.simple.list(dir(recursive=TRUE))

# Clean up
unlink(file.path(exdir, c("analysis", "sequential")), recursive=TRUE)
setwd(owd)

# See vignette("makeit") for more examples and discussion


</code></pre>


</div>