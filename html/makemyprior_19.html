<div class="container">

<table style="width: 100%;"><tr>
<td>make_prior</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Making a prior object</h2>

<h3>Description</h3>

<p>Make a prior object with all necessary information about the prior and model.
The object can either be sent to makemyprior_gui
or used directly for inference with Stan (inference_stan) or INLA (inference_inla).
eval_joint_prior can be used to evaluate the prior.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_prior(
  formula,
  data,
  family = "gaussian",
  prior = list(),
  intercept_prior = c(),
  covariate_prior = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A formula object, using the function mc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data used in the model, as a <code>data.frame</code> or <code>list</code>. All elements must have the same length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>A string indicating the likelihood family. <code>gaussian</code> with identity link is the default.
<code>binomial</code> with logit link and <code>poisson</code> with log link are also possible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior</code></td>
<td>

<dl>
<dt><code>tree</code></dt>
<dd>
<p>The tree structure as a string. A split is specified as <code>s1 = (a,b)</code>, where <code>(s1)</code>
represents a split node and can be any name except names of the input data in <code>data</code> and
the reserved <code>(eps)</code>, which is used for residuals for a Gaussian likelihood. Short names
are recommended. Note that these split names are just used in the initial specification, and
will not be used later as they are changed by the function automatically.
The child nodes for each split are included in parentheses separated by commas, and each
split is separated by semicolons.
Singletons are included as <code>(a)</code>.
</p>
</dd>
<dt><code>V</code></dt>
<dd>
<p>A named list with information on the priors on each top node and singleton,
i.e., all variances.
The names in the list are the top node and singleton names from the <code>tree</code> argument.
Syntax is <code>V = list(s1 = list(prior = prior_name, param = parameter_vector))</code>.</p>
</dd>
<dt><code>w</code></dt>
<dd>
<p>A named list with information on the priors on each split, i.e., all variance proportions.
The names in the list are the split node names from the <code>tree</code> argument, and is specified
in the same way as the variance priors in <code>V</code>.</p>
</dd>
</dl>
<p>Prior on residuals can be defined using <code>eps</code> in this list in the case of a Gaussian likelihood.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intercept_prior</code></td>
<td>
<p>Parameters for Gaussian prior on intercept, specified as a vector with mean and standard deviation.
Default is (0, 1000).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariate_prior</code></td>
<td>
<p>Parameters for Gaussian prior on coefficients of covariates,
specified as named list, each element is a vector with mean and standard deviation. Default is (0, 1000).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See makemyprior_models for details on available priors and likelihoods.
</p>


<h3>Value</h3>

<p>Prior object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

vignette("make_prior", package = "makemyprior")

## End(Not run)

p &lt;- 10
m &lt;- 10
n &lt;- m*p

set.seed(1)
data &lt;- list(a = rep(1:p, each = m),
             b = rep(1:m, times = p),
             x = runif(n))
data$y &lt;- data$x + rnorm(p, 0, 0.5)[data$a] +
  rnorm(m, 0, 0.3)[data$b] + rnorm(n, 0, 1)

formula &lt;- y ~ x + mc(a) + mc(b)

prior &lt;- make_prior(formula, data, family = "gaussian",
                    intercept_prior = c(0, 1000),
                    covariate_prior = list(x = c(0, 100)))
prior
plot(prior)

</code></pre>


</div>