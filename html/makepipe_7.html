<div class="container">

<table style="width: 100%;"><tr>
<td>make_with_dir</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a pipeline using roxygen tags</h2>

<h3>Description</h3>

<p>Instead of maintaining a separate pipeline script containing calls to
<code>make_with_source()</code>, you can add roxygen-like headers to the .R files in
your pipeline containing the <code style="white-space: pre;">⁠@makepipe⁠</code> tag along with <code style="white-space: pre;">⁠@targets⁠</code>,
<code style="white-space: pre;">⁠@dependencies⁠</code>, and so on. These tags will be parsed by <code>make_with_dir()</code>
and used to construct a pipeline. You can call a specific part of the
pipeline that has been documented in this way using <code>make_with_roxy()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_with_dir(
  dir = ".",
  recursive = FALSE,
  build = TRUE,
  envir = new.env(parent = parent.frame()),
  quiet = getOption("makepipe.quiet")
)

make_with_roxy(
  source,
  envir = new.env(parent = parent.frame()),
  quiet = getOption("makepipe.quiet")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>A character vector of full path names; the default corresponds to the working directory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>A logical determining whether or not to recurse into
subdirectories</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>build</code></td>
<td>
<p>A logical determining whether or not the pipeline will be built
immediately or simply returned to the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>The environment in which to execute the <code>source</code> or <code>recipe</code>. By
default, execution will take place in a fresh environment whose parent is
the calling environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>A logical determining whether or not messages are signaled</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>The path to an R script which makes the <code>targets</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Other than <code style="white-space: pre;">⁠@makepipe⁠</code>, which is used to tell whether a given script should
be included in the pipeline, the tags recognised mirror the arguments to
<code>make_with_source()</code>. In particular,
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠@targets⁠</code> and <code style="white-space: pre;">⁠@dependencies⁠</code> are for declaring inputs and outputs, the
expected format is a comma separated list of strings like
<code style="white-space: pre;">⁠@targets "out1.Rds", "out2.Rds"⁠</code> but R code like <code style="white-space: pre;">⁠@targets file.path(DIR, "out.Rds")⁠</code>
(evaluated in <code>envir</code>) works too
</p>
</li>
<li> <p><code style="white-space: pre;">⁠@packages⁠</code> is for declaring the packages that the targets depend on, the
expected format is <code style="white-space: pre;">⁠@packages pkg1 pkg2 etc⁠</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠@force⁠</code> is for declaring whether or not execution should be forced, the
expected format is a logical like <code>TRUE</code> or <code>FALSE</code>
</p>
</li>
</ul>
<p>See the getting started vignette for more information.
</p>


<h3>Value</h3>

<p>A <code>Pipeline</code> object
</p>


<h3>See Also</h3>

<p>Other make: 
<code>make_with_recipe()</code>,
<code>make_with_source()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Create a pipeline from scripts in the working dir without executing it
p &lt;- make_with_dir(build = FALSE)
p$build() # Then execute it yourself

## End(Not run)
</code></pre>


</div>