<div class="container">

<table style="width: 100%;"><tr>
<td>extractRaster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract pixel values from MAP rasters using point coordinates.</h2>

<h3>Description</h3>

<p><code>extractRaster</code> extracts pixel values from MAP rasters at user-specified point locations (without downloading the entire raster).
</p>


<h3>Usage</h3>

<pre><code class="language-R">extractRaster(
  df,
  csv_path = NULL,
  surface = NULL,
  year = NULL,
  dataset_id = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data.frame containing coordinates of input point locations, must contain columns named 'latitude'/'lat'/'x'  AND 'longitude'/'long'/'y')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csv_path</code></td>
<td>
<p>(optional) user-specified path to which extractRaster coordinates and results are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surface</code></td>
<td>
<p>deprecated argument. Please remove it from your code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>for time-varying rasters: if downloading a single surface for one or more years, <code>year</code> should be a vector specifying the desired year(s). if downloading more than one surface, use a list the same length as <code>surface</code>, providing the desired year-range for each time-varying surface in <code>surface</code> or <code>NA</code> for static rasters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset_id</code></td>
<td>
<p>A character string specifying the dataset ID(s) of one or more rasters. These dataset ids can be found in the data.frame returned by listRaster, in the dataset_id column e.g. c('Malaria__202206_Global_Pf_Mortality_Count', 'Malaria__202206_Global_Pf_Parasite_Rate')</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>extractRaster</code> returns the input dataframe (<code>df</code>), with the following columns appended, providing values for each raster, location and year.
</p>

<ol>
<li> <p><code>layerName</code> dataset id corresponding to extracted raster values for a given row, check <code>listRaster</code> for raster metadata.
</p>
</li>
<li> <p><code>year</code> the year for which raster values were extracted (time-varying rasters only; static rasters do not have this column).
</p>
</li>
<li> <p><code>value</code> the raster value for the pixel in which a given point location falls.
</p>
</li>
</ol>
<h3>See Also</h3>

<p><code>autoplot</code> method for quick mapping of PR point locations (<code>autoplot.pr.points</code>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Download PfPR data for Nigeria and Cameroon and map the locations of these points using autoplot
## Not run: 
# Get some data and remove rows with NAs in location or examined or positive columns.
NGA_CMR_PR &lt;- getPR(country = c("Nigeria", "Cameroon"), species = "Pf")
complete &lt;- complete.cases(NGA_CMR_PR[, c(4, 5, 16, 17)])
NGA_CMR_PR &lt;- NGA_CMR_PR[complete, ]

# Extract PfPR data at those locations.
data &lt;- extractRaster(df = NGA_CMR_PR[, c('latitude', 'longitude')],
                      dataset_id = 'Malaria__202206_Global_Pf_Parasite_Rate',
                      year=2020)

# Some rasters are stored with NA encoded as -9999
data$value[data$value == -9999] &lt;- NA

# We can quickly plot a summary
plot((NGA_CMR_PR$positive / NGA_CMR_PR$examined) ~ data$value)

## End(Not run)


</code></pre>


</div>