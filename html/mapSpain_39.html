<div class="container">

<table style="width: 100%;"><tr>
<td>esp_make_provider</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a custom tile provider</h2>

<h3>Description</h3>

<p>Helper function for <code>esp_getTiles()</code> that helps to create a custom provider.
</p>


<h3>Usage</h3>

<pre><code class="language-R">esp_make_provider(id, q, service, layers, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>An identifier for the user. Would be used also for identifying
cached tiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>The base url of the service.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>service</code></td>
<td>
<p>The type of tile service, either <code>"WMS"</code> or <code>"WMTS"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layers</code></td>
<td>
<p>The name of the layer to retrieve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to the query, like <code>version</code>, <code>format</code>,
<code>crs/srs</code>, <code>style</code>, ... depending on the capabilities of the service.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is meant to work with services provided as of the
<a href="http://opengeospatial.github.io/e-learning/wms/text/operations.html#getmap">OGC Standard</a>.
</p>
<p>Note that:
</p>

<ul>
<li> <p><a href="https://CRAN.R-project.org/package=mapSpain"><span class="pkg">mapSpain</span></a> would not provide advice on the parameter <code>q</code> to be
provided.
</p>
</li>
<li>
<p> Currently, on <strong>WMTS</strong> requests only services with
<code>tilematrixset=GoogleMapsCompatible</code> are supported.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A named list with two elements <code>id</code> and <code>q</code>.
</p>


<h3>See Also</h3>

<p><code>esp_getTiles()</code>.
</p>
<p>For a list of potential providers from Spain check
<a href="https://www.idee.es/segun-tipo-de-servicio">IDEE Directory</a>.
</p>
<p>Other imagery utilities: 
<code>addProviderEspTiles()</code>,
<code>esp_getTiles()</code>,
<code>esp_tiles_providers</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# This script downloads tiles to your local machine
# Run only if you are online

custom_wms &lt;- esp_make_provider(
  id = "an_id_for_caching",
  q = "https://idecyl.jcyl.es/geoserver/ge/wms?",
  service = "WMS",
  version = "1.3.0",
  layers = "geolog_cyl_litologia"
)

x &lt;- esp_get_ccaa("Castilla y Le√≥n", epsg = 3857)

mytile &lt;- esp_getTiles(x, type = custom_wms)

tidyterra::autoplot(mytile) +
  ggplot2::geom_sf(data = x, fill = NA)

## End(Not run)
</code></pre>


</div>