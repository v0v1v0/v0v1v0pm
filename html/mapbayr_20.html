<div class="container">

<table style="width: 100%;"><tr>
<td>do_mapbayr_sim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate with mapbayr</h2>

<h3>Description</h3>

<p>A wrapper around <code>mrgsolve::mrgsim()</code> for results generated from <code>mapbayest()</code>. Exported for the purpose of utility but might be prone to changes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">do_mapbayr_sim(
  x,
  data,
  recsort = 3,
  output = "df",
  ...,
  eta = NULL,
  nrep = NULL,
  new_omega = NULL,
  new_sigma = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>NMTRAN-like data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recsort</code></td>
<td>
<p>record sorting flag. Defaulted to 3. See <code>mrgsolve::mrgsim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>type of object returned. Defaulted to <code>"df"</code> for a data.frame. See <code>mrgsolve::mrgsim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed to <code>mrgsolve::mrgsim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eta</code></td>
<td>
<p>a matrix of individual point estimates of ETA. Most likely obtained with <code>get_eta()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrep</code></td>
<td>
<p>number of replicates. If used, the original "ID" in the data will be replaced by unique identifiers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_omega, new_sigma</code></td>
<td>
<p>New "omega" and "sigma" matrices to use instead of those defined in "$OMEGA" and "$SIGMA".</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An output from <code>mrgsolve::mrgsim()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(mrgsolve)
mod &lt;- exmodel(1, exdata = FALSE)
dat &lt;- exdata(ID = c(1,2))

# Classic framework
set.seed(123)
do_mapbayr_sim(x = mod, data = dat, Request = "DV")

# No random effect
do_mapbayr_sim(x = zero_re(mod), data = dat)
do_mapbayr_sim(x = mod, data = dat, new_omega = "zero_re")

# New random effects
## New omega matrix
do_mapbayr_sim(x = mod, data = dat, new_omega = dmat(0.1, 0.03, 0.01), nrep = 10)

## Matrix with "eta" as mean and "new_omega" as variance covariance matrix
etamat &lt;- get_eta(est001, output = "num")[1:2,]

do_mapbayr_sim(
  x = mod, data = dat, nrep = 10,
  eta = etamat, new_omega = dmat(0.1, 0.03, 0.01)
)

</code></pre>


</div>