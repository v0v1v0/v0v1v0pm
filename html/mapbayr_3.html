<div class="container">

<table style="width: 100%;"><tr>
<td>add_covariates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add covariate columns to a dataset</h2>

<h3>Description</h3>

<p>The <code>add_covariates()</code> function adds an one or several covariate columns to a dataset provided as a proper data.frame or within a 'mrgsolve' model. Used in combination with <code>adm_rows()</code> and <code>obs_rows()</code>, it helps the creation of datasets in the proper format for simulations with 'mrgsolve' or parameter estimation with 'mapbayr', as explained in data_helpers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_covariates(x, ...)

## S3 method for class 'data.frame'
add_covariates(x, ..., covariates = list(), AOLA = FALSE, TOLA = FALSE)

## S3 method for class 'mrgmod'
add_covariates(x, ..., covariates = list(), AOLA = NULL, TOLA = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>either a data.frame or a 'mrgsolve' model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>covariates values to add to the data. For each variable, supply a vector of length 1 or with the same number of rows. Ignored if <code>covariates</code> argument is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>Covariates passed as a single list of variables. Overrides <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AOLA, TOLA</code></td>
<td>
<p>a logical. Should the "Amount Of Last Administration" and "Time Of Last Administration" variables be added into the dataset? Default if FALSE if <code>x</code> is a dataset, TRUE if <code>x</code> is a 'mrgsolve' model where <code>AOLA</code> and <code>TOLA</code> are defined as covariates</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a data.frame, or a 'mrgsolve' model with a dataset in the <code style="white-space: pre;">⁠@args$data⁠</code> slot (accessible with <code>get_data()</code>).
</p>


<h3>See Also</h3>

<p>data_helpers
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Cannot start from scratch
## Not run: 
add_covariates(BW = 90, SEX = 0)

## End(Not run)

library(magrittr)
adm_rows(time = c(0, 24, 48), cmt = 1, amt = c(100, 200, 300)) %&gt;%
  add_covariates(BW = c(90, 85, 80), SEX = 0)

# If covariates are stored in a list, use `covariates = `
adm_rows(time = c(0, 24, 48), cmt = 1, amt = c(100, 200, 300)) %&gt;%
  add_covariates(covariates = list(BW = c(90, 85, 80), SEX = 0))

# Missing values are filled with the "next observation carried backward" rule
adm_rows(time = c(0, 24, 48), cmt = 1, amt = c(100, 200, 300)) %&gt;%
  add_covariates(BW = c(90, 85, 80), SEX = 0) %&gt;%
  obs_rows(time = 36, DV = .0123, cmt = 2)
# Always verify the output in case of time-varying covariates

# Possibility to add Time and Amount of last administration as covariates
adm_rows(time = c(0, 24, 48), amt = c(100, 200, 300), cmt = 1) %&gt;%
  obs_rows(time = c(8, 16, 32, 40), cmt = 2, DV = runif(4)) %&gt;%
  add_covariates(TOLA = TRUE, AOLA = TRUE) %&gt;%
  obs_rows(time = 72, cmt = 2, DV = .123) # AOLA/TOLA re-updated afterwards

# Automatic inclusion of `TOLA`/`AOLA` if they are covariates of the model
library(mrgsolve)
model &lt;- mcode("model", "
$PARAM @annotated @covariates
TOLA : 0 : Time Last Adm
AOLA : 0 : Amount Last Adm
", compile = FALSE)

model %&gt;%
  adm_rows(time = c(0, 24, 48), amt = c(100, 200, 300), cmt = 1) %&gt;%
  add_covariates() %&gt;%
  get_data()
</code></pre>


</div>