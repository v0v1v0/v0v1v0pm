<div class="container">

<table style="width: 100%;"><tr>
<td>preprocess.ofv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Preprocess model and data for ofv computation</h2>

<h3>Description</h3>

<p>Functions to generate arguments passed to <code>compute_ofv</code>. Arguments that are fixed between individuals are created once (<code>preprocess.ofv.fix</code>), while others are specific of each individual (<code>preprocess.ofv.id</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">preprocess.ofv.fix(x, data, select_eta = seq_along(eta(x)), lambda = 1)

preprocess.ofv.id(x, iddata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data, iddata</code></td>
<td>
<p>NMTRAN-like data set. iddata is likely a dataset of one individual</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_eta</code></td>
<td>
<p>numbers of the ETAs taken into account. Set the dimensions of the inversed OMEGA matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>a numeric value, the weight applied to the model prior (default is 1)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of arguments used to compute the objective function value.
</p>
<p>The following arguments are fixed between individuals:
</p>

<ul>
<li> <p><code>qmod</code>: model object, modified to simulate without random effects and with controlled outputs
</p>
</li>
<li> <p><code>sigma</code>: a single matrix object
</p>
</li>
<li> <p><code>log_transformation</code>: a logical, whether predictions need to be log-transformed for ofv computation
</p>
</li>
<li> <p><code>omega_inv</code>: a single matrix object
</p>
</li>
<li> <p><code>all_cmt</code>: a vector of compartment numbers where observations can be expected
</p>
</li>
</ul>
<p>The following arguments differs between individuals:
</p>

<ul>
<li> <p><code>idvaliddata</code>: a matrix, individual data set (with administrations and covariates), validated with <code>valid_data_set</code>
</p>
</li>
<li> <p><code>idDV</code>: a vector of (possibly log-transformed) observations
</p>
</li>
<li> <p><code>idcmt</code>: a vector of compartments where observations belong to
</p>
</li>
<li> <p><code>idblq</code>,<code>idlloq</code>: optional, a logical and numerical vector indicating if the observation is below the lower limit of quantification, and the LLOQ value, respectively
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">mod &lt;- exmodel(add_exdata = FALSE, compile = FALSE)
dat &lt;- exdata(ID = c(1,4))

preprocess.ofv.fix(x = mod, data = dat)
preprocess.ofv.id(x = mod, iddata = dat[dat$ID == 1,])
preprocess.ofv.id(x = mod, iddata = dat[dat$ID == 4,])

</code></pre>


</div>