<div class="container">

<table style="width: 100%;"><tr>
<td>mb_optimized_route</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Return an optimized route for a series of input coordinates</h2>

<h3>Description</h3>

<p>Return an optimized route for a series of input coordinates
</p>


<h3>Usage</h3>

<pre><code class="language-R">mb_optimized_route(
  input_data,
  profile = c("driving", "walking", "cycling", "driving-traffic"),
  output = "sf",
  source = c("any", "first"),
  destination = c("any", "last"),
  roundtrip = TRUE,
  annotations = NULL,
  approaches = NULL,
  bearings = NULL,
  distributions = NULL,
  language = NULL,
  overview = "simplified",
  radiuses = NULL,
  steps = NULL,
  access_token = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input_data</code></td>
<td>
<p>An input dataset of class <code>"sf"</code>, or a list of coordinate
pairs of format <code>c(longitude, latitude)</code>. Must be between 2 and 12
coordinate pairs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>profile</code></td>
<td>
<p>One of "driving" (the default), "driving-traffic", "walking",
or "cycling".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>One of "sf" (the default), which returns an <code>sf</code> LINESTRING
representing the route geometry, or "full", which returns the full request
from the Directions API as a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>One of <code>"any"</code> (the default) or <code>"first"</code>. If "any" is
specified, any of the input coordinates may be used as the starting point.
If "first" is specified, the first coordinate will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destination</code></td>
<td>
<p>One of <code>"any"</code> (the default) or <code>"last"</code>. If "any" is
specified, any of the input coordinates may be used as the ending point. If
"last" is specified, the last coordinate will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundtrip</code></td>
<td>
<p>If <code>TRUE</code> (the default), the route will start and end at the
same point. <code>roundtrip = FALSE</code> only works when <code>source</code> is <code>"first"</code> and
<code>destination</code> is <code>"last"</code>. If <code>FALSE</code> is supplied here, the route will
start at the first point in <code>input_data</code> and end at the last point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotations</code></td>
<td>
<p>A comma-separated string of additional route metadata,
which may include duration, distance, speed, and congestion. Must be used
with <code>overview = "full"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>approaches</code></td>
<td>
<p>A character string with semicolon-separated specifications
for how to approach waypoints. Options include <code>unrestricted</code> and <code>curb</code>.
Defaults to NULL which uses <code>unrestricted</code> for all waypoints.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bearings</code></td>
<td>
<p>A semicolon-delimited character string of bearings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distributions</code></td>
<td>
<p>A semicolon-delimited character string of number pairs
that specifies pick-up and drop-off locations. The first number indicates
the index of the pick-up location, and the second number represents the
index of the drop-off location.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>The language of the returned instructions (defaults to
English). Available language codes are found at
<a href="https://docs.mapbox.com/api/navigation/#instructions-languages">https://docs.mapbox.com/api/navigation/#instructions-languages</a>. Only
available when <code>steps = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overview</code></td>
<td>
<p>If left blank, defaults to <code>'simplified'</code> for simplified
geometry; the other option is <code>'full'</code> which provides the most detailed
geometry available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radiuses</code></td>
<td>
<p>A character string with semicolon-separated radii that
specify the distance (in meters) to snap each input coordinate to the road
network. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>If <code>TRUE</code>, returns the route object split up into route legs
with step-by-step instructions included. If <code>FALSE</code> or <code>NULL</code> (the default), a
single line geometry representing the full route will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>access_token</code></td>
<td>
<p>Your Mapbox access token; which can be set with
<code>mb_access_token()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Either a list of two <code>sf</code> objects - one representing the waypoints, and one representing the route - or an R list representing the full optimization API response.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

library(mapboxapi)
library(sf)

to_visit &lt;- data.frame(
  X = c(-0.209307, -0.185875, -0.216877, -0.233511, -0.234541),
  Y = c(5.556019, 5.58031, 5.582528, 5.566771, 5.550209)
) %&gt;%
  st_as_sf(coords = c("X", "Y"), crs = 4326)

optimized_route &lt;- mb_optimized_route(to_visit,
  profile = "driving-traffic"
)

## End(Not run)

</code></pre>


</div>