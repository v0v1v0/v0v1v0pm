<div class="container">

<table style="width: 100%;"><tr>
<td>add_terrain</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add terrain</h2>

<h3>Description</h3>

<p>Adds mesh surfaces from height map images
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_terrain(
  map,
  layer_id = NULL,
  elevation_data,
  texture = NULL,
  elevation_decoder = c(1, 0, 0, 0),
  bounds = NULL,
  max_error = 4,
  update_view = TRUE,
  focus_layer = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a mapdeck map object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer_id</code></td>
<td>
<p>single value specifying an id for the layer. Use this value to
distinguish between shape layers of the same type. Layers with the same id are likely
to conflict and not plot correctly</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elevation_data</code></td>
<td>
<p>Image URL that encodes height data. When <code>elevation_data</code>
is a URL template, i.e. a string containing '{x}' and '{y}', it loads terrain tiles on demand
and renders a mesh for each tile. If <code>elevation_data</code> is an absolute URL, as ingle mesh is used,
and the <code>bounds</code> argument is required to position it into the world space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>texture</code></td>
<td>
<p>Image URL to use as the texture</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elevation_decoder</code></td>
<td>
<p>Four value used to convert a pixel to elevation in metres. The
values correspond to rScale, gScale, bScale, offset. See details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>Four values (<code> c(left, bottom, right, top) </code>. bounds of the
image to fit in x,y coordinates into. <code>left</code> and <code>right</code> referes to the world
longitude/x at the corresponding side of the image. <code>top</code> and <code>bottom</code> refers to
the world latitude/y at the corresponding side of the image. Must be supplied when using
non-tiled <code>elevation_data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_error</code></td>
<td>
<p>Martini error tolerance in metres, smaller number results in more detailed mesh.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update_view</code></td>
<td>
<p>logical indicating if the map should update the bounds to include this layer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>focus_layer</code></td>
<td>
<p>logical indicating if the map should update the bounds to only include this layer</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>elevation_decoder</code> contains four values representing
</p>

<ul>
<li>
<p>rScale - Multiplier of the red channel
</p>
</li>
<li>
<p>gScale - Multiplier of the green channel
</p>
</li>
<li>
<p>bScale - Multiplier of the blue channel
</p>
</li>
<li>
<p>offset - translation of the sum
</p>
</li>
</ul>
<p>Each colour channel is a number between [0, 255].
</p>


<h3>Examples</h3>

<pre><code class="language-R">

set_token( "MAPBOX_TOKEN" )
## Digital elevation model from https://www.usgs.gov/
elevation &lt;- 'https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/terrain.png'
texture &lt;- 'https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/terrain-mask.png'
bounds &lt;- c(-122.5233, 37.6493, -122.3566, 37.8159)

mapdeck() %&gt;%
  add_terrain(
    , elevation_data = elevation
    , elevation_decoder = c(1,0,0,0)
    , texture = texture
    , bounds = bounds
    , max_error = 1
  )



</code></pre>


</div>