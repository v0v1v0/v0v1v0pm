<div class="container">

<table style="width: 100%;"><tr>
<td>add_symbol_layer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a symbol layer to a map</h2>

<h3>Description</h3>

<p>Add a symbol layer to a map
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_symbol_layer(
  map,
  id,
  source,
  source_layer = NULL,
  icon_allow_overlap = NULL,
  icon_anchor = NULL,
  icon_color = NULL,
  icon_color_brightness_max = NULL,
  icon_color_brightness_min = NULL,
  icon_color_contrast = NULL,
  icon_color_saturation = NULL,
  icon_emissive_strength = NULL,
  icon_halo_blur = NULL,
  icon_halo_color = NULL,
  icon_halo_width = NULL,
  icon_ignore_placement = NULL,
  icon_image = NULL,
  icon_image_cross_fade = NULL,
  icon_keep_upright = NULL,
  icon_offset = NULL,
  icon_opacity = NULL,
  icon_optional = NULL,
  icon_padding = NULL,
  icon_pitch_alignment = NULL,
  icon_rotate = NULL,
  icon_rotation_alignment = NULL,
  icon_size = NULL,
  icon_text_fit = NULL,
  icon_text_fit_padding = NULL,
  icon_translate = NULL,
  icon_translate_anchor = NULL,
  symbol_avoid_edges = NULL,
  symbol_placement = NULL,
  symbol_sort_key = NULL,
  symbol_spacing = NULL,
  symbol_z_elevate = NULL,
  symbol_z_order = NULL,
  text_allow_overlap = NULL,
  text_anchor = NULL,
  text_color = "black",
  text_emissive_strength = NULL,
  text_field = NULL,
  text_font = NULL,
  text_halo_blur = NULL,
  text_halo_color = NULL,
  text_halo_width = NULL,
  text_ignore_placement = NULL,
  text_justify = NULL,
  text_keep_upright = NULL,
  text_letter_spacing = NULL,
  text_line_height = NULL,
  text_max_angle = NULL,
  text_max_width = NULL,
  text_offset = NULL,
  text_opacity = NULL,
  text_optional = NULL,
  text_padding = NULL,
  text_pitch_alignment = NULL,
  text_radial_offset = NULL,
  text_rotate = NULL,
  text_rotation_alignment = NULL,
  text_size = NULL,
  text_transform = NULL,
  text_translate = NULL,
  text_translate_anchor = NULL,
  text_variable_anchor = NULL,
  text_writing_mode = NULL,
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL,
  cluster_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> or <code>maplibre</code> functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_allow_overlap</code></td>
<td>
<p>If TRUE, the icon will be visible even if it collides with other previously drawn symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_anchor</code></td>
<td>
<p>Part of the icon placed closest to the anchor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_color</code></td>
<td>
<p>The color of the icon.  This is not supported for many Mapbox icons; read more at <a href="https://docs.mapbox.com/help/troubleshooting/using-recolorable-images-in-mapbox-maps/">https://docs.mapbox.com/help/troubleshooting/using-recolorable-images-in-mapbox-maps/</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_color_brightness_max</code></td>
<td>
<p>The maximum brightness of the icon color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_color_brightness_min</code></td>
<td>
<p>The minimum brightness of the icon color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_color_contrast</code></td>
<td>
<p>The contrast of the icon color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_color_saturation</code></td>
<td>
<p>The saturation of the icon color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_emissive_strength</code></td>
<td>
<p>The strength of the icon's emissive color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_halo_blur</code></td>
<td>
<p>The blur applied to the icon's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_halo_color</code></td>
<td>
<p>The color of the icon's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_halo_width</code></td>
<td>
<p>The width of the icon's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_ignore_placement</code></td>
<td>
<p>If TRUE, the icon will be visible even if it collides with other symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_image</code></td>
<td>
<p>Name of image in sprite to use for drawing an image background. To use values in a column of your input dataset, use <code>c('get', 'YOUR_ICON_COLUMN_NAME')</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_image_cross_fade</code></td>
<td>
<p>The cross-fade parameter for the icon image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_keep_upright</code></td>
<td>
<p>If TRUE, the icon will be kept upright.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_offset</code></td>
<td>
<p>Offset distance of icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_opacity</code></td>
<td>
<p>The opacity at which the icon will be drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_optional</code></td>
<td>
<p>If TRUE, the icon will be optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_padding</code></td>
<td>
<p>Padding around the icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_pitch_alignment</code></td>
<td>
<p>Alignment of the icon with respect to the pitch of the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_rotate</code></td>
<td>
<p>Rotates the icon clockwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_rotation_alignment</code></td>
<td>
<p>Alignment of the icon with respect to the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_size</code></td>
<td>
<p>The size of the icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_text_fit</code></td>
<td>
<p>Scales the text to fit the icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_text_fit_padding</code></td>
<td>
<p>Padding for text fitting the icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_translate</code></td>
<td>
<p>The offset distance of the icon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>icon-translate</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_avoid_edges</code></td>
<td>
<p>If TRUE, the symbol will be avoided when near the edges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_placement</code></td>
<td>
<p>Placement of the symbol on the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_spacing</code></td>
<td>
<p>Spacing between symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_z_elevate</code></td>
<td>
<p>Elevates the symbol z-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol_z_order</code></td>
<td>
<p>Orders the symbol z-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_allow_overlap</code></td>
<td>
<p>If TRUE, the text will be visible even if it collides with other previously drawn symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_anchor</code></td>
<td>
<p>Part of the text placed closest to the anchor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_color</code></td>
<td>
<p>The color of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_emissive_strength</code></td>
<td>
<p>The strength of the text's emissive color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_field</code></td>
<td>
<p>Value to use for a text label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_font</code></td>
<td>
<p>Font stack to use for displaying text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_halo_blur</code></td>
<td>
<p>The blur applied to the text's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_halo_color</code></td>
<td>
<p>The color of the text's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_halo_width</code></td>
<td>
<p>The width of the text's halo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_ignore_placement</code></td>
<td>
<p>If TRUE, the text will be visible even if it collides with other symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_justify</code></td>
<td>
<p>The justification of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_keep_upright</code></td>
<td>
<p>If TRUE, the text will be kept upright.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_letter_spacing</code></td>
<td>
<p>Spacing between text letters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_line_height</code></td>
<td>
<p>Height of the text lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_max_angle</code></td>
<td>
<p>Maximum angle of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_max_width</code></td>
<td>
<p>Maximum width of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_offset</code></td>
<td>
<p>Offset distance of text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_opacity</code></td>
<td>
<p>The opacity at which the text will be drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_optional</code></td>
<td>
<p>If TRUE, the text will be optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_padding</code></td>
<td>
<p>Padding around the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_pitch_alignment</code></td>
<td>
<p>Alignment of the text with respect to the pitch of the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_radial_offset</code></td>
<td>
<p>Radial offset of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_rotate</code></td>
<td>
<p>Rotates the text clockwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_rotation_alignment</code></td>
<td>
<p>Alignment of the text with respect to the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_size</code></td>
<td>
<p>The size of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_transform</code></td>
<td>
<p>Transform applied to the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_translate</code></td>
<td>
<p>The offset distance of the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>text-translate</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_variable_anchor</code></td>
<td>
<p>Variable anchor for the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_writing_mode</code></td>
<td>
<p>Writing mode for the text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popup</code></td>
<td>
<p>A column name containing information to display in a popup on click. Columns containing HTML will be parsed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover. Not all elements of SVG icons can be styled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>before_id</code></td>
<td>
<p>The name of the layer that this layer appears "before", allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_options</code></td>
<td>
<p>A list of options for clustering symbols, created by the <code>cluster_options()</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The modified map object with the new symbol layer added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(mapgl)
library(sf)
library(dplyr)

# Set seed for reproducibility
set.seed(1234)

# Define the bounding box for Washington DC (approximately)
bbox &lt;- st_bbox(
    c(
        xmin = -77.119759,
        ymin = 38.791645,
        xmax = -76.909393,
        ymax = 38.995548
    ),
    crs = st_crs(4326)
)

# Generate 30 random points within the bounding box
random_points &lt;- st_as_sf(
    data.frame(
        id = 1:30,
        lon = runif(30, bbox["xmin"], bbox["xmax"]),
        lat = runif(30, bbox["ymin"], bbox["ymax"])
    ),
    coords = c("lon", "lat"),
    crs = 4326
)

# Assign random icons
icons &lt;- c("music", "bar", "theatre", "bicycle")
random_points &lt;- random_points |&gt;
    mutate(icon = sample(icons, n(), replace = TRUE))

# Map with icons
mapboxgl(style = mapbox_style("light")) |&gt;
    fit_bounds(random_points, animate = FALSE) |&gt;
    add_symbol_layer(
        id = "points-of-interest",
        source = random_points,
        icon_image = c("get", "icon"),
        icon_allow_overlap = TRUE,
        tooltip = "icon"
    )

## End(Not run)
</code></pre>


</div>