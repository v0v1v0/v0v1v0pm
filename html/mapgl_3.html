<div class="container">

<table style="width: 100%;"><tr>
<td>add_circle_layer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a circle layer to a Mapbox GL map</h2>

<h3>Description</h3>

<p>Add a circle layer to a Mapbox GL map
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_circle_layer(
  map,
  id,
  source,
  source_layer = NULL,
  circle_blur = NULL,
  circle_color = NULL,
  circle_opacity = NULL,
  circle_radius = NULL,
  circle_sort_key = NULL,
  circle_stroke_color = NULL,
  circle_stroke_opacity = NULL,
  circle_stroke_width = NULL,
  circle_translate = NULL,
  circle_translate_anchor = "map",
  visibility = "visible",
  slot = NULL,
  min_zoom = NULL,
  max_zoom = NULL,
  popup = NULL,
  tooltip = NULL,
  hover_options = NULL,
  before_id = NULL,
  filter = NULL,
  cluster_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>A map object created by the <code>mapboxgl</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A unique ID for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>The ID of the source, alternatively an sf object (which will be converted to a GeoJSON source) or a named list that specifies <code>type</code> and <code>url</code> for a remote source.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_layer</code></td>
<td>
<p>The source layer (for vector sources).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_blur</code></td>
<td>
<p>Amount to blur the circle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_color</code></td>
<td>
<p>The color of the circle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_opacity</code></td>
<td>
<p>The opacity at which the circle will be drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_radius</code></td>
<td>
<p>Circle radius.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_sort_key</code></td>
<td>
<p>Sorts features in ascending order based on this value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_stroke_color</code></td>
<td>
<p>The color of the circle's stroke.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_stroke_opacity</code></td>
<td>
<p>The opacity of the circle's stroke.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_stroke_width</code></td>
<td>
<p>The width of the circle's stroke.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_translate</code></td>
<td>
<p>The geometry's offset. Values are <code>c(x, y)</code> where negatives indicate left and up.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>circle_translate_anchor</code></td>
<td>
<p>Controls the frame of reference for <code>circle-translate</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>visibility</code></td>
<td>
<p>Whether this layer is displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slot</code></td>
<td>
<p>An optional slot for layer order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_zoom</code></td>
<td>
<p>The minimum zoom level for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_zoom</code></td>
<td>
<p>The maximum zoom level for the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popup</code></td>
<td>
<p>A column name containing information to display in a popup on click.  Columns containing HTML will be parsed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tooltip</code></td>
<td>
<p>A column name containing information to display in a tooltip on hover. Columns containing HTML will be parsed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hover_options</code></td>
<td>
<p>A named list of options for highlighting features in the layer on hover.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>before_id</code></td>
<td>
<p>The name of the layer that this layer appears "before", allowing you to insert layers below other layers in your basemap (e.g. labels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>An optional filter expression to subset features in the layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_options</code></td>
<td>
<p>A list of options for clustering circles, created by the <code>cluster_options()</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The modified map object with the new circle layer added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(mapgl)
library(sf)
library(dplyr)

# Set seed for reproducibility
set.seed(1234)

# Define the bounding box for Washington DC (approximately)
bbox &lt;- st_bbox(
    c(
        xmin = -77.119759,
        ymin = 38.791645,
        xmax = -76.909393,
        ymax = 38.995548
    ),
    crs = st_crs(4326)
)

# Generate 30 random points within the bounding box
random_points &lt;- st_as_sf(
    data.frame(
        id = 1:30,
        lon = runif(30, bbox["xmin"], bbox["xmax"]),
        lat = runif(30, bbox["ymin"], bbox["ymax"])
    ),
    coords = c("lon", "lat"),
    crs = 4326
)

# Assign random categories
categories &lt;- c("music", "bar", "theatre", "bicycle")
random_points &lt;- random_points %&gt;%
    mutate(category = sample(categories, n(), replace = TRUE))

# Map with circle layer
mapboxgl(style = mapbox_style("light")) %&gt;%
    fit_bounds(random_points, animate = FALSE) %&gt;%
    add_circle_layer(
        id = "poi-layer",
        source = random_points,
        circle_color = match_expr(
            "category",
            values = c(
                "music", "bar", "theatre",
                "bicycle"
            ),
            stops = c(
                "#1f78b4", "#33a02c",
                "#e31a1c", "#ff7f00"
            )
        ),
        circle_radius = 8,
        circle_stroke_color = "#ffffff",
        circle_stroke_width = 2,
        circle_opacity = 0.8,
        tooltip = "category",
        hover_options = list(
            circle_radius = 12,
            circle_color = "#ffff99"
        )
    ) %&gt;%
    add_categorical_legend(
        legend_title = "Points of Interest",
        values = c("Music", "Bar", "Theatre", "Bicycle"),
        colors = c("#1f78b4", "#33a02c", "#e31a1c", "#ff7f00"),
        circular_patches = TRUE
    )

## End(Not run)
</code></pre>


</div>