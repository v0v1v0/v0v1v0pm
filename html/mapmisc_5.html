<div class="container">

<table style="width: 100%;"><tr>
<td>colourScale</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create colour scales</h2>

<h3>Description</h3>

<p>Produces a scale of colours for plotting maps</p>


<h3>Usage</h3>

<pre><code class="language-R">	colourScale(x, breaks=5, style=c("quantile","equal","unique", "fixed"),
	 col="YlOrRd", opacity=1, dec=NULL, digits = 6, firstBreak=NULL, 
	 transform=NULL, revCol=FALSE, exclude=NULL, labels=NULL, ...)
	colorScale(...)
	breaksForRates(x, breaks = 10, transform = 0.1,
      multiples = c(2, 4, 5, 10)) 
	</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector or single-layer Raster, numeric or factor,  for which a colour scale will be created</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>For <code>colourScale</code> either the number of or vector of breaks.
for <code>legendBreaks</code> usually the output of <code>colourScale</code>, or a vector of breaks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p>Style for breaks, see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Colours to use, either a function or 
argument for <code>brewer.pal</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opacity</code></td>
<td>
<p>adds transparency to colours, either a single number,
vector of length 2, or vector of same length as <code>breaks</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>Number of decimal places for the breaks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of significant figures</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>firstBreak</code></td>
<td>
<p>If non-null, force the first break to take this value (often zero).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>A list of two functions to transform <code>x</code> and inverse transform the breaks, or a numeric value specifying a Box-Cox parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>revCol</code></td>
<td>
<p>Reverse the order of the colours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>A vector of values to change to NA when they appear in <code>x</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>Vector of names of levels, useful when <code>style='unique'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiples</code></td>
<td>
<p>break points must be multiples of these numbers times a power of 10</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>classIntervals</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>colourScale</code> produces intervals from <code>x</code>, each with a unique colour. Categories are determined with break points according to the following <code>style</code> options:
</p>

<ul><li> <p><code>quantile</code>: <code>quantile(x, prob=seq(0,1,len=breaks), )</code> 
</p>
</li></ul>
<p><code>equal</code>: <code>seq(min(x), max(x), len=breaks)</code> 
</p>
<p><code>unique</code>: <code>sort(table(unique(x)))[1:breaks]</code> 
</p>
<p><code>fixed</code>: <code>breaks</code>
</p>
<p>any other string: is passed to <code>classIntervals</code>
</p>
<p><code>colorScale</code> passes all it's arguments to <code>colourScale</code>
</p>
<p><code>breaksForRates</code> returns break points suitable for mapping incidence rates, which are positive and always
include 1.0.
</p>


<h3>Value</h3>

<p>A list with elements
</p>
<table>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Vector of same length of <code>x</code> containing colours (RGB hex)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>vector of break points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>vector of unique colour values corresponding to <code>breaks</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colWithOpacity</code></td>
<td>
<p>as <code>col</code>, but with two digit transparency values appended.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>legendBreaks</code>,<code>scaleBar</code>, <code>classIntervals</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
breaksForRates(13.6, breaks = 7) 

Npoints = 20

myPoints = vect(
	cbind(runif(Npoints), 51+runif(Npoints)), 
	atts=data.frame(
		y1=c(NA, rnorm(Npoints-1)), 
	    y2=c(sample(0:5, Npoints-1,replace=TRUE), NA)
	),
	crs=crsLL)



if(require('RColorBrewer', quietly=TRUE)) {
	theCol = 'RdYlBu'
} else {
	theCol = grDevices::heat.colors
}

myscale = colourScale(myPoints$y1, breaks=4, col=theCol,
 style="quantile", revCol=TRUE,dec=1)


data("netherlands")
nldElev = terra::unwrap(nldElev)
myscale = colourScale(nldElev, breaks=4, col=theCol, style='equal', dec=0)

oldpar = map.new(myPoints)
plot(myPoints, col=myscale$plot, pch=16,add=TRUE)
legendBreaks("topleft", myscale)


myscale2 = colourScale(myPoints$y1, breaks=8, col=rainbow, style="equal",
opacity=0.8, dec=2, revCol=TRUE)

map.new(myPoints)
plot(myPoints, col=myscale2$plot, pch=16,add=TRUE)
legendBreaks("topleft", myscale2)

if(require('RColorBrewer', quietly=TRUE)) {
	theCol = 'Set2'
} else {
	theCol = grDevices::heat.colors
}

myscale3 = colourScale(myPoints$y2,  breaks=3,col=theCol, style="unique",
	opacity=c(0.1, 0.9))

map.new(myPoints)
plot(myPoints, col=myscale3$plot, pch=16,add=TRUE)
legendBreaks("topleft", myscale3)

myPoints$y3 = exp(myPoints$y1)
myscale4 = colourScale(myPoints$y3,  breaks=4, style="equal",
	opacity=c(0.1, 0.9), transform=1.25,dec=0, firstBreak=0)

map.new(myPoints)
plot(myPoints, col=myscale4$plot, pch=16,add=TRUE)
legendBreaks("topleft", myscale4)


# raster with colour table

x = rast(extent=ext(0,15,0,10), res=1)
values(x) = sample(1:4, ncell(x), replace=TRUE)
myScale = colourScale(x, breaks=3, style='unique', col=c('red','blue','orange'))
if(utils::packageVersion("terra") &gt;= "1.7-40" ) {
	terra::coltab(x) = myScale$colourtable
	plot(x)
} else {
	plot(x, breaks = myScale$breaks, col=myScale$col)
}
legendBreaks('topright', myScale)

par(oldpar)
</code></pre>


</div>