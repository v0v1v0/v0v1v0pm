<div class="container">

<table style="width: 100%;"><tr>
<td>mp_directions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get directions from the Google Maps Directions API</h2>

<h3>Description</h3>

<p>Get directions from the Google Maps Directions API
</p>


<h3>Usage</h3>

<pre><code class="language-R">mp_directions(
  origin,
  waypoints = NULL,
  destination,
  mode = c("driving", "transit", "walking", "bicycling"),
  arrival_time = NULL,
  departure_time = NULL,
  alternatives = FALSE,
  avoid = c(NA, "tolls", "highways", "ferries", "indoor"),
  region = NULL,
  traffic_model = c("best_guess", "pessimistic", "optimistic"),
  transit_mode = c("bus", "subway", "train", "tram"),
  transit_routing_preference = c(NA, "less_walking", "fewer_transfers"),
  language = NULL,
  key,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>Origin, as </p>

<ul>
<li>
<p><code>character</code> vector of length one with address to be geocoded
</p>
</li>
<li>
<p><code>numeric</code> vector of length two (lon, lat)
</p>
</li>
<li>
<p><code>matrix</code> with one row and two columns (lon, lat)
</p>
</li>
<li>
<p><code>sf</code> or <code>sfc</code> point layer with one feature
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>waypoints</code></td>
<td>
<p>Waypoints, in one of the same formats as for <code>origins</code> but possibly with more than one location, i.e. </p>

<ul>
<li>
<p><code>character</code> vector with addresses to be geocoded
</p>
</li>
<li>
<p><code>numeric</code> vector of length two (lon, lat)
</p>
</li>
<li>
<p><code>matrix</code> with two columns (lon, lat)
</p>
</li>
<li>
<p><code>sf</code> or <code>sfc</code> point layer
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destination</code></td>
<td>
<p>Destination, in one of the same formats as for <code>origins</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Travel mode, one of: <code>"driving"</code> (default), <code>"transit"</code>, <code>"walking"</code>, <code>"bicycling"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrival_time</code></td>
<td>
<p>The desired time of arrival for transit directions, as <code>POSIXct</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>departure_time</code></td>
<td>
<p>The desired time of departure, as <code>POSIXct</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternatives</code></td>
<td>
<p>Whether to return more than one alternative (<code>logical</code>, default is <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avoid</code></td>
<td>
<p><code>NA</code> (default, means avoid nothing) or one of: <code>"tolls"</code>, <code>"highways"</code>, <code>"ferries"</code> or <code>"indoor"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region</code></td>
<td>
<p>The region code, specified as a ccTLD ("top-level domain") two-character value (e.g. <code>"es"</code> for Spain) (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>traffic_model</code></td>
<td>
<p>The traffic model, one of: <code>"best_guess"</code> (the default), <code>"pessimistic"</code>, <code>"optimistic"</code>. The <code>traffic_model</code> parameter is only taken into account when <code>departure_time</code> is specified!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transit_mode</code></td>
<td>
<p>Transit preferred mode, one or more of: <code>"bus"</code>, <code>"subway"</code>, <code>"train"</code> or <code>"tram"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transit_routing_preference</code></td>
<td>
<p>Transit route preference. <code>NA</code> (default, means no preference) or one of: <code>"less_walking"</code> or <code>"fewer_transfers"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>The language in which to return directions. See <a href="https://developers.google.com/maps/faq#languagesupport">https://developers.google.com/maps/faq#languagesupport</a> for list of language codes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>Google APIs key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical; suppress printing URL for Google Maps API call (e.g. to hide API key)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>XML document with Google Maps Directions API response
</p>


<h3>Note</h3>


<ul>
<li>
<p> Use function <code>mp_get_routes</code> to extract <code>sf</code> line layer where each feature is a <strong>route</strong>
</p>
</li>
<li>
<p> Use function <code>mp_get_segments</code> to extract <code>sf</code> line layer where each feature is a <strong>route segment</strong>
</p>
</li>
</ul>
<h3>References</h3>

<p><a href="https://developers.google.com/maps/documentation/directions/overview">https://developers.google.com/maps/documentation/directions/overview</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Built-in reponse example
library(xml2)
doc = as_xml_document(response_directions_driving)
r = mp_get_routes(doc)
seg = mp_get_segments(doc)

## Not run: 

# Text file with API key
key = readLines("~/key")

# Using 'numeric' input
doc = mp_directions(
  origin = c(34.81127, 31.89277),
  destination = c(34.781107, 32.085003),
  alternatives = TRUE,
  key = key
)

# Using 'character' and 'sf' input
library(sf)
doc = mp_directions(
  origin = "Beer-Sheva",
  destination = c(34.781107, 32.085003) |&gt; st_point() |&gt; st_sfc(crs = 4326),
  alternatives = TRUE,
  key = key
)

# Comparing traffic models
doc = mp_directions(
  origin = "Beer-Sheva",
  destination = "Tel Aviv",
  departure_time = Sys.time() + as.difftime(1, units = "hours"),
  traffic_model = "best_guess",
  key = key
)
mp_get_routes(doc)$duration_in_traffic_text
doc = mp_directions(
  origin = "Beer-Sheva",
  destination = "Tel Aviv",
  departure_time = Sys.time() + as.difftime(1, units = "hours"),
  traffic_model = "optimistic",
  key = key
)
mp_get_routes(doc)$duration_in_traffic_text
doc = mp_directions(
  origin = "Beer-Sheva",
  destination = "Tel Aviv",
  departure_time = Sys.time() + as.difftime(1, units = "hours"),
  traffic_model = "pessimistic",
  key = key
)
mp_get_routes(doc)$duration_in_traffic_text

## End(Not run)
</code></pre>


</div>