<div class="container">

<table style="width: 100%;"><tr>
<td>mp_geocode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get geocoded coordinates using the Google Maps Geocoding API</h2>

<h3>Description</h3>

<p>Get geocoded coordinates using the Google Maps Geocoding API
</p>


<h3>Usage</h3>

<pre><code class="language-R">mp_geocode(
  addresses,
  region = NULL,
  postcode = NULL,
  bounds = NULL,
  key,
  quiet = FALSE,
  timeout = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>addresses</code></td>
<td>
<p>Addresses to geocode, as <code>character</code> vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region</code></td>
<td>
<p>The region code, specified as a ccTLD ("top-level domain") two-character value (e.g. <code>"es"</code> for Spain). This can to be a character vector of length 1 (in which case it is replicated) or a character vector with the same length of <code>addresses</code> (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>postcode</code></td>
<td>
<p>Vector of postal codes to filter the address match by (optional); Note that this is a component filter, which means that for each address, Google will search only within the corresponding postal code if non-missing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>A preferred bounding box, specified as a numeric vector with four values xmin/ymin/xmax/ymax (in latitude/longitude) representing the coordinates of the southwest and northeast corners, e.g. as returned by function 'sf::st_bbox'. This can be a single vector (in which case it is replicated) or a <code>list</code> of numeric vectors with the same length as <code>addresses</code> (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>Google APIs key (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical; suppress printing geocode request statuses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p><code>numeric</code> of length 1, number of seconds to timeout, passed to <code>curl</code>s <code>connecttimeout</code> option. Default is <code>10</code> seconds</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>list</code> of XML documents with Google Maps Geocoding API responses, one item per element in <code>addresses</code>
</p>


<h3>Note</h3>


<ul>
<li>
<p> Use function <code>mp_get_points</code> to extract <strong>locations</strong> as <code>sf</code> point layer
</p>
</li>
<li>
<p> Use function <code>mp_get_bounds</code> to extract <strong>location bounds</strong> as <code>sf</code> polygonal layer
</p>
</li>
</ul>
<h3>References</h3>

<p><a href="https://developers.google.com/maps/documentation/geocoding/overview">https://developers.google.com/maps/documentation/geocoding/overview</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Built-in reponse example
library(xml2)
doc = list("Tel-Aviv" = as_xml_document(response_geocode))
pnt = mp_get_points(doc)
bounds = mp_get_bounds(doc)

## Not run: 

# Text file with API key
key = readLines("~/key")

# Basic use
addresses = c("Rehovot", "Beer-Sheva", "New-York")
doc = mp_geocode(addresses, key = key)
pnt = mp_get_points(doc)
pnt

# Using the 'region' parameter
doc = mp_geocode(addresses = "Toledo", key = key)
mp_get_points(doc)
doc = mp_geocode(addresses = "Toledo", region = "es", key = key)
mp_get_points(doc)

# Various addresses
addresses = c(
  "Baker Street 221b, London",
  "Brandenburger Tor, Berlin",
  "",
  "Platz der Deutschen Einheit 1, Hamburg",
  "Arc de Triomphe de l'Etoile, Paris",
  NA
)
doc = mp_geocode(addresses, key = key)
pnt = mp_get_points(doc)
pnt

# Specifying a bounding box
b = c(-118.604794, 34.172684, -118.500938, 34.236144) # Bounds as xmin/ymin/xmax/ymax
result = mp_geocode(addresses = "Winnetka", key = key)
mp_get_points(result)
result = mp_geocode(addresses = "Winnetka", bounds = b, key = key)
mp_get_points(result)
result = mp_geocode(addresses = rep("Winnetka", 3), bounds = list(b, NA, b), key = key)
mp_get_points(result)


## End(Not run)
</code></pre>


</div>