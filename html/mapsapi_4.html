<div class="container">

<table style="width: 100%;"><tr>
<td>mp_get_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract distance or duration *matrix* from a Google Maps Distance Matrix API response</h2>

<h3>Description</h3>

<p>Extract distance or duration *matrix* from a Google Maps Distance Matrix API response
</p>


<h3>Usage</h3>

<pre><code class="language-R">mp_get_matrix(
  doc,
  value = c("distance_m", "distance_text", "duration_s", "duration_text",
    "duration_in_traffic_s", "duration_in_traffic_text")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>doc</code></td>
<td>
<p>XML document with Google Maps Distance Matrix API response</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>Value to extract, one of: <code>"distance_m"</code> (the default), <code>"distance_text"</code>, <code>"duration_s"</code>, <code>"duration_text"</code>, <code>"duration_in_traffic_s"</code>, <code>"duration_in_traffic_text"</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>matrix</code>, where rows represent origins and columns represent destinations. Matrix values are according to selected <code>value</code>, or <code>NA</code> if the API returned zero results
</p>


<h3>Note</h3>

<p>The <code>"duration_in_traffic_s"</code> and <code>"duration_in_traffic_text"</code> options are only applicable when the API response contains these fields, i.e., when using <code>mp_matrix</code> with <code>mode="driving"</code>, with <code>departure_time</code> specified, and API key <code>key</code> provided
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(xml2)
doc = as_xml_document(response_matrix)
mp_get_matrix(doc, value = "distance_m")
mp_get_matrix(doc, value = "distance_text")
mp_get_matrix(doc, value = "duration_s")
mp_get_matrix(doc, value = "duration_text")

## Not run: 
# Text file with API key
key = readLines("~/key")

locations = c("Tel-Aviv", "Jerusalem", "Neve Shalom")

# Driving times
doc = mp_matrix(
  origins = locations,
  destinations = locations,
  mode = "driving",
  departure_time = Sys.time() + as.difftime(10, units = "mins"),
  key = key
)
mp_get_matrix(doc, value = "distance_m")
mp_get_matrix(doc, value = "distance_text")
mp_get_matrix(doc, value = "duration_s")
mp_get_matrix(doc, value = "duration_text")
mp_get_matrix(doc, value = "duration_in_traffic_s")
mp_get_matrix(doc, value = "duration_in_traffic_text")

# Public transport times
doc = mp_matrix(
  origins = locations,
  destinations = locations,
  mode = "transit",
  key = key
)
mp_get_matrix(doc, value = "distance_m")
mp_get_matrix(doc, value = "distance_text")
mp_get_matrix(doc, value = "duration_s")
mp_get_matrix(doc, value = "duration_text")


## End(Not run)
</code></pre>


</div>