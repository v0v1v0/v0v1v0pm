<div class="container">

<table style="width: 100%;"><tr>
<td>mp_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get distance matrix from the Google Maps Distance Matrix API</h2>

<h3>Description</h3>

<p>Get distance matrix from the Google Maps Distance Matrix API
</p>


<h3>Usage</h3>

<pre><code class="language-R">mp_matrix(
  origins,
  destinations,
  mode = c("driving", "transit", "walking", "bicycling"),
  arrival_time = NULL,
  departure_time = NULL,
  avoid = c(NA, "tolls", "highways", "ferries", "indoor"),
  region = NULL,
  traffic_model = c("best_guess", "pessimistic", "optimistic"),
  transit_mode = c("bus", "subway", "train", "tram"),
  key,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>origins</code></td>
<td>
<p>Origins, as </p>

<ul>
<li>
<p><code>character</code> vector with addresses to be geocoded
</p>
</li>
<li>
<p><code>numeric</code> vector of length two (lon, lat)
</p>
</li>
<li>
<p><code>matrix</code> with two columns (lon, lat)
</p>
</li>
<li>
<p><code>sf</code> or <code>sfc</code> point layer
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destinations</code></td>
<td>
<p>Destinations, in one of the same formats as for <code>origins</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Travel mode, one of: <code>"driving"</code>, <code>"transit"</code>, <code>"walking"</code>, <code>"bicycling"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrival_time</code></td>
<td>
<p>The desired time of arrival for transit directions, as <code>POSIXct</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>departure_time</code></td>
<td>
<p>The desired time of departure, as <code>POSIXct</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avoid</code></td>
<td>
<p><code>NA</code> (default) or one of: <code>"tolls"</code>, <code>"highways"</code>, <code>"ferries"</code> or <code>"indoor"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region</code></td>
<td>
<p>The region code, specified as a ccTLD ("top-level domain") two-character value (e.g. <code>"es"</code> for Spain) (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>traffic_model</code></td>
<td>
<p>The traffic model, one of: <code>"best_guess"</code> (the default), <code>"pessimistic"</code>, <code>"optimistic"</code>. The <code>traffic_model</code> parameter is only taken into account when <code>departure_time</code> is specified!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transit_mode</code></td>
<td>
<p>Transit preferred mode, one or more of: <code>"bus"</code>, <code>"subway"</code>, <code>"train"</code> or <code>"tram"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>Google APIs key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical; suppress printing URL for Google Maps API call (e.g. to hide API key)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>XML document with Google Maps Distance Matrix API response
</p>


<h3>Note</h3>

<p>Use function <code>mp_get_matrix</code> to extract <strong>distance</strong> and <strong>duration</strong> <code>matrix</code> objects
</p>


<h3>References</h3>

<p><a href="https://developers.google.com/maps/documentation/distance-matrix/overview">https://developers.google.com/maps/documentation/distance-matrix/overview</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Built-in reponse example
library(xml2)
doc = as_xml_document(response_matrix)

## Not run: 

# Text file with API key
key = readLines("~/key")

# Using 'data.frame' input
doc = mp_matrix(
  origins = rbind(c(34.811, 31.892), c(35.212, 31.769)),
  destinations = c(34.781, 32.085),
  key = key
)

# Using 'character' input
locations = c("Tel-Aviv", "Jerusalem", "Beer-Sheva", "Eilat")
doc = mp_matrix(
  origins = locations,
  destinations = locations,
  key = key
)

# Setting transit modes
locations = c("Tel-Aviv", "Beer-Sheva", "Eilat")
doc = mp_matrix(
  origins = locations,
  destinations = locations,
  key = key,
  mode = "transit",
  transit_mode = "train"
)


## End(Not run)
</code></pre>


</div>