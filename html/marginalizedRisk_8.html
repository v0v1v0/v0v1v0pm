<div class="container">

<table style="width: 100%;"><tr>
<td>marginalized.risk.threshold</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compute Maringalized Risk as a Function of S&gt;=s
</h2>

<h3>Description</h3>

<p>Computes risk of disease conditional on S&gt;=s by marginalizedizing over a covariate vector Z.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
marginalized.risk.threshold(formula, marker.name, data, weights=rep(1, nrow(data)), 
    t, ss=NULL, verbose=FALSE) 


</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>A formula for coxph 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker.name</code></td>
<td>

<p>string
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A data frame containing the phase 2 data
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ss</code></td>
<td>

<p>A vector of marker values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>

<p>Inverse prob sampling weight, optional
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>t is the time at which survival will be assessed
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Boolean
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See the vignette file for more details.
</p>


<h3>Value</h3>

<p>If ss is not NULL, a vector of probabilities are returned. If ss is NULL, a matrix of two columns are returned, where the first column is the marker value and the second column is the probabilties.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

#### suppose wt.loss is the marker of interest

if(requireNamespace("survival")) {

library(survival)

dat=subset(lung, !is.na(wt.loss) &amp; !is.na(ph.ecog))
f1=Surv(time, status) ~ ph.ecog + age + sex
ss=quantile(dat$wt.loss, seq(.05,.95,by=0.01))
t0=1000
prob = marginalized.risk.threshold(f1, "wt.loss", dat, t = t0, ss=ss)

plot(ss, prob, type="l", xlab="Weight loss (S&gt;=s)", 
    ylab=paste0("Probability of survival at day ", t0))

}


</code></pre>


</div>