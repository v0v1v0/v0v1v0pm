<div class="container">

<table style="width: 100%;"><tr>
<td>crm.wrapper</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automation of model runs</h2>

<h3>Description</h3>

<p>Some functions that help automate running a set of crm models based on parameter
specifications.
</p>


<h3>Usage</h3>

<pre><code class="language-R">crm.wrapper(model.list,data,ddl=NULL,models=NULL,base="",
              external=TRUE,run=TRUE,env=NULL,replace=FALSE,...)

        create.model.list(parameters)

        model.table(model.list)

        load.model(x)
 
        crmlist_fromfiles(filenames=NULL,external=TRUE)

        rerun_crm(data,ddl,model.list,method=NULL,modelnums=NULL,initial=NULL,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.list</code></td>
<td>
<p>matrix of model names contained in the environment of models function; each row is a model and each column is for a parameter and the value is formula name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Either the raw data which is a dataframe with at least one
column named ch (a character field containing the capture history) or a
processed dataframe. For rerun_crm this should be the processed dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ddl</code></td>
<td>
<p>Design data list which contains a list element for each parameter
type; if NULL it is created; For rerun_crm, must be the same ddl as used with original run can cannot be NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>a function with a defined environment with model specifications as variables; values of model.list are some or all of those variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>base value for model names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>external</code></td>
<td>
<p>if TRUE, model results are stored externally; otherwise they are stored in crmlist</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run</code></td>
<td>
<p>if TRUE, fit models; otherwise just create dml to test if model data are correct for formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>environment to find model specifications if not parent.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>if TRUE replace any existing externally saved model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>aditional arguments passed to crm; for rerun_crm can be used to set hessian=TRUE for specific models after they have been run</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>character vector of parameter names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>filename of externally stored model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>vector of methods to use for optimization if different that previous run in rerun_crm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelnums</code></td>
<td>
<p>model numbers to be re-run instead of those that did not covnerge</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial</code></td>
<td>
<p>either a fitted crm model or the model number in model.list to use for starting values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenames</code></td>
<td>
<p>for non-Windows machine, vector of filenames for external files must be specifed in crmlist_fromfiles including .rda extension</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>create.model.list creates all combinations of model specifications for the specified
set of parameters.  In the calling environment it looks for objects named parameter.xxxxxx where xxxxxx can
be anything. It creates a matrix with a column for each parameter and as many rows 
needed to create all combinations. This can be used as input to crm.wrapper.
</p>
<p>crm.wrapper runs a sequence of crm models by constructing the call with the arguments
and the parameter specifications.  The parameter specifications can either be in the
local environment or in the environment of the named function models. The advantage of the
latter is that it is self-contained such that sets of parameter specifications can
be selected without possibility of being over-written or accidentally changed whereas 
with the former the set must be identified via a script and any in the environment will
be used which requires removing/recreating the set to be used.
</p>


<h3>Value</h3>

<p>create.model.list returns a matrix for crm.wrapper; crm.wrapper runs and stores models externally and retrurns a list of model results
and a model selection table; load.model returns model object that is stored externally
</p>


<h3>Author(s)</h3>

<p>Jeff Laake
</p>


<h3>See Also</h3>

<p><code>crm</code>
</p>


</div>