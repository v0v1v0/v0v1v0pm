<div class="container">

<table style="width: 100%;"><tr>
<td>marginal_effects</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Marginal effects</h2>

<h3>Description</h3>

<p>Returns the estimated effect of a variable. The effect accounts for both sides
of the market. If the given variable belongs only to the demand side, the name of
result is prefixed by <code>"D_"</code>. If the given variable belongs only to the supply
side, the name of result is prefixed by <code>"S_"</code>. If the variable can be found
both sides, the result name is prefixed by <code>"B_"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shortage_marginal(fit, variable, model, parameters)

shortage_probability_marginal(
  fit,
  variable,
  aggregate = "mean",
  model,
  parameters
)

## S4 method for signature 'missing,ANY,market_model,ANY'
shortage_marginal(variable, model, parameters)

## S4 method for signature 'missing,ANY,ANY,market_model,ANY'
shortage_probability_marginal(variable, aggregate, model, parameters)

## S4 method for signature 'missing,ANY,market_model,ANY'
shortage_marginal(variable, model, parameters)

## S4 method for signature 'market_fit,ANY,missing,missing'
shortage_marginal(fit, variable)

## S4 method for signature 'market_fit,ANY,ANY,missing,missing'
shortage_probability_marginal(fit, variable, aggregate)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>A fitted market model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>Variable name for which the effect is calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A market model object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>A vector of parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate</code></td>
<td>
<p>Mode of aggregation. Valid options are "mean" (the
default) and "at_the_mean".</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The estimated effect of the passed variable.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>shortage_marginal()</code>: Marginal effect on market system
</p>
<p>Returns the estimated marginal effect of a variable on the market system. For a
system variable <code class="reqn">x</code> with demand coefficient <code class="reqn">\beta_{d, x}</code> and supply
coefficient <code class="reqn">\beta_{s, x}</code>, the marginal effect on the market system  is
given by
</p>
<p style="text-align: center;"><code class="reqn">M_{x} = \frac{\beta_{d, x} - \beta_{s, x}}{\sqrt{\sigma_{d}^{2} +
\sigma_{s}^{2} - 2 \rho_{ds} \sigma_{d} \sigma_{s}}}.</code>
</p>

</li>
<li> <p><code>shortage_probability_marginal()</code>: Marginal effect on shortage probabilities
</p>
<p>Returns the estimated marginal effect of a variable on the probability of
observing a shortage state. The mean marginal effect (<code>aggregate = "mean"</code>) on
the shortage probability is given by
</p>
<p style="text-align: center;"><code class="reqn">M_{x} \mathrm{E} \phi\left(\frac{D - S}{\sqrt{\sigma_{d}^2 + \sigma_{s}^2 - 2 rho \sigma_{d} \sigma_{s}}}\right)</code>
</p>
<p>.
and the marginal effect at the mean (<code>aggregate = "at_the_mean"</code>) by
</p>
<p style="text-align: center;"><code class="reqn">M_{x} \phi\left(\mathrm{E}\frac{D - S}{\sqrt{\sigma_{d}^2 + \sigma_{s}^2 - 2 rho \sigma_{d} \sigma_{s}}}\right)</code>
</p>

<p>where <code class="reqn">M_{x}</code> is the marginal effect on the system, <code class="reqn">D</code> is the demanded
quantity, <code class="reqn">S</code> the supplied quantity, and <code class="reqn">\phi</code> is the standard normal
density.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# estimate a model using the houses dataset
fit &lt;- diseq_deterministic_adjustment(
  HS | RM | ID | TREND ~
    RM + TREND + W + CSHS + L1RM + L2RM + MONTH |
      RM + TREND + W + L1RM + MA6DSF + MA3DHF + MONTH,
  fair_houses(),
  correlated_shocks = FALSE,
  estimation_options = list(control = list(maxit = 1e+5))
)

# mean marginal effect of variable "RM" on the shortage probabilities
#' shortage_probability_marginal(fit, "RM")

# marginal effect at the mean of variable "RM" on the shortage probabilities
shortage_probability_marginal(fit, "CSHS", aggregate = "at_the_mean")

# marginal effect of variable "RM" on the system
shortage_marginal(fit, "RM")

</code></pre>


</div>