<div class="container">

<table style="width: 100%;"><tr>
<td>gregElasticNet</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute an elastic net regression estimator</h2>

<h3>Description</h3>

<p>Calculates a lasso, ridge or elastic net generalized regression estimator for a finite population mean/proportion or total based on sample data collected from a complex sampling design and auxiliary population data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gregElasticNet(
  y,
  xsample,
  xpop,
  pi = NULL,
  alpha = 1,
  model = "linear",
  pi2 = NULL,
  var_est = FALSE,
  var_method = "LinHB",
  datatype = "raw",
  N = NULL,
  lambda = "lambda.min",
  B = 1000,
  cvfolds = 10,
  weights_method = "ridge",
  eta = 1e-04,
  fpc = TRUE,
  messages = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A numeric vector of the sampled response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xsample</code></td>
<td>
<p>A data frame of the auxiliary data in the sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xpop</code></td>
<td>
<p>A data frame of population level auxiliary information.  It must contain the same names as xsample.  If datatype = "raw", must contain unit level data.  If datatype = "totals" or "means", then contains one row of aggregated, population totals or means for the auxiliary data. Default is "raw".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi</code></td>
<td>
<p>A numeric vector of inclusion probabilities for each sampled unit in y.  If NULL, then simple random sampling without replacement is assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A numeric value between 0 and 1 which signifies the mixing parameter for the lasso and ridge penalties in the elastic net.  When alpha = 1, only a lasso penalty is used.  When alpha = 0, only a ridge penalty is used. Default is alpha = 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A string that specifies the regression model to utilize. Options are "linear" or "logistic".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi2</code></td>
<td>
<p>A square matrix of the joint inclusion probabilities.  Needed for the "LinHT" variance estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_est</code></td>
<td>
<p>A logical indicating whether or not to compute a variance estimator.  Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_method</code></td>
<td>
<p>The method to use when computing the variance estimator.  Options are a Taylor linearized technique: "LinHB"= Hajek-Berger estimator, "LinHH" = Hansen-Hurwitz estimator, "LinHTSRS" = Horvitz-Thompson estimator under simple random sampling without replacement, and "LinHT" = Horvitz-Thompson estimator or a resampling technique: "bootstrapSRS" = bootstrap variance estimator under simple random sampling without replacement. The default is "LinHB".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datatype</code></td>
<td>
<p>A string that specifies the form of population auxiliary data. The possible values are "raw", "totals" or "means" for whether the user is providing population data at the unit level, aggregated to totals, or aggregated to means.  Default is "raw".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>A numeric value of the population size. If NULL, it is estimated with the sum of the inverse of the pis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>A string specifying how to tune the lambda hyper-parameter.  Only used if modelselect = TRUE and defaults to "lambda.min". The possible values are "lambda.min", which is the lambda value associated with the minimum cross validation error or "lambda.1se", which is the lambda value associated with a cross validation error that is one standard error away from the minimum, resulting in a smaller model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>The number of bootstrap samples if computing the bootstrap variance estimator.  Default is 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cvfolds</code></td>
<td>
<p>The number of folds for the cross-validation to tune lambda.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights_method</code></td>
<td>
<p>A string specifying which method to use to calculate survey weights. Currently, "ridge" is the only option. The "ridge" method uses a ridge regression approximation to calculate weights (see McConville et al (2017), section 3.2 for details). Support for "calibration" to come soon, which employs the model calibration method of Wu and Sitter (2001).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eta</code></td>
<td>
<p>A small positive number. Defaults to 0.0001. See McConville et al (2017), section 3.2 for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fpc</code></td>
<td>
<p>Default to TRUE, logical for whether or not the variance calculation should include a finite population correction when calculating the "LinHTSRS" or the "SRSbootstrap" variance estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>messages</code></td>
<td>
<p>A logical indicating whether to output the messages internal to mase. Default is TRUE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of output containing:
</p>
<p>* pop_total: Estimate of population total.
</p>
<p>* coefficients: Elastic net coefficient estimates.
</p>
<p>* pop_mean: Estimate of the population mean (or proportion).
</p>
<p>* pop_total_var: Estimated variance of population total estimate.
</p>
<p>* pop_mean_var:Estimated variance of population mean estimate.
</p>


<h3>References</h3>

<p>McConville K~S, Breidt F~J, Lee T~C~M, Moisen G~G (2017).
“Model-Assisted Survey Regression Estimation with the Lasso.”
<em>Journal of Survey Statistics and Methodology</em>, <b>5</b>, 131-158.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
data(IdahoPop)
data(IdahoSamp)
xsample &lt;- filter(IdahoSamp, COUNTYFIPS == "16055")
xpop &lt;- filter(IdahoPop, COUNTYFIPS == "16055")
gregElasticNet(y = xsample$BA_TPA_ADJ,
               N = xpop$npixels,
               xsample = xsample[c("tcc", "elev", "ppt", "tmean")],
               xpop = xpop[c("tcc", "elev", "ppt", "tmean")],
               var_est = TRUE,
               var_method = "LinHB",
               datatype = "means",
               alpha = 0.5)

</code></pre>


</div>