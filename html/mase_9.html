<div class="container">

<table style="width: 100%;"><tr>
<td>ratio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute a ratio of two estimators</h2>

<h3>Description</h3>

<p>Compute a ratio of two estimators
</p>


<h3>Usage</h3>

<pre><code class="language-R">ratio(
  y_num,
  y_den,
  xsample,
  xpop,
  pi = NULL,
  pi2 = NULL,
  N = NULL,
  estimator = NULL,
  var_est = F,
  var_method = "LinHTSRS",
  datatype = "raw",
  fpc = TRUE,
  messages = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y_num</code></td>
<td>
<p>A vector containing the response value for each sampled unit in the numerator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_den</code></td>
<td>
<p>A vector containing the response value for each sampled unit in the denominator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xsample</code></td>
<td>
<p>A data frame of the auxiliary data in the sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xpop</code></td>
<td>
<p>A data frame of population level auxiliary information.  It must contain the same names as xsample.  If datatype = "raw", must contain unit level data.  If datatype = "totals" or "means", then contains one row of aggregated, population totals or means for the auxiliary data. Default is "raw".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi</code></td>
<td>
<p>A numeric vector of inclusion probabilities for each sampled unit in y.  If NULL, then simple random sampling without replacement is assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi2</code></td>
<td>
<p>A square matrix of the joint inclusion probabilities.  Needed for the "LinHT" variance estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>A numeric value of the population size. If NULL, it is estimated with the sum of the inverse of the pis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimator</code></td>
<td>
<p>A string containing the name of the estimators of which you are taking a ratio of. The names follow the same format as the functions independently do in mase. Options are "horvitzThompson", "postStrat", and "greg".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_est</code></td>
<td>
<p>A logical indicating whether or not to compute a variance estimator.  Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_method</code></td>
<td>
<p>The method to use when computing the variance estimator.  Options are a Taylor linearized technique: "LinHB"= Hajek-Berger estimator, "LinHH" = Hansen-Hurwitz estimator, "LinHTSRS" = Horvitz-Thompson estimator under simple random sampling without replacement, and "LinHT" = Horvitz-Thompson estimator or a resampling technique: "bootstrapSRS" = bootstrap variance estimator under simple random sampling without replacement. The default is "LinHB".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datatype</code></td>
<td>
<p>Default to "raw", takes values "raw", "totals" or "means" for whether the user is providing the raw population stratum memberships, the population totals of each stratum, or the population proportions of each stratum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fpc</code></td>
<td>
<p>Default to TRUE, logical for whether or not the variance calculation should include a finite population correction when calculating the "LinHTSRS" or the "SRSbootstrap" variance estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>messages</code></td>
<td>
<p>A logical indicating whether to output the messages internal to mase. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any additional arguments that can be passed to mase::horvitzThompson, mase::greg, and mase::postStrat</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of output containing:
</p>
<p>* ratio_est: Estimate of the ratio of the population totals/means of the two estimators.
</p>
<p>* ratio_var_est: Estimate of the variance of the ratio of two estimators.
</p>


<h3>References</h3>

<p>Cochran W~G (1977).
<em>Sampling Techniques</em>, 3rd edition.
John Wiley &amp; Sons, New York. 
Sarndal C~E, Swensson B, Wretman J (1992).
<em>Model Assisted Survey Sampling</em>.
Springer-Verlag, New York.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survey)
data(api) 
ratio(y_num = apisrs$api.stu, y_den = apisrs$enroll, xsample = apisrs$stype,
xpop = apipop$stype, pi = apisrs$pw^(-1), estimator = "postStrat",
var_est = TRUE, var_method = "LinHB", datatype = "raw")

</code></pre>


</div>