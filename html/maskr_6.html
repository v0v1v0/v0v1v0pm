<div class="container">

<table style="width: 100%;"><tr>
<td>masked</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a masked atomic vector</h2>

<h3>Description</h3>

<p>Masked vectors contain a base R data type that can be used in calculations,
but is not revealed by default on the console or when converted to a
character. This can be useful for preventing publication of small cells, such
as in official statistics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">masked(data = numeric(), mask = logical())

unmask(masked)

unmask(masked) &lt;- value

mask(masked)

mask(masked) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An atomic vector to mask values from. Lists and data frames are
not supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>A logical vector that indicates which values of <code>data</code> to mask.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>masked</code></td>
<td>
<p>A masked vector to extract fields from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>A replacement vector for unmasked data, or the mask flags.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A masked vector.
</p>


<h3>Pretty printing and conversion to character</h3>

<p>Masked vectors have pretty printing that replaces masked values of a vector
with <code>n.p.</code> in the console (customisable with <code>options(maskr.replacement = ...)</code>).
</p>
<p>Converting a masked vector to character results in masked vectors being
replaced with <code>n.p.</code>, or its alternative in
<code>getOption('maskr.replacement')</code>.
</p>
<p>Masked vectors cannot be converted to their raw types, to prevent
accidental release of data. Instead, use <code>unmask()</code> to explicitly unmask a
vector.
</p>


<h3>Arithmetic and unary mathematical functions</h3>

<p>Elementwise arithmetic operators have been implemented in masked vectors.
The resulting data will be as if performing the operation on the unmasked
vectors. Mask flags are sticky; the result of any operation involving a
masked value will also be masked.
</p>
<p>Most Math and Summary group generics have been implemented. These first
force the underlying data to double type (or logical for <code>any()</code> and
<code>all()</code>). Results from summary functions will be masked if any input is
masked, while elementwise operations will preserve the mask from their
input. Cumulative functions (<code>cumsum()</code>, <code>cummean()</code> and friends) are not
implemented.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Mask vowels in the alphabet
masked(letters, letters %in% c('a', 'e', 'i', 'o', 'u'))

# Mask doubles...
sepals &lt;- head(masked(iris$Sepal.Length, iris$Sepal.Length &gt; 5))
sepals
# ...and get back the underlying values
unmask(sepals)

# Use a different mask character
op &lt;- options(maskr.replacement = '*')
sepals
options(op)

# Mask integers in a vector strictly between 0 and 5
x &lt;- 0:8
xm &lt;- masked(x, 0L &lt; x &amp; x &lt; 5L)

# Arithmetic with unmasked values does not change mask:
xm / xm[8] * 100
2 ^ xm
# But arithmetic with a masked value will mask outputs:
xm + xm[3]
xm - rev(xm)

# The mean will be masked, because at least one if its inputs is masked
mean(xm)
unmask(mean(xm))

# Other mathematical functions will keep the same mask
log1p(xm)
unmask(log1p(xm))
</code></pre>


</div>