<div class="container">

<table style="width: 100%;"><tr>
<td>mastVolatility</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Volatility and period for mast data, combining trees in populations</h2>

<h3>Description</h3>

<p>Synthesis of volatility and period at the population scale.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  mastVolatility( treeID, year, fec, minLength = 6, minFrequency = 1/20 )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treeID</code></td>
<td>
<p><code>vector</code> of labels for individual trees</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p><code>numeric vector</code> for year</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fec</code></td>
<td>
<p><code>numeric vector</code> for fecundity values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minLength</code></td>
<td>
<p>determines the minimum number of years to a tree to be included in population estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minFrequency</code></td>
<td>
<p>lowest frequency to include in volatility, period evaluation</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The three vectors <code>treeID, year, fec</code> are aligned by tree and year and, thus, of the same length. Tree fecundity values in the <code>numeric vector fec</code> can differ in number of years due to maturation times, deaths, and observation years.  Trees having fewer than <code>minLength</code> observations are omitted from the analysis. <code>minFrequency</code> is high enough to omit low frequencies that are missing in the shortest series to be compared.
</p>
<p>More detailed examples can be obtained with: <code>browseVignettes('mastif')</code>
</p>


<h3>Value</h3>

<p>Returns a <code>list</code> that includes <code>stats</code>, which holds the period- and fecundity-weighted estimates of volatility and period at the population scale. The <code>matrix statsDensity</code> holds the means and standard deviations by period (1/frequency). The <code>matrix mastMatrix</code> holds for each tree the number of years, mean log fecundity, variance, volatility, and period mean and standard deviation. Returned as tree by frequency are <code>density</code> and <code>frequency</code>.
</p>


<h3>Author(s)</h3>

<p>James S Clark, <a href="mailto:jimclark@duke.edu">jimclark@duke.edu</a>
</p>


<h3>References</h3>

<p>Qiu, T, ..., and J.S. Clark. 2023. Mutualist dispersers and the global distribution of masting: mediation by climate and fertility. in review.
</p>


<h3>See Also</h3>

<p><code>mastif</code> for analysis
</p>
<p>A more detailed vignette is can be obtained with:
</p>
<p><code>browseVignettes('mastif')</code>
</p>
<p>website 'http://sites.nicholas.duke.edu/clarklab/code/'.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
d &lt;- "https://github.com/jimclarkatduke/mast/blob/master/outputAbies.rdata?raw=True"
repmis::source_data( d )

# all trees in a plot:

wi  &lt;- which( fecPred$plotSpec == 'BERK28 abiesGrandis' ) # tree-years in plot-species group
tmp &lt;- mastVolatility( treeID = fecPred$treeID[wi], year = fecPred$year[wi], 
                       fec = fecPred$fecEstMu[wi], minLength = 10 )
period  &lt;- 1/tmp$frequency
density &lt;- tmp$density

plot( NA, xlim = range( period, na.rm = TRUE ), ylim = range( density, na.rm = TRUE ),
      xlab = 'Period (yr)', ylab = 'Density', log = 'xy' )
      
for( i in 1:nrow(density) )lines( period[i,], density[i, ], col = 'grey' )
  lines( tmp$statsDensity['Period', ], tmp$statsDensity['Mean', ], lwd = 2 )

</code></pre>


</div>