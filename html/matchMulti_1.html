<div class="container">

<table style="width: 100%;"><tr>
<td>matchMulti-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>matchMulti Package</h2>

<h3>Description</h3>

<p><code>matchMulti</code> provides and easy to use set of functions to do matching
with multilevel data.  It is designed for use with grouped data such as
students in schools, where the user wishes to match a set of treated groups
to control groups to make the two groups more comparable.
</p>


<h3>Details</h3>

<p>This package will match treated groups to control groups, but allows for
trimming of both units and groups to increase balance.  There are also
functions for assessing balance after matching, estimating treatment effects
and performing sensitivity analysis for hidden confounders.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Sam Pimentel <a href="mailto:spi@berkeley.edu">spi@berkeley.edu</a>
</p>
<p>Authors:
</p>

<ul>
<li>
<p> Luke Keele <a href="mailto:luke.keele@gmail.com">luke.keele@gmail.com</a>
</p>
</li>
<li>
<p> Luke Miratrix <a href="mailto:luke_miratrix@gse.harvard.edu">luke_miratrix@gse.harvard.edu</a>
</p>
</li>
</ul>
<p>Other contributors:
</p>

<ul><li>
<p> Paul Rosenbaum [contributor]
</p>
</li></ul>
<h3>See Also</h3>

<p>See also <code>matchMulti</code>, <code>matchMultisens</code>,
<code>balanceMulti</code>, <code>matchMultioutcome</code>,
<code>rematchSchools</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
# Load Catholic school data
data(catholic_schools)

student.cov &lt;- c('minority','female','ses','mathach')

# Check balance student balance before matching
balanceTable(catholic_schools[c(student.cov,'sector')],  treatment = 'sector')

#Match schools but not students within schools
match.simple &lt;- matchMulti(catholic_schools, treatment = 'sector',
school.id = 'school', match.students = FALSE)

#Check balance after matching - this checks both student and school balance
balanceMulti(match.simple, student.cov = student.cov)

#Estimate treatment effect
output &lt;- matchMultioutcome(match.simple, out.name = "mathach",
schl_id_name = "school",  treat.name = "sector")

# Perform sensitivity analysis using Rosenbaum bound -- increase Gamma to increase effect of
# possible hidden confounder 
         
matchMultisens(match.simple, out.name = "mathach",
          schl_id_name = "school", 
          treat.name = "sector", Gamma=1.3)
          
# Now match both schools and students within schools          
match.out &lt;- matchMulti(catholic_schools, treatment = 'sector',
school.id = 'school', match.students = TRUE, student.vars = student.cov)

# Check balance again
bal.tab &lt;- balanceMulti(match.out, student.cov = student.cov)

# Now match with fine balance constraints on whether the school is large 
# or has a high percentage of minority students
match.fb &lt;- matchMulti(catholic_schools, treatment = 'sector', school.id = 'school', 
match.students = TRUE, student.vars = student.cov, 
school.fb = list(c('size_large'),c('size_large','minority_mean_large')))

# Estimate treatment effects
matchMultioutcome(match.fb, out.name = "mathach", schl_id_name = "school",  treat.name = "sector")

#Check Balance
balanceMulti(match.fb, student.cov = student.cov)

## End(Not run)

</code></pre>


</div>