<div class="container">

<table style="width: 100%;"><tr>
<td>galeShapley.marriageMarket</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gale-Shapley Algorithm: Stable Marriage Problem</h2>

<h3>Description</h3>

<p>This function computes the Gale-Shapley algorithm and finds a solution to the
stable marriage problem.
</p>


<h3>Usage</h3>

<pre><code class="language-R">galeShapley.marriageMarket(
  proposerUtils = NULL,
  reviewerUtils = NULL,
  proposerPref = NULL,
  reviewerPref = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>proposerUtils</code></td>
<td>
<p>is a matrix with cardinal utilities of the proposing
side of the market. If there are <code>n</code> proposers and <code>m</code> reviewers,
then this matrix will be of dimension <code>m</code> by <code>n</code>. The
<code>i,j</code>th element refers to the payoff that proposer <code>j</code> receives
from being matched to proposer <code>i</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reviewerUtils</code></td>
<td>
<p>is a matrix with cardinal utilities of the courted side
of the market. If there are <code>n</code> proposers and <code>m</code> reviewers, then
this matrix will be of dimension <code>n</code> by <code>m</code>. The <code>i,j</code>th
element refers to the payoff that reviewer <code>j</code> receives from being
matched to proposer <code>i</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proposerPref</code></td>
<td>
<p>is a matrix with the preference order of the proposing
side of the market. This argument is only required when
<code>proposerUtils</code> is not provided. If there are <code>n</code> proposers and
<code>m</code> reviewers in the market, then this matrix will be of dimension
<code>m</code> by <code>n</code>. The <code>i,j</code>th element refers to proposer <code>j</code>'s
<code>i</code>th most favorite reviewer. Preference orders can either be specified
using R-indexing (starting at 1) or C++ indexing (starting at 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reviewerPref</code></td>
<td>
<p>is a matrix with the preference order of the courted side
of the market. This argument is only required when <code>reviewerUtils</code> is
not provided. If there are <code>n</code> proposers and <code>m</code> reviewers in the
market, then this matrix will be of dimension <code>n</code> by <code>m</code>. The
<code>i,j</code>th element refers to reviewer <code>j</code>'s <code>i</code>th most
favorite proposer. Preference orders can either be specified using
R-indexing (starting at 1) or C++ indexing (starting at 0).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The Gale-Shapley algorithm works as follows: Single men ("the proposers")
sequentially make proposals to each of their most preferred available women
("the reviewers"). A woman can hold on to at most one proposal at a time. A
single woman will accept any proposal that is made to her. A woman that
already holds on to a proposal will reject any proposal by a man that she
values less than her current match. If a woman receives a proposal from a man
that she values more than her current match, then she will accept the
proposal and her previous match will join the line of bachelors. This process
continues until all men are matched to women.
</p>
<p>The Gale-Shapley Algorithm requires a complete specification of proposers'
and reviewers' preferences over each other. Preferences can be
passed on to the algorithm in ordinal form (e.g. man 3 prefers woman 1 over
woman 3 over woman 2) or in cardinal form (e.g. man 3 receives payoff 3.14 from
being matched to woman 1, payoff 2.51 from being matched to woman 3, and payoff
2.15 from being matched to woman 2). Preferences must be complete, i.e.
all proposers must have fully specified preferences over all reviewers and
vice versa.
</p>
<p>In the version of the algorithm that is implemented here, all individuals –
proposers and reviewers – prefer being matched to anyone to not being
matched at all.
</p>
<p>The algorithm still works with an unequal number of proposers and reviewers.
In that case some agents will remain unmatched.
</p>
<p>This function can also be called using <code>galeShapley</code>.
</p>


<h3>Value</h3>

<p>A list with elements that specify who is matched to whom and who
remains unmatched. Suppose there are <code>n</code> proposers and <code>m</code>
reviewers. The list contains the following items:
</p>

<ul>
<li>
<p><code>proposals</code> is a vector of length <code>n</code> whose <code>i</code>th
element contains the number of the reviewer that proposer <code>i</code> is
matched to. Proposers that remain unmatched will be listed as being
matched to <code>NA</code>.
</p>
</li>
<li>
<p><code>engagements</code> is a vector of length <code>m</code> whose <code>j</code>th
element contains the number of the proposer that reviewer <code>j</code> is
matched to. Reviwers that remain unmatched will be listed as being matched
to <code>NA</code>.
</p>
</li>
<li>
<p><code>single.proposers</code> is a vector that lists the remaining single
proposers. This vector will be empty whenever <code>n&lt;=m</code>.
</p>
</li>
<li>
<p><code>single.reviewers</code> is a vector that lists the remaining single
reviewers. This vector will be empty whenever <code>m&lt;=n</code>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>galeShapley.collegeAdmissions</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">nmen &lt;- 5
nwomen &lt;- 4
# generate cardinal utilities
uM &lt;- matrix(runif(nmen * nwomen), nrow = nwomen, ncol = nmen)
uW &lt;- matrix(runif(nwomen * nmen), nrow = nmen, ncol = nwomen)
# run the algorithm using cardinal utilities as inputs
results &lt;- galeShapley.marriageMarket(uM, uW)
results

# transform the cardinal utilities into preference orders
prefM &lt;- sortIndex(uM)
prefW &lt;- sortIndex(uW)
# run the algorithm using preference orders as inputs
results &lt;- galeShapley.marriageMarket(proposerPref = prefM, reviewerPref = prefW)
results
</code></pre>


</div>