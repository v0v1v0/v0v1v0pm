<div class="container">

<table style="width: 100%;"><tr>
<td>trans.smap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parameter-transfer learning for partially linear models based on semiparametric model averaging.</h2>

<h3>Description</h3>

<p>Obtain optimal weights and estimated coefficients based on Trans-SMAP.
</p>


<h3>Usage</h3>

<pre><code class="language-R">trans.smap(train.data, nfold = NULL, bs.para, lm.set = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>train.data</code></td>
<td>
<p>a list containing the observations of predictors and response for fitting models. Should be a list with elements "data.y", "data.x" and "data.z", where "data.y" indicates a response list for all data sources, "data.x" indicates a parametric predictor list for all data sources, and "data.z" indicates a nonparametric predictor list for all data sources. Each element in "data.x" and "data.z" is a matrix with each row as an observation and each column as a variable. By default, the first element in "data.y", "data.x" and "data.z" is target data, and others are source data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold</code></td>
<td>
<p>the number of folds for the cross-validation weight criterion. Default is NULL (leave-one-out).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bs.para</code></td>
<td>
<p>a list containing the parameters for B-spline construction in function <code>bs</code>. Should be a list with elements "bs.df" and "bs.degree", each component of which is a vector with the same length as the number of nonparametric variables. For example, bs.para = list(bs.df=c(3,3,3), bs.degree=c(3,3,3)).
</p>

<ul>
<li>
<p> "bs.df": degrees of freedom for each nonparametric component; The details can be referred to the arguments in function <code>bs</code>.
</p>
</li>
<li>
<p> "bs.degree": degree of the piecewise polynomial for each nonparametric component; The default is 3 for cubic splines.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lm.set</code></td>
<td>
<p>the vector of indices for the linear regression models, which means the corresponding models are constructed by ordinary linear models instead of partially linear models. Default is NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a result list containing the estimated weight vector, the execution time of solving the optimal weights and the summarized results of fitting models.
</p>


<h3>References</h3>

<p>Hu, X., &amp; Zhang, X. (2023). Optimal Parameter-Transfer Learning by Semiparametric Model Averaging. Journal of Machine Learning Research, 24(358), 1-53.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## correct target model setting

# generate simulation dataset
coeff0 &lt;- cbind(
  as.matrix(c(1.4, -1.2, 1, -0.8, 0.65, 0.3)),
  as.matrix(c(1.4, -1.2, 1, -0.8, 0.65, 0.3) + 0.02),
  as.matrix(c(1.4, -1.2, 1, -0.8, 0.65, 0.3) + 0.3),
  as.matrix(c(1.4, -1.2, 1, -0.8, 0.65, 0.3))
)
whole.data &lt;- simdata.gen(
  px = 6, num.source = 4, size = c(150, 200, 200, 150), coeff0 = coeff0,
  coeff.mis = as.matrix(c(coeff0[, 2], 1.8)), err.sigma = 0.5, rho = 0.5, size.test = 500,
  sim.set = "homo", tar.spec = "cor", if.heter = FALSE
)
data.train &lt;- whole.data$data.train
data.test &lt;- whole.data$data.test

# running Trans-SMAP and obtain the optimal weight vector
data.train$data.x[[2]] &lt;- data.train$data.x[[2]][, -7]
fit.transsmap &lt;- trans.smap(
  train.data = data.train, nfold = 5,
  bs.para = list(bs.df = rep(3, 3), bs.degree = rep(3, 3))
)
ma.weights &lt;- fit.transsmap$weight.est


## misspecified target model setting

# generate simulation dataset
coeff.mis &lt;- matrix(c(c(coeff0[, 1], 0.1), c(coeff0[, 2], 1.8)), ncol = 2)
whole.data &lt;- simdata.gen(
  px = 6, num.source = 4, size = c(150, 200, 200, 150), coeff0 = coeff0,
  coeff.mis = coeff.mis, err.sigma = 0.5, rho = 0.5, size.test = 500,
  sim.set = "homo", tar.spec = "mis", if.heter = FALSE
)
data.train &lt;- whole.data$data.train
data.test &lt;- whole.data$data.test

# running Trans-SMAP and obtain the optimal weight vector
data.train$data.x[[1]] &lt;- data.train$data.x[[1]][, -7]
data.train$data.x[[2]] &lt;- data.train$data.x[[2]][, -7]
fit.transsmap &lt;- trans.smap(
  train.data = data.train, nfold = 5,
  bs.para = list(bs.df = rep(3, 3), bs.degree = rep(3, 3))
)
ma.weights &lt;- fit.transsmap$weight.est

</code></pre>


</div>