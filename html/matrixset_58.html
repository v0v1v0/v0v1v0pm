<div class="container">

<table style="width: 100%;"><tr>
<td>matrixset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Matrix Set</h2>

<h3>Description</h3>

<p>Creates a matrix set, possibly annotated for rows and/or columns. These
annotations are referred as traits.
</p>


<h3>Usage</h3>

<pre><code class="language-R">matrixset(
  ...,
  expand = NULL,
  row_info = NULL,
  column_info = NULL,
  row_key = "rowname",
  column_key = "colname",
  row_tag = ".rowname",
  column_tag = ".colname"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>A single list of matrices (must be a named list), or
individual matrices, e.g. <code>mat1 = m1</code>, <code>mat2 = m2</code>, etc.
<code>NULL</code> elements are accepted. This allows to create a
placeholder that can be filled later on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expand</code></td>
<td>
<p>By default (<code>NULL</code>), input matrix expansion is disabled.
Setting this parameter to <code>TRUE</code> will enable the expansion
feature. See the section ‘Matrix Expansion’ for more
details of what it is, as well as other possible options
for <code>expand</code>. The section will also detail how the default
expansion value is dependent on the matrix types.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_info</code></td>
<td>
<p>a data frame, used to annotate matrix rows. The link
between the matrix row names and the data frame is given
in column "rowname". A different column can be used if one
provides a different <code>row_key</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column_info</code></td>
<td>
<p>a data frame, used to annotate matrix columns. The link
between the matrix column names and the data frame is given
in column "colname". A different column can be used if one
provides a different <code>column_key</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_key</code></td>
<td>
<p>column name in 'row_info“ data frame that will
link the row names with the row information. A string is
expected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column_key</code></td>
<td>
<p>column name in <code>col_info</code> data frame that will
link the column names with the row information. A string is
expected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_tag</code></td>
<td>
<p>A string, giving the row annotation data frame column that
will link the row names to the data frame. While
<code>row_key</code> specifies the column name of the data frame
at input, <code>row_tag</code> specifies the column name that
will be used throughout in the <code>matrixset</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column_tag</code></td>
<td>
<p>A string, giving the column annotation data frame column
that will link the row names to the data frame. While
<code>column_key</code> specifies the column name of the data
frame at input, <code>column_tag</code> specifies the column
name that will be used throughout in the <code>matrixset</code>
object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A <code>matrixset</code> is a collection of matrices that share the same dimensions and,
if applicable, dimnames. It is designed to hold different measures for the
same rows/columns. For example, each matrix could be a different time point
for the same subjects.
</p>
<p>Traits, which are annotations, can be provided in the form of data frames
for rows and/or columns. If traits are provided, the <code>data.frame</code> must
contain only one entry per row/column (see examples).
</p>
<p>Row or column names are not mandatory to create a proper <code>matrixset</code>. The
only way for this to work however is to leave traits (annotations) empty.
If provided, each matrices must have the same dimnames as well.
</p>
<p>If dimnames are missing, note that most of the operations for matrixsets
won't be available. For instance, operations that use traits will not work,
e.g., <code>filter_row()</code>.
</p>
<p>It is allowed for matrix elements of a <code>matrixset</code> to be <code>NULL</code> - see
examples.
</p>


<h3>Value</h3>

<p>Returns a <code>matrixset</code>, a collection of matrices (see ‘Details’).
</p>


<h3>Matrix Expansion</h3>

<p>The concept of matrix expansion allows to provide input matrices that do not
share the same dimensions.
</p>
<p>This works by taking the union of the dimnames and padding, if necessary,
each matrix with a special value for the missing rows/columns.
</p>
<p>Because the dimnames are used, they must necessarily be non-<code>NULL</code> in the
provided matrices.
</p>
<p>An interesting side-effect is that one can use this option to match the
dimnames and provide a common row/column order among the matrices.
</p>
<p>For base matrices, the padding special value is, by default
(<code>expand = TRUE</code>), <code>NA</code>. For the special matrices (Matrix package), the
default value is <code>0</code>. For these special matrices, padding with 0 forces
conversion to sparse matrix.
</p>
<p>The default value can be changed by providing any value (e.g, <code>-1</code>) to
<code>expand</code>, in which case the same padding value is used for all matrices.
</p>
<p>If different padding values are needed for each matrices, a list can be
provided to <code>expand</code>. If the list is unnamed, it must match the number of
input matrices in length and the padding values are assigned to the matrices
in order.
</p>
<p>A named list can be provided as well. In that case, <code>expand</code> names and
matrix names are matched. All matrices must have a match in the <code>expand</code> list
(more <code>expand</code> values can be provided, though).
</p>


<h3>See Also</h3>

<p><code>as_matrixset()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># A single NULL element will create an empty matrixset (it doesn't hold
# any matrices)
lst &lt;- NULL
matrixset(lst)

# This will hold to empty matrices
lst &lt;- list(a = NULL, b = NULL)
matrixset(lst)
# this is equivalent
matrixset(a = NULL, b = NULL)

# A basic example
lst &lt;- list(a = matrix(0, 2, 3))
matrixset(lst)
# equivalent
matrixset(a = matrix(0, 2, 3))

# can mix with NULL too
lst &lt;- list(a = NULL, b = matrix(0, 2, 3), c = matrix(0, 2, 3))
matset &lt;- matrixset(lst)

# dimnames are also considered to be traits
lst &lt;- list(a = NULL, b = matrix(0, 2, 3), c = matrix(0, 2, 3))
rownames(lst$b) &lt;- c("r1", "r2")
rownames(lst$c) &lt;- c("r1", "r2")
matrixset(lst)

# You don't have to annotate both rows and columns. But you need to provide
# the appropriate dimnames when you provide traits
lst &lt;- list(a = matrix(0, 2, 3), b = matrix(0, 2, 3), c = NULL)
rownames(lst$a) &lt;- c("r1", "r2")
rownames(lst$b) &lt;- c("r1", "r2")
colnames(lst$a) &lt;- c("c1", "c2", "c3")
colnames(lst$b) &lt;- c("c1", "c2", "c3")
ri &lt;- data.frame(rowname = c("r1", "r2"), g = 1:2)
matset &lt;- matrixset(lst, row_info = ri)

# You can provide a column name that contains the keys
ri &lt;- data.frame(foo = c("r1", "r2"), g = 1:2)
matset &lt;- matrixset(lst, row_info = ri, row_key = "foo")

lst &lt;- list(a = matrix(0, 2, 3), b = matrix(0, 2, 3), c = NULL)
rownames(lst$a) &lt;- c("r1", "r2")
rownames(lst$b) &lt;- c("r1", "r2")
colnames(lst$a) &lt;- c("c1", "c2", "c3")
colnames(lst$b) &lt;- c("c1", "c2", "c3")
ri &lt;- data.frame(rowname = c("r1", "r2"), g = 1:2)
ci &lt;- data.frame(colname = c("c1", "c2", "c3"), h = 1:3)
matset &lt;- matrixset(lst, row_info = ri, column_info = ci)

# This is not allowed, because the row trait data frame has more than one
# entry for "r1"
lst &lt;- list(a = matrix(0, 2, 3), b = matrix(0, 2, 3), c = NULL)
rownames(lst$a) &lt;- c("r1", "r2")
rownames(lst$b) &lt;- c("r1", "r2")
colnames(lst$a) &lt;- c("c1", "c2", "c3")
colnames(lst$b) &lt;- c("c1", "c2", "c3")
ri &lt;- data.frame(rowname = c("r1", "r2", "r1"), g = 1:3)
ci &lt;- data.frame(colname = c("c1", "c2", "c3"), h = 1:3)
ans &lt;- tryCatch(matrixset(lst, row_info = ri, column_info = ci),
                error = function(e) e)
is(ans, "error")

</code></pre>


</div>