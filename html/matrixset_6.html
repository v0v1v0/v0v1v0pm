<div class="container">

<table style="width: 100%;"><tr>
<td>annotate_from_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply functions to a single matrix of a matrixset and store results as annotation</h2>

<h3>Description</h3>

<p>This is in essence <code>apply_row_dfw()</code>/<code>apply_column_dfw()</code>, but with the
results saved as new annotations. As such, the usage is almost identical to
these functions, except that only a single matrix can be used, and must be
specified (matrix specification differs also slightly).
</p>


<h3>Usage</h3>

<pre><code class="language-R">annotate_row_from_apply(
  .ms,
  .matrix,
  ...,
  names_prefix = "",
  names_sep = "_",
  names_glue = NULL,
  names_sort = FALSE,
  names_vary = "fastest",
  names_expand = FALSE
)

annotate_column_from_apply(
  .ms,
  .matrix,
  ...,
  names_prefix = "",
  names_sep = "_",
  names_glue = NULL,
  names_sort = FALSE,
  names_vary = "fastest",
  names_expand = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.ms</code></td>
<td>
<p><code>matrixset</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.matrix</code></td>
<td>
<p>a tidyselect matrix name: matrix name as a bare name or a
character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>expressions, separated by commas. They can be specified in one of
the following way:
</p>

<ul>
<li>
<p> a function name, e.g., <code>mean</code>.
</p>
</li>
<li>
<p> a function call, where you can use <code>.m</code> to represent the current matrix
(for <code>apply_matrix</code>), <code>.i</code> to represent the current row (for <code>apply_row</code>)
and <code>.j</code> for the current column (<code>apply_column</code>). Bare names of object
traits can be used as well. For instance, <code>lm(.i ~ program)</code>.
</p>
<p>The pronouns are also available for the multivariate version, under
certain circumstances, but they have a different meaning. See the
"Multivariate" section for more details.
</p>
</li>
<li>
<p> a formula expression. The pronouns <code>.m</code>, <code>.i</code> and <code>.j</code> can be used as
well. See examples to see the usefulness of this.
</p>
</li>
</ul>
<p>The expressions can be named; these names will be used to provide names to
the results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_prefix, names_sep, names_glue, names_sort, names_vary, names_expand</code></td>
<td>
<p>See
the same arguments of <code>tidyr::pivot_wider()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A conscious choice was made to provide this functionality only for
<code style="white-space: pre;">⁠apply_*_dfw()⁠</code>, as this is the only version for which the output dimension
is guaranteed to respect the <code>matrixset</code> paradigm.
</p>
<p>On that note, see the section 'Grouped <code>matrixset</code>'.
</p>


<h3>Value</h3>

<p>A <code>matrixset</code> with updated meta info.
</p>


<h3>Grouped <code>matrixset</code>
</h3>

<p>In the context of grouping, the <code style="white-space: pre;">⁠apply_*_dfw()⁠</code> functions stack the results
for each group value.
</p>
<p>In the case of <code style="white-space: pre;">⁠annotate_*_from_matrix()⁠</code>, a <code>tidyr::pivot_wider()</code> is
further applied to ensure compatibility of the dimension.
</p>
<p>The <code>pivot_wider()</code> arguments <code>names_prefix</code>, <code>names_sep</code>, <code>names_glue</code>,
<code>names_sort</code>, <code>names_vary </code> and <code>names_expand</code> can help you control the final
annotation trait names.
</p>


<h3>See Also</h3>

<p><code>annotate_row()</code>/<code>annotate_column()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># This is the same example as in annotate_row(), but with the "proper" way
# of doing it
ms &lt;- annotate_row_from_apply(student_results, "failure", mn = mean)

</code></pre>


</div>