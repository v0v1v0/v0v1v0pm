<div class="container">

<table style="width: 100%;"><tr>
<td>hatize_byname</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates a diagonal "hat" matrix from a vector</h2>

<h3>Description</h3>

<p>A "hat" matrix (or a diagonal matrix) is one in which the only non-zero elements are along on the diagonal.
To "hatize" a vector is to place its elements on the diagonal of an otherwise-zero square matrix.
<code>v</code> must be a matrix object with at least one of its two dimensions of length 1 (i.e., a vector).
The names on both dimensions of the hatized matrix are the same and taken from
the dimension of <code>v</code> that is <em>not</em> 1.
Note that the row names and column names are sorted prior to forming the "hat" matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hatize_byname(v, keep = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>The vector from which a "hat" matrix is to be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>One of "rownames" or "colnames" or <code>NULL</code>.
If <code>NULL</code>, the default, names are kept from
the dimension that is not size 1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Hatizing a 1x1 vector is potentially undefined.
The argument <code>keep</code>
determines whether to keep "rownames" or "colnames".
By default <code>keep</code> is <code>NULL</code>,
meaning that the function should attempt to figure out which dimension's names
should be used for the hatized matrix on output.
If vector <code>v</code> could ever be 1x1,
it is best to set a value for <code>keep</code> when writing code
that calls <code>hatize_byname()</code>.
</p>
<p>If the caller specifies <code>keep = "colnames"</code> when <code>v</code> is a column vector,
an error is thrown.
If the caller specifies <code>keep = "rownames"</code> when <code>v</code> is a row vector,
an error is thrown.
</p>


<h3>Value</h3>

<p>A square "hat" matrix with size equal to the length of <code>v</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">v &lt;- matrix(1:10, ncol = 1, dimnames = list(c(paste0("i", 1:10)), c("c1"))) %&gt;%
  setrowtype("Industries") %&gt;% setcoltype(NA)
v
hatize_byname(v, keep = "rownames")
r &lt;- matrix(1:5, nrow = 1, dimnames = list(c("r1"), c(paste0("c", 1:5)))) %&gt;%
  setrowtype(NA) %&gt;% setcoltype("Commodities")
r
hatize_byname(r, keep = "colnames")
# This also works with lists.
hatize_byname(list(v, v), keep = "rownames")
# A 1x1 column vector is a degenerate case. 
# Row names and rowtype are transferred to the column.
matrix(42, nrow = 1, ncol = 1, dimnames = list("r1")) %&gt;% 
  setrowtype("Product -&gt; Industry") %&gt;% 
  hatize_byname(keep = "rownames")
# A 1x1 row vector is a degenerate case. 
# Column names and coltype are transferred to the row.
matrix(42, nrow = 1, ncol = 1, dimnames = list(NULL, "c1")) %&gt;% 
  setcoltype("Industry -&gt; Product") %&gt;% 
  hatize_byname(keep = "colnames")
# A 1x1 matrix with both row and column names generates a failure.
## Not run: 
matrix(42, nrow = 1, ncol = 1, dimnames = list("r1", "c1")) %&gt;% 
  setrowtype("Product -&gt; Industry") %&gt;% 
  setcoltype("Industry -&gt; Product") %&gt;% 
  hatize_byname()

## End(Not run)
# But you could specify which you want keep, row names or column names.
m &lt;- matrix(42, nrow = 1, ncol = 1, dimnames = list("r1", "c1")) %&gt;% 
  setrowtype("Product -&gt; Industry") %&gt;% 
  setcoltype("Industry -&gt; Product")
m
m %&gt;% 
  hatize_byname(keep = "rownames")
m %&gt;% 
  hatize_byname(keep = "colnames")
</code></pre>


</div>