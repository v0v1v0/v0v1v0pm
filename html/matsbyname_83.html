<div class="container">

<table style="width: 100%;"><tr>
<td>select_cols_byname</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select columns of a matrix (or list of matrices) by name</h2>

<h3>Description</h3>

<p>Arguments indicate which columns are to be retained and which are to be removed.
For maximum flexibility, arguments are extended regex patterns
that are matched against column names.
</p>


<h3>Usage</h3>

<pre><code class="language-R">select_cols_byname(
  a,
  retain_pattern = "$^",
  remove_pattern = "$^",
  ignore.case = FALSE,
  perl = FALSE,
  fixed = FALSE,
  useBytes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>a matrix or a list of matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retain_pattern</code></td>
<td>
<p>an extended regex or list of extended regular expressions that specifies which columns of <code>m</code> to retain.
Default pattern ("$^") retains nothing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_pattern</code></td>
<td>
<p>an extended regex or list of extended regular expressions that specifies which columns of <code>m</code> to remove.
Default pattern ("$^") removes nothing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore.case, perl, fixed, useBytes</code></td>
<td>
<p>Arguments passed to <code>grep()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>a</code> is <code>NULL</code>, <code>NULL</code> is returned.
</p>
<p>Patterns are compared against column names using extended regex.
If no column names of <code>a</code> match the <code>retain_pattern</code>, <code>NULL</code> is returned.
If no column names of <code>a</code> match the <code>remove_pattern</code>, <code>a</code> is returned.
</p>
<p>Retaining columns takes precedence over removing columns, always.
</p>
<p>Some typical patterns are:
</p>

<ul>
<li>
<p>"^Electricity$|^Oil$": column names that are EXACTLY "Electricity" or "Oil".
</p>
</li>
<li>
<p>"^Electricity|^Oil": column names that START WITH "Electricity" or "Oil".
</p>
</li>
<li>
<p>"Electricity|Oil": column names that CONTAIN "Electricity" or "Oil" anywhere within them.
</p>
</li>
</ul>
<p>Given a list of column names, a pattern can be constructed easily using the <code>make_pattern</code> function.
</p>
<p><code>RCLabels::make_or_pattern()</code> escapes regex strings using <code>Hmisc::escaprRegex()</code>.
This function assumes that <code>retain_pattern</code> and <code>remove_pattern</code> have already been
suitably escaped.
</p>
<p>Note that the default <code>retain_pattern</code> and <code>remove_pattern</code> ("$^")
retain nothing and remove nothing.
</p>
<p>If the row or column labels contain "[" or "]",
care should be taken to escape those characters.
<code>Hmisc::escapeRegex()</code> is helpful in such situations.
</p>
<p>Note that if all columns are removed from <code>a</code>, <code>NULL</code> is returned.
</p>


<h3>Value</h3>

<p>a matrix that is a subset of <code>a</code> with columns selected by <code>retain_pattern</code> and <code>remove_pattern</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">m &lt;- matrix(1:16, ncol = 4, dimnames=list(c(paste0("i", 1:4)), paste0("p", 1:4))) %&gt;%
  setrowtype("Industries") %&gt;% setcoltype("Commodities")
select_cols_byname(m, 
                   retain_pattern = RCLabels::make_or_pattern(c("p1", "p4"), 
                   pattern_type = "exact"))
select_cols_byname(m, 
                   remove_pattern = RCLabels::make_or_pattern(c("p1", "p3"), 
                   pattern_type = "exact"))
# Also works for lists and data frames
select_cols_byname(list(m,m), retain_pattern = "^p1$|^p4$")
</code></pre>


</div>