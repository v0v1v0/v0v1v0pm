<div class="container">

<table style="width: 100%;"><tr>
<td>select_rows_byname</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select (or de-select) rows of a matrix (or list of matrices) by name</h2>

<h3>Description</h3>

<p>Arguments indicate which rows are to be retained and which are to be removed.
For maximum flexibility, arguments are extended regex patterns
that are matched against row names.
</p>


<h3>Usage</h3>

<pre><code class="language-R">select_rows_byname(
  a,
  retain_pattern = "$^",
  remove_pattern = "$^",
  ignore.case = FALSE,
  perl = FALSE,
  fixed = FALSE,
  useBytes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>A matrix or a list of matrices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retain_pattern</code></td>
<td>
<p>An extended regex or list of extended regular expressions that specifies which rows of <code>a</code> to retain.
Default pattern ("$^") retains nothing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_pattern</code></td>
<td>
<p>An extended regex or list of extended regular expressions that specifies which rows of <code>a</code> to remove,
Default pattern ("$^") removes nothing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore.case, perl, fixed, useBytes</code></td>
<td>
<p>Arguments passed to <code>grep()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>a</code> is <code>NULL</code>, <code>NULL</code> is returned.
</p>
<p>Patterns are compared against row names using extended regex.
If no row names of <code>a</code> match the <code>retain_pattern</code>, <code>NULL</code> is returned.
If no row names of <code>a</code> match the <code>remove_pattern</code>, <code>m</code> is returned.
Note that the default <code>retain_pattern</code> and <code>remove_pattern</code> ("$^")
retain nothing and remove nothing.
</p>
<p>Retaining rows takes precedence over removing rows, always.
</p>
<p>Some typical patterns are:
</p>

<ul>
<li>
<p>"^Electricity$|^Oil$": row names that are EXACTLY "Electricity" or EXACTLY "Oil".
</p>
</li>
<li>
<p>"^Electricity|^Oil": row names that START WITH "Electricity" or START WITH "Oil".
</p>
</li>
<li>
<p>"Electricity|Oil": row names that CONTAIN "Electricity" or CONTAIN "Oil" anywhere within them.
</p>
</li>
</ul>
<p>Given a list of row names, a pattern can be constructed easily using <code>RCLabels::make_or_pattern()</code>.
<code>RCLabels::make_or_pattern()</code> escapes regex strings using <code>Hmisc::escapeRegex()</code>.
This function assumes that <code>retain_pattern</code> and <code>remove_pattern</code> have already been
suitably escaped.
</p>
<p>If the row or column labels contain "[" or "]",
care should be taken to escape those characters.
<code>Hmisc::escapeRegex()</code> is helpful in such situations.
</p>
<p>Note that if all rows are removed from <code>a</code>, <code>NULL</code> is returned.
</p>


<h3>Value</h3>

<p>A matrix that is a subset of <code>m</code> with rows selected by <code>retain_pattern</code> and <code>remove_pattern</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">m &lt;- matrix(1:16, ncol = 4, dimnames = list(c(paste0("i", 1:4)), paste0("p", 1:4))) %&gt;%
  setrowtype("Industries") %&gt;% setcoltype("Commodities")
select_rows_byname(m, 
                   retain_pattern = RCLabels::make_or_pattern(c("i1", "i4"),
                   pattern_type = "exact"))
select_rows_byname(m, 
                   remove_pattern = RCLabels::make_or_pattern(c("i1", "i3"), 
                   pattern_type = "exact"))
# Also works for lists and data frames
select_rows_byname(list(m, m), retain_pattern = "^i1$|^i4$")
</code></pre>


</div>