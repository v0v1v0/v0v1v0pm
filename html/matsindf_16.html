<div class="container">

<table style="width: 100%;"><tr>
<td>index_column</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Index a column in a data frame by groups relative to an initial year</h2>

<h3>Description</h3>

<p>This function indexes (by ratio) variables in <code>vars_to_index</code>
to the first time in <code>time_var</code>
or to <code>index_time</code> (if specified).
Groups in <code>.DF</code> are both respected and required.
Neither <code>var_to_index</code> nor <code>time_var</code> can be in the grouping variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">index_column(
  .DF,
  var_to_index,
  time_var = "Year",
  index_time = NULL,
  indexed_var = paste0(var_to_index, suffix),
  suffix = "_indexed"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.DF</code></td>
<td>
<p>the data frame in which the variables are contained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_to_index</code></td>
<td>
<p>the column name representing the variable to be indexed (a string)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_var</code></td>
<td>
<p>the name of the column containing time information.
Default is "<code>Year</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_time</code></td>
<td>
<p>the time to which data in <code>var_to_index</code> are indexed.
If <code>NULL</code> (the default), <code>index_time</code> is set to the first time of each group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indexed_var</code></td>
<td>
<p>the name of the indexed variable. Default is "<code>&lt;&lt;var_to_index&gt;&gt;_&lt;&lt;suffix&gt;&gt;</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>the suffix to be appended to the indexed variable. Default is "<code>_indexed</code>".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that this function works when the variable to index is
a column of numbers or a column of matrices.
</p>


<h3>Value</h3>

<p>a data frame with same number of rows as <code>.DF</code> and the following columns:
grouping variables of <code>.DF</code>, <code>var_to_index</code>, <code>time_var</code>,
and one additional column containing indexed <code>var_to_index</code>
named with the value of <code>indexed_var</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(tidyr)
DF &lt;- data.frame(Year = c(2000, 2005, 2010), a = c(10, 15, 20), b = c(5, 5.5, 6)) %&gt;%
  gather(key = name, value = var, a, b) %&gt;%
  group_by(name)
index_column(DF, var_to_index = "var", time_var = "Year", suffix = "_ratioed")
index_column(DF, var_to_index = "var", time_var = "Year", indexed_var = "now.indexed")
index_column(DF, var_to_index = "var", time_var = "Year", index_time = 2005,
             indexed_var = "now.indexed")
## Not run: 
  DF %&gt;%
    ungroup() %&gt;%
    group_by(name, var) %&gt;%
    index_column(var_to_index = "var", time_var = "Year") # Fails! Do not group on var_to_index.
  DF %&gt;%
    ungroup() %&gt;%
    group_by(name, Year) %&gt;%
    index_column(var_to_index = "var", time_var = "Year") # Fails! Do not group on time_var.

## End(Not run)
</code></pre>


</div>