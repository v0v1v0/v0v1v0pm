<div class="container">

<table style="width: 100%;"><tr>
<td>compare_models</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare Maxent OT models using a variety of methods</h2>

<h3>Description</h3>

<p>Compares two or more model fit to the same data set to determine which
provides the best fit, using a variety of methods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compare_models(..., method = "lrt")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Two or more models objects to be compared. These objects should
be in the same format as the objects returned by the <code>optimize_weights</code>
function. Note that the likelihood ratio test applies to exactly two
models, while the other comparison methods can be applied to arbitrarily
many models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>The method of comparison to use. This currently includes <code>lrt</code>
(likelihood ratio test), <code>aic</code> (Akaike Information Criterion), <code>aic_c</code>
(Akaike Information Criterion adjusted for small sample sizes), and <code>bic</code>
(Bayesian Information Criterion).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The available comparison methods are
</p>

<ul>
<li> <p><strong>lrt</strong>: The likelihood ratio test. This method can be applied to a
maximum of two models, and the parameters of these models (i.e., their
constraints) <em>must be in a strict subset/superset relationship.</em> If your
models do not meet these requirements, you should use a different method.
</p>
<p>The likelihood ratio is calculated as follows:
</p>
<p style="text-align: center;"><code class="reqn">LR = 2(LL_2 - LL_1)</code>
</p>

<p>where <code class="reqn">LL_2</code> is log likelihood of the model with more parameters. A
p-value is calculated by conducting a chi-squared test with <code class="reqn">X^2 = LR</code>
and the degrees of freedom set to the difference in number of parameters
between the two models. This p-value tells us whether the difference in
likelihood between the two models is significant (i.e., whether the extra
parameters in the full model are justified by the increase in model fit).
</p>
</li>
<li> <p><strong>aic</strong>: The Akaike Information Criterion. This is calculated as
follows for each model:
</p>
<p style="text-align: center;"><code class="reqn">AIC = 2k - 2LL</code>
</p>

<p>where <code class="reqn">k</code> is the number of model parameters (i.e., constraints) and LL
is the model's log likelihood.
</p>
</li>
<li> <p><strong>aic_c</strong>: The Akaike Information Criterion corrected for small sample
sizes. This is calculated as follows:
</p>
<p style="text-align: center;"><code class="reqn">AIC_c = 2k - 2LL + \frac{2k^2 + 2k}{n - k - 1}</code>
</p>

<p>where <code class="reqn">n</code> is the number of samples and the other parameters are
identical to those used in the AIC calculation. As <code class="reqn">n</code> approaches
infinity, the final term converges to 0, and so this equation becomes
equivalent to AIC. Please see the note below for information about sample
sizes.
</p>
</li>
<li> <p><strong>bic</strong>: The Bayesian Information Criterion. This is calculated as
follows:
</p>
<p style="text-align: center;"><code class="reqn">BIC = k\ln(n) - 2LL</code>
</p>

<p>As with <code>aic_c</code>, this calculation relies on the number of samples. Please
see the discussion on sample sizes below before using this method.
</p>
</li>
</ul>
<p>A few caveats for several of the comparison methods:
</p>

<ul>
<li>
<p> The likelihood ratio test (<code>lrt</code>) method applies to exactly two
models, and assumes that the parameters of these models are <em>nested</em>:
that is, the constraints in the smaller model are a strict subset of the
constraints in the larger model. This function will verify this to some
extent based on the number and names of constraints.
</p>
</li>
<li>
<p> The Akaike Information Criterion adjusted for small sample sizes
(<code>aic_c</code>) and the Bayesian Information Criterion (<code>bic</code>) rely on sample
sizes in their calculations. The sample size for a data set is defined as
the sum of the column of surface form frequencies. If you want to apply
these methods, it is important that the values in the column are token
counts, not relative frequencies. Applying these methods to relative
frequencies, which effectively ignore sample size, will produce invalid
results.
</p>
</li>
</ul>
<p>The <code>aic</code>, <code>aic_c</code>, and <code>bic</code> comparison methods return raw AIC/AICc/BIC
values as well as weights corresponding to these values. These weights
are calculated similarly for each model:
</p>
<p style="text-align: center;"><code class="reqn">W_i = \frac{\exp(-0.5 \delta_i)}{\sum_{j=1}^{m}{\exp(-0.5 \delta_j)}}</code>
</p>

<p>where <code class="reqn">\delta_i</code> is the difference in score (AIC, AICc, BIC) between
model <code class="reqn">i</code> and the model with the best score, and <code class="reqn">m</code> is the number of
models being compared. These weights provide the relative likelihood or
conditional probability of this model being the best model (by whatever
definition of "best" is assumed by the measurement type) given the data and
the selection of models it is being compared to.
</p>


<h3>Value</h3>

<p>A data frame containing information about the comparison. The
contents and size of this data frame vary depending on the method used.
</p>

<ul>
<li> <p><code>lrt</code>: A data frame with a single row and the following columns:
</p>

<ul>
<li> <p><code>description</code>: the names of the two models being compared.
The name of the model with more parameters will be first.
</p>
</li>
<li> <p><code>chi_sq</code>: the chi-squared value calculated during the test.
</p>
</li>
<li> <p><code>k_delta</code>: the difference in parameters between the two
models used as degrees of freedom in the chi-squared test.
</p>
</li>
<li> <p><code>p_value</code>: the p-value calculated by the test
</p>
</li>
</ul>
</li>
<li> <p><code>aic</code>: A data frame with as many rows as there were models
passed in. The models are sorted in ascending order of AIC (i.e., best
first). This data frame has the following columns:
</p>

<ul>
<li> <p><code>model</code>: The name of the model.
</p>
</li>
<li> <p><code>k</code>: The number of parameters.
</p>
</li>
<li> <p><code>aic</code>: The model's AIC value.
</p>
</li>
<li> <p><code>aic.delta</code>: The difference between this model's AIC value
and the AIC value of the model with the smallest AIC value.
</p>
</li>
<li> <p><code>aic.wt</code>: The model's AIC weight: this reflects the relative
likelihood (or conditional probability) that this model is the
"best" model in the set.
</p>
</li>
<li> <p><code>cum.wt</code>: The cumulative sum of AIC weights up to and
including this model.
</p>
</li>
<li> <p><code>ll</code>: The log likelihood of this model.
</p>
</li>
</ul>
</li>
<li> <p><code>aicc</code>: The data frame returned here is analogous to the
structure of the AIC data frame, with AICc values replacing AICs and
accordingly modified column names. There is one additional column:
</p>

<ul><li> <p><code>n</code>: The number of samples in the data the model is fit to.
</p>
</li></ul>
</li>
<li> <p><code>bic</code>: The data frame returned here is analogous to the
structure of the AIC and AICc data frames. Like the AICc data frame,
it contains the <code>n</code> column.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">  # Get paths to toy data files
  # This file has two constraints
  data_file_small &lt;- system.file(
      "extdata", "sample_data_frame.csv", package = "maxent.ot"
  )
  # This file has three constraints
  data_file_large &lt;- system.file(
      "extdata", "sample_data_frame_large.csv", package = "maxent.ot"
  )

  # Fit weights to both data sets with no biases
  tableaux_small &lt;- read.csv(data_file_small)
  small_model &lt;- optimize_weights(tableaux_small)

  tableaux_large &lt;- read.csv(data_file_large)
  large_model &lt;- optimize_weights(tableaux_large)

  # Compare models using likelihood ratio test. This is appropriate here
  # because the constraints are nested.
  compare_models(small_model, large_model, method='lrt')

  # Compare models using AIC
  compare_models(small_model, large_model, method='aic')

  # Compare models using AICc
  compare_models(small_model, large_model, method='aic_c')

  # Compare models using BIC
  compare_models(small_model, large_model, method='bic')

</code></pre>


</div>