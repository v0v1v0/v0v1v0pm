<div class="container">

<table style="width: 100%;"><tr>
<td>FP</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Fractional Polynomials </h2>

<h3>Description</h3>

<p>Fractional polynomials transformation for continuous covariates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FP(x, p = c(-2, -1, -0.5, 0.5, 1, 2, 3), scaling = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> a numeric vector. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p> all powers of <code>x</code> to be included. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaling</code></td>
<td>
<p> a logical indicating if the measurements are scaled prior to model fitting.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A fractional polynomial refers to a model
<code class="reqn">\sum_{j = 1}^k (\beta_j x^{p_j} + \gamma_j x^{p_j} \log(x)) +
    \beta_{k + 1} \log(x)  + \gamma_{k + 1} \log(x)^2</code>,
where the degree of the fractional polynomial is the number of non-zero regression coefficients
<code class="reqn">\beta</code> and <code class="reqn">\gamma</code>.
</p>


<h3>Value</h3>

<p>A matrix including all powers <code>p</code> of <code>x</code>,
all powers <code>p</code> of <code>log(x)</code>, and <code>log(x)</code>.
</p>


<h3>References</h3>

<p>Willi Sauerbrei and Patrick Royston (1999), Building multivariable prognostic and
diagnostic models: transformation of the predictors by using fractional polynomials.
<em>Journal of the Royal Statistical Society A</em>, <b>162</b>, 71â€“94.
</p>


<h3>See Also</h3>

<p><code>gamboost</code> to fit smooth models, <code>bbs</code>
for P-spline base-learners</p>


<h3>Examples</h3>

<pre><code class="language-R">
    data("bodyfat", package = "TH.data")
    tbodyfat &lt;- bodyfat

    ### map covariates into [1, 2]
    indep &lt;- names(tbodyfat)[-2]
    tbodyfat[indep] &lt;- lapply(bodyfat[indep], function(x) {
        x &lt;- x - min(x)
        x / max(x) + 1
    })

    ### generate formula
    fpfm &lt;- as.formula(paste("DEXfat ~ ",
        paste("FP(", indep, ", scaling = FALSE)", collapse = "+")))
    fpfm

    ### fit linear model
    bf_fp &lt;- glmboost(fpfm, data = tbodyfat,
                      control = boost_control(mstop = 3000))

    ### when to stop
    mstop(aic &lt;- AIC(bf_fp))
    plot(aic)

    ### coefficients
    cf &lt;- coef(bf_fp[mstop(aic)])
    length(cf)
    cf[abs(cf) &gt; 0]

</code></pre>


</div>