<div class="container">

<table style="width: 100%;"><tr>
<td>cv_mb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-validation</h2>

<h3>Description</h3>

<p>Cross-validation
</p>


<h3>Usage</h3>

<pre><code class="language-R">cv_mb(
  instQ,
  pc.list,
  cv.folds,
  start.year,
  lambda = 1,
  log.trans = NULL,
  force.standardize = FALSE,
  return.type = c("fval", "metrics", "metric means", "Q")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>instQ</code></td>
<td>
<p>Instrumental data, in the same order as pc.list. The "season" column must be a factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc.list</code></td>
<td>
<p>List of PC matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv.folds</code></td>
<td>
<p>A list containing the cross validation folds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.year</code></td>
<td>
<p>The first year of record</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>The penalty weight</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log.trans</code></td>
<td>
<p>A vector containing indices of the targets to be log-transformed. If no transformation is needed, provide <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force.standardize</code></td>
<td>
<p>If TRUE, all observations are standardized. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.type</code></td>
<td>
<p>The type of results to be returned. Several types are possible to suit multiple use cases.
</p>

<dl>
<dt><code>fval</code></dt>
<dd>
<p>Only the objective function value (penalized least squares) is returned; this is useful for the outer optimization for site selection.</p>
</dd>
<dt><code>metrics</code></dt>
<dd>
<p>all performance metrics are returned.</p>
</dd>
<dt><code style="white-space: pre;">⁠metric means⁠</code></dt>
<dd>
<p>the Tukey's biweight robust mean of each metric is returned.</p>
</dd>
<dt><code>Q</code></dt>
<dd>
<p>The predicted flow in each cross-validation run is returned. This is the most basic output, so that you can use it to calculate other metrics that are not provided by the package.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.table</code> containing cross-validation results (metrics, fval, or metric means) for each target.
</p>


<h3>Examples</h3>

<pre><code class="language-R">cvFolds &lt;- make_Z(1922:2003, nRuns = 50, frac = 0.25, contiguous = TRUE)
cv &lt;- cv_mb(p1Seasonal, pc3seasons, cvFolds, 1750, log.trans = 1:3, return.type = 'metrics')
</code></pre>


</div>