<div class="container">

<table style="width: 100%;"><tr>
<td>SubpopAuditorFitter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Static AuditorFitter based on Subpopulations</h2>

<h3>Description</h3>

<p>Used to assess multi-calibration based on a list of
binary valued columns: <code>subpops</code> passed during initialization.
</p>


<h3>Value</h3>

<p><code>AuditorFitter</code><br></p>
<p><code>list</code> with items<br></p>

<ul>
<li> <p><code>corr</code>: pseudo-correlation between residuals and learner prediction.
</p>
</li>
<li> <p><code>l</code>: the trained learner.
</p>
</li>
</ul>
<h3>Super class</h3>

<p><code>mcboost::AuditorFitter</code> -&gt; <code>SubpopAuditorFitter</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>subpops</code></dt>
<dd>
<p><code>list</code> <br>
List of subpopulation indicators.
Initialize a SubpopAuditorFitter</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-SubpopAuditorFitter-new"><code>SubpopAuditorFitter$new()</code></a>
</p>
</li>
<li> <p><a href="#method-SubpopAuditorFitter-fit"><code>SubpopAuditorFitter$fit()</code></a>
</p>
</li>
<li> <p><a href="#method-SubpopAuditorFitter-clone"><code>SubpopAuditorFitter$clone()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="mcboost" data-topic="AuditorFitter" data-id="fit_to_resid"><a href="../../mcboost/html/AuditorFitter.html#method-AuditorFitter-fit_to_resid"><code>mcboost::AuditorFitter$fit_to_resid()</code></a></span></li>
</ul></details><hr>
<a id="method-SubpopAuditorFitter-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initializes a <code>SubpopAuditorFitter</code> that
assesses multi-calibration within each group defined
by the <code style="white-space: pre;">⁠subpops'. Names in ⁠</code>subpops' must correspond to
columns in the data.
</p>


<h5>Usage</h5>

<div class="r"><pre>SubpopAuditorFitter$new(subpops)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>subpops</code></dt>
<dd>
<p><code>list</code> <br>
Specifies a collection of characteristic attributes
and the values they take to define subpopulations
e.g. list(age = c('20-29','30-39','40+'), nJobs = c(0,1,2,'3+'), ,..).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-SubpopAuditorFitter-fit"></a>



<h4>Method <code>fit()</code>
</h4>

<p>Fit the learner and compute correlation
</p>


<h5>Usage</h5>

<div class="r"><pre>SubpopAuditorFitter$fit(data, resid, mask)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt>
<dd>
<p><code>data.table</code><br>
Features.</p>
</dd>
<dt><code>resid</code></dt>
<dd>
<p><code>numeric</code><br>
Residuals (of same length as data).</p>
</dd>
<dt><code>mask</code></dt>
<dd>
<p><code>integer</code><br>
Mask applied to the data. Only used for <code>SubgroupAuditorFitter</code>.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-SubpopAuditorFitter-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>SubpopAuditorFitter$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p>Other AuditorFitter: 
<code>CVLearnerAuditorFitter</code>,
<code>LearnerAuditorFitter</code>,
<code>SubgroupAuditorFitter</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  library("data.table")
  data = data.table(
    "AGE_NA" = c(0, 0, 0, 0, 0),
    "AGE_0_10" =  c(1, 1, 0, 0, 0),
    "AGE_11_20" = c(0, 0, 1, 0, 0),
    "AGE_21_31" = c(0, 0, 0, 1, 1),
    "X1" = runif(5),
    "X2" = runif(5)
  )
  label = c(1,0,0,1,1)
  pops = list("AGE_NA", "AGE_0_10", "AGE_11_20", "AGE_21_31", function(x) {x[["X1" &gt; 0.5]]})
  sf = SubpopAuditorFitter$new(subpops = pops)
  sf$fit(data, label - 0.5)
</code></pre>


</div>