<div class="container">

<table style="width: 100%;"><tr>
<td>model_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute possibly sparse model matrix</h2>

<h3>Description</h3>

<p>Compute possibly sparse model matrix
</p>


<h3>Usage</h3>

<pre><code class="language-R">model_matrix(
  formula,
  data = NULL,
  contrasts.arg = NULL,
  drop.unused.levels = FALSE,
  sparse = NULL,
  drop0 = TRUE,
  catsep = "",
  by = NULL,
  tabM = FALSE,
  enclos = .GlobalEnv
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>model formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data frame containing all variables used in <code>formula</code>.
These variables should not contain missing values. An error is raised in case any of them does.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrasts.arg</code></td>
<td>
<p>specification of contrasts for factor variables. Currently supported are
"contr.none" (no contrasts applied), "contr.treatment" (first level removed) and "contr.SAS" (last level removed).
Alternatively, a named list specifying a single level per factor variable can be passed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.unused.levels</code></td>
<td>
<p>whether empty levels of individual factor variables should be removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>if <code>TRUE</code> a sparse matrix of class <code>dgCMatrix</code> is returned. This can be efficient
for large datasets and a model containing categorical variables with many categories. If <code>sparse=NULL</code>, the default,
whether a sparse or dense model matrix is returned is based on a simple heuristic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop0</code></td>
<td>
<p>whether to drop any remaining explicit zeros in resulting sparse matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catsep</code></td>
<td>
<p>separator for concatenating factor variable names and level names.
By default it is the empty string, reproducing the labels of <code>model.matrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>a vector by which to aggregate the result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tabM</code></td>
<td>
<p>if <code>TRUE</code> return a list of tabMatrix objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enclos</code></td>
<td>
<p>enclosure to look for objects not found in <code>data</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Design matrix X, either an ordinary matrix or a sparse <code>dgCMatrix</code>.
</p>


</div>