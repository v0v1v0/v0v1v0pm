<div class="container">

<table style="width: 100%;"><tr>
<td>pmclapply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>mclapply with progress bar</h2>

<h3>Description</h3>

<p><code>pmclapply()</code> adds a progress bar to <code>mclapply()</code> in Rstudio or Linux
environments using output to the console. It is designed to add very little
overhead.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pmclapply(
  X,
  FUN,
  ...,
  progress = TRUE,
  spinner = FALSE,
  title = "",
  eta = TRUE,
  mc.preschedule = TRUE,
  mc.set.seed = TRUE,
  mc.silent = FALSE,
  mc.cores = getOption("mc.cores", 2L),
  mc.cleanup = TRUE,
  mc.allow.recursive = TRUE,
  affinity.list = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a vector (atomic or list) or an expressions vector. Other objects
(including classed objects) will be coerced by <code>as.list()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>the function to be applied via <code>mclapply()</code> to each element of <code>X</code>
in parallel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments passed to <code>FUN</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical whether to show the progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spinner</code></td>
<td>
<p>Logical whether to show a spinner which moves each time a
parallel process is completed. More useful if the length of time for each
process to complete is variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>Title for the progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eta</code></td>
<td>
<p>Logical whether to show estimated time to completion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.preschedule, mc.set.seed, mc.silent, mc.cleanup, mc.allow.recursive, affinity.list</code></td>
<td>
<p>See <code>mclapply()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>
<p>The number of cores to use, i.e. at most how many child
processes will be run simultaneously. The option is initialized from
environment variable <code>MC_CORES</code> if set. Must be at least one, and
parallelization requires at least two cores.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can be used in an identical manner to <code>mclapply()</code>. It is ideal
for use if the length of <code>X</code> is comparably &gt; cores. As processes are spawned
in a block and most code for each process completes at roughly the same time,
processes move along in blocks as determined by <code>mc.cores</code>. To track
progress, <code>pmclapply()</code> only tracks the nth process, where n=<code>mc.cores</code>. For
example, with 4 cores, <code>pmclapply()</code> reports progress when the 4th, 8th,
12th, 16th etc process has completed. If the length of <code>X</code> is very large
(e.g. in the 1000s), then the progress bar will only update for each 1% of
progress in order to reduce overhead.
</p>
<p>However, in some scenarios the length of <code>X</code> is comparable to the number of
cores and each process may take a long time. For example, machine learning
applied to each of 8 cross-validation folds on an 8-core machine will open 8
processes from the outset. Each process will often complete at roughly the
same time. In this case <code>pmclapply()</code> is much less informative as it only
shows completion at the end of 1 round of processes, so it will go from 0%
straight to 100%. For this scenario, we recommend users use <code>mcProgressBar()</code>
which allows more fine-grained reporting of subprogress from within a block
of parallel processes.
</p>
<p>ETA is approximate. As part of minimising overhead, it is only updated with
each change in progress (i.e. each time a block of processes completes). It
is not updated by interrupt.
</p>


<h3>Value</h3>

<p>A list of the same length as <code>X</code> and named by <code>X</code>.
</p>


<h3>Author(s)</h3>

<p>Myles Lewis
</p>


<h3>See Also</h3>

<p><code>mclapply()</code> <code>mcProgressBar()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (Sys.info()["sysname"] != "Windows") {

res &lt;- pmclapply(letters[1:20], function(i) {
                 Sys.sleep(0.2 + runif(1) * 0.1)
                 setNames(rnorm(5), paste0(i, 1:5))
                 }, mc.cores = 2, title = "Working")

}
</code></pre>


</div>