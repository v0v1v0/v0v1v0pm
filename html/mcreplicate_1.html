<div class="container">

<table style="width: 100%;"><tr>
<td>mc_replicate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Multi-core replicate.</h2>

<h3>Description</h3>

<p>Use multiple cores for repeated evaluation of an expression.
This also works on Windows using a parallel socket cluster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mc_replicate(
  n,
  expr,
  mc.cores = detectCores(),
  cluster,
  varlist,
  envir,
  packages,
  refresh = 0.1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer; the number of replications.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>the expression (a language object, usually a call) to evaluate
repeatedly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>
<p>number of cores to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>logical. If <code>TRUE</code> then clustering, rather than forking,
is used to replicate the specified function in parallel. Note: if you
are using Windows, only cluster is available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlist</code></td>
<td>
<p>Only used on Windows! Character vector of variable names to
export on each worker. Default is all variables in the current environment
which do not begin with a ".". See clusterExport for more
information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Only used on Windows! Environment from which  to export
variables. Default is the environment from which this function was called.
See clusterExport for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>packages</code></td>
<td>
<p>Only used on Windows! Environment from which  to export
variables. Default is all loaded packages. See clusterExport
for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refresh</code></td>
<td>
<p>Not on Windows! status update refresh interval</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A vector, matrix, or list of length <code>n</code>.
</p>


<h3>Source</h3>

<p>Modified from: Richard McElreath (2020). rethinking: Statistical
Rethinking book package. R package version 2.13.
<a href="https://github.com/rmcelreath/rethinking">https://github.com/rmcelreath/rethinking</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">one_sim &lt;- function(n = 100, control_prob = 0.1, rel_effect = 0.01) {
  treat_prob &lt;- control_prob + (control_prob * rel_effect)
  cy &lt;- rbinom(n = n, size = 1, prob = control_prob)
  ty &lt;- rbinom(n = n, size = 1, prob = treat_prob)
  mean(ty) - mean(cy)
  }

  mc_replicate(10, one_sim(), mc.cores = 2)

  # On Windows, when no particular packages or additional variables are needed
 # mc_replicate(10, one_sim(), , mc.cores = 2, packages = NULL,
 #              varlist = "one_sim", envir = environment())

</code></pre>


</div>