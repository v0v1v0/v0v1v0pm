<div class="container">

<table style="width: 100%;"><tr>
<td>msf_sc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute MCTQ sleep-corrected local time of mid-sleep on work-free days</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p><code>msf_sc()</code> computes the <strong>sleep-corrected local time of mid-sleep on
work-free days</strong> for standard, micro, and shift versions of the Munich
ChronoType Questionnaire (MCTQ).
</p>
<p>When using the shift version of the MCTQ, replace the value of <code>sd_week</code> to
<code>sd_overall</code>, as instructed in the Arguments section.
</p>


<h3>Usage</h3>

<pre><code class="language-R">msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>msf</code></td>
<td>
<p>An <code>hms</code> object corresponding to the <strong>local time of
mid-sleep on work-free days</strong> from a standard, micro, or shift version of
the MCTQ questionnaire. You can use <code>msl()</code> to compute it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_w</code></td>
<td>
<p>A <code>Duration</code> object corresponding to the
<strong>sleep duration on work days</strong> from a standard, micro, or shift version of
the MCTQ questionnaire. You can use <code>sdu()</code> to compute it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_f</code></td>
<td>
<p>A <code>Duration</code> object corresponding to the
<strong>sleep duration on work-free days</strong> from a standard, micro, or shift
version of the MCTQ questionnaire. You can use <code>sdu()</code> to
compute it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_week</code></td>
<td>
<p>A <code>Duration</code> object corresponding to
the <strong>average weekly sleep duration</strong> from a standard or micro version of
the MCTQ questionnaire (you can use <code>sd_week()</code> to
compute it) <strong>or</strong> the <strong>overall sleep duration of a particular shift</strong>
from a shift version of the MCTQ questionnaire (you can use
<code>sd_overall()</code> to compute it).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alarm_f</code></td>
<td>
<p>A <code>logical</code> object corresponding to the
<strong>alarm clock use on work-free days</strong> from a standard, micro, or shift
version of the MCTQ questionnaire. Note that, if <code>alarm_f == TRUE</code>,
<code>msf_sc</code> cannot be computed, <code>msf_sc()</code> will return <code>NA</code> for these cases.
For the <code class="reqn">\mu</code>MCTQ, this value must be set as <code>FALSE</code> all times, since
the questionnaire considers only the work-free days when the respondent
does not use an alarm (e.g., <code>alarm_f = rep(FALSE, length(msf))</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Standard MCTQ</strong> functions were created following the guidelines in
Roenneberg, Wirz-Justice, &amp; Merrow (2003), Roenneberg, Allebrandt, Merrow, &amp;
Vetter (2012), and from The Worldwide Experimental Platform (theWeP, n.d.).
</p>
<p><strong><code class="reqn">\mu</code>MCTQ</strong> functions were created following the guidelines in Ghotbi
et al. (2020), in addition to the guidelines used for the standard MCTQ.
</p>
<p><strong>MCTQ<code class="reqn">^{Shift}</code></strong> functions were created following the
guidelines in Juda, Vetter, &amp; Roenneberg (2013), in addition to the
guidelines used for the standard MCTQ.
</p>
<p>See the References section to learn more.
</p>


<h4>Class requirements</h4>

<p>The <code>mctq</code> package works with a set of object classes specially created to
hold time values. These classes can be found in the
lubridate and hms
packages. Please refer to those package documentations to learn more about
them.
</p>



<h4>Rounding and fractional time</h4>

<p>Some operations may produce an output with fractional time (e.g.,
<code>"19538.3828571429s (~5.43 hours)"</code>, <code>01:15:44.505</code>). If you want, you
can round it with <code>round_time()</code>.
</p>
<p>Our recommendation is to avoid rounding, but, if you do, make sure that you
only round your values after all computations are done. That way you avoid
<a href="https://en.wikipedia.org/wiki/Round-off_error">round-off errors</a>.
</p>



<h3>Value</h3>

<p>An <code>hms</code> object corresponding to the MCTQ chronotype or
sleep-corrected local time of mid-sleep on work-free days.
</p>


<h3>Guidelines</h3>

<p>Roenneberg, Allebrandt, Merrow, &amp; Vetter (2012), Ghotbi et al. (2020), Juda,
Vetter, &amp; Roenneberg (2013), and The Worldwide Experimental Platform (n.d.)
guidelines for <code>msf_sc()</code> (<code class="reqn">MSF_{sc}</code>) computation are as
follows.
</p>


<h4>Notes</h4>


<ul>
<li>
<p> For all cases, <code class="reqn">MSF_{sc}</code> cannot be computed if the participant
wakes up with an alarm clock on work-free days (<code class="reqn">Alarm_F</code>).
</p>
</li>
<li>
<p> For MCTQ<code class="reqn">^{Shift}</code>, the computation below must be applied to
each shift section of the questionnaire.
</p>
</li>
<li> <p><code class="reqn">MSF_{sc}</code> is a proxy for the subject chronotype in
standard and micro versions of the MCTQ.
</p>
</li>
<li>
<p> The basis for estimating chronotype in shift-workers is the mid-sleep on
work-free days after evening shifts (<code class="reqn">MSF^E</code>). In case work
schedules do not comprise evening shifts, Juda, Vetter, &amp; Roenneberg (2013)
propose to derive it from the <code class="reqn">MSF_{sc}</code> of other shifts (e.g.,
by using a linear model). Unfortunately, the <code>mctq</code> package can't help you
with that, as it requires a closer look at your data.
</p>
</li>
<li> <p><code class="reqn">MSF_{sc}</code> depends on developmental and environmental
conditions (e.g., age, light exposure). For epidemiological and genetic
studies, <code class="reqn">MSF_{sc}</code> must be normalized for age and sex to make
populations of different age and sex compositions comparable (Roenneberg,
Allebrandt, Merrow, &amp; Vetter, 2012).
</p>
</li>
<li>
<p> If you are visualizing this documentation in plain text, you may have some
trouble understanding the equations. You can see this documentation on the
package <a href="https://docs.ropensci.org/mctq/reference/">website</a>.
</p>
</li>
</ul>
<h4>For standard and micro versions of the MCTQ</h4>

<p style="text-align: center;"><code class="reqn">\textrm{If } Alarm_{F} = True \; , \; MSF_{sc} =
\textrm{Not Available (NA)}</code>
</p>

<p style="text-align: center;"><code class="reqn">\textrm{Else if } SD_F \leq SD_W \; , \; MSF_{sc} = MSF</code>
</p>

<p style="text-align: center;"><code class="reqn">\textrm{Else } \; , \; MSF_{sc} = MSF - \frac{SD_F - SD_{week}}{2}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">MSF_{sc}</code> = Sleep-corrected local time of mid-sleep on work-free days.
</p>
</li>
<li> <p><code class="reqn">Alarm_{F}</code> = A <code>logical</code> value indicating if the
respondent uses an alarm clock to wake up on work-free days.
</p>
</li>
<li> <p><code class="reqn">MSF</code> = Local time of mid-sleep on work-free days.
</p>
</li>
<li> <p><code class="reqn">SD_W</code> = Sleep duration on workdays.
</p>
</li>
<li> <p><code class="reqn">SD_F</code> = Sleep duration on work-free days.
</p>
</li>
<li> <p><code class="reqn">SD_{week}</code> = Average weekly sleep duration.
</p>
</li>
</ul>
<p><strong>*</strong> <code class="reqn">W</code> = Workdays; <code class="reqn">F</code> = Work-free days.
</p>
<p>Note that, since:
</p>
<p style="text-align: center;"><code class="reqn">MSF = SO_{F} + \frac{SD_{F}}{2}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">MSF</code> = Local time of mid-sleep on work-free days.
</p>
</li>
<li> <p><code class="reqn">SO_{F}</code> = Local time of sleep onset on work-free days.
</p>
</li>
<li> <p><code class="reqn">SD_{F}</code> = Sleep duration on work-free days.
</p>
</li>
</ul>
<p>The last condition of the <code class="reqn">MSF_{sc}</code> computation can be
simplified to:
</p>
<p style="text-align: center;"><code class="reqn">MSF_{sc} = SO_{F} + \frac{SD_{F}}{2} -
\frac{SD_{F} - SD_{week}}{2}</code>
</p>

<p style="text-align: center;"><code class="reqn">MSF_{sc} = SO_{F} + \frac{SD_{F}}{2} - \frac{SD_{F}}{2} +
\frac{SD_{week}}{2}</code>
</p>

<p style="text-align: center;"><code class="reqn">MSF_{sc} = SO_{F} + \frac{SD_{week}}{2}</code>
</p>




<h4>For the shift version of the MCTQ</h4>

<p style="text-align: center;"><code class="reqn">\textrm{If } Alarm_{F}^{M/E/N} = True \; , \; MSF_{sc}^{M/E/N} =
\textrm{Not Available (NA)}</code>
</p>

<p style="text-align: center;"><code class="reqn">\textrm{Else if } SD_{F}^{M/E/N} \leq SD_{W}^{M/E/N} \; , \;
MSF_{sc}^{M/E/N} = MSF^{M/E/N}</code>
</p>

<p style="text-align: center;"><code class="reqn">\textrm{Else } \; , \; MSF_{sc}^{M/E/N} = MSF^{M/E/N} -
\frac{SD_{F}^{M/E/N} - \emptyset SD^{M/E/N}}{2}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">MSF_{sc}^{M/E/N}</code> = Sleep-corrected local time of mid-sleep between
two free days after a particular shift.
</p>
</li>
<li> <p><code class="reqn">Alarm_{F}^{M/E/N}</code> = A <code>logical</code> value indicating
if the respondent uses an alarm clock to wake up between two free days after
a particular shift.
</p>
</li>
<li> <p><code class="reqn">MSF^{M/E/N}</code> = Local time of mid-sleep between two free
days after a particular shift.
</p>
</li>
<li> <p><code class="reqn">SD_{W}^{M/E/N}</code> = Sleep duration between two days in a
particular shift.
</p>
</li>
<li> <p><code class="reqn">SD_{F}^{M/E/N}</code> = Sleep duration between two free days
after a particular shift.
</p>
</li>
<li> <p><code class="reqn">\emptyset SD^{M/E/N}</code> = Overall sleep duration of a
particular shift.
</p>
</li>
</ul>
<p><strong>*</strong> <code class="reqn">W</code> = Workdays; <code class="reqn">F</code> = Work-free days, <code class="reqn">M</code> =
Morning shift; <code class="reqn">E</code> = Evening shift; <code class="reqn">N</code> = Night shift.
</p>
<p>Note that, since:
</p>
<p style="text-align: center;"><code class="reqn">MSF^{M/E/N} = SO_{F}^{M/E/N} + \frac{SD_{F}^{M/E/N}}{2}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">MSF^{M/E/N}</code> = Local time of mid-sleep between two free
days after a particular shift.
</p>
</li>
<li> <p><code class="reqn">SO_{F}^{M/E/N}</code> = Local time of sleep onset between two free days
after a particular shift.
</p>
</li>
<li> <p><code class="reqn">SD_{F}^{M/E/N}</code> = Sleep duration between two free days after a
particular shift.
</p>
</li>
</ul>
<p>The last condition of the <code class="reqn">MSF_{sc}^{M/E/N}</code> computation
can be simplified to:
</p>
<p style="text-align: center;"><code class="reqn">MSF_{sc}^{M/E/N} = SO_{F}^{M/E/N} + \frac{SD_{F}^{M/E/N}}{2} -
\frac{SD_{F}^{M/E/N} - \emptyset SD^{M/E/N}}{2}</code>
</p>

<p style="text-align: center;"><code class="reqn">MSF_{sc}^{M/E/N} = SO_{F}^{M/E/N} + \frac{SD_{F}^{M/E/N}}{2} -
\frac{SD_{F}^{M/E/N}}{2} + \frac{\emptyset SD^{M/E/N}}{2}</code>
</p>

<p style="text-align: center;"><code class="reqn">MSF_{sc}^{M/E/N} = SO_{F}^{M/E/N} + \frac{\emptyset SD^{M/E/N}}{2}</code>
</p>




<h3>References</h3>

<p>Ghotbi, N., Pilz, L. K., Winnebeck, E. C., Vetter, C., Zerbini, G., Lenssen,
D., Frighetto, G., Salamanca, M., Costa, R., Montagnese, S., &amp; Roenneberg, T.
(2020). The <code class="reqn">\mu</code>MCTQ: an ultra-short version of the Munich ChronoType
Questionnaire. <em>Journal of Biological Rhythms</em>, <em>35</em>(1), 98-110.
<a href="https://doi.org/10.1177/0748730419886986">doi:10.1177/0748730419886986</a>
</p>
<p>Juda, M., Vetter, C., &amp; Roenneberg, T. (2013). The Munich ChronoType
Questionnaire for shift-workers (MCTQ<code class="reqn">^{Shift}</code>). <em>Journal of
Biological Rhythms</em>, <em>28</em>(2), 130-140. <a href="https://doi.org/10.1177/0748730412475041">doi:10.1177/0748730412475041</a>
</p>
<p>Roenneberg T., Allebrandt K. V., Merrow M., &amp; Vetter C. (2012). Social jetlag
and obesity. <em>Current Biology</em>, <em>22</em>(10), 939-43.
<a href="https://doi.org/10.1016/j.cub.2012.03.038">doi:10.1016/j.cub.2012.03.038</a>
</p>
<p>Roenneberg, T., Wirz-Justice, A., &amp; Merrow, M. (2003). Life between clocks:
daily temporal patterns of human chronotypes. <em>Journal of Biological
Rhythms</em>, <em>18</em>(1), 80-90. <a href="https://doi.org/10.1177/0748730402239679">doi:10.1177/0748730402239679</a>
</p>
<p>The Worldwide Experimental Platform (n.d.). MCTQ.
<a href="https://www.thewep.org/documentations/mctq/">https://www.thewep.org/documentations/mctq/</a>
</p>


<h3>See Also</h3>

<p>Other MCTQ functions: 
<code>fd()</code>,
<code>gu()</code>,
<code>le_week()</code>,
<code>msl()</code>,
<code>napd()</code>,
<code>sd24()</code>,
<code>sd_overall()</code>,
<code>sd_week()</code>,
<code>sdu()</code>,
<code>sjl_sc()</code>,
<code>sjl_weighted()</code>,
<code>sjl()</code>,
<code>so()</code>,
<code>tbt()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Scalar example

msf &lt;- hms::parse_hms("04:00:00")
sd_w &lt;- lubridate::dhours(6)
sd_f &lt;- lubridate::dhours(7)
sd_week &lt;- lubridate::dhours(6.29)
alarm_f &lt;- FALSE
msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
#&gt; 03:38:42 # Expected

msf &lt;- hms::parse_hm("01:00:00")
sd_w &lt;- lubridate::dhours(5.5)
sd_f &lt;- lubridate::dhours(9)
sd_week &lt;- lubridate::dhours(6.75)
alarm_f &lt;- FALSE
msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
#&gt; 23:52:30 # Expected

msf &lt;- hms::parse_hms("05:40:00")
sd_w &lt;- lubridate::dhours(7.5)
sd_f &lt;- lubridate::dhours(10)
sd_week &lt;- lubridate::dhours(8.5)
alarm_f &lt;- TRUE
msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
#&gt; NA # Expected (`msf_sc` cannot be computed if `alarm_f == TRUE`)

## Vector example

msf &lt;- c(hms::parse_hms("03:45:00"), hms::parse_hm("04:45:00"))
sd_w &lt;- c(lubridate::dhours(9), lubridate::dhours(6.45))
sd_f &lt;- c(lubridate::dhours(5), lubridate::dhours(10))
sd_week &lt;- c(lubridate::dhours(8.5), lubridate::dhours(9.2))
alarm_f &lt;- c(FALSE, FALSE)
msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
#&gt; 03:45:00 # Expected
#&gt; 04:21:00 # Expected

## Rounding the output at the seconds level

msf &lt;- hms::parse_hms("05:40:00")
sd_w &lt;- lubridate::dhours(5.43678)
sd_f &lt;- lubridate::dhours(9.345111)
sd_week &lt;- lubridate::dhours(7.5453)
alarm_f &lt;- FALSE
msf_sc(msf, sd_w, sd_f, sd_week, alarm_f)
#&gt; 04:46:00.3402 # Expected

round_time(msf_sc(msf, sd_w, sd_f, sd_week, alarm_f))
#&gt; 04:46:00 # Expected
</code></pre>


</div>