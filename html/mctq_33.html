<div class="container">

<table style="width: 100%;"><tr>
<td>sd_week</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute MCTQ average weekly sleep duration</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p><code>sd_week()</code> computes the <strong>average weekly sleep duration</strong> for the standard
and micro versions of the Munich ChronoType Questionnaire (MCTQ).
</p>
<p>See <code>sd_overall()</code> to compute the overall sleep
duration of a particular shift for the shift version of the MCTQ.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sd_week(sd_w, sd_f, wd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sd_w</code></td>
<td>
<p>A <code>Duration</code> object corresponding to the
<strong>sleep duration on workdays</strong> from a standard or micro version of the MCTQ
questionnaire. You can use <code>sdu()</code> to compute it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_f</code></td>
<td>
<p>A <code>Duration</code> object corresponding to the
<strong>sleep duration on work-free days</strong> from a standard or micro version of
the MCTQ questionnaire. You can use <code>sdu()</code> to compute it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wd</code></td>
<td>
<p>An integerish
<code>numeric</code> object or an <code>integer</code>
object corresponding to the <strong>number of workdays per week</strong> from a standard
or micro version of the MCTQ questionnaire.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Standard MCTQ</strong> functions were created following the guidelines in
Roenneberg, Wirz-Justice, &amp; Merrow (2003), Roenneberg, Allebrandt, Merrow, &amp;
Vetter (2012), and from The Worldwide Experimental Platform (theWeP, n.d.).
</p>
<p><strong><code class="reqn">\mu</code>MCTQ</strong> functions were created following the guidelines in Ghotbi
et al. (2020), in addition to the guidelines used for the standard MCTQ.
</p>
<p><strong>MCTQ<code class="reqn">^{Shift}</code></strong> functions were created following the
guidelines in Juda, Vetter, &amp; Roenneberg (2013), in addition to the
guidelines used for the standard MCTQ.
</p>
<p>See the References section to learn more.
</p>


<h4>Class requirements</h4>

<p>The <code>mctq</code> package works with a set of object classes specially created to
hold time values. These classes can be found in the
lubridate and hms
packages. Please refer to those package documentations to learn more about
them.
</p>



<h4>Rounding and fractional time</h4>

<p>Some operations may produce an output with fractional time (e.g.,
<code>"19538.3828571429s (~5.43 hours)"</code>, <code>01:15:44.505</code>). If you want, you
can round it with <code>round_time()</code>.
</p>
<p>Our recommendation is to avoid rounding, but, if you do, make sure that you
only round your values after all computations are done. That way you avoid
<a href="https://en.wikipedia.org/wiki/Round-off_error">round-off errors</a>.
</p>



<h3>Value</h3>

<p>A <code>Duration</code> object corresponding to the
vectorized weighted mean of <code>sd_w</code> and <code>sd_f</code> with <code>wd</code> and <code>fd(wd)</code> as
weights.
</p>


<h3>Guidelines</h3>

<p>Roenneberg, Allebrandt, Merrow, &amp; Vetter (2012), Ghotbi et al. (2020), and
The Worldwide Experimental Platform (n.d.) guidelines for <code>sd_week()</code>
(<code class="reqn">SD_{week}</code>) computation are as follows.
</p>


<h4>Notes</h4>


<ul>
<li>
<p> The average weekly sleep duration is the weighted average of the sleep
durations on work and work-free days in a week.
</p>
</li>
<li>
<p> If you are visualizing this documentation in plain text, you may have some
trouble understanding the equations. You can see this documentation on the
package <a href="https://docs.ropensci.org/mctq/reference/">website</a>.
</p>
</li>
</ul>
<h4>Computation</h4>

<p style="text-align: center;"><code class="reqn">SD_{week} = \frac{(SD_{W} \times WD) + (SD_{F} \times FD)}{7}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">SD_{week}</code> = Average weekly sleep duration.
</p>
</li>
<li> <p><code class="reqn">SD_{W}</code> = Sleep duration on workdays.
</p>
</li>
<li> <p><code class="reqn">SD_{F}</code> = Sleep duration on work-free days.
</p>
</li>
<li> <p><code class="reqn">WD</code> = Number of workdays per week ("I have a regular work schedule and
work ___ days per week").
</p>
</li>
<li> <p><code class="reqn">FD</code> = Number of work-free days per week.
</p>
</li>
</ul>
<p><strong>*</strong> <code class="reqn">W</code> = Workdays; <code class="reqn">F</code> = Work-free days.
</p>



<h3>References</h3>

<p>Ghotbi, N., Pilz, L. K., Winnebeck, E. C., Vetter, C., Zerbini, G., Lenssen,
D., Frighetto, G., Salamanca, M., Costa, R., Montagnese, S., &amp; Roenneberg, T.
(2020). The <code class="reqn">\mu</code>MCTQ: an ultra-short version of the Munich ChronoType
Questionnaire. <em>Journal of Biological Rhythms</em>, <em>35</em>(1), 98-110.
<a href="https://doi.org/10.1177/0748730419886986">doi:10.1177/0748730419886986</a>
</p>
<p>Juda, M., Vetter, C., &amp; Roenneberg, T. (2013). The Munich ChronoType
Questionnaire for shift-workers (MCTQ<code class="reqn">^{Shift}</code>). <em>Journal of
Biological Rhythms</em>, <em>28</em>(2), 130-140. <a href="https://doi.org/10.1177/0748730412475041">doi:10.1177/0748730412475041</a>
</p>
<p>Roenneberg T., Allebrandt K. V., Merrow M., &amp; Vetter C. (2012). Social jetlag
and obesity. <em>Current Biology</em>, <em>22</em>(10), 939-43.
<a href="https://doi.org/10.1016/j.cub.2012.03.038">doi:10.1016/j.cub.2012.03.038</a>
</p>
<p>Roenneberg, T., Wirz-Justice, A., &amp; Merrow, M. (2003). Life between clocks:
daily temporal patterns of human chronotypes. <em>Journal of Biological
Rhythms</em>, <em>18</em>(1), 80-90. <a href="https://doi.org/10.1177/0748730402239679">doi:10.1177/0748730402239679</a>
</p>
<p>The Worldwide Experimental Platform (n.d.). MCTQ.
<a href="https://www.thewep.org/documentations/mctq/">https://www.thewep.org/documentations/mctq/</a>
</p>


<h3>See Also</h3>

<p>Other MCTQ functions: 
<code>fd()</code>,
<code>gu()</code>,
<code>le_week()</code>,
<code>msf_sc()</code>,
<code>msl()</code>,
<code>napd()</code>,
<code>sd24()</code>,
<code>sd_overall()</code>,
<code>sdu()</code>,
<code>sjl_sc()</code>,
<code>sjl_weighted()</code>,
<code>sjl()</code>,
<code>so()</code>,
<code>tbt()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Scalar example

sd_w &lt;- lubridate::dhours(4)
sd_f &lt;- lubridate::dhours(8)
wd &lt;- 5
sd_week(sd_w, sd_f, wd)
#&gt; [1] "18514.2857142857s (~5.14 hours)" # Expected

sd_w &lt;- lubridate::dhours(7)
sd_f &lt;- lubridate::dhours(7)
wd &lt;- 4
sd_week(sd_w, sd_f, wd)
#&gt; [1] "25200s (~7 hours)" # Expected

sd_w &lt;- lubridate::as.duration(NA)
sd_f &lt;- lubridate::dhours(10)
wd &lt;- 6
sd_week(sd_w, sd_f, wd)
#&gt; [1] NA # Expected

## Vector example

sd_w &lt;- c(lubridate::dhours(4.5), lubridate::dhours(5.45))
sd_f &lt;- c(lubridate::dhours(8), lubridate::dhours(7.3))
wd &lt;- c(3, 7)
sd_week(sd_w, sd_f, wd)
#&gt; [1] "23400s (~6.5 hours)"  "19620s (~5.45 hours)" # Expected

## Checking second output from vector example

if (requireNamespace("stats", quietly = TRUE)) {
    i &lt;- 2
    x &lt;- c(sd_w[i], sd_f[i])
    w &lt;- c(wd[i], fd(wd[i]))
    lubridate::as.duration(stats::weighted.mean(x, w))
}
#&gt; [1] "19620s (~5.45 hours)" # Expected

## Converting the output to 'hms'

sd_w &lt;- lubridate::dhours(5.45)
sd_f &lt;- lubridate::dhours(9.5)
wd &lt;- 5
x &lt;- sd_week(sd_w, sd_f, wd)
x
#&gt; [1] "23785.7142857143s (~6.61 hours)" # Expected
hms::as_hms(as.numeric(x))
#&gt; 06:36:25.714286 # Expected

## Rounding the output at the seconds level

sd_w &lt;- lubridate::dhours(4.5)
sd_f &lt;- lubridate::dhours(7.8)
wd &lt;- 3
sd_week(sd_w, sd_f, wd)
#&gt; [1] "22988.5714285714s (~6.39 hours)" # Expected

round_time(sd_week(sd_w, sd_f, wd))
#&gt; [1] "22989s (~6.39 hours)" # Expected
</code></pre>


</div>