<div class="container">

<table style="width: 100%;"><tr>
<td>shorter_interval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find the shorter or longer interval between two hours</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>
</p>
<p>These functions will be removed on the next <code>mctq</code> version. You can still
find them in the <a href="https://github.com/giperbio/lubritime"><code>lubritime</code></a>
package.
</p>
<p><code>shorter_interval()</code> returns the shorter interval between two
<code>hms</code> or <code>POSIXt</code> object hours.
</p>
<p><code>longer_interval()</code> do the inverse of <code>shorter_interval()</code>, i.e., returns the
longer interval between two hours.
</p>
<p><code>shorter_duration()</code> and <code>longer_duration()</code> return the interval time span
of <code>shorter_interval()</code> and <code>longer_interval()</code> as
<code>Duration</code> objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shorter_interval(x, y)

longer_interval(x, y)

shorter_duration(x, y)

longer_duration(x, y)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>An <code>hms</code> or <code>POSIXt</code>
object.</p>
</td>
</tr></table>
<h3>Details</h3>



<h4>The two intervals problem</h4>

<p>Given two hours, <code>x</code> and <code>y</code>, in a two-day timeline, without date references,
there will be always two possible intervals between them, as illustrated
below.
</p>
<p>To figure out what interval is the  shorter or the longer,
<code>shorter_interval()</code> and <code>longer_interval()</code> verify two scenarios: 1. When
<code>x</code> comes before <code>y</code>; and 2. when <code>x</code> comes after <code>y</code>. This only works if <code>x</code>
value is smaller than <code>y</code>, therefore, the function will make sure to swap <code>x</code>
and <code>y</code> values if the latter assumption is not true.
</p>
<p>Because <code>shorter_interval()</code> objective is to find the shorter interval, if
<code>x</code> and <code>y</code> are equal, the shorter interval will have a length of 0 hours,
resulting in an interval from <code>x</code> to <code>x</code>. But, if <code>longer_interval()</code> is used
instead, the latter condition will return a interval with 24 hours of length
(from <code>x</code> to <code>x</code> + 1 day).
</p>
<p>In cases when <code>x</code> and <code>y</code> distance themselves by 12 hours, there will be no
shorter or longer interval (they will have equal length). In these cases,
<code>shorter_interval()</code> and <code>longer_interval()</code> will return the same value
(an interval of 12 hours).
</p>
<div class="sourceCode"><pre>             day 1                        day 2
     x                  y         x                  y
   06:00              22:00     06:00              22:00
-----|------------------|---------|------------------|-----&gt;
              16h           8h             16h
          longer int.  shorter int.   longer int.

              day 1                      day 2
     y                   x       y                   x
   13:00               08:00   13:00               08:00
-----|-------------------|-------|-------------------|-----&gt;
              19h           5h            19h
          longer int.  shorter int.  longer int.

    x,y             x,y             x,y             x,y
     x               y               x               y
   10:00           10:00           10:00           10:00
-----|---------------|---------------|---------------|-----&gt;
    0h              0h              0h              0h
            24h             24h             24h

              day 1                      day 2
     y               x               y               x
   12:00           00:00           12:00           00:00
-----|---------------|---------------|---------------|-----&gt;
            12h             12h             12h
</pre></div>



<h4>Class requirements</h4>

<p>The <code>mctq</code> package works with a set of object classes specially created to
hold time values. These classes can be found in the hms
and lubridate package.
</p>



<h4>Base date and timezone</h4>

<p><code>shorter_interval()</code> and <code>longer_interval()</code> use the
<a href="https://en.wikipedia.org/wiki/Unix_time">Unix epoch</a> (1970-01-01) date as
the start date for creating intervals.
</p>
<p>The output will always have <code>"UTC"</code> set as timezone. Learn more about
time zones in <code>?timezone</code>.
</p>



<h4>
<code>POSIXt</code> objects</h4>

<p><code>POSIXt</code> objects passed as argument to <code>x</code> or <code>y</code>
will be stripped of their dates. Only the time will be considered.
</p>
<p>Both <code>POSIXct</code> and <code>POSIXlt</code> are
objects that inherits the class <code>POSIXt</code>. Learn more
about it in <code>?DateTimeClasses</code>.
</p>



<h4>
<code>NA</code> values</h4>

<p><code>shorter_interval()</code> or <code>longer_interval()</code> will return an
<code>Interval</code> <code>NA</code>-<code>NA</code> if <code>x</code> or <code>y</code> are <code>NA</code>.
</p>
<p><code>shorter_duration()</code> or <code>longer_duration()</code> will return a
<code>Duration</code> <code>NA</code>  if <code>x</code> or <code>y</code> are <code>NA</code>.
</p>



<h3>Value</h3>


<ul>
<li>
<p> For <code>shorter_interval()</code> or <code>longer_interval()</code>, an
<code>Interval</code> object with the shorter or longer
interval between <code>x</code> and <code>y</code>.
</p>
</li>
<li>
<p> For <code>shorter_duration()</code> or <code>longer_duration()</code>, a
<code>Duration</code> object with the shorter or longer
duration between <code>x</code> and <code>y</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Scalar example

x &lt;- hms::parse_hm("23:00")
y &lt;- hms::parse_hm("01:00")

shorter_interval(x, y)
#&gt; [1] 1970-01-01 23:00:00 UTC--1970-01-02 01:00:00 UTC # Expected
shorter_duration(x, y)
#&gt; [1] "7200s (~2 hours)" # Expected
longer_interval(x, y)
#&gt; [1] 1970-01-01 01:00:00 UTC--1970-01-01 23:00:00 UTC # Expected
longer_duration(x, y)
#&gt; [1] "79200s (~22 hours)" # Expected

x &lt;- lubridate::as_datetime("1985-01-15 12:00:00")
y &lt;- lubridate::as_datetime("2020-09-10 12:00:00")

shorter_interval(x, y)
#&gt; [1] 1970-01-01 12:00:00 UTC--1970-01-01 12:00:00 UTC # Expected
shorter_duration(x, y)
#&gt; [1] "0s" # Expected
longer_interval(x, y)
#&gt; [1] 1970-01-01 12:00:00 UTC--1970-01-02 12:00:00 UTC # Expected
longer_duration(x, y)
#&gt; [1] "86400s (~1 days)" # Expected

## Vector example

x &lt;- c(hms::parse_hm("15:30"), hms::parse_hm("21:30"))
y &lt;- c(hms::parse_hm("19:30"), hms::parse_hm("04:00"))

shorter_interval(x, y)
#&gt; [1] 1970-01-01 15:30:00 UTC--1970-01-01 19:30:00 UTC # Expected
#&gt; [2] 1970-01-01 21:30:00 UTC--1970-01-02 04:00:00 UTC # Expected
shorter_duration(x, y)
#&gt; [1] [1] "14400s (~4 hours)"   "23400s (~6.5 hours)" # Expected
longer_interval(x, y)
#&gt; [1] 1970-01-01 19:30:00 UTC--1970-01-02 15:30:00 UTC # Expected
#&gt; [2] 1970-01-01 04:00:00 UTC--1970-01-01 21:30:00 UTC # Expected
longer_duration(x, y)
#&gt; [1] "72000s (~20 hours)"   "63000s (~17.5 hours)" # Expected
</code></pre>


</div>