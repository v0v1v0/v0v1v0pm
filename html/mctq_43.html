<div class="container">

<table style="width: 100%;"><tr>
<td>so</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute MCTQ local time of sleep onset</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p><code>so()</code> computes the <strong>local time of sleep onset</strong> for standard and shift
versions of the Munich ChronoType Questionnaire (MCTQ).
</p>
<p>Note that this value is collected directly from the questionnaire if you're
using the <code class="reqn">\mu</code>MCTQ.
</p>


<h3>Usage</h3>

<pre><code class="language-R">so(sprep, slat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sprep</code></td>
<td>
<p>An <code>hms</code> object corresponding to the <strong>local time
of preparing to sleep</strong> from a standard or shift version of the MCTQ
questionnaire.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slat</code></td>
<td>
<p>A <code>Duration</code> object corresponding to the
<strong>sleep latency or time to fall asleep after preparing to sleep</strong> from a
standard or shift version of the MCTQ questionnaire.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Standard MCTQ</strong> functions were created following the guidelines in
Roenneberg, Wirz-Justice, &amp; Merrow (2003), Roenneberg, Allebrandt, Merrow, &amp;
Vetter (2012), and from The Worldwide Experimental Platform (theWeP, n.d.).
</p>
<p><strong><code class="reqn">\mu</code>MCTQ</strong> functions were created following the guidelines in Ghotbi
et al. (2020), in addition to the guidelines used for the standard MCTQ.
</p>
<p><strong>MCTQ<code class="reqn">^{Shift}</code></strong> functions were created following the
guidelines in Juda, Vetter, &amp; Roenneberg (2013), in addition to the
guidelines used for the standard MCTQ.
</p>
<p>See the References section to learn more.
</p>


<h4>Class requirements</h4>

<p>The <code>mctq</code> package works with a set of object classes specially created to
hold time values. These classes can be found in the
lubridate and hms
packages. Please refer to those package documentations to learn more about
them.
</p>



<h4>Rounding and fractional time</h4>

<p>Some operations may produce an output with fractional time (e.g.,
<code>"19538.3828571429s (~5.43 hours)"</code>, <code>01:15:44.505</code>). If you want, you
can round it with <code>round_time()</code>.
</p>
<p>Our recommendation is to avoid rounding, but, if you do, make sure that you
only round your values after all computations are done. That way you avoid
<a href="https://en.wikipedia.org/wiki/Round-off_error">round-off errors</a>.
</p>



<h3>Value</h3>

<p>An <code>hms</code> object corresponding to the vectorized sum of
<code>sprep</code> and <code>slat</code> in a circular time frame of 24 hours.
</p>


<h3>Guidelines</h3>

<p>Roenneberg, Allebrandt, Merrow, &amp; Vetter (2012), Juda, Vetter, &amp; Roenneberg
(2013), and The Worldwide Experimental Platform (n.d.) guidelines for <code>so()</code>
(<code class="reqn">SO</code>) computation are as follows.
</p>


<h4>Notes</h4>


<ul>
<li>
<p> This computation must be applied to each section of the questionnaire.
</p>
</li>
<li>
<p> If you are visualizing this documentation in plain text, you may have some
trouble understanding the equations. You can see this documentation on the
package <a href="https://docs.ropensci.org/mctq/reference/">website</a>.
</p>
</li>
</ul>
<h4>For standard and micro versions of the MCTQ</h4>

<p style="text-align: center;"><code class="reqn">SO_{W/F} = SPrep_{W/F} + SLat_{W/F}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">SO_{W/F}</code> = Local time of sleep onset on work <strong>or</strong> work-free days.
</p>
</li>
<li> <p><code class="reqn">SPrep_{W/F}</code> = Local time of preparing to sleep on work <strong>or</strong>
work-free days ("I actually get ready to fall asleep at ___ o'clock").
</p>
</li>
<li> <p><code class="reqn">SLat_{W/F}</code> = Sleep latency or time to fall asleep after preparing to
sleep on work <strong>or</strong> work-free days ("I need ___ min to fall asleep").
</p>
</li>
</ul>
<p><strong>*</strong> <code class="reqn">W</code> = Workdays; <code class="reqn">F</code> = Work-free days.
</p>



<h4>For the shift version of the MCTQ</h4>

<p style="text-align: center;"><code class="reqn">SO_{W/F}^{M/E/N} = SPrep_{W/F}^{M/E/N} + SLat_{W/F}^{M/E/N}</code>
</p>

<p>Where:
</p>

<ul>
<li> <p><code class="reqn">SO_{W/F}^{M/E/N}</code> = Local time of sleep onset between two days in a
particular shift <strong>or</strong> between two free days after a particular shift.
</p>
</li>
<li> <p><code class="reqn">SPrep_{W/F}^{M/E/N}</code> = Local time of preparing to sleep between two
days in a particular shift <strong>or</strong> between two free days after a particular
shift ("I actually get ready to fall asleep at ___ o'clock").
</p>
</li>
<li> <p><code class="reqn">SLat_{W/F}^{M/E/N}</code> = Sleep latency or time to fall asleep after
preparing to sleep between two days in a particular shift <strong>or</strong> between two
free days after a particular shift ("I need ___ min to fall asleep").
</p>
</li>
</ul>
<p><strong>*</strong> <code class="reqn">W</code> = Workdays; <code class="reqn">F</code> = Work-free days, <code class="reqn">M</code> =
Morning shift; <code class="reqn">E</code> = Evening shift; <code class="reqn">N</code> = Night shift.
</p>



<h3>References</h3>

<p>Ghotbi, N., Pilz, L. K., Winnebeck, E. C., Vetter, C., Zerbini, G., Lenssen,
D., Frighetto, G., Salamanca, M., Costa, R., Montagnese, S., &amp; Roenneberg, T.
(2020). The <code class="reqn">\mu</code>MCTQ: an ultra-short version of the Munich ChronoType
Questionnaire. <em>Journal of Biological Rhythms</em>, <em>35</em>(1), 98-110.
<a href="https://doi.org/10.1177/0748730419886986">doi:10.1177/0748730419886986</a>
</p>
<p>Juda, M., Vetter, C., &amp; Roenneberg, T. (2013). The Munich ChronoType
Questionnaire for shift-workers (MCTQ<code class="reqn">^{Shift}</code>). <em>Journal of
Biological Rhythms</em>, <em>28</em>(2), 130-140. <a href="https://doi.org/10.1177/0748730412475041">doi:10.1177/0748730412475041</a>
</p>
<p>Roenneberg T., Allebrandt K. V., Merrow M., &amp; Vetter C. (2012). Social jetlag
and obesity. <em>Current Biology</em>, <em>22</em>(10), 939-43.
<a href="https://doi.org/10.1016/j.cub.2012.03.038">doi:10.1016/j.cub.2012.03.038</a>
</p>
<p>Roenneberg, T., Wirz-Justice, A., &amp; Merrow, M. (2003). Life between clocks:
daily temporal patterns of human chronotypes. <em>Journal of Biological
Rhythms</em>, <em>18</em>(1), 80-90. <a href="https://doi.org/10.1177/0748730402239679">doi:10.1177/0748730402239679</a>
</p>
<p>The Worldwide Experimental Platform (n.d.). MCTQ.
<a href="https://www.thewep.org/documentations/mctq/">https://www.thewep.org/documentations/mctq/</a>
</p>


<h3>See Also</h3>

<p>Other MCTQ functions: 
<code>fd()</code>,
<code>gu()</code>,
<code>le_week()</code>,
<code>msf_sc()</code>,
<code>msl()</code>,
<code>napd()</code>,
<code>sd24()</code>,
<code>sd_overall()</code>,
<code>sd_week()</code>,
<code>sdu()</code>,
<code>sjl_sc()</code>,
<code>sjl_weighted()</code>,
<code>sjl()</code>,
<code>tbt()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Scalar example

sprep &lt;- hms::parse_hm("22:00")
slat &lt;- lubridate::dminutes(15)
so(sprep, slat)
#&gt; 22:15:00 # Expected

sprep &lt;- hms::parse_hm("23:30")
slat &lt;- lubridate::dminutes(45)
so(sprep, slat)
#&gt; 00:15:00 # Expected

sprep &lt;- hms::parse_hm("20:45")
slat &lt;- lubridate::as.duration(NA)
so(sprep, slat)
#&gt; NA # Expected

## Vector example

sprep &lt;- c(hms::parse_hm("21:30"), hms::parse_hm("22:15"))
slat &lt;- c(lubridate::dminutes(45), lubridate::dminutes(5))
so(sprep, slat)
#&gt; 22:15:00 # Expected
#&gt; 22:20:00 # Expected
</code></pre>


</div>