<div class="container">

<table style="width: 100%;"><tr>
<td>data.mb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Example Datasets for <span class="pkg">mdmb</span> Package
</h2>

<h3>Description</h3>

<p>Example datasets for <span class="pkg">mdmb</span> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data(data.mb01)
data(data.mb02)
data(data.mb03)
data(data.mb04)
data(data.mb05)
</code></pre>


<h3>Format</h3>


<ul>
<li>
<p> Dataset <code>data.mb01</code>. Simulated dataset with missing values.
Variables <code>Y</code>, <code>X</code> and <code>Z</code> are continuous.
</p>
<p><code>List of 2</code> <br><code> $ complete:'data.frame':       4000 obs. of  3 variables:</code> <br><code>  ..$ X: num [1:4000] -1.08 0.57 -0.32 0.34 1.21 -0.44 -1.07 -0.29 0.76 -1.75 ...</code> <br><code>  ..$ Z: num [1:4000] -0.02 0.26 -1.45 1.24 0.98 -2.36 0.84 -1.08 -0.15 -1.36 ...</code> <br><code>  ..$ Y: num [1:4000] 0.88 1.75 -0.82 -1.81 -1.58 -3.34 -3.35 -0.29 1.47 0.23 ...</code> <br><code> $ missing :'data.frame':       4000 obs. of  3 variables:</code> <br><code>  ..$ X: num [1:4000] -1.08 0.57 NA NA 1.21 NA -1.07 -0.29 0.76 NA ...</code> <br><code>  ..$ Z: num [1:4000] -0.02 0.26 -1.45 1.24 0.98 -2.36 0.84 -1.08 -0.15 -1.36 ...</code> <br><code>  ..$ Y: num [1:4000] 0.88 1.75 -0.82 -1.81 -1.58 -3.34 -3.35 -0.29 1.47 0.23 ...</code> <br></p>
</li>
<li>
<p> Dataset <code>data.mb02</code>. Simulated dataset with missing values. The
variables <code>Z</code> and <code>Y</code> are dichotomous.
</p>
<p><code>List of 2</code> <br><code> $ complete:'data.frame':       2000 obs. of  3 variables:</code> <br><code>  ..$ X: num [1:2000] -0.93 0.3 -0.93 0.7 0.52 -1.38 -0.14 0.09 0.23 -1.64 ...</code> <br><code>  ..$ Z: num [1:2000] 1 0 1 0 0 1 1 1 1 1 ...</code> <br><code>  ..$ Y: num [1:2000] 1 1 0 1 1 0 1 0 0 1 ...</code> <br><code> $ missing :'data.frame':       2000 obs. of  3 variables:</code> <br><code>  ..$ X: num [1:2000] -0.93 0.3 -0.93 0.7 0.52 NA -0.14 0.09 0.23 -1.64 ...</code> <br><code>  ..$ Z: num [1:2000] 1 0 1 NA NA 1 NA 1 1 1 ...</code> <br><code>  ..$ Y: num [1:2000] 1 1 0 1 1 0 1 0 0 1 ...</code> <br></p>
</li>
<li>
<p> Dataset <code>data.mb03</code>. This dataset is from Enders, Baraldi &amp; Cham (2014)
and contains three
variables primary school reading (<code>x</code>), primary school learning problems (<code>z</code>)
and middle school reading (<code>y</code>) which all have missing values.
</p>
<p><code>'data.frame':   74 obs. of  3 variables:</code> <br><code> $ x: num  NA NA NA NA NA 8.34 NA 8.36 6.89 8.56 ...</code> <br><code> $ z: num  8.81 4.5 6.31 4.7 5.1 4 6.11 3.7 6.81 6.31 ...</code> <br><code> $ y: num  5 5.1 6.3 9 9 9.3 NA 10.7 6.2 NA ...</code> <br></p>
</li>
<li>
<p> Dataset <code>data.mb04</code>. This multilevel dataset contains three variables:
level-1 variables <code>y</code>, <code>x</code> and the level-2 variable <code>w</code>.
</p>
<p><code>'data.frame':   500 obs. of  4 variables:</code> <br><code> $ idcluster: int  1 1 1 1 1 2 2 2 2 2 ...</code> <br><code> $ x        : num  NA NA -1.15 -1.65 0.25 ...</code> <br><code> $ w        : num  -0.552 -0.552 -0.552 -0.552 -0.552 ...</code> <br><code> $ y        : num  NA NA -0.0711 0.7165 -0.1917 ...</code> <br></p>
</li>
<li>
<p> Dataset <code>data.mb05</code>. This dataset contains selected (and transformed)
variables of the German PISA 2012 data.
</p>
<p><code>'data.frame':   5001 obs. of  13 variables:</code> <br><code> $ idschool : num  1001 1001 1001 1001 1001 ...</code> <br><code> $ idstud   : num  1e+05 1e+05 1e+05 1e+05 1e+05 ...</code> <br><code> $ female   : num  1 1 0 0 0 1 1 1 0 0 ...</code> <br><code> $ books    : num  NA 3 3 1 NA 2 NA 1 NA 2 ...</code> <br><code> $ hisced   : num  NA 6 6 2 NA 2 NA 2 NA 2 ...</code> <br><code> $ hisei    : num  NA 30.6 57.7 26.9 NA ...</code> <br><code> $ hisei10  : num  NA 0.257 0.596 0.211 NA ...</code> <br><code> $ native   : num  NA NA 1 0 NA 0 NA 1 NA 1 ...</code> <br><code> $ ANCINTMAT: num  NA 0.644 -0.096 1.057 NA ...</code> <br><code> $ MATHEFF  : num  NA 0.34 0.54 -0.18 NA 0.15 NA NA NA NA ...</code> <br><code> $ READ     : num  -0.25 -0.503 0.421 -1.664 -0.894 ...</code> <br><code> $ MATH     : num  -0.565 -0.854 0.384 -0.896 -0.534 ...</code> <br><code> $ W_FSTUWT : num  140 140 140 140 140 ...</code> <br></p>
</li>
</ul>
<h3>References</h3>

<p>Enders, C. K., Baraldi, A. N., &amp; Cham, H. (2014). Estimating interaction effects with
incomplete predictor variables. <em>Psychological Methods, 19</em>(1), 39-55.
<a href="https://doi.org/10.1037/a0035314">doi:10.1037/a0035314</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#############################################################################
# EXAMPLE 1: Linear interaction example from Enders et al. (2014)
#############################################################################

# load packages
library(mdmb)
library(mice)
library(mitools)
library(sandwich)

#--- attach example dataset (Enders et al., 2014) from mdmb package
data( data.mb03, package="mdmb")
dat &lt;- data.mb03

#--- center data which speeds convergence of Bayesian estimation
#--- of the imputation model
for (vv in 1:3){
    M_vv &lt;- mean( dat[,vv], na.rm=TRUE )
    dat[,vv] &lt;- dat[,vv] - M_vv
}

#--- generate initial imputed values withj mice package
imp &lt;- mice::mice( dat, m=, maxit=20 )
data_init &lt;- mice::complete(imp, action=1)

#--- define number of iterations and number of imputed datasets
iter &lt;- 50000; burnin &lt;- 5000
Nimp &lt;- 100

#******* imputation model M3 with quadratic effects

# model for dependent variable
dep &lt;- list("model"="linreg", "formula"=y ~ x*z + I(x^2) + I(z^2) )
# covariate models
ind_x &lt;- list( "model"="linreg", "formula"=x ~ z + I(z^2) )
ind_z &lt;- list( "model"="linreg", "formula"=z ~ 1 )
ind &lt;- list( x=ind_x, z=ind_z)

#generate imputations
imp &lt;- mdmb::frm_fb(dat=dat, dep=dep, ind=ind, burnin=burnin, iter=iter,
              data_init=data_init, Nimp=Nimp)

#--- create list of multiply imputed datasets
datlist &lt;- mdmb::frm2datlist(imp)

#-------------------------------
#--- analyze imputed datasets with mice package

# convert into object of class mids
imp2 &lt;- miceadds::datlist2mids(datlist)
# estimate linear model on multiply imputed datasets
mod1 &lt;- with(imp2, stats::lm( y ~ x*z ) )
summary( mice::pool(mod1) )

#-------------------------------
#--- analyze imputed datasets using sandwich standard errors

results &lt;- list()
variances &lt;- list()
Nimp &lt;- length(datlist)
for (ii in 1:Nimp){
    mod_ii &lt;- stats::lm( y ~ x*z, data=datlist[[ii]] )
    variances[[ii]] &lt;- sandwich::vcovHC(mod_ii)
    results[[ii]] &lt;- coef(mod_ii)
}

mod2 &lt;- mitools::MIcombine(results=results,variances=variances,df.complete=69)
summary(mod2)

## End(Not run)
</code></pre>


</div>