<div class="container">

<table style="width: 100%;"><tr>
<td>time_series</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Time Series from Defined Analysis or Analyses</h2>

<h3>Description</h3>

<p>Creates time series data frame(s) from defined analysis/analyses
(<code>define_analyses()</code>), device-event data frame
(<code>deviceevent()</code>), and optionally, exposure data frame
(<code>exposure()</code>). If analysis includes covariates or time in-vivo, creates
the relevant supporting data frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">time_series(analysis, ...)

## S3 method for class 'list'
time_series(analysis, ...)

## S3 method for class 'mds_das'
time_series(analysis, ...)

## S3 method for class 'mds_da'
time_series(analysis, deviceevents, exposure = NULL, use_hierarchy = T, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>analysis</code></td>
<td>
<p>A defined analysis object of class <code>mds_da</code>, list of
class <code>mds_das</code>, or a list of objects each of class <code>mds_da</code>,
usually created by <code>define_analyses()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments for future work.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviceevents</code></td>
<td>
<p>A device-event data frame of class <code>mds_de</code>, usually
created by <code>deviceevent()</code>. This should be the same data frame used to
generate <code>analysis</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposure</code></td>
<td>
<p>Optional exposure data frame of class <code>mds_e</code>, usually
created by <code>exposure()</code>. This should be the same data frame used to
generate <code>analysis</code>, if exposure data was used.
</p>
<p>Default: <code>NULL</code> will not consider exposure data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_hierarchy</code></td>
<td>
<p>Deprecated - do not use. Logical value indicating
whether device and event hierarchies should be used in counting contingency
tables for disproportionality analysis.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A standardized MD-PMS time series data frame of class <code>mds_ts</code>.
</p>
<p>The data frame contains, by defined date levels, the following columns:
</p>

<dl>
<dt>nA</dt>
<dd>
<p>Count of the device &amp; event level of interest. If covariate
analysis is indicated, this will be at the covariate &amp; device level of
interest.</p>
</dd>
<dt>nB</dt>
<dd>
<p>Optional. Count of the device &amp; non-event, or if covariate analysis,
covariate &amp; non-device. <code>nB</code> will be missing if this is an
<code>'All'</code> level analysis.</p>
</dd>
<dt>nC</dt>
<dd>
<p>Optional. Count of the non-device &amp; event, or if covariate analysis,
non-covariate &amp; device. <code>nC</code> will be missing if this is an
<code>'All'</code> level analysis.</p>
</dd>
<dt>nD</dt>
<dd>
<p>Optional. Count of the non-device &amp; non-event, or if covariate analysis,
non-covariate &amp; non-device. <code>nD</code> will be missing if this is an
<code>'All'</code> level analysis.</p>
</dd>
<dt>ids</dt>
<dd>
<p>List of all <code>key</code>s from <code>deviceevents</code> constituting
<code>nA</code>.</p>
</dd>
<dt>exposure</dt>
<dd>
<p>Optional. Count of exposures applicable to <code>nA</code>. This counts at
the device and covariate levels but not at the event level. If a matching
device and/or covariate level is not found, then <code>exposure</code> will be
<code>NA</code>. The exception is an <code>'All'</code> level analysis, which counts
exposures across all levels.</p>
</dd>
<dt>ids_exposure</dt>
<dd>
<p>Optional. List of all exposure keys from <code>exposure</code>
applicable to <code>nA</code>.</p>
</dd>
</dl>
<p>The <code>mds_ts</code> class attributes are as follows:
</p>

<dl>
<dt>title</dt>
<dd>
<p>Short description of the analysis.</p>
</dd>
<dt>analysis</dt>
<dd>
<p>The analysis definition of class <code>mds_da</code>.</p>
</dd>
<dt>exposure</dt>
<dd>
<p>Boolean of whether exposure counts are present.</p>
</dd>
<dt>dpa</dt>
<dd>
<p>Boolean of whether 2x2 contingency table counts are present
(presumably for disproportionality analysis or 'DPA').</p>
</dd>
<dt>dpa_detail</dt>
<dd>
<p>Optional. If <code>dpa</code> is <code>TRUE</code>, <code>list</code>
object containing labels for the DPA contingency table.</p>
</dd>
<dt>covar_data</dt>
<dd>
<p>Optional. If analysis definition includes covariate level
or time in-vivo, <code>data.frame</code> object containing the relevant data.</p>
</dd>
</dl>
<h3>Methods (by class)</h3>


<ul>
<li> <p><code>list</code>: Generate time series from a list
</p>
</li>
<li> <p><code>mds_das</code>: Generate time series from a list of defined analyses
</p>
</li>
<li> <p><code>mds_da</code>: Generate time series using defined analysis
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">de &lt;- deviceevent(maude, "date_received", "device_name", "event_type")
ex &lt;- exposure(sales, "sales_month", "device_name", count="sales_volume")
da &lt;- define_analyses(de, "device_name", exposure=ex)
# Time series on one analysis
time_series(da, de, ex)
# Time series on multiple analyses
time_series(da[1:3], de, ex)

</code></pre>


</div>