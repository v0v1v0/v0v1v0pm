<div class="container">

<table style="width: 100%;"><tr>
<td>mediate_tsls</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Two-stage Least Squares Estimation of the Average Causal Mediation Effects</h2>

<h3>Description</h3>

<p>Estimate quantities for causal mediation analysis using an instrumental 
variable estimator.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mediate_tsls(model.m, model.y, treat = "treat.name", conf.level = 0.95,
  robustSE = FALSE, cluster = NULL, boot = FALSE, sims = 1000,
  est_se = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.m</code></td>
<td>
<p>a fitted model object for mediator, of class <code>lm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.y</code></td>
<td>
<p>a fitted model object for outcome, of class <code>lm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable
used in the models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals. 
Default is to return the 2.5 and 97.5 percentiles of the simulated 
quantities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robustSE</code></td>
<td>
<p>a logical value. If 'TRUE', heteroskedasticity-consistent 
standard errors will be used. Default is 'FALSE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>a variable indicating clusters for standard errors. Note that 
this should be a vector of cluster indicators itself, not a character 
string for the name of the variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot</code></td>
<td>
<p>a logical value. if <code>FALSE</code> analytic confidence intervals
based on Aroian (1947) will be used; if <code>TRUE</code> nonparametric
bootstrap will be used. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sims</code></td>
<td>
<p>number of Monte Carlo draws for nonparametric bootstrap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est_se</code></td>
<td>
<p>estimate standard errors. Primarily for internal use. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to vcovCL in the sandwich package:
typically the <code>type</code> argument for heteroskedasticity-consistent 
standard errors.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>mediate</code> returns an object of class "<code>mediate</code>", 
"<code>mediate.tsls</code>", a list that contains the components listed below.  
</p>
<p>The function <code>summary</code>  can be used to obtain a table of the results.  
</p>
<table>
<tr style="vertical-align: top;">
<td><code>d1</code></td>
<td>
<p>point estimate for average causal mediation effects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d1.ci</code></td>
<td>
<p>confidence intervals for average causal mediation 
effect. The confidence level is set at the value specified in 
'conf.level'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0</code></td>
<td>
<p>point estimates for average direct effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0.ci</code></td>
<td>
<p>confidence intervals for average direct effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z0.p</code></td>
<td>
<p>two-sided p-values for average causal direct effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0</code></td>
<td>
<p>the "proportions mediated", or the size of the average causal 
mediation effect relative to the total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0.ci</code></td>
<td>
<p>confidence intervals for the proportion mediated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0.p</code></td>
<td>
<p>two-sided p-values for proportion mediated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.coef</code></td>
<td>
<p>point estimate for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.ci</code></td>
<td>
<p>confidence interval for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau.p</code></td>
<td>
<p>two-sided p-values for total effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot</code></td>
<td>
<p>logical, the <code>boot</code> argument used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>a character string indicating the name of the 'treat' variable 
used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>a character string indicating the name of the 'mediator' 
variable used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>INT</code></td>
<td>
<p>a logical value indicating whether the model specification 
allows the effects to differ between the treatment and control conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>the confidence level used. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.y</code></td>
<td>
<p>the outcome model used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.m</code></td>
<td>
<p>the mediator model used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nobs</code></td>
<td>
<p>number of observations in the model frame for 'model.m' and 
'model.y'. May differ from the numbers in the original models input to 
'mediate' if 'dropobs' was 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>the clusters used.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Aroian, L. A. 1947. The probability function of the product of
two normally distributed variables. *Annals of Mathematical Statistics,*
18, 265-271.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Generate data. We use TSLS to address unobserved confounding (n).
set.seed(123)
sims &lt;- 1000
dat &lt;- data.frame(z = sample(0:1, sims, replace = TRUE), 
                  t = sample(0:1, sims, replace = TRUE))
dat$n &lt;- rnorm(sims, mean = 1)
dat$m &lt;- rnorm(sims, mean = dat$z * 0.3 + dat$t * 0.2 + dat$n * 0.7, sd = 0.2)
dat$y &lt;- rnorm(sims, mean = 5 + dat$t + dat$m * (-3) + dat$n, sd = 1)
model.m &lt;- lm(m ~ t + z, data = dat)
model.y &lt;- lm(y ~ t + m, data = dat)
cluster &lt;- factor(sample(1:3, sims, replace = TRUE))
med &lt;- mediate_tsls(model.m, model.y, cluster = cluster, treat = "t")
summary(med) 
</code></pre>


</div>