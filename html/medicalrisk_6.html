<div class="container">

<table style="width: 100%;"><tr>
<td>generate_comorbidity_df</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a comorbidity dataframe</h2>

<h3>Description</h3>

<p>Merges a given DF of IDs and ICD-9-CM codes to one of the ICD9CM maps,
removes redundant comorbidities, and returns a dataframe.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_comorbidity_df(
  df,
  idvar = "id",
  icd9var = "icd9cm",
  icd9mapfn = icd9cm_charlson_quan,
  .progress = "none",
  .parallel = FALSE,
  .paropts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>a data frame with at least two columns, specified as <code>idvar</code>
and <code>icd9var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvar</code></td>
<td>
<p>string with name of ID variable within <code>df</code> (defaults to
"id")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icd9var</code></td>
<td>
<p>string with name of ICD code variable within <code>df</code>
(defaults to <code>icd9cm</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icd9mapfn</code></td>
<td>
<p>Function to generate comorbidity data frame from ICD-9 codes
(defaults to <code>icd9cm_charlson_quan</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.progress</code></td>
<td>
<p>passed to <code>ddply</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.parallel</code></td>
<td>
<p>passed to <code>ddply</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.paropts</code></td>
<td>
<p>passed to <code>ddply</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Redundancy rules:
* If "tumor" and "mets", only "mets" will be returned.
* If "htn" and "htncx", only "htncx" will be returned.
* If "dm" and "dmcx", only "dmcx" will be returned.
* If "liver" and "modliver", only "modliver" will be returned.
</p>
<p>Van Walraven has a modification adopted here where the following "dmcx" codes
are downgraded to "dm" if the specific DM complication is separately coded:
* D2(49|50)4x is DM w renal
* D2(49|50)6x is DM w neuro
* D2(49|50)7x is DM w PVD
</p>
<p>Cases without any comorbidities will not appear in the returned data
frame.
</p>


<h3>Value</h3>

<p>a dataframe with column <code>idvar</code> and a logical column for each comorbidity
</p>


<h3>Examples</h3>

<pre><code class="language-R">cases &lt;- data.frame(id=c(1,1,1,2,2,2,2,2),
         icd9cm=c("D20206","D24220","D4439","D5064","DE8788","D40403","D1960","D1958"),
         stringsAsFactors=TRUE)
generate_comorbidity_df(cases)
# generate categories for patients in the \code{\link{vt_inp_sample}}
generate_comorbidity_df(vt_inp_sample)
# in this example, D25071 is reduced to "dm" from "dmcx" because D4439 already codes perivasc
# also, D20206 "tumor" and D1970 "mets" lead to just "mets"
# D25001 and D25040 are just "dmcx"
# D45621 and D570 are just "modliver"
cases &lt;- data.frame(id=c(1,1,1,1,2,2,2,2),
  icd9cm=c("D1970","D20206","D25071","D4439","D25001","D25040","D45621","D570"),
  stringsAsFactors=TRUE)
generate_comorbidity_df(cases)
</code></pre>


</div>