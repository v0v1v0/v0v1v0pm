<div class="container">

<table style="width: 100%;"><tr>
<td>Mefa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
'Mefa' Class
</h2>

<h3>Description</h3>

<p>Creating an object of class <code>"Mefa"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Mefa(xtab, samp, taxa, join = c("left", "inner"), drop = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xtab</code></td>
<td>

<p>a matrix or a sparse matrix.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp</code></td>
<td>

<p>a data frame or <code>NULL</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxa</code></td>
<td>

<p>a data frame or <code>NULL</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>join</code></td>
<td>

<p>character, <code>"left"</code> (default) or <code>"inner"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>

<p>logical, if unused levels in the data frames should be dropped.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>samp</code> and <code>taxa</code> tables are matched with
corresponding dimnames in <code>xtab</code>:
rownames with <code>samp</code>, colnames with <code>taxa</code>.
If <code>join = "left"</code>, all rows and columns in <code>xtab</code> are retained,
while missing items in the corresponding attribute tables are filled up with <code>NA</code>s.
If <code>join = "inner"</code>, only the intersection of corresponding names are retained.
</p>
<p>The <code>xtab</code> slot is a sparse matrix (<code>dgCMatrix</code>). The input
should be in class <code>MefaMatrix</code> that is a class union of
<code>matrix</code> and <code>sparseMatrix</code> classes.
</p>
<p>The <code>samp</code> and <code>taxa</code> slots take data frame or <code>NULL</code>, which two form
the <code>MefaDataFrame</code> class union.
</p>
<p>The virtual classes <code>mefa</code> and <code>stcs</code> are defined for
seamless coercion between S3 and S4 classes.
</p>


<h3>Value</h3>

<p>An S4 object of class <code>"Mefa"</code> with 4 slots: <code>xtab</code>,
<code>samp</code>, <code>taxa</code>, <code>join</code>.
</p>


<h3>Note</h3>

<p>If <code>xtab</code> has no dimnames, matching it up with the attribute tables can be problematic.
</p>


<h3>Author(s)</h3>

<p>Peter Solymos &lt;solymos@ualberta.ca&gt;
</p>


<h3>See Also</h3>

<p>Creating crosstabulations: <code>Xtab</code>, <code>xtabs</code> in package <span class="pkg">stats</span>, <code>xtabs</code> in package <span class="pkg">stats</span>
</p>
<p><code>"mefa"</code> S3 class: <code>mefa</code> in <span class="pkg">mefa</span> package.
</p>
<p>Accessing and replacing slots: <code>xtab</code>, <code>samp</code>, <code>taxa</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- data.frame(
    sample = paste("Sample", c(1,1,2,2,3,4), sep="."),
    species = c(paste("Species", c(1,1,1,2,3), sep="."),  "zero.pseudo"),
    count = c(1,2,10,3,4,0),
    stringsAsFactors = TRUE)
samp &lt;- data.frame(samples=levels(x$sample), var1=1:2,
    stringsAsFactors = TRUE)
taxa &lt;- data.frame(specnames=levels(x$species), var2=c("b","a"),
    stringsAsFactors = TRUE)
rownames(samp) &lt;- samp$samples
rownames(taxa) &lt;- taxa$specnames

## Xtab class, counts by repetitions in RHS
(x0 &lt;- Xtab(~ sample + species, x))

## counts by LHS and repetitions in RHS
(x1 &lt;- Xtab(count ~ sample + species, x))

## drop all empty rows
(x2 &lt;- Xtab(count ~ sample + species, x, cdrop=FALSE,rdrop=TRUE))

## drop all empty columns
Xtab(count ~ sample + species, x, cdrop=TRUE,rdrop=FALSE)

## drop specific columns by placeholder
Xtab(count ~ sample + species, x, cdrop="zero.pseudo")

## Mefa class, standard
(x3 &lt;- Mefa(x1, samp, taxa))
unclass(x3)
x3@xtab
x3@samp
x3@taxa
x3@join

## effects of left join, NULL taxa slot, xtab is (not sparse) matrix
(x4 &lt;- Mefa(as.matrix(x1), samp[1:2,]))
unclass(x4)

## effects of inner join (intersect)
(x5 &lt;- Mefa(x2, samp, taxa, join="inner"))
unclass(x5)
unclass(Mefa(x1, samp[1:2,], join="inner"))

## xtab only Mefa
(x6 &lt;- Mefa(x1))

## creating new Mefa object without Mefa()
new("Mefa", xtab=x1, samp=samp, taxa=taxa,join="left")

## dim and dimnames
dim(x5)
dimnames(x5)
dn &lt;- list(paste("S", 1:3, sep=""), paste("SPP", 1:4, sep=""))
dimnames(x5) &lt;- dn
unclass(x5)
dimnames(x5)[[1]] &lt;- paste("S", 1:3, sep="_")
unclass(x5)
dimnames(x5)[[2]] &lt;- paste("SPP", 1:4, sep="_")
unclass(x5)

## transpose
x5
t(x5)
unclass(x5)
unclass(t(x5))

## 0 and 1 row/col Mefa object
x3[c(FALSE,FALSE,FALSE,FALSE),c(FALSE,FALSE,FALSE,FALSE)]
x3[c(TRUE,FALSE,FALSE,FALSE),c(FALSE,FALSE,FALSE,FALSE)]
x3[c(FALSE,FALSE,FALSE,FALSE),c(TRUE,FALSE,FALSE,FALSE)]
x3[c(TRUE,FALSE,FALSE,FALSE),c(TRUE,FALSE,FALSE,FALSE)]

## stack
stack(x3)
</code></pre>


</div>