<div class="container">

<table style="width: 100%;"><tr>
<td>Xtab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Sparse Cross Tabulation
</h2>

<h3>Description</h3>

<p>Create a contingency table from cross-classifying factors, usually contained in a data frame, using a formula interface.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Xtab(formula = ~., data = parent.frame(), rdrop, cdrop,
subset, na.action, exclude = c(NA, NaN), drop.unused.levels = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>a <code>formula</code> object with the cross-classifying variables (separated by +) on the right hand side (or an object which can be coerced to a formula). Interactions are not allowed. On the left hand side, one may optionally give a vector or a matrix of counts; in the latter case, the columns are interpreted as corresponding to the levels of a variable. This is useful if the data have already been tabulated, see the examples below.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>an optional matrix or data frame (or similar: see <code>model.frame</code>) containing the variables in the formula formula. By default the variables are taken from environment(formula).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rdrop, cdrop</code></td>
<td>

<p>logical (should zero marginal rows/columns be removed after cross tabulation), character or numeric (what rows/columns should be removed).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>an optional vector specifying a subset of observations to be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>

<p>a function which indicates what should happen when the data contain NAs.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>

<p>a vector of values to be excluded when forming the set of levels of the classifying factors.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.unused.levels</code></td>
<td>

<p>a logical indicating whether to drop unused levels in the classifying factors. If this is FALSE and there are unused levels, the table will contain zero marginals, and a subsequent chi-squared test for independence of the factors will not work.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function creates two- or three-way cross tabulation. Only works for two or three factors.
</p>
<p>If a left hand side is given in formula, its entries are simply summed over the cells corresponding to the right hand side; this also works if the left hand side does not give counts.
</p>


<h3>Value</h3>

<p>A sparse numeric matrix inheriting from <code>sparseMatrix</code>, specifically an object of S4 class <code>dgCMatrix</code>.
</p>
<p>For three factors, a list of sparse matrices.
</p>


<h3>Author(s)</h3>

<p>This function is a slight modification of the <code>xtabs</code> function in the <span class="pkg">stats</span> package.
</p>
<p>Modified by Peter Solymos &lt;solymos@ualberta.ca&gt;
</p>


<h3>See Also</h3>

<p>See also <code>xtabs</code> in <span class="pkg">stats</span> package.
</p>
<p><code>sum_by</code> for sums over a classes ('one-way table'),
and <code>Melt</code> for the inverse operation of <code>Xtab</code>.
</p>
<p><code>"mefa"</code> S3 class: <code>mefa</code> in <span class="pkg">mefa</span> package.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- data.frame(
    sample = paste("Sample", c(1,1,2,2,3,4), sep="."),
    species = c(paste("Species", c(1,1,1,2,3), sep="."),  "zero.pseudo"),
    count = c(1,2,10,3,4,0),
    stringsAsFactors = TRUE)
x
## Xtab class, counts by repetitions in RHS
(x0 &lt;- Xtab(~ sample + species, x))
## counts by LHS and repetitions in RHS
(x1 &lt;- Xtab(count ~ sample + species, x))
## drop all empty rows
(x2 &lt;- Xtab(count ~ sample + species, x, cdrop=FALSE,rdrop=TRUE))
## drop all empty columns
Xtab(count ~ sample + species, x, cdrop=TRUE,rdrop=FALSE)
## drop specific columns by placeholder
Xtab(count ~ sample + species, x, cdrop="zero.pseudo")

## 2 and 3 way crosstabs
xx &lt;- data.frame(
    sample = paste("Sample", c(1,1,2,2,3,4), sep="."),
    species = c(paste("Species", c(1,1,1,2,3), sep="."),  "zero.pseudo"),
    count = c(1,2,10,3,4,0),
    segment = letters[c(6,13,6,13,6,6)],
    stringsAsFactors = TRUE)
xx
Xtab(count ~ sample + species, xx)
Xtab(count ~ sample + species + segment, xx)
</code></pre>


</div>