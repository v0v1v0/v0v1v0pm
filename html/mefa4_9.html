<div class="container">

<table style="width: 100%;"><tr>
<td>find_max</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Utility functions for factors and compositional data
</h2>

<h3>Description</h3>

<p>Utility functions for factors and compositional data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compare_sets(x, y)
find_max(x)
find_min(x)
reclass(x, map, all = FALSE, allow_NA = FALSE)
redistribute(x, source, target = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>

<p>any type for <code>compare_sets</code>,
matrix for <code>find_max</code>, <code>find_min</code>, and <code>redistribute</code>,
a factor for <code>reclass</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>

<p>a reclassification matrix with 2 columns (1st: original levels,
2nd: output levels mapped to original levels).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>

<p>logical, whether all levels from mapping matrix should be
applied on the return object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_NA</code></td>
<td>

<p>logical, whether <code>NA</code>s are allowed as part of <code>map</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>

<p>numeric or character, single column index for input matrix <code>x</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>

<p>numeric or character, column index or indices for input matrix <code>x</code>.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix <code>compare_sets</code>.
</p>
<p>A data frame for <code>find_max</code> and <code>find_min</code>.
</p>
<p>A reclassified factor for <code>reclass</code>.
</p>
<p>A matrix for <code>redistribute</code> where the source column values are
redistributed among the target columns proportionally.
</p>


<h3>Author(s)</h3>

<p>Peter Solymos &lt;solymos@ualberta.ca&gt;
</p>


<h3>See Also</h3>

<p><code>intersect</code>, <code>setdiff</code>,
<code>union</code>, <code>relevel</code>, <code>reorder</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## numeric vector
compare_sets(1:10, 8:15)
## factor with 'zombie' labels
compare_sets(factor(1:10, levels=1:10), factor(8:15, levels=1:15))

(mat &lt;- matrix(rnorm(10*5), 10, 5))
(m &lt;- find_max(mat))
## column indices
as.integer(m$index)
find_min(mat)

map &lt;- cbind(c("a","b","c","d","e","f","g"),
             c("A","B","B","C","D","D","E"))
#x &lt;- factor(sample(map[1:6,1], 100, replace=TRUE), levels=map[,1])
x &lt;- as.factor(sample(map[1:6,1], 100, replace=TRUE))
x[2] &lt;- NA
table(x, reclass(x, map, all = FALSE), useNA="always")
table(x, reclass(x, map, all = TRUE), useNA="always")

map[c(4, 7), 2] &lt;- NA
table(x, reclass(x, map, all = FALSE, allow_NA = TRUE), useNA="always")
table(x, reclass(x, map, all = TRUE, allow_NA = TRUE), useNA="always")

(mat2 &lt;- exp(mat) / rowSums(exp(mat)))
(rmat2 &lt;- redistribute(mat2, source = 1, target = 2:4))
colMeans(mat2)
colMeans(rmat2)
stopifnot(abs(sum(mat2) - sum(rmat2)) &lt; 10^-6)

</code></pre>


</div>