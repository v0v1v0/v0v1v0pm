<div class="container">

<table style="width: 100%;"><tr>
<td>as.mefa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Conversion Among Various Object Classes</h2>

<h3>Description</h3>

<p>These functions coerce into class 'mefa' or 'stcs'; or converts 'mefa' or 'stcs' obects into a 'data.frame', 'matrix', 'array', 'list'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.stcs(x, ...)
## Default S3 method:
as.stcs(x, ...)
as.mefa(x, ...)
as.Mefa(x, ...)
as.Xtab(x, ...)
## Default S3 method:
as.mefa(x, samp, taxa, ...)
## S3 method for class 'array'
as.mefa(x, ...)
## S3 method for class 'list'
as.mefa(x, ...)
## S3 method for class 'mefa'
as.matrix(x, ...)
## S3 method for class 'mefa'
as.array(x, ...)
## S3 method for class 'mefa'
as.list(x, ...)
## S3 method for class 'stcs'
as.data.frame(x, ...)
## S3 method for class 'mefa'
as.data.frame(x, ..., fun, name, make.unique = FALSE)
mss(x, name, make.unique = FALSE, ...)
msr(x, name, make.unique = FALSE, ...)
mts(x, name, make.unique = FALSE, ...)
mtr(x, name, make.unique = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class 'mefa'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp</code></td>
<td>
<p>a data frame containing rows for samples, or <code>NULL</code>. See argument <code>xtab.fixed</code> and details for sample matching options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxa</code></td>
<td>
<p>a data frame containing rows for taxa, or <code>NULL</code>. See argument <code>xtab.fixed</code> and details for taxa matching options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>a function to determine what to return, see details. It has no default, because the choice is not trivial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>optional character vector, names to return if not all possible elements are needed, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>make.unique</code></td>
<td>
<p>logical, useful to use <code>make.unique = TRUE</code> if names to return are non-unique, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to the generic function <code>as.data.frame</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The usage of most of these coercion methods is trivial. Arrays and lists can be coerced into 'mefa' objects as if those were the <code>segm</code> element of it (either nested, or non nested). The reverse is true, when coercing an object of class 'mefa' into list or array, the <code>segm</code> element is used.
</p>
<p>Coercing among object classes 'matrix' and 'mefa' is done via using the <code>xtab</code> element.
</p>
<p>By <code>as.data.frame.mefa</code>, four kinds of data frames can be returned, depending on the function used as the <code>fun</code> argument:
<code>mss</code> returns summary statistics for samples (richness and abundance) and <code>x$samp</code>;
<code>msr</code> returns raw data (<code>x$xtab</code>) and <code>x$samp</code>;
<code>mts</code> returns summary statistics for taxa (occurrence and abundance) and <code>x$taxa</code>;
<code>mtr</code> returns raw data (<code>t(x$xtab)</code>) and <code>x$taxa</code>.
</p>
<p>The <code>name</code> can be used if only a subset of the summary statistics, or raw data should be returned. The character vector should contain names of elements to return (see examples).
</p>
<p>It might (rarely) occur, that names of the summary statistics, or the raw data and the column names of the sample/taxa table overlap (contains names that are common in the two set). In this case, the <code>make.unique = TRUE</code> can be used to resolve non-uniqueness and avoid the error message produced otherwise.
</p>
<p>The functions supplied as the <code>fun</code> argument can be used separately. Although the usage of the <code>as.data.frame</code> method is more transparent.
</p>


<h3>Value</h3>

<p>An object of class 'stcs', 'mefa', 'matrix', 'array', 'list' or 'data.frame', depending on the method used.
</p>


<h3>Author(s)</h3>

<p>P\'eter S\'olymos, <a href="mailto:solymos@ualberta.ca">solymos@ualberta.ca</a>
</p>


<h3>References</h3>

<p>S\'olymos P. (2008) mefa: an R package for handling and reporting count data. <em>Community Ecology</em> <b>9</b>, 125–127.
</p>
<p>S\'olymos P. (2009) Processing ecological data in R with the mefa package. <em>Journal of Statistical Software</em> <b>29(8)</b>, 1–28. <a href="https://doi.org/10.18637/jss.v029.i08">doi:10.18637/jss.v029.i08</a>
</p>
<p><a href="http://mefa.r-forge.r-project.org/">http://mefa.r-forge.r-project.org/</a>
</p>


<h3>See Also</h3>

<p><code>mefa</code>, <code>stcs</code>, <code>as.matrix</code>, <code>as.list</code>, <code>as.array</code>, <code>as.data.frame</code></p>


<h3>Examples</h3>

<pre><code class="language-R">data(dol.count, dol.samp, dol.taxa)
x &lt;- mefa(stcs(dol.count), dol.samp, dol.taxa)
## These two are equivalent
as.data.frame(x, fun = mss)
mss(x)
## Return only two species
as.data.frame(x, fun = msr, c("iiso", "ppyg"))
## Taxa table and summary
as.data.frame(x, fun = mts)
## Taxa table and raw data transpose
as.data.frame(x, fun = mtr)
## Why is it useful?
## Instead of
glm(x$xtab[,"amin"] ~ microhab + method, data = x$samp, family = poisson)
## it is more convenient to use
glm(amin ~ microhab + method, data = msr(x), family = poisson)
</code></pre>


</div>