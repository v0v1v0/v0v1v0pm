<div class="container">

<table style="width: 100%;"><tr>
<td>contract</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Contract data into pattern-frequency format</h2>

<h3>Description</h3>

<p><code>contract()</code> contracts data into pattern-frequency format, similar
to a contatenation of <code>table()</code> (or <code>xtabs</code>) and
<code>as.data.frame()</code>. Yet it uses much less memory if patterns
are sparse, because it does not create rows for patterns that do not occur.
</p>


<h3>Usage</h3>

<pre><code class="language-R">contract(x,...)
## S3 method for class 'data.frame'
contract(x,by=NULL, weights=NULL,name="Freq",
    force.name=FALSE,sort=FALSE,drop.na=TRUE,...)
## S3 method for class 'data.set'
contract(x,by=NULL, weights=NULL,name="Freq",
    force.name=FALSE,sort=FALSE,drop.na=TRUE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>an object of class <code>"data.frame"</code> or <code>"data.set"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>the formula or a vector of variable names (quoted or not quoted).
Specifies the patterns (and optionally weights).
If <code>by</code> is a formula, then the right-hand side specifies the
variables the value patterns of which are counted.
If the left-hand side of the formula is (the name of) a numeric
vector, its values are used as weights (in which case the
<code>weights</code> argument will be ignored.) If the left-hand side of
the formula is (the name of) a factor, counts are computed  in
separate columns for each of its levels.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a numeric vector of weights or <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>a character string, the name of the variable that
containts the frequency counts of the value patterns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force.name</code></td>
<td>
<p>a logical value, defaults to <code>FALSE</code>. If
<code>TRUE</code> and the left-hand side of <code>by</code> formula is a factor,
the names of the columns with the counts are combinations of the
labels of the factor levels and the argument of <code>name</code>; if
<code>FALSE</code>, the column names are created from the labels of the
factor levels only.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>a logical value, defaults to <code>FALSE</code>. If <code>TRUE</code>,
the resulting data set is sorted by the variables that define the
patterns. If <code>FALSE</code>, the row of the resulting data frame or
data set are ordered according to the occurrence of the patterns. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.na</code></td>
<td>
<p>a logical value, defaults to <code>TRUE</code>. If
<code>FALSE</code>, patterns that involve <code>NA</code> are included in the
resulting data frame or data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments, passed to methods or ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>x</code> is a data fame, the value of <code>contract()</code> is also a
data frame. If it is a <code>"data.set"</code> object, the result is also a
<code>"data.set"</code> object. 
</p>


<h3>Examples</h3>

<pre><code class="language-R">iris_ &lt;- sample(iris,size=nrow(iris),replace=TRUE)
w &lt;- rep(1,nrow(iris_))
contract(iris[4:5])
contract(iris[4:5],sort=TRUE)
contract(iris[4:5],weights=w,sort=TRUE)
contract(iris,by=c(Petal.Width,Species),sort=TRUE)
contract(iris,by=~Petal.Width+Species)
contract(iris,by=w~Species)

library(MASS)
contract(housing,
         by=Sat~Infl+Type+Cont,
         weights=Freq)

contract(housing,
         by=Sat~Infl+Type+Cont,
         weights=Freq,
         name="housing",force.name=TRUE
         )
</code></pre>


</div>