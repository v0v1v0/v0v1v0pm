<div class="container">

<table style="width: 100%;"><tr>
<td>data.set</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data Set Objects</h2>

<h3>Description</h3>

<p><code>"data.set"</code> objects are collections of <code>"item"</code> objects,
with similar semantics as data frames. They are distinguished
from data frames so that coercion by <code>as.data.fame</code>
leads to a data frame that contains only vectors and factors.
Nevertheless most methods for data frames are inherited by
data sets, except for the method for the <code>within</code> generic
function. For the <code>within</code> method for data sets, see the details section.
</p>
<p>Thus data preparation using data sets retains all informations
about item annotations, labels, missing values etc.
While (mostly automatic) conversion of data sets into data
frames makes the data amenable for the use of R's statistical
functions.
</p>
<p><code>dsView</code> is a function that displays data sets in a similar
manner as <code>View</code> displays data frames. (<code>View</code> works
with data sets as well, but changes them first into data frames.)
</p>


<h3>Usage</h3>

<pre><code class="language-R">data.set(...,row.names = NULL, check.rows = FALSE, check.names = TRUE,
    stringsAsFactors = FALSE, document = NULL)
as.data.set(x, row.names=NULL, ...)
## S4 method for signature 'list'
as.data.set(x,row.names=NULL,...)
is.data.set(x)
## S3 method for class 'data.set'
as.data.frame(x, row.names = NULL, optional = FALSE, ...)
## S4 method for signature 'data.set'
within(data, expr, ...)

dsView(x)

## S4 method for signature 'data.set'
head(x,n=20,...)
## S4 method for signature 'data.set'
tail(x,n=20,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>For the <code>data.set</code> function several vectors or items,
for <code>within</code> further, ignored arguments.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names, check.rows, check.names, stringsAsFactors, optional</code></td>
<td>
<p>arguments
as in <code>data.frame</code> or <code>as.data.frame</code>,
respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>document</code></td>
<td>
<p>NULL or an optional character vector that contains
documenation of the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>for <code>is.data.set(x)</code>, any object; for
<code>as.data.frame(x,...)</code> and <code>dsView(x)</code> a "data.set" object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data set, that is, an object of class "data.set". </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>an expression, or several expressions enclosed in curly braces.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer; the number of rows to be shown by <code>head</code> or <code>tail</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>as.data.frame</code> method for data sets is just a copy
of the method for list. Consequently, all items in the data set
are coerced in accordance to their <code>measurement</code> setting,
see <code>as.vector,item-method</code> and <code>measurement</code>.
</p>
<p>The <code>within</code> method for data sets has the same effect as
the <code>within</code> method for data frames, apart from two differences:
all results of the computations are coerced into items if
they have the appropriate length, otherwise, they are automatically
dropped.
</p>
<p>Currently only one method for the generic function <code>as.data.set</code>
is defined: a method for "importer" objects.
</p>


<h3>Value</h3>

<p><code>data.set</code> and the <code>within</code> method for
data sets returns a "data.set" object, <code>is.data.set</code>
returns a logical value, and <code>as.data.frame</code> returns
a data frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">Data &lt;- data.set(
          vote = sample(c(1,2,3,8,9,97,99),size=300,replace=TRUE),
          region = sample(c(rep(1,3),rep(2,2),3,99),size=300,replace=TRUE),
          income = exp(rnorm(300,sd=.7))*2000
          )

Data &lt;- within(Data,{
  description(vote) &lt;- "Vote intention"
  description(region) &lt;- "Region of residence"
  description(income) &lt;- "Household income"
  wording(vote) &lt;- "If a general election would take place next tuesday,
                    the candidate of which party would you vote for?"
  wording(income) &lt;- "All things taken into account, how much do all
                    household members earn in sum?"
  foreach(x=c(vote,region),{
    measurement(x) &lt;- "nominal"
    })
  measurement(income) &lt;- "ratio"
  labels(vote) &lt;- c(
                    Conservatives         =  1,
                    Labour                =  2,
                    "Liberal Democrats"   =  3,
                    "Don't know"          =  8,
                    "Answer refused"      =  9,
                    "Not applicable"      = 97,
                    "Not asked in survey" = 99)
  labels(region) &lt;- c(
                    England               =  1,
                    Scotland              =  2,
                    Wales                 =  3,
                    "Not applicable"      = 97,
                    "Not asked in survey" = 99)
  foreach(x=c(vote,region,income),{
    annotation(x)["Remark"] &lt;- "This is not a real survey item, of course ..."
    })
  missing.values(vote) &lt;- c(8,9,97,99)
  missing.values(region) &lt;- c(97,99)

  # These to variables do not appear in the
  # the resulting data set, since they have the wrong length.
  junk1 &lt;- 1:5
  junk2 &lt;- matrix(5,4,4)
  
})
# Since data sets may be huge, only a
# part of them are 'show'n
Data

## Not run: 

# If we insist on seeing all, we can use 'print' instead
print(Data)

## End(Not run)

str(Data)
summary(Data)

## Not run: 
# If we want to 'View' a data set we can use 'dsView'
dsView(Data)
# Works also, but changes the data set into a data frame first:
View(Data)

## End(Not run)

Data[[1]]
Data[1,]
head(as.data.frame(Data))

EnglandData &lt;- subset(Data,region == "England")
EnglandData

xtabs(~vote+region,data=Data)
xtabs(~vote+region,data=within(Data, vote &lt;- include.missings(vote)))
</code></pre>


</div>