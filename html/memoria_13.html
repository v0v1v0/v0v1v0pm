<div class="container">

<table style="width: 100%;"><tr>
<td>prepareLaggedData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Organizes time series data into lags.</h2>

<h3>Description</h3>

<p>Takes a multivariate time series, where at least one variable is meant to be used as a response while the others are meant to be used as predictors in a model, and organizes it in time lags, generating one new column per lag and variable in the model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepareLaggedData(
  input.data = NULL,
  response = NULL,
  drivers = NULL,
  time = NULL,
  oldest.sample = "first",
  lags = NULL,
  time.zoom = NULL,
  scale = FALSE
  )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input.data</code></td>
<td>
<p>a dataframe with one time series per column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>character string, name of the numeric column to be used as response in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drivers</code></td>
<td>
<p>character vector, names of the numeric columns to be used as predictors in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>character vector, name of the numeric column with the time/age.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oldest.sample</code></td>
<td>
<p>character string, either "first" or "last". When "first", the first row taken as the oldest case of the time series and the last row is taken as the newest case, so ecological memory flows from the first to the last row of <code>input.data</code>. When "last", the last row is taken as the oldest sample, and this is the mode that should be used when <code>input.data</code> represents a palaeoecological dataset. Default behavior is "first".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lags</code></td>
<td>
<p>numeric vector of positive integers, lags to be used in the equation. Generally, a regular sequence of numbers, in the same units as <code>time</code>. The use <code>seq</code> to define it is highly recommended. If 0 is absent from lags, it is added automatically to allow the consideration of a concurrent effect. Lags should take into account the temporal resolution of the data, and be aligned to it. For example, if the interval between consecutive samples is 100 years, lags should be something like <code>0, 100, 200, 300</code>. Lags can also be multiples of the time resolution, such as <code>0, 200, 400, 600</code> (in the case time resolution is 100 years).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.zoom</code></td>
<td>
<p>numeric vector of two numbers of the <code>time</code> column used to subset the data if desired.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>boolean, if TRUE, applies the <code>scale</code> function to normalize the data. Required if the lagged data is going to be used to fit linear models.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function interprets the <code>time</code> column as an index representing the
</p>


<h3>Value</h3>

<p>A dataframe with columns representing time-delayed values of the drivers and the response. Column names have the lag number as a suffix. The response variable is identified in the output as "Response_0".
</p>


<h3>Author(s)</h3>

<p>Blas M. Benito  &lt;blasbenito@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code>computeMemory</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#loading data
data(palaeodata)

#adding lags
lagged.data &lt;- prepareLaggedData(
 input.data = palaeodata,
 response = "pollen.pinus",
 drivers = c("climate.temperatureAverage", "climate.rainfallAverage"),
 time = "age",
 oldest.sample = "last",
 lags = seq(0.2, 1, by=0.2),
 time.zoom=NULL,
 scale=FALSE
)
str(lagged.data)

</code></pre>


</div>