<div class="container">

<table style="width: 100%;"><tr>
<td>selfcorrect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Self correct the code returned by the agent</h2>

<h3>Description</h3>

<p>The function attempts to correct the code returned by the agent
by re-feeding to the agent with the error message. If there are no
error messages function returns the original response.
</p>


<h3>Usage</h3>

<pre><code class="language-R">selfcorrect(
  agent,
  prompt,
  context = rbionfoExp,
  attempts = 3,
  output.file = NULL,
  responseWithError = NULL,
  history = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>agent</code></td>
<td>
<p>An object containing the agent's information (e.g., type and model).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prompt</code></td>
<td>
<p>The prompt text to send to the language model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>context</code></td>
<td>
<p>Optional context to provide alongside the prompt (default is rbionfoExp).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attempts</code></td>
<td>
<p>Numeric value denoting how many times the code should be sent back for fixing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.file</code></td>
<td>
<p>Optional output file created holding parsed code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>responseWithError</code></td>
<td>
<p>a list of response and errors returned from executeCode().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>history</code></td>
<td>
<p>a list of previous response and prompts. Default is NULL and should be stayed as is for most use cases.
First element is expected to be the response and the second element is the error list returned by executeCode().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to the <code>sendPrompt</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>init.response</code></td>
<td>
<p>A character vector representing the initial prompt response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init.blocks</code></td>
<td>
<p>A list of initial blocks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>final.blocks</code></td>
<td>
<p>A list of final blocks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code.works</code></td>
<td>
<p>A boolean value indicating whether the code works.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exec.result</code></td>
<td>
<p>A character string representing the execution results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tried.attempts</code></td>
<td>
<p>An integer representing the number of attempts.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>promptContext</code> for predefined contexts to use.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

response &lt;- selfcorrect(agent,prompt,context=rbionfoExp, max_tokens = 500)

## End(Not run)
</code></pre>


</div>