<div class="container">

<table style="width: 100%;"><tr>
<td>MUCH_merge</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>MUCH Merge</h2>

<h3>Description</h3>

<p><code>MUCH_merge</code> merges HEMs coming from separate subexperiments into one single dataset.
A Subexperiment is a measurement of a group of HEMs the size of the allowed PMCs by the machine.
For MUCH you need to measure each HEM against the rest of them. For instance, let's say that one has 2 PMCs and 3 HEMs to measure.
The input data coming from the experiments should look like this:
</p>

<table>
<tr>
<td style="text-align: left;">
<strong>1</strong>  </td>
<td style="text-align: left;"> <strong>2</strong>  </td>
<td style="text-align: left;"> <strong>1</strong>  </td>
<td style="text-align: left;">  <strong>3</strong> </td>
<td style="text-align: left;">  <strong>2</strong> </td>
<td style="text-align: left;">  <strong>3</strong>
</td>
</tr>
<tr>
<td style="text-align: left;">
30 </td>
<td style="text-align: left;"> 15 </td>
<td style="text-align: left;"> 20 </td>
<td style="text-align: left;"> 54 </td>
<td style="text-align: left;"> 15 </td>
<td style="text-align: left;"> 24 </td>
</tr>
<tr>
<td style="text-align: left;">
35 </td>
<td style="text-align: left;"> 16 </td>
<td style="text-align: left;"> 25 </td>
<td style="text-align: left;"> 32 </td>
<td style="text-align: left;"> 10 </td>
<td style="text-align: left;"> 29 </td>
</tr>
<tr>
<td style="text-align: left;">
32 </td>
<td style="text-align: left;"> 14 </td>
<td style="text-align: left;"> 30 </td>
<td style="text-align: left;"> 45 </td>
<td style="text-align: left;"> 9  </td>
<td style="text-align: left;"> 32 </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>where the numbers on top are the codes for the HEMs on the T2080. In this case we have three subexperiments:
subexp1 = (<strong>1</strong>, <strong>2</strong>), subexp2 = (<strong>1</strong>, <strong>3</strong>, <strong>6</strong>), subexp3 = (<strong>2</strong>, <strong>3</strong>);
The data will be processed into:
</p>

<table>
<tr>
<td style="text-align: left;">
<strong>H1</strong>  </td>
<td style="text-align: left;"> <strong>H2</strong>  </td>
<td style="text-align: left;"> <strong>H1</strong>  </td>
<td style="text-align: left;">  <strong>H3</strong> </td>
<td style="text-align: left;">  <strong>H2</strong> </td>
<td style="text-align: left;">  <strong>H3</strong>
</td>
</tr>
<tr>
<td style="text-align: left;">
30 </td>
<td style="text-align: left;"> 15 </td>
<td style="text-align: left;"> 20 </td>
<td style="text-align: left;"> 54 </td>
<td style="text-align: left;"> 15 </td>
<td style="text-align: left;"> 24</td>
</tr>
<tr>
<td style="text-align: left;">
35 </td>
<td style="text-align: left;"> 16 </td>
<td style="text-align: left;"> 25 </td>
<td style="text-align: left;"> 32 </td>
<td style="text-align: left;"> 10 </td>
<td style="text-align: left;"> 29</td>
</tr>
<tr>
<td style="text-align: left;">
32 </td>
<td style="text-align: left;"> 14 </td>
<td style="text-align: left;"> 30 </td>
<td style="text-align: left;"> 45 </td>
<td style="text-align: left;"> 9  </td>
<td style="text-align: left;"> 32</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>The processing transforms the code of the HEMs to the reference name on the T2080 manual.
Now with this data, <code>MUCH_merge</code> computes the correlation matrix of all HEMs and with it it constructs a multivariate Gaussian distribution (MVG).
Then <code>MUCH_merge</code> uses the order statistics of the MVG to arrange the experimental data.
Therefore the final input will look like this:
</p>

<table>
<tr>
<td style="text-align: left;">
<strong>H1</strong>  </td>
<td style="text-align: left;"> <strong>H2</strong>  </td>
<td style="text-align: left;"> <strong>H3</strong>  </td>
</tr>
<tr>
<td style="text-align: left;">
30 </td>
<td style="text-align: left;"> 15 </td>
<td style="text-align: left;"> 45 </td>
</tr>
<tr>
<td style="text-align: left;">
35 </td>
<td style="text-align: left;"> 16 </td>
<td style="text-align: left;"> 54 </td>
</tr>
<tr>
<td style="text-align: left;">
32 </td>
<td style="text-align: left;"> 14 </td>
<td style="text-align: left;"> 32 </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Usage</h3>

<pre><code class="language-R">MUCH_merge(splitted_data = NULL, n_runs = NULL, n_sims = NULL, dep_lvl = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>splitted_data</code></td>
<td>
<p>Sample data as list of dataframes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_runs</code></td>
<td>
<p>Number of rows for the output merged data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sims</code></td>
<td>
<p>Number of simulations for the multivariate Gaussian distribution to find the optimal merge</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep_lvl</code></td>
<td>
<p>Dependency level allowed. A number between 0 and 1 indicating the maximum correlation allowed between HEMs.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Take into consideration that the input data has readings on the same HEM for multiple subexperiments.
Therefore one must select the number of runs <code>n_runs</code> that they want the final output to have.
</p>


<h3>Value</h3>

<p>Returns a merged dataframe as stated in the description
</p>


<h3>Examples</h3>

<pre><code class="language-R">n_pmcs &lt;- 6
data_much &lt;- mergingTools::process_raw_experiments(data = data_much_raw_vignette,
                                                   n_pmcs = n_pmcs)
merged_data &lt;- mergingTools::MUCH_merge(splitted_data = data_much,
                                        n_runs = 1000,
                                        n_sims = 10,
                                        dep_lvl = 0.85)
</code></pre>


</div>