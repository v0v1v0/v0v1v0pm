<div class="container">

<table style="width: 100%;"><tr>
<td>predict.merlin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>predict.merlin - post-estimation tools for merlin</h2>

<h3>Description</h3>

<p>predictions following the fit of a merlin model
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'merlin'
predict(
  object,
  stat = "eta",
  type = "fixedonly",
  predmodel = 1,
  causes = NULL,
  at = NULL,
  contrast = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>merlin model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>specifies which prediction, which can be one of:
</p>

<ul>
<li> <p><code>eta</code> the expected value of the complex predictor
</p>
</li>
<li> <p><code>mu</code> the expected value of the response variable
</p>
</li>
<li> <p><code>hazard</code> the hazard function
</p>
</li>
<li> <p><code>chazard</code> the cumulative hazard function
</p>
</li>
<li> <p><code>logchazard</code> the log cumulative hazard function
</p>
</li>
<li> <p><code>survival</code> the survival function
</p>
</li>
<li> <p><code>cif</code> the cumulative incidence function
</p>
</li>
<li> <p><code>rmst</code> calculates the restricted mean survival time, which is the integral of the
survival function within the interval (0,t], where t is the time at which predictions are made.
If multiple survival models have been specified in your merlin model, then it will assume all
of them are cause-specific competing risks models, and include them in the calculation. If
this is not the case, you can override which models are included by using the <code>causes</code>
option. <code>rmst = t - totaltimelost</code>.
</p>
</li>
<li> <p><code>timelost</code>  calculates the time lost due to a particular event occurring, within
the interval (0,t].  In a single event survival model, this is the integral of the cif between
(0,t].  If multiple survival models are specified in the merlin model then by default all are
assumed to be cause-specific event time models contributing to the calculation. This can be
overridden using the <code>causes</code> option.
</p>
</li>
<li> <p><code>totaltimelost</code> total time lost due to all competing events, within (0,t]. If multiple
survival models are specified in the <code>merlin</code> model then by default all are assumed to
be cause-specific event time models contributing to the calculation. This can be overridden
using the <code>causes</code> option. <code>totaltimelost</code> is the sum of the <code>timelost</code> due to
all causes.
</p>
</li>
<li> <p><code>cifdifference</code> calculates the difference in <code>cif</code> predictions between values 
of a covariate specified using the <code>contrast</code> option.
</p>
</li>
<li> <p><code>hdifference</code> calculates the difference in <code>hazard</code> predictions between values 
of a covariate specified using the <code>contrast</code> option. 
</p>
</li>
<li> <p><code>rmstdifference</code> calculates the difference in <code>rmst</code> predictions between values 
of a covariate specified using the <code>contrast</code> option. 
</p>
</li>
<li> <p><code>mudifference</code> calculates the difference in <code>mu</code> predictions between values 
of a covariate specified using the <code>contrast</code> option. 
</p>
</li>
<li> <p><code>etadifference</code> calculates the difference in <code>eta</code> predictions between values 
of a covariate specified using the <code>contrast</code> option.  
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>the type of prediction, either:
</p>

<ul>
<li> <p><code>fixedonly</code> prediction calculated based only on the fixed effects; the default.
</p>
</li>
<li> <p><code>marginal</code> prediction calculated marginally with respect to the latent variables. the
<code>stat</code> is calculated by integrating the prediction function with respect to all the latent
variables over their entire support.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predmodel</code></td>
<td>
<p>specifies which model to obtain predictions from; default is <code>predmodel=1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>causes</code></td>
<td>
<p>is for use when calculating predictions from a competing risks <code>merlin</code> model.
By default, <code>cif</code>, <code>rmst</code>, <code>timelost</code> and <code>totaltimelost</code> assume that all
survival models included in the merlin model are cause-specific hazard models contributing to
the calculation. If this is not the case, then you can specify which models (indexed using
the order they appear in your merlin model by using the <code>causes</code> option, e.g.
<code>causes=c(1,2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p>specify covariate values for prediction. Fixed values of covariates should be specified
in a list e.g. at = c("trt" = 1, "age" = 50).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrast</code></td>
<td>
<p>specifies the values of a covariate to be used when comparing statistics, 
such as when using the <code>cifdifference</code> option to compare cumulative incidence functions, 
e.g. <code>contrast = c("trt" = 0, "trt" = 1)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other options</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Emma C. Martin, Alessandro Gasparini and Michael J. Crowther
</p>


<h3>References</h3>

<p>Crowther MJ. Extended multivariate generalised linear and non-linear mixed
effects models. <a href="https://arxiv.org/abs/1710.02223">https://arxiv.org/abs/1710.02223</a>
</p>
<p>Crowther MJ. merlin - a unified framework for data analysis and methods development
in Stata. <a href="https://arxiv.org/abs/1806.01615">https://arxiv.org/abs/1806.01615</a>
</p>
<p>Martin EC, Gasparini A, Crowther MJ. merlin - an R package for mixed effects
regression of linear, non-linear and user-defined models.
</p>


<h3>See Also</h3>

<p><code>merlin</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(merlin)
data(pbc.merlin, package = "merlin")

# Linear fixed-effects model
mod &lt;-merlin(model = list(logb ~ year),
             family = "gaussian",
             data = pbc.merlin)
predict(mod,stat="eta",type="fixedonly")

</code></pre>


</div>