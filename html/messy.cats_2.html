<div class="container">

<table style="width: 100%;"><tr>
<td>cat_join</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>cat_join</h2>

<h3>Description</h3>

<p>cat_join() joins two dataframes using the closest match
between two specified columns with misspellings or slight format differences.
The closest match can be found using a variety of different string distance measurement options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cat_join(
  messy_df,
  clean_df,
  by,
  threshold = NA,
  method = "jw",
  q = 1,
  p = 0,
  bt = 0,
  useBytes = FALSE,
  weight = c(d = 1, i = 1, t = 1),
  join = "left"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>messy_df</code></td>
<td>
<p>The dataframe to be joined using a messy categorical variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean_df</code></td>
<td>
<p>The dataframe to be joined with a clean categorical variable to be used
as a reference for the messy column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>A vector that specifies the columns to match and join by. If the column
names are the same input: "column_name". If the columns have different names
input: c("messy_column" = "clean_column")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>The maximum distance that will form a match. If this argument
is specified, any element in the messy vector that has no match closer than
the threshold distance will be replaced with NA. Default: NA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>The type of string distance calculation to use. Possible methods
are : osa, lv, dl, hamming, lcs, qgram, cosine, jaccard, jw, and soundex.
See package stringdist for more information. Default: 'jw'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>Size of the q-gram used in string distance calculation. Default: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>Only used with method "jw", the Jaro-Winkler penatly size. Default: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bt</code></td>
<td>
<p>Only used with method "jw" with p &gt; 0, Winkler's boost threshold. Default: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useBytes</code></td>
<td>
<p>Whether or not to perform byte-wise comparison. Default: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>Only used with methods "osa" or "dl", a vector representing the
penalty for deletion, insertion, substitution, and transposition,
in that order. Default: c(d = 1, i = 1, t = 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>join</code></td>
<td>
<p>Choose a join function from the dplyr package to use in joining the datasets. Default: 'left'</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When dealing with messy categorical string data, string distance
matching can be an easy and efficient cleaning tool. A variety of string
distance calculation algorithms have been developed for different types of data,
and these algorithms can be used to detect and remedy problems with categorical
string data.
</p>
<p>By providing a correctly spelled and specified vector of categories to be compared
against a vector of messy strings, a cleaned vector of categories can be generated
by finding the correctly specificed string most similar to a messy string. This
method works particularly well for messy user-inputted data that often suffers
from transposition or misspelling errors.
</p>
<p><code>cat_join()</code> joins the messy and clean datasets using the closest matching elements from
designated columns. The columns from the datasets are inputted into <code>cat_replace()</code> as the
messy and clean vectors, and the datasets are joined using a user inputted dplyr join verb.
</p>


<h3>Value</h3>

<p>Returns a dataframe consisting of the two inputted dataframes joined by their designated columns.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(interactive()){
 #EXAMPLE1
 messy_trees = data.frame()
 messy_trees[1:9,1] = c("red oak", "williw", "hemluck", "white elm",
  "fir tree", "birch tree", "pone", "dagwood", "mople")
 messy_trees[1:9,2] = c(34,12,43,32,65,23,12,45,35)
 clean_trees=data.frame()
 clean_trees[1:9,1] = c("oak", "willow", "hemlock", "elm", "fir",
 "birch", "pine", "dogwood", "maple")
 clean_trees[1:9,2] = "y"
 cat_join(messy_trees,clean_trees,by="V1",method="jaccard")
 }
</code></pre>


</div>