<div class="container">

<table style="width: 100%;"><tr>
<td>buildCor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Functions to build correlation and covariance matrices.
</h2>

<h3>Description</h3>

<p>Functions to build and update correlation and covariance matrices using a compact
specification of off-diagonal terms.
</p>


<h3>Usage</h3>

<pre><code class="language-R">buildCor(n, cors)

updateCor(cor, cors, cor.names)

buildCov(s, covs, vars = s^2, cors, cov.names)

updateCov(cov, covs, cors, cov.names)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>scalar: number of rows/colums required in correlation matrix. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cors, covs</code></td>
<td>
<p>3-column matrix or data frame specification of individual 
correlation or covariance terms. Can also be a vector of length 3. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s, vars</code></td>
<td>
<p>vector of standard deviations or variances respectively. One of 
<code>s</code> or <code>vars</code> must be present.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor.names, cov.names</code></td>
<td>
<p>vectors of names for the rows and columns of the returned 
matrix. <code>cov.names</code> defaults to <code>names(s)</code> if <code>s</code> is named.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor, cov</code></td>
<td>
<p>correlation or covariance matrix requiring amendment.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For <code>buildCor</code>, the size of the returned correlation matrix is set using <code>n</code>; 
an <code>n</code> by <code>n</code> correlation matrix is returned. For <code>buildCov</code> the size is 
set to <code>length(s)</code> by <code>length(s)</code>.
</p>
<p>Each row of <code>cors</code> specifies a correlation term <code class="reqn">r_{ij}</code> in the form
<code class="reqn">(i, j, r_{ij})</code>. That is, the first two columns give the row 
and column in the desired correlation matrix, and the third gives the relevant 
correlation coefficient. On constructing or updating the correlation matrix, 
<code class="reqn">r_{ij}</code> is set equal to <code class="reqn">r_{ji}</code>, so it is only necessary 
to specify one of <code class="reqn">r_{ij}</code> or <code class="reqn">r_{ji}</code>.
</p>
<p><code>covs</code> specifies covariance terms in the same way except that the third column of 
<code>covs</code> must be a covariance.
</p>
<p>If either <code>cors</code>  or <code>covs</code> is a vector of length 3, it is coerced 
to a matrix of three columns. 
</p>
<p>If <code>cor.names</code> or <code>cov.names</code> are present, the matrix returned has 
dimnames set to the names supplied.
</p>
<p>All four functions test for positive definite return values and generate a 
warning if not positive definite.
</p>


<h3>Value</h3>

<p>A square symmetric correlation or covariance matrix.
</p>


<h3>Author(s)</h3>

<p>S. L. R. Ellison <a href="mailto:s.ellison@lgc.co.uk">s.ellison@lgc.co.uk</a>
</p>


<h3>References</h3>

<p>None.
</p>


<h3>See Also</h3>

<p>None.
</p>


<h3>Examples</h3>

<pre><code class="language-R">    
    #Duplicate correlation for example for uncert()
    buildCor(4, cors=c(3, 4, 0.5))
               
    
    #Multiple correlations
    r&lt;-buildCor(3, cors=rbind( c(1,2,0.5), c(2,3,0.25) ) )
    r
    
    updateCor(r, cors=c(1,3,0.13)) #perhaps more realistic
    
    buildCov(1:3, cors=rbind( c(1,2,0.5), c(2,3,0.25),c(1,3,0.13) ) )
    
</code></pre>


</div>