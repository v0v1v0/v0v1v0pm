<div class="container">

<table style="width: 100%;"><tr>
<td>es_from_2x2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a 2x2 table into several effect size measures</h2>

<h3>Description</h3>

<p>Convert a 2x2 table into several effect size measures
</p>


<h3>Usage</h3>

<pre><code class="language-R">es_from_2x2(
  n_cases_exp,
  n_cases_nexp,
  n_controls_exp,
  n_controls_nexp,
  table_2x2_to_cor = "tetrachoric",
  reverse_2x2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_cases_exp</code></td>
<td>
<p>number of cases/events in the exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_cases_nexp</code></td>
<td>
<p>number of cases/events in the non exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_controls_exp</code></td>
<td>
<p>number of controls/no-event in the exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_controls_nexp</code></td>
<td>
<p>number of controls/no-event in the non exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_2x2_to_cor</code></td>
<td>
<p>formula used to obtain a correlation coefficient from the contingency table (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse_2x2</code></td>
<td>
<p>a logical value indicating whether the direction of generated effect sizes should be flipped.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function first computes (log) odds ratio (OR), (log) risk ratio (RR) and number needed to treat (NNT)
from the 2x2 table.
Cohen's d (D), Hedges' g (G) and correlation coefficients (R/Z) are then estimated from the OR.
</p>
<p><strong>To estimate an OR</strong>, the formulas used (Box 6.4.a in the Cochrane Handbook) are:
</p>
<p style="text-align: center;"><code class="reqn">logor = log(\frac{n\_cases\_exp / n\_cases\_nexp}{n\_controls\_exp / n\_controls\_nexp})</code>
</p>

<p style="text-align: center;"><code class="reqn">logor\_se = \sqrt{\frac{1}{n\_cases\_exp} + \frac{1}{n\_cases\_nexp} + \frac{1}{n\_controls\_exp} + \frac{1}{n\_controls\_nexp}}</code>
</p>

<p><strong>To estimate an RR</strong>, the formulas used (Box 6.4.a in the Cochrane Handbook) are:
</p>
<p style="text-align: center;"><code class="reqn">logrr = log(\frac{n\_cases\_exp / n\_exp}{n\_cases\_nexp / n\_nexp})</code>
</p>

<p style="text-align: center;"><code class="reqn">logrr\_se = \sqrt{\frac{1}{n\_cases\_exp} - \frac{1}{n\_exp} + \frac{1}{n\_cases\_nexp} - \frac{1}{n\_nexp}}</code>
</p>

<p><strong>To estimate a NNT</strong>, the formulas used are (Sedwick, 2013) :
</p>
<p style="text-align: center;"><code class="reqn">pt = \frac{n\_cases\_exp}{n\_cases\_exp + n\_controls\_exp}</code>
</p>

<p style="text-align: center;"><code class="reqn">pc = \frac{n\_cases\_nexp}{n\_cases\_nexp + n\_controls\_nexp}</code>
</p>

<p style="text-align: center;"><code class="reqn">AAR = pc - pt</code>
</p>

<p style="text-align: center;"><code class="reqn">nnt = \frac{1}{AAR}</code>
</p>

<p><strong>To convert the 2x2 table into a SMD</strong>,
the function estimates an OR value from the 2x2 table (formula above)
that is then converted to a SMD
(see formula in <code>es_from_or_se()</code>).
</p>
<p><strong>To convert the 2x2 table into a correlation coefficient</strong>,
various formulas can be used.
</p>
<p><strong>A.</strong> First, Cooper et al. (2019) - <code>table_2x2_to_cor = "cooper"</code> -
proposes to convert the
2x2 table into a OR (formula above), to convert this OR into a SMD
(see formula in <code>es_from_or_se()</code>), and to convert this
SMD into a correlation coefficient (see formula in <code>es_from_cohen_d()</code>,
with the option <code>"smd_to_cor = 'lipsey_cooper'"</code>).
</p>
<p><strong>B.</strong> Second, a correlation coefficient (more precisely - a phi coefficient)
can be obtained from the contingency table using the formula given in
Lipsey and Wilson (2001) - <code>table_2x2_to_cor = "lipsey"</code>.
The formulas used to estimate the r and z are:
</p>
<p style="text-align: center;"><code class="reqn">r = \frac{(n\_cases\_exp*n\_controls\_nexp - n\_controls\_exp*n\_cases\_nexp)}{\sqrt{(n\_exp) * (n\_nexp) * (n\_cases) * (n\_controls\_exp+n\_cases\_nexp)}}</code>
</p>

<p style="text-align: center;"><code class="reqn">z = atanh(r)</code>
</p>

<p style="text-align: center;"><code class="reqn">z\_se = logor\_se^2 * \frac{z^2}{\log(or)^2}</code>
</p>

<p style="text-align: center;"><code class="reqn">z\_ci\_lo = z - qnorm(.975)*z\_se</code>
</p>

<p style="text-align: center;"><code class="reqn">z\_ci\_up = z + qnorm(.975)*z\_se</code>
</p>

<p style="text-align: center;"><code class="reqn">r\_ci\_lo = tanh(z\_ci\_lo)</code>
</p>

<p style="text-align: center;"><code class="reqn">r\_ci\_up = tanh(z\_ci\_up)</code>
</p>

<p style="text-align: center;"><code class="reqn">effective\_n = \frac{1}{z\_se^2 + 3}</code>
</p>

<p style="text-align: center;"><code class="reqn">r\_se = \frac{(1 - r^2)^2}{effective\_n - 1}</code>
</p>

<p><strong>C.</strong> Third, a tetrachoric correlation can be estimated from the 2x2 table
</p>

<ul><li> <p><code>table_2x2_to_cor = "tetrachoric"</code>.
Given the heavy calculations required for this effect size measure,
we relied on the implementation of the formulas of the 'metafor' package. More
information can be retrieved here
(https://wviechtb.github.io/metafor/reference/escalc.html#-b-measures-for-two-dichotomous-variables).
</p>
</li></ul>
<h3>Value</h3>

<p>This function estimates and converts between several effect size measures.
</p>

<table>
<tr>
<td style="text-align: left;">
<code>natural effect size measure</code> </td>
<td style="text-align: left;"> OR + RR + NNT</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>converted effect size measure</code> </td>
<td style="text-align: left;"> D + G + R + Z </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>required input data</code> </td>
<td style="text-align: left;"> See 'Section 7. Contingency (2x2) table or proportions'</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> https://metaconvert.org/html/input.html</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>References</h3>

<p>Cooper, H., Hedges, L.V., &amp; Valentine, J.C. (Eds.). (2019). The handbook of research synthesis and meta-analysis. Russell Sage Foundation.
</p>
<p>Higgins JPT, Thomas J, Chandler J, Cumpston M, Li T, Page MJ, Welch VA (editors). Cochrane Handbook for Systematic Reviews of Interventions version 6.3 (updated February 2022). Available from www.training.cochrane.org/handbook.
</p>
<p>Lipsey, M. W., &amp; Wilson, D. B. (2001). Practical meta-analysis. Sage Publications, Inc.
</p>
<p>Sedgwick, P. (2013). What is number needed to treat (NNT)? Bmj, 347.
</p>


<h3>Examples</h3>

<pre><code class="language-R">es_from_2x2(n_cases_exp = 467, n_cases_nexp = 22087, n_controls_exp = 261, n_controls_nexp = 8761)
</code></pre>


</div>