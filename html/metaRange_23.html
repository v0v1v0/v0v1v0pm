<div class="container">

<table style="width: 100%;"><tr>
<td>save_species</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save function</h2>

<h3>Description</h3>

<p>Saves the specified traits of a metaRangeSpecies object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">save_species(x, traits = NULL, prefix = NULL, path, overwrite = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code style="white-space: pre;">⁠&lt;metaRangeSpecies&gt;⁠</code> metaRangeSpecies object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>traits</code></td>
<td>
<p><code style="white-space: pre;">⁠&lt;character&gt;⁠</code> NULL or a character vector specifying the trait to save.
If NULL, all traits are saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p><code style="white-space: pre;">⁠&lt;string&gt;⁠</code> prefix for the file names or NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p><code style="white-space: pre;">⁠&lt;string&gt;⁠</code>path to the directory where the files are saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p><code style="white-space: pre;">⁠&lt;boolean&gt;⁠</code> overwrite existing files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to terra::writeRaster.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The generated file names are of the form
<code>file.path(path, paste0(prefix, species_name, "_", trait_name, ".file_extension"))</code>.
If the trait is in a matrix or raster form, the file extension is <code>.tif</code>. Otherwise it is <code>.csv</code>.
The prefix is optional and mainly useful to add a time step to the file name, in case the trait
is saved multiple times during a simulation.
</p>


<h3>Value</h3>

<p><code style="white-space: pre;">⁠&lt;invisible character&gt;⁠</code> the paths to the saved files.
</p>


<h3>Examples</h3>

<pre><code class="language-R">sim_env &lt;- terra::sds(terra::rast(vals = 1, nrow = 2, ncol = 2))
names(sim_env) &lt;- "env_01"
test_sim &lt;- metaRangeSimulation$new(source_environment = sim_env)
test_sim$add_species("species_01")
test_sim$add_traits(
    "species_01",
    trait_01 = matrix(1, nrow = 2, ncol = 2),
    trait_02 = matrix(2, nrow = 2, ncol = 2)
)

file_prefix &lt;- "This_could_be_a_time_step"
directory_name &lt;- tempdir()

res_path &lt;- save_species(
    test_sim$species_01,
    traits = "trait_01",
    prefix = file_prefix,
    path = directory_name
)
# the following should be TRUE
# but might fail due to floating point errors (that's why we round the values)
identical(
    round(terra::as.matrix(terra::rast(res_path), wide = TRUE)),
    round(test_sim$species_01$traits[["trait_01"]])
)

# test overwrite
res_path2 &lt;- save_species(
    test_sim$species_01,
    traits = "trait_01",
    prefix = file_prefix,
    path = directory_name,
    overwrite = TRUE
)
stopifnot(identical(res_path, res_path2))

# Saving all traits
res_path3 &lt;- save_species(
    test_sim$species_01,
    prefix = basename(tempfile()),
    path = directory_name
)
res_path3
# cleanup
unlink(c(res_path, res_path3))
stopifnot(all(!file.exists(res_path, res_path3)))
</code></pre>


</div>