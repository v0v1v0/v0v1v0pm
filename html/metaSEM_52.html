<div class="container">

<table style="width: 100%;"><tr>
<td>create.vechsR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a model implied correlation matrix with implicit diagonal constraints
</h2>

<h3>Description</h3>

<p>It creates implicit diagonal constraints on the model
implied correlation matrix by treating the error variances as
functions of other parameters. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">create.vechsR(A0, S0, F0 = NULL, Ax = NULL, Sx = NULL, A.lbound=NULL, A.ubound=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>A0</code></td>
<td>
<p>A Amatrix, which will be converted into <code>MxMatrix-class</code> via <code>as.mxMatrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S0</code></td>
<td>
<p>A Smatrix, which will be converted into <code>MxMatrix-class</code> via <code>as.mxMatrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>F0</code></td>
<td>
<p>A Fmatrix, which will be converted into <code>MxMatrix-class</code> via <code>as.mxMatrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ax</code></td>
<td>
<p>A Amatrix of a list of Amatrix with definition variables as the moderators of the Amatrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sx</code></td>
<td>
<p>A Smatrix of a list of Smatrix with definition variables as the moderators of the Smatrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A.lbound</code></td>
<td>
<p>A matrix of lower bound of the Amatrix. If a scalar is
given, the lbound matrix will be filled with this scalar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A.ubound</code></td>
<td>
<p>A matrix of upper bound of the Amatrix. If a scalar is
given, the ubound matrix will be filled with this scalar.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of <code>MxMatrix-class</code>. The model implied correlation
matrix is computed in <code>impliedR</code> and <code>vechsR</code>.</p>


<h3>Note</h3>

<p>Since <code>A0</code> are the intercepts and <code>Ax</code> are the
regression coefficients. The parameters in <code>Ax</code> must be a subset of those in
<code>A0</code>.</p>


<h3>Author(s)</h3>

<p>Mike W.-L. Cheung &lt;mikewlcheung@nus.edu.sg&gt;
</p>


<h3>See Also</h3>

 <p><code>osmasem</code>,
<code>create.Tau2</code>, <code>create.V</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Proposed model
model1 &lt;- 'W2 ~ w2w*W1 + s2w*S1
           S2 ~ w2s*W1 + s2s*S1
           W1 ~~ w1WITHs1*S1
           W2 ~~ w2WITHs2*S2
           W1 ~~ 1*W1
           S1 ~~ 1*S1
           W2 ~~ Errw2*W2
           S2 ~~ Errs2*S2'

## Convert into RAM    
RAM1 &lt;- lavaan2RAM(model1, obs.variables=c("W1", "S1", "W2", "S2"))

## No moderator    
M0 &lt;- create.vechsR(A0=RAM1$A, S0=RAM1$S, F0=NULL, Ax=NULL, Sx=NULL)

## Lag (definition variable) as a moderator on the paths in the Amatrix    
Ax &lt;- matrix(c(0,0,0,0,
               0,0,0,0,
               "0*data.Lag","0*data.Lag",0,0,
               "0*data.Lag","0*data.Lag",0,0),
             nrow=4, ncol=4, byrow=TRUE)
                
M1 &lt;- create.vechsR(A0=RAM1$A, S0=RAM1$S, F0=NULL, Ax=Ax, Sx=NULL)    

## Lag (definition variable) as a moderator on the correlation in the Smatrix
Sx &lt;- matrix(c(0,"0*data.Lag",0,0,
               "0*data.Lag",0,0,0,
               0,0,0,"0*data.Lag",
               0,0,"0*data.Lag",0),
             nrow=4, ncol=4, byrow=TRUE)

M2 &lt;- create.vechsR(A0=RAM1$A, S0=RAM1$S, F0=NULL, Ax=NULL, Sx=Sx)

</code></pre>


</div>