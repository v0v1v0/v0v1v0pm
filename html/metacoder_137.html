<div class="container">

<table style="width: 100%;"><tr>
<td>obs_apply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply function to observations per taxon</h2>

<h3>Description</h3>

<p>Apply a function to data for the observations for each taxon. This is similar
to using [obs()] with [lapply()] or [sapply()].
</p>
<pre>
obj$obs_apply(data, func, simplify = FALSE, value = NULL,
  subset = NULL, recursive = TRUE, ...)
obs_apply(obj, data, func, simplify = FALSE, value = NULL,
  subset = NULL, recursive = TRUE, ...)</pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>The [taxmap()] object containing taxon information to
be queried.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Either the name of something in 'obj$data' that has taxon
information or a an external object with taxon information. For tables,
there must be a column named "taxon_id" and lists/vectors must be named by
taxon ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>func</code></td>
<td>
<p>('function') The function to apply.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p>('logical') If 'TRUE', convert lists to vectors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>What data to give to the function. This is usually the name of
column in a table in 'obj$data'. Any result of 'all_names(obj)' can be
used, but it usually only makes sense to use columns in the dataset
specified by the 'data' option. By default, the indexes of observation in
'data' are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>Taxon IDs, TRUE/FALSE vector, or taxon indexes to use.
Default: All taxa in 'obj' will be used. Any variable name that appears in
[all_names()] can be used as if it was a vector on its own.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>('logical' or 'numeric') If 'FALSE', only return the
observation assigned to the specified input taxa, not subtaxa. If 'TRUE',
return all the observations of every subtaxa, etc. Positive numbers
indicate the number of ranks below the each taxon to get observations for
'0' is equivalent to 'FALSE'. Negative numbers are equivalent to 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments are passed to the function.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># Find the average number of legs in each taxon
obs_apply(ex_taxmap, "info", mean, value = "n_legs", simplify = TRUE)

# One way to implement `n_obs` and find the number of observations per taxon
obs_apply(ex_taxmap, "info", length, simplify = TRUE)

</code></pre>


</div>