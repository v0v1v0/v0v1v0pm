<div class="container">

<table style="width: 100%;"><tr>
<td>sample_n_obs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample n observations from [taxmap()]</h2>

<h3>Description</h3>

<p>Randomly sample some number of observations from a [taxmap()] object. Weights
can be specified for observations or the taxa they are classified by. Any
variable name that appears in [all_names()] can be used as if it was a vector
on its own. See [dplyr::sample_n()] for the inspiration for this function.
Calling the function using the 'obj$sample_n_obs(...)' style edits "obj" in
place, unlike most R functions. However, calling the function using the
‘sample_n_obs(obj, ...)' imitates R’s traditional copy-on-modify semantics,
so "obj" would not be changed; instead a changed version would be returned,
like most R functions.
</p>
<pre>
obj$sample_n_obs(data, size, replace = FALSE,
  taxon_weight = NULL, obs_weight = NULL,
  use_supertaxa = TRUE, collapse_func = mean, ...)
sample_n_obs(obj, data, size, replace = FALSE,
  taxon_weight = NULL, obs_weight = NULL,
  use_supertaxa = TRUE, collapse_func = mean, ...)</pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>([taxmap()]) The object to sample from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Dataset names, indexes, or a logical vector that indicates which datasets in
'obj$data' to sample. If multiple datasets are sampled at once, then they must be the same
length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>('numeric' of length 1) The number of observations to
sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>('logical' of length 1) If 'TRUE', sample with
replacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxon_weight</code></td>
<td>
<p>('numeric') Non-negative sampling weights of each
taxon. If 'use_supertaxa' is 'TRUE', the weights for each taxon
in an observation's classification are supplied to 'collapse_func' to
get the observation weight. If 'obs_weight' is also specified, the two
weights are multiplied (after 'taxon_weight' for each observation is
calculated).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs_weight</code></td>
<td>
<p>('numeric') Sampling weights of each observation.  If
'taxon_weight' is also specified, the two weights are multiplied (after
'taxon_weight' for each observation is calculated).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_supertaxa</code></td>
<td>
<p>('logical' or 'numeric' of length 1) Affects how the
'taxon_weight' is used. If 'TRUE', the weights for each taxon in an
observation's classification are multiplied to get the observation weight.
Otherwise, just the taxonomic level the observation is assign to it
considered. If 'TRUE', use all supertaxa. Positive numbers indicate the
number of ranks above each taxon to use. '0' is equivalent to 'FALSE'.
Negative numbers are equivalent to 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse_func</code></td>
<td>
<p>('function' of length 1) If 'taxon_weight' option is
used and 'supertaxa' is 'TRUE', the weights for each
taxon in an observation's classification are supplied to
'collapse_func' to get the observation weight. This function should
take  numeric vector and return a single number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional options are passed to [filter_obs()].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>DEPRECIATED. use "data" instead.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of type [taxmap()]
</p>


<h3>See Also</h3>

<p>Other taxmap manipulation functions: 
<code>arrange_obs()</code>,
<code>arrange_taxa()</code>,
<code>filter_obs()</code>,
<code>filter_taxa()</code>,
<code>mutate_obs()</code>,
<code>sample_frac_obs()</code>,
<code>sample_frac_taxa()</code>,
<code>sample_n_taxa()</code>,
<code>select_obs()</code>,
<code>transmute_obs()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Sample 2 rows without replacement
sample_n_obs(ex_taxmap, "info", 2)
sample_n_obs(ex_taxmap, "foods", 2)

# Sample with replacement
sample_n_obs(ex_taxmap, "info", 10, replace = TRUE)

# Sample some rows for often then others
sample_n_obs(ex_taxmap, "info", 3, obs_weight = n_legs)

# Sample multiple datasets at once
sample_n_obs(ex_taxmap, c("info", "phylopic_ids", "foods"), 3)

</code></pre>


</div>