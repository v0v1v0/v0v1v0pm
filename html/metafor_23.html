<div class="container">

<table style="width: 100%;"><tr>
<td>bldiag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct Block Diagonal Matrix</h2>

<h3>Description</h3>

<p>Function to construct a block diagonal matrix from (a list of) matrices.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bldiag(..., order)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>individual matrices or a list of matrices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>optional argument to specify a variable based on which a square block diagonal matrix should be ordered.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Posted to R-help by Berton Gunter (2 Sep 2005) with some further adjustments by Wolfgang Viechtbauer
</p>


<h3>See Also</h3>

<p><code>rma.mv</code> for the model fitting function that can take such a block diagonal matrix as input (for the <code>V</code> argument).
</p>
<p><code>blsplit</code> for a function that can split a block diagonal matrix into a list of sub-matrices.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### copy data into 'dat'
dat &lt;- dat.berkey1998
dat

### construct list with the variance-covariance matrices of the observed outcomes for the studies
V &lt;- lapply(split(dat[c("v1i","v2i")], dat$trial), as.matrix)
V

### construct block diagonal matrix
V &lt;- bldiag(V)
V

### if we split based on 'author', the list elements in V are in a different order than tha data
V &lt;- lapply(split(dat[c("v1i","v2i")], dat$author), as.matrix)
V

### can use 'order' argument to reorder the block-diagonal matrix into the correct order
V &lt;- bldiag(V, order=dat$author)
V
</code></pre>


</div>