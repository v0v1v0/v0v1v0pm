<div class="container">

<table style="width: 100%;"><tr>
<td>addpoly.default</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Polygons to Forest Plots (Default Method)</h2>

<h3>Description</h3>

<p>Function to add one or more polygons to a forest plot.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## Default S3 method:
addpoly(x, vi, sei, ci.lb, ci.ub, pi.lb, pi.ub,
        rows=-1, level, annotate, digits, width, mlab,
        transf, atransf, targs, efac, col, border, lty, fonts, cex,
        constarea=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>vector with the values at which the polygons should be drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vi</code></td>
<td>
<p>vector with the corresponding variances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sei</code></td>
<td>
<p>vector with the corresponding standard errors (note: only one of the two, <code>vi</code> or <code>sei</code>, needs to be specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.lb</code></td>
<td>
<p>vector with the corresponding lower confidence interval bounds. Not needed if <code>vi</code> or <code>sei</code> is specified. See ‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.ub</code></td>
<td>
<p>vector with the corresponding upper confidence interval bounds. Not needed if <code>vi</code> or <code>sei</code> is specified. See ‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi.lb</code></td>
<td>
<p>optional vector with the corresponding lower prediction interval bounds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi.ub</code></td>
<td>
<p>optional vector with the corresponding upper prediction interval bounds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p>vector to specify the rows (or more generally, the horizontal positions) for plotting the polygons (defaults is <code>-1</code>). Can also be a single value to specify the row (horizontal position) of the first polygon (the remaining polygons are then plotted below this starting row).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>optional numeric value between 0 and 100 to specify the confidence interval level (see here for details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotate</code></td>
<td>
<p>optional logical to specify whether annotations should be added to the plot for the polygons that are drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>optional integer to specify the number of decimal places to which the annotations should be rounded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>optional integer to manually adjust the width of the columns for the annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mlab</code></td>
<td>
<p>optional character vector with the same length as <code>x</code> giving labels for the polygons that are drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transf</code></td>
<td>
<p>optional argument to specify a function to transform the <code>x</code> values and confidence interval bounds (e.g., <code>transf=exp</code>; see also transf).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>atransf</code></td>
<td>
<p>optional argument to specify a function to transform the annotations (e.g., <code>atransf=exp</code>; see also transf).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targs</code></td>
<td>
<p>optional arguments needed by the function specified via <code>transf</code> or <code>atransf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>efac</code></td>
<td>
<p>optional vertical expansion factor for the polygons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>optional character string to specify the color of the polygons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>optional character string to specify the border color of the polygons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>optional character string to specify the line type for the prediction interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fonts</code></td>
<td>
<p>optional character string to specify the font for the labels and annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>optional symbol expansion factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constarea</code></td>
<td>
<p>logical to specify whether the height of the polygons (when adding multiple) should be adjusted so that the area of the polygons is constant (the default is <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function can be used to add one or more polygons to an existing forest plot created with the <code>forest</code> function. For example, summary estimates based on a model involving moderators can be added to the plot this way (see ‘Examples’).
</p>
<p>To use the function, one should specify the values at which the polygons should be drawn (via the <code>x</code> argument) together with the corresponding variances (via the <code>vi</code> argument) or with the corresponding standard errors (via the <code>sei</code> argument). Alternatively, one can specify the values at which the polygons should be drawn together with the corresponding confidence interval bounds (via the <code>ci.lb</code> and <code>ci.ub</code> arguments). Optionally, one can also specify the bounds of the corresponding prediction interval bounds via the <code>pi.lb</code> and <code>pi.ub</code> arguments.
</p>
<p>If unspecified, arguments <code>level</code>, <code>annotate</code>, <code>digits</code>, <code>width</code>, <code>transf</code>, <code>atransf</code>, <code>targs</code>, <code>efac</code> (only if the forest plot was created with <code>forest.rma</code>), <code>fonts</code>, <code>cex</code>, <code>annosym</code>, and <code>textpos</code> are automatically set equal to the same values that were used when creating the forest plot.
</p>


<h3>Author(s)</h3>

<p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org">https://www.metafor-project.org</a>
</p>


<h3>References</h3>

<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1–48. <code style="white-space: pre;">⁠https://doi.org/10.18637/jss.v036.i03⁠</code>
</p>


<h3>See Also</h3>

<p><code>forest</code> for functions to draw forest plots to which polygons can be added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### calculate log risk ratios and corresponding sampling variances
dat &lt;- escalc(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg)

### fit mixed-effects model with absolute latitude as a moderator
res &lt;- rma(yi, vi, mods = ~ ablat, slab=paste(author, year, sep=", "), data=dat)

### forest plot of the observed risk ratios
forest(res, addfit=FALSE, atransf=exp, xlim=c(-9,5), ylim=c(-4.5,15), cex=0.9,
       order=ablat, ilab=ablat, ilab.xpos=-4.5,
       header="Author(s) and Year", top=2)

### predicted average log risk ratios for 10, 30, and 50 degrees absolute latitude
x &lt;- predict(res, newmods=c(10, 30, 50))

### add predicted average risk ratios to the forest plot
addpoly(x$pred, sei=x$se, rows=-2, mlab=c("- at 10 Degrees", "- at 30 Degrees", "- at 50 Degrees"))
abline(h=0)
text(-9, -1, "Model-Based Estimates:", pos=4, cex=0.9)
text(-4.5, res$k+2, "Latitude", cex=0.9, font=2)
</code></pre>


</div>