<div class="container">

<table style="width: 100%;"><tr>
<td>addpoly.rma</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Polygons to Forest Plots (Method for 'rma' Objects)</h2>

<h3>Description</h3>

<p>Function to add a polygon to a forest plot showing the summary estimate with corresponding confidence interval based on an object of class <code>"rma"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'rma'
addpoly(x, row=-2, level=x$level, annotate,
        addpred=FALSE, digits, width, mlab, transf, atransf, targs,
        efac, col, border, lty, fonts, cex, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>"rma"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row</code></td>
<td>
<p>numeric value to specify the row (or more generally, the horizontal position) for plotting the polygon (the default is <code>-2</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric value between 0 and 100 to specify the confidence interval level (see here for details). The default is to take the value from the object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotate</code></td>
<td>
<p>optional logical to specify whether annotations for the summary estimate should be added to the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addpred</code></td>
<td>
<p>logical to specify whether the bounds of the prediction interval should be added to the plot (the default is <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>optional integer to specify the number of decimal places to which the annotations should be rounded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>optional integer to manually adjust the width of the columns for the annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mlab</code></td>
<td>
<p>optional character string giving a label for the summary estimate polygon. If unspecified, the function sets a default label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transf</code></td>
<td>
<p>optional argument to specify a function to transform the summary estimate and confidence interval bound (e.g., <code>transf=exp</code>; see also transf).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>atransf</code></td>
<td>
<p>optional argument to specify a function to transform the annotations (e.g., <code>atransf=exp</code>; see also transf).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targs</code></td>
<td>
<p>optional arguments needed by the function specified via <code>transf</code> or <code>atransf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>efac</code></td>
<td>
<p>optional vertical expansion factor for the polygon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>optional character string to specify the color of the polygon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>optional character string to specify the border color of the polygon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>optional character string to specify the line type for the prediction interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fonts</code></td>
<td>
<p>optional character string to specify the font for the label and annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>optional symbol expansion factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function can be used to add a four-sided polygon, sometimes called a summary ‘diamond’, to an existing forest plot created with the <code>forest</code> function. The polygon shows the summary estimate (with its confidence interval bounds) based on an equal- or a random-effects model. Using this function, summary estimates based on different types of models can be shown in the same plot. Also, summary estimates based on a subgrouping of the studies can be added to the plot this way. See ‘Examples’.
</p>
<p>If unspecified, arguments <code>annotate</code>, <code>digits</code>, <code>width</code>, <code>transf</code>, <code>atransf</code>, <code>targs</code>, <code>efac</code> (only if the forest plot was created with <code>forest.rma</code>), <code>fonts</code>, <code>cex</code>, <code>annosym</code>, and <code>textpos</code> are automatically set equal to the same values that were used when creating the forest plot.
</p>


<h3>Author(s)</h3>

<p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org">https://www.metafor-project.org</a>
</p>


<h3>References</h3>

<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1–48. <code style="white-space: pre;">⁠https://doi.org/10.18637/jss.v036.i03⁠</code>
</p>


<h3>See Also</h3>

<p><code>forest</code> for functions to draw forest plots to which polygons can be added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### meta-analysis of the log risk ratios using the Mantel-Haenszel method
res &lt;- rma.mh(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg,
              slab=paste(author, year, sep=", "))

### forest plot of the observed risk ratios with summary estimate
forest(res, atransf=exp, xlim=c(-8,6), ylim=c(-2.5,15), header=TRUE, top=2)

### meta-analysis of the log risk ratios using a random-effects model
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg)

### add the summary estimate from the random-effects model to the forest plot
addpoly(res)

### forest plot with subgrouping of studies and summaries per subgroup
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg,
           slab=paste(author, year, sep=", "))
tmp &lt;- forest(res, xlim=c(-16, 4.6), at=log(c(0.05, 0.25, 1, 4)), atransf=exp,
              ilab=cbind(tpos, tneg, cpos, cneg), ilab.xpos=c(-9.5,-8,-6,-4.5),
              cex=0.75, ylim=c(-1, 27), order=alloc, rows=c(3:4,9:15,20:23),
              mlab="RE Model for All Studies", header="Author(s) and Year")
op &lt;- par(cex=0.75, font=2)
text(c(-9.5,-8,-6,-4.5), tmp$ylim[2]-1, c("TB+", "TB-", "TB+", "TB-"))
text(c(-8.75,-5.25),     tmp$ylim[2],   c("Vaccinated", "Control"))
par(font=4)
text(-16, c(24,16,5), c("Systematic Allocation", "Random Allocation",
                        "Alternate Allocation"), pos=4)
par(op)
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg,
           subset=(alloc=="systematic"))
addpoly(res, row=18.5, mlab="RE Model for Subgroup")
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg,
           subset=(alloc=="random"))
addpoly(res, row=7.5, mlab="RE Model for Subgroup")
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg,
           subset=(alloc=="alternate"))
addpoly(res, row=1.5, mlab="RE Model for Subgroup")
</code></pre>


</div>