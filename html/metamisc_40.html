<div class="container">

<table style="width: 100%;"><tr>
<td>oecalc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the total O:E ratio</h2>

<h3>Description</h3>

<p>This function calculates (transformed versions of) the ratio of total number of observed versus expected events with the 
corresponding sampling variance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">oecalc(
  OE,
  OE.se,
  OE.cilb,
  OE.ciub,
  OE.cilv,
  EO,
  EO.se,
  citl,
  citl.se,
  N,
  O,
  E,
  Po,
  Po.se,
  Pe,
  data,
  slab,
  add = 1/2,
  g = NULL,
  level = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>OE</code></td>
<td>
<p>vector with the estimated ratio of total observed versus total expected events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OE.se</code></td>
<td>
<p>Optional vector with the standard errors of the estimated O:E ratios.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OE.cilb</code></td>
<td>
<p>Optional vector to specify the lower limits of the confidence interval for <code>OE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OE.ciub</code></td>
<td>
<p>Optional vector to specify the upper limits of the confidence interval for <code>OE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OE.cilv</code></td>
<td>
<p>Optional vector to specify the levels of aformentioned confidence interval limits. 
(default: 0.95, which corresponds to the 95% confidence interval).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EO</code></td>
<td>
<p>Optional vector with the estimated ratio of total expected versus total observed events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EO.se</code></td>
<td>
<p>Optional vector with the standard errors of the estimated E:O ratios</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>citl</code></td>
<td>
<p>Optional vector with the estimated calibration-in-the-large statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>citl.se</code></td>
<td>
<p>Optional vector with the standard error of the calibration-in-the-large statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Optional vector to specify the sample/group sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>O</code></td>
<td>
<p>Optional vector to specify the total number of observed events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>E</code></td>
<td>
<p>Optional vector to specify the total number of expected events</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Po</code></td>
<td>
<p>Optional vector to specify the (cumulative) observed event probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Po.se</code></td>
<td>
<p>Optional vector with the standard errors of <code>Po</code>. For time-to-event data, 
these could also be the SE of the observed survival probabilities (e.g. as obtained from Kaplan-Meier analysis)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Pe</code></td>
<td>
<p>Optional vector to specify the (cumulative) expected event probabilites
(if specified, during time <code>t.val</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Optional data frame containing the variables given to the arguments above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slab</code></td>
<td>
<p>Optional vector with labels for the studies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>a non-negative number indicating the amount to add to zero counts. See ‘Details’</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>a quoted string that is the function to transform estimates of the total O:E ratio; see the details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>level for confidence interval, default <code>0.95</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class c("mm_perf","data.frame") with the following columns:
</p>

<dl>
<dt>"theta"</dt>
<dd>
<p>The (transformed) O:E ratio. </p>
</dd>
<dt>"theta.se"</dt>
<dd>
<p>Standard errors of the (transformed) O:E ratio.</p>
</dd>
<dt>"theta.cilb"</dt>
<dd>
<p>Lower confidence interval of the (transformed) O:E ratios. The level is specified in
<code>level</code>. Intervals are calculated on the same scale as <code>theta</code> by assuming a Normal distribution.</p>
</dd>
<dt>"theta.ciub"</dt>
<dd>
<p>Upper confidence interval of the (transformed) c-statistics. The level is specified in
<code>level</code>. Intervals are calculated on the same scale as <code>theta</code> by assuming a Normal distribution.</p>
</dd>
<dt>"theta.source"</dt>
<dd>
<p>Method used for calculating the (transformed) O:E ratio.</p>
</dd>
<dt>"theta.se.source"</dt>
<dd>
<p>Method used for calculating the standard error of the (transformed) O:E ratio.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Thomas Debray &lt;thomas.debray@gmail.com&gt;
</p>


<h3>References</h3>

<p>Debray TPA, Damen JAAG, Snell KIE, Ensor J, Hooft L, Reitsma JB, et al. A guide to systematic review and meta-analysis of prediction model performance. <em>BMJ</em>. 2017;356:i6460. 
</p>
<p>Debray TPA, Damen JAAG, Riley R, Snell KIE, Reitsma JB, Hooft L, et al. A framework for meta-analysis of prediction model studies with binary and time-to-event outcomes. <em>Stat Methods Med Res</em>. 2019 Sep;28(9):2768–86.
</p>
<p>Snell KI, Ensor J, Debray TP, Moons KG, Riley RD. Meta-analysis of prediction model performance across 
multiple studies: Which scale helps ensure between-study normality for the C -statistic and calibration measures? 
<em>Stat Methods Med Res</em>. 2017.
</p>


<h3>Examples</h3>

<pre><code class="language-R">######### Validation of prediction models with a binary outcome #########
data(EuroSCORE)

# Calculate the total O:E ratio and its standard error
est1 &lt;- oecalc(O = n.events, E = e.events, N = n, data = EuroSCORE, slab = Study)
est1

# Calculate the log of the total O:E ratio and its standard error
est2 &lt;- oecalc(O = n.events, E = e.events, N = n, data = EuroSCORE, slab = Study, g = "log(OE)")
est2

# Display the results of all studies in a forest plot
plot(est1)

</code></pre>


</div>