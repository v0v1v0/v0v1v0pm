<div class="container">

<table style="width: 100%;"><tr>
<td>ccalc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the concordance statistic</h2>

<h3>Description</h3>

<p>The function calculates (transformed versions of) the concordance (c-)
statistic with the corresponding sampling variance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ccalc(
  cstat,
  cstat.se,
  cstat.cilb,
  cstat.ciub,
  cstat.cilv,
  sd.LP,
  N,
  O,
  Po,
  data,
  slab,
  subset,
  g = NULL,
  level = 0.95,
  approx.se.method = 4,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cstat</code></td>
<td>
<p>vector to specify the estimated c-statistics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstat.se</code></td>
<td>
<p>Optional vector to specify the corresponding standard errors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstat.cilb</code></td>
<td>
<p>Optional vector to specify the lower limits of the confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstat.ciub</code></td>
<td>
<p>Optional vector to specify the upper limits of the confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstat.cilv</code></td>
<td>
<p>Optional vector to specify the levels of aformentioned confidence interval limits. 
(default: 0.95, which corresponds to the 95% confidence interval).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd.LP</code></td>
<td>
<p>Optional vector to specify the standard deviations of the linear predictor (prognostic index).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Optional vector to specify the sample/group sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>O</code></td>
<td>
<p>Optional vector to specify the total number of observed events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Po</code></td>
<td>
<p>Optional vector to specify the observed event probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Optional data frame containing the variables given to the arguments above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slab</code></td>
<td>
<p>Optional vector with labels for the studies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>Optional vector indicating the subset of studies that should be used. This can be a logical vector or a numeric vector indicating the indices of the studies to include.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>a quoted string that is the function to transform estimates of the c-statistic; see the details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Optional numeric to specify the level for the confidence interval, default <code>0.95</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>approx.se.method</code></td>
<td>
<p>integer specifying which method should be used for estimating the standard error of the
c-statistic (Newcombe, 2006). So far, only method <code>2</code> and method <code>4</code> (default) have been implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The c-statistic is a measure of discrimination, and indicates the ability of a prediction model to 
distinguish between patients developing and not developing the outcome. The c-statistic typically ranges 
from 0.5 (no discriminative ability) to 1 (perfect discriminative ability). 
</p>
<p>By default, the function <code>ccalc</code> will derive the c-statistic of each study, together with 
the corresponding standard error and 95% confidence interval. However, it is also possible to calculate transformed 
versions of the c-statistic. Appropriate standard errors are then derived using the Delta method. 
For instance, the logit transformation can be applied by specifying <code>g="log(cstat/(1-cstat))"</code>. 
</p>


<h4>Restoring the c-statistic</h4>

<p>For studies where the c-statistic is missing, it is estimated from the standard deviation of the linear predictor 
(<code>theta.source="std.dev(LP)"</code>). The corresponding method is described by White et al. (2015).
</p>



<h4>Restoring the standard error of the c-statistic</h4>

<p>When missing, the standard error of the c-statistic can be estimated from the confidence interval. Alternatively, 
the standard error can be approximated from a combination of the reported c-statistic, the total sample size and 
the total number of events (Newcombe, 2006). This can be achieved by adopting (a modification of) the method 
proposed by Hanley and McNeil, as specified in <code>approx.se.method</code>.
</p>



<h3>Value</h3>

<p>An object of class c("mm_perf","data.frame") with the following columns:
</p>

<dl>
<dt>"theta"</dt>
<dd>
<p>The (transformed) c-statistics. </p>
</dd>
<dt>"theta.se"</dt>
<dd>
<p>Standard errors of the (transformed) c-statistics.</p>
</dd>
<dt>"theta.cilb"</dt>
<dd>
<p>Lower confidence interval of the (transformed) c-statistics. The level is specified in
<code>level</code>. Intervals are calculated on the same scale as <code>theta</code> by assuming a Normal distribution.</p>
</dd>
<dt>"theta.ciub"</dt>
<dd>
<p>Upper confidence interval of the (transformed) c-statistics. The level is specified in
<code>level</code>. Intervals are calculated on the same scale as <code>theta</code> by assuming a Normal distribution.</p>
</dd>
<dt>"theta.source"</dt>
<dd>
<p>Method used for calculating the (transformed) c-statistic.</p>
</dd>
<dt>"theta.se.source"</dt>
<dd>
<p>Method used for calculating the standard error of the (transformed) c-statistic.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Thomas Debray &lt;thomas.debray@gmail.com&gt;
</p>


<h3>References</h3>

<p>Debray TPA, Damen JAAG, Snell KIE, Ensor J, Hooft L, Reitsma JB, et al. A guide to systematic review and meta-analysis of prediction model performance. BMJ. 2017;356:i6460. 
</p>
<p>Debray TPA, Damen JAAG, Riley R, Snell KIE, Reitsma JB, Hooft L, et al. A framework for meta-analysis of  prediction model studies with binary and time-to-event outcomes. Stat Methods Med Res. 2018; In press. 
</p>
<p>Hanley JA, McNeil BJ. The meaning and use of the area under a receiver operating characteristic (ROC) 
curve. <em>Radiology</em>. 1982; 143(1):29–36.
</p>
<p>Newcombe RG. Confidence intervals for an effect size measure based on the Mann-Whitney statistic. 
Part 2: asymptotic methods and evaluation. <em>Stat Med</em>. 2006; 25(4):559–73.
</p>
<p>Snell KI, Ensor J, Debray TP, Moons KG, Riley RD. Meta-analysis of prediction model performance across 
multiple studies: Which scale helps ensure between-study normality for the C -statistic and calibration measures? 
<em>Statistical Methods in Medical Research</em>. 2017. 
</p>
<p>White IR, Rapsomaniki E, the Emerging Risk Factors Collaboration. Covariate-adjusted measures of discrimination 
for survival data. <em>Biom J</em>. 2015;57(4):592–613.
</p>


<h3>Examples</h3>

<pre><code class="language-R">######### Validation of prediction models with a binary outcome #########
data(EuroSCORE)

# Calculate the c-statistic and its standard error
est1 &lt;- ccalc(cstat = c.index, cstat.se = se.c.index, cstat.cilb = c.index.95CIl, 
              cstat.ciub = c.index.95CIu, N = n, O = n.events, data = EuroSCORE, slab = Study)
est1
  
# Calculate the logit c-statistic and its standard error
est2 &lt;- ccalc(cstat = c.index, cstat.se = se.c.index, cstat.cilb = c.index.95CIl, 
              cstat.ciub = c.index.95CIu, N = n, O = n.events, data = EuroSCORE, slab = Study, 
              g = "log(cstat/(1-cstat))")
est2
      
# Display the results of all studies in a forest plot
plot(est1)
                                                            
</code></pre>


</div>