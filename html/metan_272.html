<div class="container">

<table style="width: 100%;"><tr>
<td>utils_num_str</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Utilities for handling with numbers and strings</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>

<ul>
<li> <p><code>all_lower_case()</code>: Translate all non-numeric strings of a data frame
to lower case.
</p>
</li>
<li> <p><code>all_upper_case()</code>: Translate all non-numeric strings of a data frame
to upper case.
</p>
</li>
<li> <p><code>all_title_case()</code>: Translate all non-numeric strings of a data frame
to title case.
</p>
</li>
<li> <p><code>first_upper_case</code>: Translate the first word of a string to upper
case.
</p>
</li>
<li> <p><code>extract_number()</code>: Extract the number(s) of a string.
</p>
</li>
<li> <p><code>extract_string()</code>: Extract all strings, ignoring case.
</p>
</li>
<li> <p><code>find_text_in_num()</code>: Find text characters in a numeric sequence and
return the row index.
</p>
</li>
<li> <p><code>has_text_in_num()</code>: Inspect columns looking for text in numeric
sequence and return a warning if text is found.
</p>
</li>
<li> <p><code>remove_space()</code>: Remove all blank spaces of a string.
</p>
</li>
<li> <p><code>remove_strings()</code>: Remove all strings of a variable.
</p>
</li>
<li> <p><code>replace_number()</code>: Replace numbers with a replacement.
</p>
</li>
<li> <p><code>replace_string()</code>: Replace all strings with a replacement, ignoring
case.
</p>
</li>
<li> <p><code>round_cols()</code>: Round a selected column or a whole data frame to
significant figures.
</p>
</li>
<li> <p><code>tidy_strings()</code>: Tidy up characters strings, non-numeric columns, or
any selected columns in a data frame by putting all word in upper case,
replacing any space, tabulation, punctuation characters by <code>'_'</code>, and
putting <code>'_'</code> between lower and upper case. Suppose that <code>str = c("Env1", "env 1", "env.1")</code> (which by definition should represent a unique
level in plant breeding trials, e.g., environment 1) is subjected to
<code>tidy_strings(str)</code>: the result will be then <code>c("ENV_1", "ENV_1", "ENV_1")</code>. See Examples section for more examples.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">all_upper_case(.data, ...)

all_lower_case(.data, ...)

all_title_case(.data, ...)

first_upper_case(.data, ...)

extract_number(.data, ..., pattern = NULL)

extract_string(.data, ..., pattern = NULL)

find_text_in_num(.data, ...)

has_text_in_num(.data)

remove_space(.data, ...)

remove_strings(.data, ...)

replace_number(
  .data,
  ...,
  pattern = NULL,
  replacement = "",
  ignore_case = FALSE
)

replace_string(
  .data,
  ...,
  pattern = NULL,
  replacement = "",
  ignore_case = FALSE
)

round_cols(.data, ..., digits = 2)

tidy_strings(.data, ..., sep = "_")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The argument depends on the function used.
</p>

<ul>
<li>
<p> For <code>round_cols()</code> <code>...</code> are the variables to round. If no
variable is informed, all the numeric variables from <code>data</code> are used.
</p>
</li>
<li>
<p> For <code>all_lower_case()</code>, <code>all_upper_case()</code>,
<code>all_title_case()</code>, <code>stract_number()</code>, <code>stract_string()</code>,
<code>remove_strings()</code>, and <code>tidy_strings()</code> <code>...</code> are the
variables to apply the function. If no variable is informed, the function
will be applied to all non-numeric variables in <code>.data</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>A string to be matched. Regular Expression Syntax is also
allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replacement</code></td>
<td>
<p>A string for replacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_case</code></td>
<td>
<p>If <code>FALSE</code> (default), the pattern matching is case
sensitive and if <code>TRUE</code>, case is ignored during matching.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of significant figures.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>A character string to separate the terms. Defaults to "_".</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(metan)

################ Rounding numbers ###############
# All numeric columns
round_cols(data_ge2, digits = 1)

# Round specific columns
round_cols(data_ge2, EP, digits = 1)

########### Extract or replace numbers ##########
# Extract numbers
extract_number(data_ge, GEN)
# Replace numbers
replace_number(data_ge, GEN)
replace_number(data_ge,
               GEN,
               pattern = 1,
               replacement = "_one")

########## Extract, replace or remove strings ##########
# Extract strings
extract_string(data_ge, GEN)

# Replace strings
replace_string(data_ge, GEN)
replace_string(data_ge,
               GEN,
               pattern = "G",
               replacement = "GENOTYPE_")

# Remove strings
remove_strings(data_ge)
remove_strings(data_ge, ENV)


############ Find text in numeric sequences ###########
mixed_text &lt;- data.frame(data_ge)
mixed_text[2, 4] &lt;- "2..503"
mixed_text[3, 4] &lt;- "3.2o75"
find_text_in_num(mixed_text, GY)

############# upper, lower and title cases ############
gen_text &lt;- c("This is the first string.", "this is the second one")
all_lower_case(gen_text)
all_upper_case(gen_text)
all_title_case(gen_text)
first_upper_case(gen_text)

# A whole data frame
all_lower_case(data_ge)


############### Tidy up messy text string ##############
messy_env &lt;- c("ENV 1", "Env   1", "Env1", "env1", "Env.1", "Env_1")
tidy_strings(messy_env)

messy_gen &lt;- c("GEN1", "gen 2", "Gen.3", "gen-4", "Gen_5", "GEN_6")
tidy_strings(messy_gen)

messy_int &lt;- c("EnvGen", "Env_Gen", "env gen", "Env Gen", "ENV.GEN", "ENV_GEN")
tidy_strings(messy_int)

library(tibble)
# Or a whole data frame
df &lt;- tibble(Env = messy_env,
             gen = messy_gen,
             Env_GEN = interaction(Env, gen),
             y = rnorm(6, 300, 10))
df
tidy_strings(df)

</code></pre>


</div>