<div class="container">

<table style="width: 100%;"><tr>
<td>utils_stats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Useful functions for computing descriptive statistics</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>

<ul>
<li> <p><strong>The following functions compute descriptive statistics by levels of
a factor or combination of factors quickly.</strong>
</p>

<ul>
<li> <p><code>cv_by()</code> For computing coefficient of variation.
</p>
</li>
<li> <p><code>max_by()</code> For computing maximum values.
</p>
</li>
<li> <p><code>mean_by()</code> For computing arithmetic means.
</p>
</li>
<li> <p><code>min_by()</code> For compuing minimum values.
</p>
</li>
<li> <p><code>n_by()</code> For getting the length.
</p>
</li>
<li> <p><code>sd_by()</code> For computing sample standard deviation.
</p>
</li>
<li> <p><code>var_by()</code> For computing sample variance.
</p>
</li>
<li> <p><code>sem_by()</code> For computing standard error of the mean.
</p>
</li>
</ul>
</li>
<li> <p><strong>Useful functions for descriptive statistics. All of them work
naturally with <code style="white-space: pre;">⁠\%&gt;\%⁠</code>, handle grouped data and multiple variables (all
numeric variables from <code>.data</code> by default).</strong>
</p>

<ul>
<li> <p><code>av_dev()</code> computes the average absolute deviation.
</p>
</li>
<li> <p><code>ci_mean_t()</code> computes the t-interval for the mean.
</p>
</li>
<li> <p><code>ci_mean_z()</code> computes the z-interval for the mean.
</p>
</li>
<li> <p><code>cv()</code> computes the coefficient of variation.
</p>
</li>
<li> <p><code>freq_table()</code> Computes a frequency table for either numeric and
categorical/discrete data. For numeric data, it is possible to define the
number of classes to be generated.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠hmean(), gmean()⁠</code> computes the harmonic and geometric means,
respectively. The harmonic mean is the reciprocal of the arithmetic mean of
the reciprocals. The geometric mean is the <em>n</em>th root of <em>n</em>
products.
</p>
</li>
<li> <p><code>kurt()</code> computes the kurtosis like used in SAS and SPSS.
</p>
</li>
<li> <p><code>range_data()</code> Computes the range of the values.
</p>
</li>
<li> <p><code>n_valid()</code> The valid (not <code>NA</code>) length of a data.
</p>
</li>
<li> <p><code>n_unique()</code> Number of unique values.
</p>
</li>
<li> <p><code>n_missing()</code> Number of missing values.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠row_col_mean(), row_col_sum()⁠</code> Adds a row with the mean/sum of
each variable and a column with the the mean/sum for each row of the data.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠sd_amo(), sd_pop()⁠</code> Computes sample and populational standard
deviation, respectively.
</p>
</li>
<li> <p><code>sem()</code> computes the standard error of the mean.
</p>
</li>
<li> <p><code>skew()</code> computes the skewness like used in SAS and SPSS.
</p>
</li>
<li> <p><code>ave_dev()</code> computes the average of the absolute deviations.
</p>
</li>
<li> <p><code>sum_dev()</code> computes the sum of the absolute deviations.
</p>
</li>
<li> <p><code>sum_sq()</code> computes the sum of the squared values.
</p>
</li>
<li> <p><code>sum_sq_dev()</code> computes the sum of the squared deviations.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠var_amo(), var_pop()⁠</code> computes sample and populational variance.
</p>
</li>
</ul>
</li>
</ul>
<p><code>desc_stat()</code> is wrapper function around the above ones and can be
used to compute quickly all these statistics at once.
</p>


<h3>Usage</h3>

<pre><code class="language-R">av_dev(.data, ..., na.rm = FALSE)

ci_mean_t(.data, ..., na.rm = FALSE, level = 0.95)

ci_mean_z(.data, ..., na.rm = FALSE, level = 0.95)

cv(.data, ..., na.rm = FALSE)

freq_table(.data, var, k = NULL, digits = 3)

freq_hist(
  table,
  xlab = NULL,
  ylab = NULL,
  fill = "gray",
  color = "black",
  ygrid = TRUE
)

hmean(.data, ..., na.rm = FALSE)

gmean(.data, ..., na.rm = FALSE)

kurt(.data, ..., na.rm = FALSE)

n_missing(.data, ..., na.rm = FALSE)

n_unique(.data, ..., na.rm = FALSE)

n_valid(.data, ..., na.rm = FALSE)

pseudo_sigma(.data, ..., na.rm = FALSE)

range_data(.data, ..., na.rm = FALSE)

row_col_mean(.data, na.rm = FALSE)

row_col_sum(.data, na.rm = FALSE)

sd_amo(.data, ..., na.rm = FALSE)

sd_pop(.data, ..., na.rm = FALSE)

sem(.data, ..., na.rm = FALSE)

skew(.data, ..., na.rm = FALSE)

sum_dev(.data, ..., na.rm = FALSE)

ave_dev(.data, ..., na.rm = FALSE)

sum_sq_dev(.data, ..., na.rm = FALSE)

sum_sq(.data, ..., na.rm = FALSE)

var_pop(.data, ..., na.rm = FALSE)

var_amo(.data, ..., na.rm = FALSE)

cv_by(.data, ..., .vars = NULL, na.rm = FALSE)

max_by(.data, ..., .vars = NULL, na.rm = FALSE)

min_by(.data, ..., .vars = NULL, na.rm = FALSE)

means_by(.data, ..., .vars = NULL, na.rm = FALSE)

mean_by(.data, ..., .vars = NULL, na.rm = FALSE)

n_by(.data, ..., .vars = NULL, na.rm = FALSE)

sd_by(.data, ..., .vars = NULL, na.rm = FALSE)

var_by(.data, ..., .vars = NULL, na.rm = FALSE)

sem_by(.data, ..., .vars = NULL, na.rm = FALSE)

sum_by(.data, ..., .vars = NULL, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame or a numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The argument depends on the function used.
</p>

<ul>
<li>
<p> For <code style="white-space: pre;">⁠*_by⁠</code> functions, <code>...</code> is one or more categorical variables
for grouping the data. Then the statistic required will be computed for all
numeric variables in the data. If no variables are informed in <code>...</code>,
the statistic will be computed ignoring all non-numeric variables in
<code>.data</code>.
</p>
</li>
<li>
<p> For the other statistics, <code>...</code> is a comma-separated of unquoted
variable names to compute the statistics. If no variables are informed in n
<code>...</code>, the statistic will be computed for all numeric variables in
<code>.data</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with a
warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>The confidence level for the confidence interval of the mean.
Defaults to 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>The variable to compute the frequency table. See <code>Details</code> for
more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The number of classes to be created. See <code>Details</code> for
more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of significant figures to show. Defaults to 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>A frequency table computed with <code>freq_table()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab, ylab</code></td>
<td>
<p>The <code>x</code> and <code>y</code> labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill, color</code></td>
<td>
<p>The color to fill the bars and color the border of the bar,
respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ygrid</code></td>
<td>
<p>Shows a grid line on the <code>y</code> axis? Defaults to <code>TRUE</code>.
freq_hist &lt;- function(table,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.vars</code></td>
<td>
<p>Used to select variables in the <code style="white-space: pre;">⁠*_by()⁠</code> functions. One or more
unquoted expressions separated by commas. Variable names can be used as if
they were positions in the data frame, so expressions like <code>x:y</code> can be
used to select a range of variables. Defaults to <code>NULL</code> (all numeric
variables are analyzed)..</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>freq_table()</code> computes a frequency table for either
numerical or categorical variables. If a variable is categorical or
discrete (integer values), the number of classes will be the number of
levels that the variable contains.
</p>
<p>If a variable (say, data) is continuous, the number of classes (k) is given by
the square root of the number of samples (n) if <code style="white-space: pre;">⁠n =&lt; 100⁠</code> or <code>5 * log10(n)</code>
if <code>n &gt; 100</code>.
</p>
<p>The amplitude (\(A\)) of the data is used to define the size of the class (\(c\)),
given by
</p>
<script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script>
\[c = \frac{A}{n - 1}\]
<p>The lower limit of the first class (LL1) is given by min(data) - c / 2. The
upper limit is given by LL1 + c. The limits of the other classes are given in
the same way. After the creation of the classes, the absolute and relative
frequencies within each class are computed.
</p>


<h3>Value</h3>


<ul>
<li>
<p> Functions <code style="white-space: pre;">⁠*_by()⁠</code> returns a <code>tbl_df</code> with the computed statistics by
each level of the factor(s) declared in <code>...</code>.
</p>
</li>
<li>
<p> All other functions return a named integer if the input is a data frame
or a numeric value if the input is a numeric vector.
</p>
</li>
<li> <p><code>freq_table()</code> Returns a list with the frequency table and the breaks used
for class definition. These breaks can be used to construct an histogram of
the variable.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a>
</p>


<h3>References</h3>

<p>Ferreira, Daniel Furtado. 2009. Estatistica Basica. 2 ed. Vicosa,
MG: UFLA.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(metan)
# means of all numeric variables by ENV
mean_by(data_ge2, GEN, ENV)

# Coefficient of variation for all numeric variables
# by GEN and ENV
cv_by(data_ge2, GEN, ENV)

# Skewness of a numeric vector
set.seed(1)
nvec &lt;- rnorm(200, 10, 1)
skew(nvec)

# Confidence interval 0.95 for the mean
# All numeric variables
# Grouped by levels of ENV
data_ge2 %&gt;%
  group_by(ENV) %&gt;%
  ci_mean_t()

# standard error of the mean
# Variable PH and EH
sem(data_ge2, PH, EH)

# Frequency table for variable NR
data_ge2 %&gt;%
  freq_table(NR)


</code></pre>


</div>