<div class="container">

<table style="width: 100%;"><tr>
<td>utils_rows_cols</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Utilities for handling with rows and columns</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>

<ul>
<li> <p><code>add_cols()</code>: Add one or more columns to an existing data frame. If
specified <code>.before</code> or <code>.after</code> columns does not exist, columns are
appended at the end of the data. Return a data frame with all the original
columns in <code>.data</code> plus the columns declared in <code>...</code>. In
<code>add_cols()</code> columns in <code>.data</code> are available for the expressions.
So, it is possible to add a column based on existing data.
</p>
</li>
<li> <p><code>add_rows()</code>: Add one or more rows to an existing data frame. If
specified <code>.before</code> or <code>.after</code> rows does not exist, rows are
appended at the end of the data. Return a data frame with all the original
rows in <code>.data</code> plus the rows declared in <code>...</code> argument.
</p>
</li>
<li> <p><code>add_row_id()</code>: Add a column with the row id as the first column in
<code>.data</code>.
</p>
</li>
<li> <p><code>add_prefix()</code> and <code>add_suffix()</code> add prefixes and suffixes,
respectively, in variable names selected in <code>...</code> argument.
</p>
</li>
<li> <p><code>all_pairs()</code>: Get all the possible pairs between the levels of a
factor.
</p>
</li>
<li> <p><code>colnames_to_lower()</code>: Translate all column names to lower case.
</p>
</li>
<li> <p><code>colnames_to_upper()</code>: Translate all column names to upper case.
</p>
</li>
<li> <p><code>colnames_to_title()</code>: Translate all column names to title case.
</p>
</li>
<li> <p><code>column_exists()</code>: Checks if a column exists in a data frame. Return a
logical value.
</p>
</li>
<li> <p><code>columns_to_first()</code>: Move columns to first positions in <code>.data</code>.
</p>
</li>
<li> <p><code>columns_to_last()</code>: Move columns to last positions in <code>.data</code>.
</p>
</li>
<li> <p><code>columns_to_rownames()</code>: Move a column of <code>.data</code> to its row
names.
</p>
</li>
<li> <p><code>rownames_to_column()</code>: Move the row names of <code>.data</code> to a new
column.
</p>
</li>
<li> <p><code>remove_rownames()</code>: Remove the row names of <code>.data</code>.
</p>
</li>
<li> <p><code>concatenate()</code>: Concatenate columns of a data frame. If <code>drop = TRUE</code> then the existing variables are dropped. If <code>pull = TRUE</code> then the
concatenated variable is pull out to a vector. This is specially useful when
using <code>concatenate</code> to add columns to a data frame with <code>add_cols()</code>.
</p>
</li>
<li> <p><code>get_levels()</code>: Get the levels of a factor variable.
</p>
</li>
<li> <p><code>get_levels_comb()</code>: Get the combination of the levels of a factor.
</p>
</li>
<li> <p><code>get_level_size()</code>: Get the size of each level of a factor variable.
</p>
</li>
<li> <p><code>remove_cols()</code>: Remove one or more columns from a data frame.
</p>
</li>
<li> <p><code>remove_rows()</code>: Remove one or more rows from a data frame.
</p>
</li>
<li> <p><code>reorder_cols()</code>: Reorder columns in a data frame.
</p>
</li>
<li> <p><code>select_cols()</code>: Select one or more columns from a data frame.
</p>
</li>
<li> <p><code>select_first_col()</code>: Select first variable, possibly with an offset.
</p>
</li>
<li> <p><code>select_last_col()</code>: Select last variable, possibly with an offset.
</p>
</li>
<li> <p><code>select_numeric_cols()</code>: Select all the numeric columns of a data
frame.
</p>
</li>
<li> <p><code>select_non_numeric_cols()</code>: Select all the non-numeric columns of a
data frame.
</p>
</li>
<li> <p><code>select_rows()</code>: Select one or more rows from a data frame.
</p>
</li>
<li> <p><code>tidy_colnames()</code>: Tidy up column names with
<code>tidy_strings()</code>.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">add_cols(.data, ..., .before = NULL, .after = NULL)

add_rows(.data, ..., .before = NULL, .after = NULL)

add_row_id(.data, var = "row_id")

all_pairs(.data, levels)

add_prefix(.data, ..., prefix, sep = "_")

add_suffix(.data, ..., suffix, sep = "_")

colnames_to_lower(.data)

colnames_to_upper(.data)

colnames_to_title(.data)

column_to_first(.data, ...)

column_to_last(.data, ...)

column_to_rownames(.data, var = "rowname")

rownames_to_column(.data, var = "rowname")

remove_rownames(.data, ...)

column_exists(.data, cols)

concatenate(
  .data,
  ...,
  prefix = NULL,
  suffix = NULL,
  new_var = new_var,
  sep = "_",
  drop = FALSE,
  pull = FALSE,
  .before = NULL,
  .after = NULL
)

get_levels(.data, ...)

get_levels_comb(.data, ...)

get_level_size(.data, ...)

reorder_cols(.data, ..., .before = NULL, .after = NULL)

remove_cols(.data, ...)

remove_rows(.data, ...)

select_first_col(.data, offset = NULL)

select_last_col(.data, offset = NULL)

select_numeric_cols(.data)

select_non_numeric_cols(.data)

select_cols(.data, ...)

select_rows(.data, ...)

tidy_colnames(.data, sep = "_")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The argument depends on the function used.
</p>

<ul>
<li>
<p> For <code>add_cols()</code> and <code>add_rows()</code> is name-value pairs. All values
must have one element for each row in <code>.data</code> when using
<code>add_cols()</code> or one element for each column in <code>.data</code> when using
<code>add_rows()</code>. Values of length 1 will be recycled when using
<code>add_cols()</code>.
</p>
</li>
<li>
<p> For <code>remove_cols()</code> and <code>select_cols()</code>,  <code>...</code> is the
column name or column index of the variable(s) to be dropped.
</p>
</li>
<li>
<p> For <code>add_prefix()</code> and <code>add_suffix()</code>,  <code>...</code> is the column
name to add the prefix or suffix, respectively. Select helpers are allowed.
</p>
</li>
<li>
<p> For <code>columns_to_first()</code> and <code>columns_to_last()</code>,  <code>...</code> is
the column name or column index of the variable(s) to be moved to first or
last in <code>.data</code>.
</p>
</li>
<li>
<p> For <code>remove_rows()</code> and <code>select_rows()</code>, <code>...</code> is an integer
row value.
</p>
</li>
<li>
<p> For <code>concatenate()</code>, <code>...</code> is the unquoted variable names to be
concatenated.
</p>
</li>
<li>
<p> For <code>get_levels()</code>, <code>get_level_comb()</code>, and
<code>get_level_size()</code> <code>...</code> is the unquoted variable names to get the
levels, levels combinations and levels size, respectively.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.before, .after</code></td>
<td>
<p>For <code>add_cols()</code>, <code>concatenate()</code>, and
<code>reorder_cols()</code>, one-based column index or column name where to add
the new columns, default: .after last column. For <code>add_rows()</code>,
one-based row index where to add the new rows, default: .after last row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>Name of column to use for rownames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>The levels of a factor or a numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix, suffix</code></td>
<td>
<p>The prefix and suffix used in <code>add_prefix()</code> and
<code>add_suffix()</code>, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>The separator to appear when using <code>concatenate()</code>,
<code>add_prefix()</code>, or <code>add_suffix()</code>. Defaults to to <code>"_"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>A quoted variable name to check if it exists in <code>.data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_var</code></td>
<td>
<p>The name of the new variable containing the concatenated
values. Defaults to <code>new_var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Logical argument. If <code>TRUE</code> keeps the new variable
<code>new_var</code> and drops the existing ones. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pull</code></td>
<td>
<p>Logical argument. If <code>TRUE</code>, returns the last column (on the
assumption that's the column you've created most recently), as a vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>Set it to <em>n</em> to select the <em>n</em>th variable from the
end (for <code>select_last_col()</code>) of from the begin (for
<code>select_first_col()</code>)</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Tiago Olivoto <a href="mailto:tiagoolivoto@gmail.com">tiagoolivoto@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(metan)

################# Adding columns #################
# Variables x and y .after last column
data_ge %&gt;%
  add_cols(x = 10,
           y = 30)
# Variables x and y .before the variable GEN
data_ge %&gt;%
  add_cols(x = 10,
           y = 30,
           .before = GEN)

# Creating a new variable based on the existing ones.
data_ge %&gt;%
  add_cols(GY2 = GY^2,
           GY2_HM = GY2 + HM,
           .after = GY)

############### Reordering columns ###############
reorder_cols(data_ge2, NKR, .before = ENV)
reorder_cols(data_ge2, where(is.factor), .after = last_col())

######## Selecting and removing columns ##########
select_cols(data_ge2, GEN, REP)
remove_cols(data_ge2, GEN, REP)

########## Selecting and removing rows ###########
select_rows(data_ge2, 2:3)
remove_rows(data_ge2, 2:3)

########### Concatenating columns ################
concatenate(data_ge, ENV, GEN, REP)
concatenate(data_ge, ENV, GEN, REP, drop = TRUE)

# Combine with add_cols() and replace_string()
data_ge2 %&gt;%
 add_cols(ENV_GEN = concatenate(., ENV, GEN, pull = TRUE),
          .after = GEN) %&gt;%
 replace_string(ENV_GEN,
                pattern = "H",
                replacement = "HYB_")

# Use prefixes and suffixes
concatenate(data_ge2, REP, prefix = "REP", new_var = REP)

# Use prefixes and suffixes (the ear traits EH, EP, EL, and ED)
add_prefix(data_ge2, PH, EH, EP, EL, prefix = "EAR")
add_suffix(data_ge2, PH, EH, EP, EL, suffix = "EAR", sep = ".")

# Use prefixes and suffixes (colnames)
concatenate(data_ge2, REP, prefix = "REP", new_var = REP)


########### formating column names ###############
# Creating data with messy column names
df &lt;- head(data_ge, 3)
colnames(df) &lt;- c("Env", "gen", "Rep", "GY", "hm")
df
colnames_to_lower(df)
colnames_to_upper(df)
colnames_to_title(df)


################### Adding rows ##################
data_ge %&gt;%
  add_rows(GY = 10.3,
           HM = 100.11,
           .after = 1)

########## checking if a column exists ###########
column_exists(data_g, "GEN")

####### get the levels, level combinations and size of levels ########
get_levels(data_g, GEN)
get_levels_comb(data_ge, ENV, GEN)
get_level_size(data_g, GEN)

############## all possible pairs ################
all_pairs(data_g, GEN)

########## select numeric variables only #########
select_numeric_cols(data_g)
select_non_numeric_cols(data_g)

</code></pre>


</div>