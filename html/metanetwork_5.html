<div class="container">

<table style="width: 100%;"><tr>
<td>attach_layout</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>compute and attach metanetwork layouts</h2>

<h3>Description</h3>

<p>Method to compute <code>'TL-tsne'</code> and <code>'group-TL-tsne'</code> layouts and save it as node attributes of the focal network.
</p>


<h3>Usage</h3>

<pre><code class="language-R">attach_layout(
  metanetwork,
  g = NULL,
  beta = 0.1,
  mode = "TL-tsne",
  TL_tsne.config = TL_tsne.default,
  res = NULL,
  group_layout.config = group_layout.default
)

## S3 method for class 'metanetwork'
attach_layout(
  metanetwork,
  g = NULL,
  beta = 0.1,
  mode = "TL-tsne",
  TL_tsne.config = TL_tsne.default,
  res = NULL,
  group_layout.config = group_layout.default
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>metanetwork</code></td>
<td>
<p>object of class 'metanetwork'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>character indicating the name of the network for which the 'TL-tsne' layout is computed,
default is 'metaweb'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>the diffusion parameter of the diffusion kernel, a positive scalar controlling the
squeezing of the network, default is 0.1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>'TL-tsne' or 'group-TL-tsne', default is 'TL-tsne'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TL_tsne.config</code></td>
<td>
<p>configuration list for mode 'TL-tsne', default is TL_tsne.default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>resolution for the 'group-TL-tsne' layout</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_layout.config</code></td>
<td>
<p>configuration list for mode 'group-TL-tsne', default is group_layout.default</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>'TL-tsne'</code> layout is a diffusion based layout algorithm specifically designed for trophic networks.
In metanetwork, first axis is the trophic level (see <code>compute_TL</code> method) whereas the second axis is computed using a diffusion graph kernel (Kondor &amp; Lafferty 2002)
and tsne dimension reduction algorithm to (see van der Maaten &amp; Hinton (2008) and 'tsne' R package).
Let <code class="reqn">A</code> be the adjacency matrix of the considered network and <code class="reqn">D</code> its degree diagonal matrix.
The Laplacian matrix of the symmetrised network is defined by:
</p>
<p style="text-align: center;"><code class="reqn">L = D - A - t(A)</code>
</p>

<p>The diffusion graph kernel is:
</p>
<p style="text-align: center;"><code class="reqn">K = exp(-beta*L)</code>
</p>

<p>It is a similarity matrix between nodes according to a diffusion process. <code>beta</code> is the diffusion constant,it must be provided by the user.
<code>beta</code> parameter influences the layout by grouping together similar paths (see <code>pyramid</code> vignette).
Each node of the focal network has an attribute <code>layout_beta_VALUE</code>.
If this function is run several times for a given beta value, repetitions of the layout algorithm will be stored as node attributes.
</p>
<p>The <code>'group-TL-tsne'</code> layout is a variation of <code style="white-space: pre;">⁠'TL-tsne⁠</code> layout. For a focal network, it mixes <code>'TL-tsne'</code> layout at the desired aggregated level
with the <code>layout_with_graphopt</code> function from <code>igraph</code>. It clusters nodes belonging to the same group.
<code>'group-TL-tsne'</code> layout is recommended for large networks since you only need to compute <code>'TL-tsne'</code> at the aggregated network
that is much smaller than the focal network. <code>group_layout.config</code> allows controlling the overall size of the groups.
</p>


<h3>Value</h3>

<p>an object of class 'metanetwork', with the computed layout added as node attribute of the considered network
</p>
<p><code>NULL</code>
</p>


<h3>References</h3>

<p>Kondor, R. I., &amp; Lafferty, J. (2002, July). Diffusion kernels on graphs and other discrete structures.
In Proceedings of the 19th international conference on machine learning (Vol. 2002, pp. 315-322).
Van der Maaten, L., &amp; Hinton, G. (2008). Visualizing data using t-SNE. Journal of machine learning research, 9(11).
</p>


<h3>See Also</h3>

<p><code>ggmetanet()</code>, <code>vismetaNetwork()</code>,group_layout.default
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(metanetwork)
library(igraph)
# on angola dataset (metaweb)
data("meta_angola")
meta_angola = attach_layout(meta_angola,beta = 0.05)
V(meta_angola$metaweb)$layout_beta0.05
</code></pre>


</div>