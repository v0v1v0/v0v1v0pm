<div class="container">

<table style="width: 100%;"><tr>
<td>viz_rainforest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rainforest plots for meta-analyses</h2>

<h3>Description</h3>

<p>Creates a rainforest plot, a novel variant of the forest plot.
</p>


<h3>Usage</h3>

<pre><code class="language-R">viz_rainforest(
  x,
  group = NULL,
  type = "standard",
  method = "FE",
  study_labels = NULL,
  summary_label = NULL,
  confidence_level = 0.95,
  detail_level = 1,
  col = "Blues",
  summary_col = col,
  text_size = 3,
  xlab = "Effect",
  x_limit = NULL,
  x_trans_function = NULL,
  x_breaks = NULL,
  annotate_CI = FALSE,
  study_table = NULL,
  summary_table = NULL,
  table_headers = NULL,
  table_layout = NULL,
  ...
)

rainforest(
  x,
  group = NULL,
  type = "standard",
  method = "FE",
  study_labels = NULL,
  summary_label = NULL,
  confidence_level = 0.95,
  detail_level = 1,
  col = "Blues",
  summary_col = col,
  text_size = 3,
  xlab = "Effect",
  x_limit = NULL,
  x_trans_function = NULL,
  x_breaks = NULL,
  annotate_CI = FALSE,
  study_table = NULL,
  summary_table = NULL,
  table_headers = NULL,
  table_layout = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame or matrix with the effect sizes of all studies (e.g.,
correlations, log odds ratios, or Cohen <em>d</em>) in the first column and their
respective standard errors in the second column. Alternatively, x can be the
output object of function <code>rma.uni</code> from package
<span class="pkg">metafor</span>; then effect sizes and standard errors are extracted from <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>factor indicating the subgroup of each study to plot a subgroup forest plot. Has to be in the same order than <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string indicating the type of forest plot to be plotted. Can be "standard" (default), "study_only",
"summary_only", "cumulative", or "sensitivity". See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character string indicating which method should be used to compute the study weights and summary effect(s).
Can be any method argument from <code>rma.uni</code>
(e.g., "FE" for the fixed effect model, or "DL" for the random effects model using the
DerSimonian-Laird method to estimate <code class="reqn">\tau^2</code>).
If input <code>x</code> is an output object of function <code>rma.uni</code> from package <span class="pkg">metafor</span>, then the method is extracted from <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study_labels</code></td>
<td>
<p>a character vector with names/identifiers to annotate each study in the forest plot.
Has to be in the same order than <code>x</code>. Ignored if <code>study_table</code> and/or <code>summary_table</code> is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_label</code></td>
<td>
<p>a character string specifying the name to annotate the summary effect. If a subgroup
analysis is plotted, <code>summary_label</code> should be a character vector with a name for each
subgroup summary effect, arranged in the order of the levels of <code>group</code>. Ignored if <code>study_table</code> and/or
<code>summary_table</code> is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confidence_level</code></td>
<td>
<p>numeric value. The confidence level for the plotted confidence intervals and likelihood raindrops.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detail_level</code></td>
<td>
<p>numeric value. Values larger than 1 lead to a higher
plotting detail (i.e., smoother likelihood raindrop polygons and more fluent
color shading), values smaller than 1 to less plotting detail compared to
the default plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>character string specifying the color palette for plotting study-level results from package <span class="pkg">RColorBrewer</span>.
Can be any of "Blues", "Greys", "Oranges", "Greens", "Reds", and "Purples".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_col</code></td>
<td>
<p>character string specifying the color for plotting the summary effect(s). Can be any of "Blues", "Greys", "Oranges", "Greens", "Reds", and "Purples".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_size</code></td>
<td>
<p>numeric value. Size of text in the forest plot. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character string specifying the label of the x axis. By default also used for the header of the aligned table if <code>annotate_CI</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_limit</code></td>
<td>
<p>numeric vector of length 2 with the limits (minimum, maximum) of the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_trans_function</code></td>
<td>
<p>function to transform the labels of the x axis. Common uses are to transform
log-odds-ratios or log-risk-ratios with <code>exp</code> to their original scale (odds ratios and risk ratios), or Fisher's z values
back to correlation coefficients using <code>tanh</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_breaks</code></td>
<td>
<p>numeric vector of values for the breaks on the x-axis. When used in tandem with <code>x_trans_function</code>
the supplied values should be not yet transformed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotate_CI</code></td>
<td>
<p>logical scalar. Should the effect size and confidence interval values be shown as text in an aligned table on the right-hand side of the forest plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study_table</code></td>
<td>
<p>a data.frame with additional study-level variables which should be shown in an aligned table.
Has to be in the same order than <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_table</code></td>
<td>
<p>a data.frame with additional summary-level information shown in an aligned table.
If <code>group</code> is supplied, <code>summary_table</code> must have a row for each subgroup
summary effect, arranged in the order of the levels of <code>group</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_headers</code></td>
<td>
<p>character vector. Headers for each column of aligned tables via <code>study_table</code>, <code>summary_table</code>, or <code>annotate_CI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_layout</code></td>
<td>
<p>numeric layout matrix passed to <code>layout_matrx</code> of <code>arrangeGrob</code>. Can be used to overwrite the default spacing
of the forest plot and aligned tables via <code>study_table</code>, <code>summary_table</code>, and <code>annotate_CI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>deprecated argument names from earlier versions can still be passed to <code>viz_rainforest</code> via <code>...</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Rainforest plots were proposed by Schild and Voracek (2015) as a variant and
enhancement of classic forest plots. Rainforest plots use (log-)likelihood drops
to depict study level results (for details, see Barrowman &amp;
Myers, 2003). <code>viz_rainforest</code> assumes normality of effect sizes to
construct these (log-)likelihood drops. The width of each such raindrop is identical to the
width of the confidence interval. For a given (log-)likelihood raindrop,
the height can be interpreted as the plausibility (i.e., (log-)likelihood value) for different true
values given the observed estimate. Moreover, the height of each raindrop is scaled with respect
to its relative meta-analytic weight considering all studies. Therefore, visually comparing heights of
different raindrops highlights the relative importance within the meta-analysis.
In addition, color shading is utilized to further visualize statistical uncertainty, as suggested by Jackson (2008).
Finally, study and summary level point estimates are depicted clearly by a specific symbol.
</p>
<p>Rainforest plots have the following advantages, as compared to classic forest plots:
</p>
 <ol>
<li>
<p> The width of the likelihood raindrops corresponds to the
confidence intervals, as also shown in the classic forest plot. In addition,
for each likelihood drop the height (and color shading) visualizes the
plausibility of true values given the observed estimate.
</p>
</li>
<li>
<p> Low likelihood drops and light color shading causes small studies (with
wide confidence intervals and less weight in the meta-analysis) to be visually less
dominant.
</p>
</li>
<li>
<p> In classic forest plots, it is often hard to depict the magnitude of
point estimates to a reasonable degree of accuracy, especially for studies
with large meta-analytic weights and correspondingly large plotting symbols
(commonly squares). Specific symbols within the raindrops improve the
visualization of study point estimates. </p>
</li>
</ol>
<p>Note that for subgroup analysis the height of each raindrop is scaled by the weight of each study within the subgroup divided by
the total weight sum of all studies irrespective of subgroup. Therefore, with subgroups present, the overall impression of raindrop
heights and color shading within a given subgroup compared to other subgroups conveys information about the relative precision of the meta-analytic
subgroup estimates.
</p>


<h3>Value</h3>

<p>A Rainforest plot is created using ggplot2.
</p>


<h3>Author(s)</h3>

<p>Michael Kossmeier* &lt;michael.kossmeier@univie.ac.at&gt;
</p>
<p>Ulrich S. Tran* &lt;ulrich.tran@univie.ac.at&gt;
</p>
<p>Martin Voracek* &lt;martin.voracek@univie.ac.at&gt;
</p>
<p>*Department of Basic Psychological Research and Research Methods, School of Psychology, University of Vienna
</p>


<h3>References</h3>

<p>Barrowman, N. J., &amp; Myers, R. A. (2003). Raindrop plots: A new way
to display collections of likelihoods and distributions. <em>American
Statistician</em>, <em>57</em>, 268-274.
</p>
<p>Jackson, C. H. (2008). Displaying uncertainty with shading.
<em>American Statistician</em>, <em>62</em>, 340-347.
</p>
<p>Schild, A. H., &amp; Voracek, M. (2015). Finding your way out of the
forest without a trail of bread crumbs: Development and evaluation of two
novel displays of forest plots. <em>Research Synthesis Methods</em>, <em>6</em>,
74-86.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(metaviz)
# Plotting a rainforest plot using the mozart data
viz_rainforest(x = mozart[, c("d", "se")],
study_labels = mozart[, "study_name"], xlab = "Cohen d")

# Visualizing a subgroup analysis of published and unpublished studies
viz_rainforest(x = mozart[, c("d", "se")], group = mozart[, "rr_lab"],
study_labels = mozart[, "study_name"], method = "REML",
summary_label = c("Summary (rr_lab = no)", "Summary (rr_lab = yes)"),
xlab = "Cohen d")

# Showing additional information in aligned tables. Log risk ratios are labeled
# in their original metric (risk ratios) on the x axis.
viz_rainforest(x = exrehab[, c("logrr", "logrr_se")],
annotate_CI = TRUE, xlab = "RR", x_trans_function = exp,
study_table = data.frame(
Name = exrehab[, "study_name"],
eventsT = paste(exrehab$ai, "/", exrehab$ai + exrehab$bi, sep = ""),
eventsC = paste(exrehab$ci, "/", exrehab$ci + exrehab$di, sep = "")),
summary_table = data.frame(
Name = "Summary",
eventsT = paste(sum(exrehab$ai), "/", sum(exrehab$ai + exrehab$bi), sep = ""),
eventsC = paste(sum(exrehab$ci), "/", sum(exrehab$ci + exrehab$di), sep = "")))
</code></pre>


</div>