<div class="container">

<table style="width: 100%;"><tr>
<td>viz_forest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forest plot variants for meta-analyses</h2>

<h3>Description</h3>

<p>Creates a rainforest, thick forest, or classic forest plot.
</p>


<h3>Usage</h3>

<pre><code class="language-R">viz_forest(
  x,
  group = NULL,
  type = "standard",
  variant = "classic",
  method = "FE",
  study_labels = NULL,
  summary_label = NULL,
  confidence_level = 0.95,
  col = "Blues",
  summary_col = col,
  text_size = 3,
  xlab = "Effect",
  x_limit = NULL,
  x_trans_function = NULL,
  x_breaks = NULL,
  annotate_CI = FALSE,
  study_table = NULL,
  summary_table = NULL,
  table_headers = NULL,
  table_layout = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame or matrix with the effect sizes of all studies (e.g.,
correlations, log odds ratios, or Cohen <em>d</em>) in the first column and their
respective standard errors in the second column. Alternatively, x can be the
output object of function <code>rma.uni</code> from package
<span class="pkg">metafor</span>; then effect sizes and standard errors are extracted from <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>factor indicating the subgroup of each study to plot a subgroup forest plot. Has to be in the same order than <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string indicating the type of forest plot to be plotted. Can be "standard" (default), "study_only",
"summary_only", "cumulative", or "sensitivity". See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variant</code></td>
<td>
<p>character string indicating the forest plot variant that should be plotted. Can be "classic" (default) for a traditional forest plot,
"rain" for rainforest plot, "thick" for a thick forest plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character string indicating which method should be used to compute the study weights and summary effect(s).
Can be any method argument from function <code>rma.uni</code> of package <span class="pkg">metafor</span>
(e.g., "FE" for the fixed effect model, or "DL" for the random effects model using the
DerSimonian-Laird method to estimate <code class="reqn">\tau^2</code>).
If input <code>x</code> is an output object of function <code>rma.uni</code> from package <span class="pkg">metafor</span>, then the method is extracted from <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study_labels</code></td>
<td>
<p>a character vector with names/identifiers to annotate each study in the forest plot.
Has to be in the same order than <code>x</code>. Ignored if <code>study_table</code> and/or <code>summary_table</code> is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_label</code></td>
<td>
<p>a character string specifying the name to annotate the summary effect. If a subgroup
analysis is plotted, <code>summary_label</code> should be a character vector with a name for each
subgroup summary effect, arranged in the order of the levels of <code>group</code>. Ignored if <code>study_table</code> and/or
<code>summary_table</code> is supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confidence_level</code></td>
<td>
<p>numeric value. The confidence level for the plotted confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>character string specifying the main color for plotting study-level results. For <code>variant = "thick"</code> and <code>variant = "classic"</code> can be a vector of length <code>nrow(x)</code>
with colors for each study-level result individually.
For <code>variant = "rain"</code> must be one of the following palettes from package
<span class="pkg">RColorBrewer</span>: "Blues", "Greys", "Oranges", "Greens", "Reds", or "Purples".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_col</code></td>
<td>
<p>character string specifying the main color for plotting the summary effect(s). For <code>variant = "thick"</code> and <code>variant = "classic"</code> can be a vector
with colors for each subgroup summary effect individually. For <code>variant = "rain"</code> with <code>type = "summary_only"</code> must be one of the following palettes from package
<span class="pkg">RColorBrewer</span>: "Blues", "Greys", "Oranges", "Greens", "Reds", or "Purples".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_size</code></td>
<td>
<p>numeric value. Size of text in the forest plot. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character string specifying the label of the x axis. By default also used for the header of the aligned table if <code>annotate_CI</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_limit</code></td>
<td>
<p>numeric vector of length 2 with the limits (minimum, maximum) of the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_trans_function</code></td>
<td>
<p>function to transform the labels of the x axis. Common uses are to transform
log-odds-ratios or log-risk-ratios with <code>exp</code> to their original scale (odds ratios and risk ratios), or Fisher's z values
back to correlation coefficients using <code>tanh</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_breaks</code></td>
<td>
<p>numeric vector of values for the breaks on the x-axis. When used in tandem with <code>x_trans_function</code>
the supplied values should be not yet transformed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotate_CI</code></td>
<td>
<p>logical scalar. Should the effect size and confidence interval values be shown as text in an aligned table on the right-hand side of the forest plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study_table</code></td>
<td>
<p>a data.frame with additional study-level variables which should be shown in an aligned table.
Has to be in the same order than <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_table</code></td>
<td>
<p>a data.frame with additional summary-level information shown in an aligned table.
If <code>group</code> is supplied, <code>summary_table</code> must have a row for each subgroup
summary effect, arranged in the order of the levels of <code>group</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_headers</code></td>
<td>
<p>character vector. Headers for each column of aligned tables via <code>study_table</code>, <code>summary_table</code>, and/or <code>annotate_CI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_layout</code></td>
<td>
<p>numeric layout matrix passed to <code>layout_matrx</code> of <code>arrangeGrob</code>. Can be used to overwrite the default spacing
of the forest plot and aligned tables via <code>study_table</code>, <code>summary_table</code>, and <code>annotate_CI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to <code>viz_rainforest</code> for <code>variant = "rain"</code>, or
<code>viz_thickforest</code> for <code>variant = "thick"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The forest plot is the most widely used display to visualize meta-analytic results.
The function <code>viz_forest</code> creates visually appealing and informative-rich forest plots using ggplot2. Many options
to flexibly customize the visual appearance and statistical information displayed are provided. In addition,
rainforest plots as well as the thick forest plots can be created, two variants and enhancements of the
classical forest plot recently proposed by Schild and Voracek (2015). For further details see the documentation of
the wrapper functions <code>viz_rainforest</code>, and <code>viz_thickforest</code>.
</p>
<p><b>Available forest plot types</b>
</p>
<p>Different aspects of meta-analytic data can be shown in forest plots. Five different types are available in <code>viz_forest</code> via the <code>type</code> parameter.
Argument <code>"standard"</code> (default) shows study results as well as summary results in the forest plot. <code>"study_only"</code> allows to only show study results without the meta-analytic summary estimate.
<code>"summary_only"</code> can be used to only show meta-analytic summary estimate(s), which is primarily useful to visualize several subgroup results (using <code>group</code>).
<code>"cumulative"</code> shows a cumulative meta-analysis, that is, meta-analytic summary effects are computed sequentially by adding each study one-by-one.
Studies are added in the same order than they were supplied in <code>x</code>. Finally, <code>"sensitivity"</code> shows for each study the meta-analytic summary
effect if that particular study is not considered in the computation of the summary effect (leave-one-out analysis).
</p>


<h3>Value</h3>

<p>A forest plot is created using ggplot2.
</p>


<h3>Author(s)</h3>

<p>Michael Kossmeier* &lt;michael.kossmeier@univie.ac.at&gt;
</p>
<p>Ulrich S. Tran* &lt;ulrich.tran@univie.ac.at&gt;
</p>
<p>Martin Voracek* &lt;martin.voracek@univie.ac.at&gt;
</p>
<p>*Department of Basic Psychological Research and Research Methods, School of Psychology, University of Vienna
</p>


<h3>References</h3>

<p>Schild, A. H., &amp; Voracek, M. (2015). Finding your way out of the
forest without a trail of bread crumbs: Development and evaluation of two
novel displays of forest plots. <em>Research Synthesis Methods</em>, <em>6</em>,
74-86.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(metaviz)
# Plotting the mozart data using a classic forest plot
viz_forest(x = mozart[, c("d", "se")],
study_labels = mozart[, "study_name"], xlab = "Cohen d")

# Subgroup analysis of published and unpublished studies shown in a rainforest plot
viz_forest(x = mozart[, c("d", "se")], study_labels = mozart[, "study_name"], method = "REML",
variant = "rain", summary_label = c("Summary (rr_lab = no)", "Summary (rr_lab = yes)"),
group = mozart[, "rr_lab"], xlab = "Cohen d")

# Thick forest plot with additional information in aligned tables. Log risk
# ratios are labeled in their original metric (risk ratios) on the x axis.
viz_forest(x = exrehab[, c("logrr", "logrr_se")], variant = "thick",
xlab = "RR", x_trans_function = exp, annotate_CI = TRUE,
study_table = data.frame(
Name = exrehab[, "study_name"],
eventsT = paste(exrehab$ai, "/", exrehab$ai + exrehab$bi, sep = ""),
eventsC = paste(exrehab$ci, "/", exrehab$ci + exrehab$di, sep = "")),
summary_table = data.frame(
Name = "Summary",
eventsT = paste(sum(exrehab$ai), "/", sum(exrehab$ai + exrehab$bi), sep = ""),
eventsC = paste(sum(exrehab$ci), "/", sum(exrehab$ci + exrehab$di), sep = "")),
table_layout = matrix(c(1, 1, 2, 2, 3), nrow = 1))
</code></pre>


</div>