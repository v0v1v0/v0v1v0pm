<div class="container">

<table style="width: 100%;"><tr>
<td>getPoint</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>NWP forecasts for a location</h2>

<h3>Description</h3>

<p>The <code>getPoint*</code> functions get outputs of the NWP models run by MeteoGalicia and NCEP (GFS, RAP, NAM) for a single location.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getPoint(point, vars = "swflx", day = Sys.Date(), run = "00",
         resolution = NULL, vertical = NA, service = mfService())

getPointDays(point, vars = "swflx", start = Sys.Date(), end,
             service = mfService(), ...)

getPointRuns(point, var = "swflx",
             start = Sys.Date() - 1, end = Sys.Date(),
             service = mfService(), ...) 


</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>point</code></td>
<td>
<p>Coordinates of the location. It can be a
<code>SpatialPoints</code> or a <code>numeric</code> of length 2 (lon, lat).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var, vars</code></td>
<td>
<p>Character. The name of the variables to retrieve. Use <code>grepVar</code> to know what variables are available in each service. <code>getPointRuns</code> only works with one variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>day</code></td>
<td>
<p>Date or character</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run</code></td>
<td>
<p>Character. The meteogalicia service executes the model at OOUTC and 12UTC. Therefore <code>run</code> can be '00' or '12'. With GFS and NAM <code>run</code> can be '00', '06', '12', and '18'.  The RAP service is run every hour.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Date or character. First day of the time period to retrieve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>Date or character. Last day of the time period to retrieve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>Numeric. Resolution in kilometers of the raster. Valid choices are 4, 12, and 36. It is only used with <code>service = 'meteogalicia'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertical</code></td>
<td>
<p>Numeric. Vertical coordinate for variables with several levels. Its default value is <code>NA</code>, meaning that only the first level will be retained.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>service</code></td>
<td>
<p>Character, which service to use, 'meteogalicia', 'gfs', 'nam', or 'rap'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for <code>getPoint</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions download data from the MeteoGalicia and NCEP (GFS, RAP, NAM) servers using the NetCDF Subset Service. The result is returned as a <code>zoo</code> time series object, with one or more csv files stored in the temporary folder (as defined by <code>tempdir()</code>).
</p>


<h3>Value</h3>

<p><code>getPoint</code> and <code>getPointDays</code> produce a <code>zoo</code> time series with a column for each variable included in <code>vars</code>.
</p>
<p>The time series returned by <code>getPoint</code> starts at 01UTC of <code>day</code> if <code>run = '00'</code> or 13UTC if <code>run = '12'</code>. It spans over 4 days (96 hours) if <code>run = '00'</code> or 84 hours if <code>run = '12'</code>.
</p>
<p>The time series returned by <code>getPointDays</code> starts at 01UTC of <code>start</code> and finishes at 00UTC of <code>end + 1</code>. Each day comprised in the time period is constructed with the forecast outputs corresponding to the 00UTC run of that day. Therefore, only the first 24 values obtained with <code>getPoint</code> are used for each day.
</p>
<p>The time series returned by <code>getPointRuns</code> starts at 01UTC of <code>start</code> and finishes at 00UTC of <code>end + 1</code>. It has 4 columns, named "D3_00", "D2_00", "D1_00" and "D0_00". The column "D3_00" corresponds to the forecast results produced 3 days before the time stamp of each row, and so on.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro with contributions from Marcelo Almeida</p>


<h3>References</h3>

<p><a href="https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html">https://mandeo.meteogalicia.es/thredds/catalogos/WRF_2D/catalog.html</a>
</p>
<p><a href="https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html">https://mandeo.meteogalicia.es/thredds/catalog/gfs_0p25/fmrc/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-nam218/catalog.html</a>
</p>
<p><a href="https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html">https://www.ncei.noaa.gov/thredds/catalog/model-rap130/catalog.html</a>
</p>


<h3>See Also</h3>

<p><code>getRaster</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  ## If some of the next examples do not work, try using a different
  ## date. Check availability for each service with the links included in
  ## the references section.
  testDay &lt;- Sys.Date() - 1

  ## temperature (Kelvin) forecast from meteogalicia
  tempK &lt;- getPoint(c(0, 40), vars = 'temp', day = testDay)
  ## Cell does not coincide exactly with request
  attr(tempK, 'lat')
  attr(tempK, 'lon')
  ## Units conversion
  tempC &lt;- tempK - 273

  library(lattice)
  ## Beware: the x-axis labels display time using your local timezone.
  Sys.timezone()

  ## Use Sys.setenv(TZ = 'UTC') to produce graphics with the timezone
  ## of the objects provided by meteoForecast.
  xyplot(tempC)

  ## Multiple variables
  vars &lt;- getPoint(c(0, 40), vars = c('swflx', 'temp'), day = testDay)
  xyplot(vars)

  ## Vertical coordinates
  tempK1000 &lt;- getPoint(c(0,40),
                        vars = "Temperature_surface",
                        day = testDay,
                        service ="gfs", vertical = 1000)

  ## Time sequence
  radDays &lt;- getPointDays(c(0, 40),
                          start = testDay - 3,
                          end = testDay)
  
  xyplot(radDays)

  ## Variability between runs
  radRuns &lt;- getPointRuns(c(0, 40),
                          start = testDay - 3,
                          end = testDay)
  xyplot(radRuns, superpose = TRUE)
  
  ## variability around the average
  radAv &lt;- rowMeans(radRuns)
  radVar &lt;- sweep(radRuns, 1, radAv)
  xyplot(radVar, superpose = TRUE)

## End(Not run)
</code></pre>


</div>