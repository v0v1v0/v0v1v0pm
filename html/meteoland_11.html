<div class="container">

<table style="width: 100%;"><tr>
<td>interpolate_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Interpolation process for spatial data</h2>

<h3>Description</h3>

<p>Interpolate spatial data to obtain downscaled meteorologic variables
</p>


<h3>Usage</h3>

<pre><code class="language-R">interpolate_data(
  spatial_data,
  interpolator,
  dates = NULL,
  variables = NULL,
  ignore_convex_hull_check = FALSE,
  verbose = getOption("meteoland_verbosity", TRUE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>spatial_data</code></td>
<td>
<p>An sf or stars raster object to interpolate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolator</code></td>
<td>
<p>A meteoland interpolator object, as created by
<code>create_meteo_interpolator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>vector with dates to interpolate (must be within the
interpolator date range). Default to NULL (all dates present in the
interpolator object)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>vector with variable names to be interpolated. NULL (default),
will interpolate all variables. Accepted names are "Temperature", "Precipitation",
"RelativeHumidity", "Radiation" and "Wind"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_convex_hull_check</code></td>
<td>
<p>Logical indicating whether errors in convex hull checks should be ignored.
Checking for points to be inside the convex hull will normally raise an error
if &gt;10% of points are outside. Setting <code>ignore_convex_hull_check = TRUE</code> means
that a warning is raised but interpolation is performed, which can be useful to users interpolating
on a few points close but outside of the convex hull.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical indicating if the function must show messages and info.
Default value checks <code>"meteoland_verbosity"</code> option and if not set, defaults
to TRUE. It can be turned off for the function with FALSE, or session wide with
<code>options(meteoland_verbosity = FALSE)</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function takes a spatial data object (sf or stars raster), an
interpolator object (<code>create_meteo_interpolator</code>) and a
vector of dates to perform the interpolation of the meteorologic variables
for the spatial locations present in the <code>spatial_data</code> object.
</p>


<h3>Value</h3>

<p>an object with the same class and structure as the provided spatial
data with the results of the interpolation joined. In the case of spatial
data being an sf, the results are added as a list-type column that can be
unnested with <code>unnest</code>. In the case of a stars raster
object, interpolation results are added as attributes (variables)
</p>


<h3>Spatial data</h3>

<p>The spatial data provided must be of two types. (I) A sf object containing
POINT for each location to interpolate or (II) a stars raster object for
which the interpolation should be done. Independently of the class of
<code>spatial_data</code> it has to have some mandatory variables, namely
<code>elevation</code>. It should also contain <code>aspect</code> and <code>slope</code> for
a better interpolation process, though this two variables are not mandatory.
</p>


<h3>Author(s)</h3>

<p>Victor Granda García, EMF-CREAF
</p>
<p>Miquel De Cáceres Ainsa, EMF-CREAF
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# example of data to interpolate and example interpolator
data("points_to_interpolate_example")
data("meteoland_interpolator_example")

# interpolate data
res &lt;- interpolate_data(points_to_interpolate_example, meteoland_interpolator_example)

# check result
# same class as input data
class(res)
# data
res
# results for the first location
res[["interpolated_data"]][1]
# unnest results
tidyr::unnest(res, cols = "interpolated_data")


</code></pre>


</div>