<div class="container">

<table style="width: 100%;"><tr>
<td>wmata_api</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Call the WMATA API</h2>

<h3>Description</h3>

<p>Use <code>httr::GET()</code> to make a request to the WMATA API and return the parsed
list from the JSON data. The function uses <code>httr::RETRY()</code>, so the call will
repeat up to three times if there is a failure (often from a rate limit).
</p>


<h3>Usage</h3>

<pre><code class="language-R">wmata_api(path, query = NULL, ..., level, api_key = wmata_key())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>The path to an API endpoint (e.g., "Bus.svc/json/jStopSchedule")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Additional queries also passed, possibly your key if need be.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>jsonlite::fromJSON()</code> for parsing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>If parsed JSON is a list, select only this element. Useful if
the list is length one containing a data frame or some other object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>Subscription key which provides access to this API. Defaults
<code>Sys.getenv("WMATA_KEY")</code> via <code>wmata_key()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function was modified from 'zamorarr/wmata' on GitHub:
<a href="https://github.com/zamorarr/wmata/blob/master/R/api.r">https://github.com/zamorarr/wmata/blob/master/R/api.r</a>
</p>


<h3>Value</h3>

<p>A single JSON string.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
wmata_api("Rail.svc/json/jLines", query = list(LineCode = "RD"))

## End(Not run)
</code></pre>


</div>