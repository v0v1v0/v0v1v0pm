<div class="container">

<table style="width: 100%;"><tr>
<td>mewMean</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update the moving expanding window average</h2>

<h3>Description</h3>

<p>When desired, the <code>x_mean</code> slot in an S4 object
of class <code>mewTyp</code> may be updated to contain the correct moving
expanding window (MEW) average (it is not updated by the function
<code>mewAccum</code> to save computation).  If the slot <code>know_mean</code>
is unity, the slot <code>x_mean</code> is up-to-date; otherwise; it is
not.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mewMean(av)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>av</code></td>
<td>
<p>(class mewTyp) the current state of the MEW average</p>
</td>
</tr></table>
<h3>Value</h3>

<p>the updated instance of the argument <code>av</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">n_iter &lt;- 100

i_to_print &lt;- 10

results &lt;- matrix(data = double(2*n_iter/i_to_print),
                  nrow = n_iter/i_to_print,
                  ncol = 2)

av &lt;- mewInit(n_bin = 4, n_xx = 2, ff = 0.5)

for (i in 1:n_iter) {

  value &lt;- runif(n=2)
  value[1] &lt;- ((cos(value[1]*2*pi))^2)*(1 - exp(-0.01*i))
  value[2] &lt;- (-((sin(value[2]*2*pi))^2))*(1 - exp(-0.01*i))

  av &lt;- mewAccum(xx = value, av = av)

  if (i%%i_to_print == 0) {

    av &lt;- mewMean(av)
    show(av)
    results[i/i_to_print, ] &lt;- mewGetMean(av)
  }
}

## plot the results

plot(c(1, (n_iter/i_to_print)),
     c(min(results), max(results)),
     type = "n")
points(1:(n_iter/i_to_print), results[, 1])
points(1:(n_iter/i_to_print), results[, 2])

## Now, a larger example, and we pause part way through to assess
## convergence

n_iter &lt;- 1000
av &lt;- mewInit(n_bin = 4, n_xx = 5000, ff = 0.5)
for (i in 1:n_iter) {

  new_samp &lt;- runif(n = 5000)
  av &lt;- mewAccum(xx = new_samp, av = av)
}

av &lt;- mewMean(av = av)

## of course each element of the mean sould converge to 0.5.  After
## 1000 iterations, the first six elements of the mean vector are
show(av)

## run another 1000 iterations
for (i in 1:1000) {

  new_samp &lt;- runif(n = 5000)
  av &lt;- mewAccum(xx = new_samp, av = av)
}

av &lt;- mewMean(av)

## check the mean of the first six elements again
show(av)

</code></pre>


</div>