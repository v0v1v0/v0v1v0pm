<div class="container">

<table style="width: 100%;"><tr>
<td>mfdb_helpers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>MareFrame tools &amp; helpers</h2>

<h3>Description</h3>

<p>Misc. functions to aid working with an MFDB database.
</p>


<h3>Usage</h3>

<pre><code class="language-R"># Find species from abbreviated names
mfdb_find_species(partial_name, single_matches_only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>partial_name</code></td>
<td>

<p>Vector of partial species names, e.g. "Gad Mor", "gad. Mor.",
"Gadus Mor", will all match "Cod (Gadus Morhua)".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_matches_only</code></td>
<td>

<p>Logical, default FALSE. If true, return NA for
partial_names with multiple or zero matches.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix of all potential id, name &amp; descriptions for each item in
<code>partial_name</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mfdb_find_species(c("gad mor", "tube worms"))
#             gad mor              tube worms              
# id          8791030402           1e+10                   
# name        "COD"                "TBX"                   
# description "Cod (Gadus Morhua)" "Tube Worms (Tubeworms)"

# Can also generate a map to help insert a data.frame of foreign data
stomachs &lt;- read.csv(text = '
stomach_name,species,digestion_stage,length,weight,count
A,Palaemon Elegans,1,1,10,5
A,Palaemon Elegans,1,4,40,1
B,Palaemon Elegans,1,1,10,5
B,Palaemon Elegans,4,1,10,5
B,Palaemon Elegans,5,1,10,NA
B,Palaemon Elegans,5,1,10,NA
C,Crangon Crangon,2,3.5,9.5,3
D,Palaemon Elegans,1,1.4,10,1
D,Crangon Crangon,5,4,40,1
E,Worms,1,1.4,10,1
', stringsAsFactors = TRUE)

# Work out a map from all Prey_Species_Name values to MFDB species codes
species_map &lt;- mfdb_find_species(levels(stomachs$species), single_matches_only = TRUE)['name',]

# Put the new levels back onto the species column
levels(stomachs$species) &lt;- unlist(species_map)

stomachs
</code></pre>


</div>