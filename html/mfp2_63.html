<div class="container">

<table style="width: 100%;"><tr>
<td>transform_data_step</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to extract and transform adjustment variables</h2>

<h3>Description</h3>

<p>Function to extract and transform adjustment variables
</p>


<h3>Usage</h3>

<pre><code class="language-R">transform_data_step(x, xi, powers_current, df, powers, acdx)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a matrix of predictors that includes the variable of interest <code>xi</code>.
It is assumed that continuous variables have already been shifted and scaled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xi</code></td>
<td>
<p>name of the continuous predictor for which the FP function will be
estimated. There are no binary or two-level variables allowed. All variables
except <code>xi</code> are referred to as "adjustment variables".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>powers_current</code></td>
<td>
<p>a named list of FP powers of all variables of interest,
including <code>xi</code>. Note that these powers are updated during backfitting or MFP
cycles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>a numeric vector of degrees of freedom for <code>xi</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>powers</code></td>
<td>
<p>a set of allowed FP powers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acdx</code></td>
<td>
<p>a logical vector indicating the use of acd transformation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>After extracting the adjustment variables this function, using their
corresponding FP powers stored in <code>powers_current</code>, transforms them.
This is necessary When evaluating x of interest, as we must account for other
variables, which can be transformed or untransformed, depending on the
individual powers. It's worth noting that some powers can be NA, indicating
that the variable has been left out of the adjustment variables. It also
returns the FP data, which is dependent on the degrees of freedom. For example,
<code>df = 2</code> is equivalent to FP degree one, resulting in the generation of 8
variables. If <code>acdx</code> for the current variables of interest is set to <code>TRUE</code>,
however, 64 variables are generated.
</p>
<p>When <code>df = 1</code>, this function returns data unchanged, i.e. a "linear"
transformation with power equal to 1. In case <code>acdx[xi] = TRUE</code>, the
acd transformation is applied.
</p>


<h3>Value</h3>

<p>A list containing the following elements:
</p>

<ul>
<li> <p><code>powers_fp</code>: fp powers used for <code>data_fp</code>.
</p>
</li>
<li> <p><code>data_fp</code>: a list with all possible fp transformations for <code>xi</code>, see the
<code>data</code> component of the output of <code>generate_transformations_fp()</code> and
<code>generate_transformations_acd()</code>.
</p>
</li>
<li> <p><code>powers_adj</code>: fp powers for adjustment variables in <code>data_adj</code>.
</p>
</li>
<li> <p><code>data_adj</code>: adjustment data, i.e. transformed input data for adjustment
variables.
</p>
</li>
</ul>
</div>