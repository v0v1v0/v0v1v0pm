<div class="container">

<table style="width: 100%;"><tr>
<td>transform_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to transform each column of matrix using final FP powers or acd</h2>

<h3>Description</h3>

<p>Function to transform each column of matrix using final FP powers or acd
</p>


<h3>Usage</h3>

<pre><code class="language-R">transform_matrix(
  x,
  power_list,
  center,
  acdx,
  keep_x_order = FALSE,
  acd_parameter_list = NULL,
  check_binary = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a matrix with all continuous variables shifted and scaled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power_list</code></td>
<td>
<p>a named list of FP powers to be applied to the columns of
<code>x</code>. Only variables named in this list are transformed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>a named logical vector specifying whether the columns in <code>x</code>
should be centered. Centering will occur after transformations and will be
done separately for each individual column of the transformed data matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acdx</code></td>
<td>
<p>a named logical vector specifying the use of acd transformation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_x_order</code></td>
<td>
<p>a logical indicating whether the order of columns
should be kept as in the input matrix <code>x</code>, of if the columns should be
ordered according to <code>power_list</code>. The default is <code>FALSE</code>, since
the ordering by <code>power_list</code> reflects the <code>xorder</code> argument in <code>mfp2()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acd_parameter_list</code></td>
<td>
<p>a named list. Only required when transformation
are to be applied to new data. Entries must correspond to the entries where
<code>acdx</code> is set to <code>TRUE</code>. Each components is to be passed to
<code>transform_vector_acd()</code>. The default value <code>NULL</code> indicates that the
parameters for the acd transformations are to be estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_binary</code></td>
<td>
<p>passed to <code>transform_vector_fp()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For details on the transformations see <code>transform_vector_fp()</code> and
<code>transform_vector_acd()</code>.
</p>


<h3>Value</h3>

<p>If all elements of <code>power_list</code> are <code>NA</code> then this function returns <code>NULL</code>.
Otherwise a list with three entries: the first <code>x_transformed</code> is a matrix
with transformed variables as named in <code>power_list</code>.
The number of columns may possibly be different to the
input matrix due to higher order FP transformations.
The second entry <code>centers</code> stores the values used to center the variables if
for any variable <code>center = TRUE</code> (note that usually all variables are
centered, or none of them).
The third entry <code>acd_parameter</code> stores a named list of estimated
<code>acd_parameters</code>. May be empty if no ACD transformation is applied.
</p>


<h3>Column names</h3>

<p>Generally the original variable names are suffixed with ".i", where
i enumerates the powers for a given variable in <code>power_list</code>. If a term
uses an acd transformation, then the variable is prefixed with <code>A_</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x = matrix(1:100, nrow = 10)
colnames(x) = paste0("x", 1:ncol(x))
powx = setNames(replicate(ncol(x), c(1,2), simplify = FALSE), colnames(x))
center = setNames(rep(FALSE, ncol(x)), colnames(x))
acdx = setNames(rep(FALSE, ncol(x)), colnames(x))
transform_matrix(x, powx, center, acdx)

</code></pre>


</div>