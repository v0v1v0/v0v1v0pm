<div class="container">

<table style="width: 100%;"><tr>
<td>ALE.gam</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Accumulated Local Effects (ALE) for GAMs</h2>

<h3>Description</h3>

<p>Create Accumulated Local Effects (ALE) for GAMs
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'gam'
ALE(
  o,
  x,
  newdata = NULL,
  type = "link",
  nbin = 40,
  bins = NULL,
  oind = 1,
  center = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>o</code></td>
<td>
<p>a fitted GAM model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the name of the variable along which we want to produce the ALE effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>optional argument indicating the data to be used to produce the ALE effect.
If <code>NULL</code> the data contained in <code>o</code> will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>if set to "link" (the default option) the model output will be the linear predictor, if
set to "response" the model output is on the scale of the response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbin</code></td>
<td>
<p>number of intervals into which the predictor range is divided
when calculating the ALE effects. Ignored for factor predictors of if the <code>bins</code> argument is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bins</code></td>
<td>
<p>a grid defining the interval into which the predictor should be binned. Determined
automatically by default. Ignored for factor predictors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oind</code></td>
<td>
<p>relevant only when the model <code>o</code> has multiple linear predictors (e.g. for GAMLSS models
or for <code>multinom</code> regression). <code>oind</code> is the index of the output variable used for
the ALE effect (i.e., only <code>predict(o)[ , oind]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>if set to 0 the ALE effect is not centered and the effect is equal to zero at the smallest
value on x-grid. If set to 1 (default) the effect is centered as done in Apley and Zhu, 2016.
That is, an estimate of the expected value of the uncentered effect is subtracted, so the effect is
centered similarly to smooth effects in GAMs. If set to 2, the expected value of the model output
at the smallest value on the x-grid is added to the uncentered effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments that will be passed to <code>predict</code> and <code>vcov</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>ALEXD</code>, where <code>X</code> is the number of dimensions, which can be plotted
using <code>plot.ALEXD</code> (only <code>X=1</code> is provided at the moment).
</p>


<h3>Author(s)</h3>

<p>Matteo Fasiolo and Christian Capezza, with some internal code having been adapted from the ALEPlot
package of Dan Apley.
</p>


<h3>References</h3>

<p>Apley, D.W., and Zhu, J, 2016. Visualizing the effects of predictor variables in black
box supervised learning models. arXiv preprint arXiv:1612.08468.
</p>


<h3>See Also</h3>

<p>plot.ALE1D
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example using Tweedie distribution
library(mgcViz)
set.seed(3)
n&lt;-400
## Simulate data...
dat &lt;- gamSim(1,n=n,dist="poisson",scale=.2)
dat$y &lt;- rTweedie(exp(dat$f),p=1.3,phi=.5) ## Tweedie response

## Fit a fixed p Tweedie, with wrong link ...
b &lt;- gam(list(y~s(x0)+s(x1)+s(x2)+s(x3),~1,~1), family=twlss(), data=dat)

plot(ALE(b, "x2", type = "response", oind = 1))

# With manually chosen bins
plot(ALE(b, "x2", type = "response", oind = 1, 
         bins = c(0.1, 0.25, 0.5, 0.6, 0.9, 0.95, 0.99, 1)))

</code></pre>


</div>