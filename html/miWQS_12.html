<div class="container">

<table style="width: 100%;"><tr>
<td>make.quantile.matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Making Quantiles of Correlated Index</h2>

<h3>Description</h3>

<p>Scores quantiles from a numeric matrix. If the matrix has values missing between zero and some threshold, say the detection limit, all these missing values  (indicated by NA) are placed into the first quantile.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make.quantile.matrix(
  X,
  n.quantiles,
  place.bdls.in.Q1 = if (anyNA(X)) TRUE else FALSE,
  ...,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A numeric matrix. Any missing values are indicated by NA's.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.quantiles</code></td>
<td>
<p>An integer specifying the number of quantiles in categorizing the columns of X, e.g. in quartiles (q = 4), deciles (q = 10), or percentiles (q = 100). Default: 4L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>place.bdls.in.Q1</code></td>
<td>
<p>Logical; if TRUE or X has any missing values, missing values in X are placed in the first quantile of the weighted sum.  Otherwise, the data is complete (no missing data) and the data is equally split into quantiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical; if TRUE, prints more information. Useful to check for any errors in the code. Default: FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Produces sample quantiles for a matrix <em>X</em> using <code>quantile</code>() function. Names are kept and the 7th quantile algorithm is used. As ties between quantiles may exist, <code>.bincode</code>() is used.
</p>
<p>When there is missing data (as indicated by NA's), <code>make.quantile.matrix</code> places all of the censored data into the first quantile. The remaining quantiles are evenly spread over the observed data. A printed message is displaced what the function does.
</p>


<h3>Value</h3>

<p>A matrix of quantiles with rows = nrow(X) and with columns = n.quantiles.
</p>


<h3>Note</h3>

<p>Developed as an accessory function for <code>estimate.wqs()</code>.
</p>


<h3>See Also</h3>

<p><code>quantile</code>
</p>
<p>Other wqs: 
<code>analyze.individually()</code>,
<code>coef.wqs()</code>,
<code>do.many.wqs()</code>,
<code>estimate.wqs.formula()</code>,
<code>estimate.wqs()</code>,
<code>plot.wqs()</code>,
<code>print.wqs()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1: Make quantiles for first nine chemicals using complete chemical data
data(simdata87)
q &lt;- make.quantile.matrix(simdata87$X.true[, 1:9], 4)
q &lt;- apply(q, 2, as.factor)
summary(q)

# Example 2: Place missing values of first nine chemicals in first quantiles
q2 &lt;- make.quantile.matrix(simdata87$X.bdl[, 1:9], 4, verbose = TRUE)
summary(q2)
</code></pre>


</div>