<div class="container">

<table style="width: 100%;"><tr>
<td>subset_datlist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Subsetting Multiply Imputed Datasets and Nested Multiply Imputed Datasets
</h2>

<h3>Description</h3>

<p>Returns a subsets of multiply imputed datasets or nested multiply imputed datasets.
These function allows choosing parts of the imputed datasets using the
<code>index</code> argument for multiply imputed datasets and <code>index_between</code> and
<code>index_within</code> for nested multiply imputed datasets as well as the application
of the <code>base::subset</code> S3 method for selecting
cases and variables in datasets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">subset_datlist(datlist, subset=TRUE, select=NULL, expr_subset=NULL,
        index=NULL, toclass="datlist")

## S3 method for class 'datlist'
subset(x, subset, select=NULL, expr_subset=NULL,
                     index=NULL, ...)
## S3 method for class 'imputationList'
subset(x, subset, select=NULL, expr_subset=NULL,
                     index=NULL, ...)
## S3 method for class 'mids'
subset(x, subset, select=NULL, expr_subset=NULL,
                     index=NULL, ...)
## S3 method for class 'mids.1chain'
subset(x, subset, select=NULL, expr_subset=NULL,
                     index=NULL, ...)

subset_nested.datlist( datlist, subset=TRUE, select=NULL, expr_subset=NULL,
      index_between=NULL, index_within=NULL, toclass="nested.datlist",
          simplify=FALSE )

## S3 method for class 'nested.datlist'
subset(x, subset, select=NULL, expr_subset=NULL,
                index_between=NULL, index_within=NULL, simplify=FALSE, ...)
## S3 method for class 'NestedImputationList'
subset(x, subset, select=NULL, expr_subset=NULL,
                index_between=NULL, index_within=NULL, simplify=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>datlist</code></td>
<td>

<p>For <code>subset_datlist</code> it is a list of datasets or an object of class
<code>datlist</code>, <code>imputationList</code>, <code>mids</code> or <code>mids.1chain</code>. <br>
For <code>subset_nested.datlist</code> it is a list of datasets or an object of class
<code>nested.datlist</code> or <code>NestedImputationList</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>Logical expression indicating elements or rows to keep, see
<code>base::subset</code>. <code>subset</code> can also
be a numeric vector containing row indices.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>Expression indicating columns to select from a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr_subset</code></td>
<td>
<p>Expression indicating a selection criterion for
selection rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>

<p>Vector of indices indicating which of the multiply imputed datasets
should be selected.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toclass</code></td>
<td>

<p>The object class in which the datasets should be saved.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_between</code></td>
<td>
<p>Index for between nest datasets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_within</code></td>
<td>
<p>Index for within nest datasets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p>Optional logical indicating whether a nested multiply
imputed dataset should be simplified to a multiplied imputed dataset.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object containing multiply imputed or nested multiply imputed
datasets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For multiply imputed datasets: Object of class <code>datlist</code>,
<code>imputationList</code> or <code>mids</code> <br>
For nested multiply imputed datasets: Object of class
<code>nested.datlist</code> or <code>NestedImputationList</code>.
</p>


<h3>Note</h3>

<p>If subsetting is applied to objects of class <code>mids</code> (or <code>mids.1chain</code>),
then informations about the imputation procedure are lost.
</p>


<h3>See Also</h3>

<p><code>base::subset</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#############################################################################
# EXAMPLE 1: Subsetting and selection of multiply imputed datasets
#############################################################################

data(data.ma02)

# define original list of datasets
datlist1a &lt;- data.ma02
# object of class datlist
datlist1b &lt;- miceadds::datlist_create(datlist1a)
datlist1b
# object of class imputationList
datlist1c &lt;- mitools::imputationList(datlist1a)
datlist1c
# object of class mids
datlist1d &lt;- miceadds::datlist2mids(datlist1a)
datlist1d

# select some imputed datasets
datlist2a &lt;- miceadds::subset_datlist( datlist1a, index=c(5,3,7) )
datlist2a
# convert to class imputationList
datlist2b &lt;- miceadds::subset_datlist( datlist1a, index=c(5,3,7),
                      toclass="imputationList")
datlist2b
# convert to class mids
datlist2c &lt;- miceadds::subset_datlist( datlist1a, index=1:3, toclass="mids")
datlist2c

# select some variables
datlist3a &lt;- miceadds::subset_datlist( datlist1a, select=c("idstud", "books")  )
datlist3a
# Because datlist1b is a datlist it is equivalent to
datlist3b &lt;- subset( datlist1b, select=c("idstud", "books")  )
datlist3b
# operating on imputationList class
datlist3c &lt;- miceadds::subset_datlist( datlist1c, select=c("idstud", "books")  )
datlist3c
# operating on mids class
datlist3d &lt;- miceadds::subset_datlist( datlist1d, select=c("idstud", "books")  )
datlist3d
# selection of rows and columns in multiply imputed datasets
datlist4a &lt;- miceadds::subset_datlist( datlist1a, index=1:5,
                  subset=datlist1a[[1]]$idschool &lt; 1067,
                  select=c("idstud", "idschool","hisei") )
datlist4a
# convert to class mids
datlist4b &lt;- miceadds::subset_datlist( datlist1a, index=1:5,
                  subset=datlist1a[[1]]$idschool &lt; 1067,
                  select=c("idstud", "idschool","hisei"), toclass="mids" )
datlist4b
# The same functionality, but now applying to object of class mids datlist1d
datlist4c &lt;- miceadds::subset_datlist( datlist1d, index=1:5,
               subset=datlist1a[[1]]$idschool &lt; 1067,
               select=c("idstud", "idschool","hisei") )
datlist4c

# expression for selecting rows specific in each data frame
# which can result in differently sized datasets (because the variable
# migrant is imputed)
datlist5a &lt;- miceadds::subset_datlist( datlist1a,  expr_subset=expression(migrant==1) )
datlist5a

# select the first 100 cases
datlist6a &lt;- miceadds::subset_datlist( datlist1a, select=c("idstud", "books"),
                       subset=1:100 )
datlist6a

#############################################################################
# EXAMPLE 2: Subsetting and selection of nested multiply imputed datasets
#############################################################################

library(BIFIEsurvey)
data(data.timss4, package="BIFIEsurvey")
dat &lt;- data.timss4

# create object of class 'nested.datlist'
datlist1a &lt;- miceadds::nested.datlist_create( dat )
# create object of class 'NestedImputationList'
datlist1b &lt;- miceadds::NestedImputationList(dat)

# select some between datasets
datlist2a &lt;- subset_nested.datlist( datlist1a, index_between=c(1,3,4) )
datlist2a
# shorter version
datlist2b &lt;- subset( datlist1a, index_between=c(1,3,4) )
datlist2b
# conversion of a NestedImputationList
datlist2c &lt;- subset( datlist1b, index_between=c(1,3,4))
datlist2c
# select rows and columns
sel_cases &lt;- datlist1a[[1]][[1]]$JKZONE &lt;=42
datlist3a &lt;- subset( datlist1a, subset=sel_cases,
                 select=c("IDSTUD","books", "ASMMAT") )
datlist3a
# remove within nest
datlist4a &lt;- subset( datlist1a, index_within=1 )
datlist4a
# remove within nest and simplify structure
datlist4b &lt;- subset( datlist1a, index_within=1, simplify=TRUE)
datlist4b
datlist4c &lt;- subset( datlist1b, index_within=1, simplify=TRUE)
datlist4c
# remove between nest
datlist5a &lt;- subset( datlist1a, index_between=1, simplify=TRUE)
datlist5a
datlist5b &lt;- subset( datlist1b, index_between=1, simplify=TRUE)
datlist5b

## End(Not run)
</code></pre>


</div>