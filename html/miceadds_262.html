<div class="container">

<table style="width: 100%;"><tr>
<td>visitSequence.determine</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Automatic Determination of a Visit Sequence in <code>mice</code>
</h2>

<h3>Description</h3>

<p>This function automatically determines a visit sequence for a specified
model in <code>mice::mice</code> when passive variables are defined
as imputation methods. Note that redundant visits could be computed and
a user should check the plausibility of the result.
</p>


<h3>Usage</h3>

<pre><code class="language-R">visitSequence.determine(impMethod, vis, data, maxit=10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>impMethod</code></td>
<td>

<p>Vector with imputation methods
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vis</code></td>
<td>

<p>Initial vector of visit sequence
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data frame to be used for multiple imputations
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxit</code></td>
<td>

<p>Maximum number of iteration for computation of the updated visit sequence
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Updated vector of the visit sequence
</p>


<h3>See Also</h3>

<p>Used in  the <code>mice::mice</code> function as an argument.
The function <code>mice::make.visitSequence</code>
creates a visit sequence.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#############################################################################
# EXAMPLE 1: Visit sequence for a small imputation model
#############################################################################

data( data.smallscale )
# select a small number of variables
dat &lt;- data.smallscale[, paste0("v",1:4) ]
V &lt;- ncol(dat)

# define initial vector of imputation methods
impMethod &lt;- rep("norm", V)
names(impMethod) &lt;- colnames(dat)
# define variable names and imputation method for passive variables in a data frame
dfr.impMeth &lt;- data.frame( "variable"=NA,
                  "impMethod"=NA )
dfr.impMeth[1,] &lt;- c("v1_v1", "~ I(v1^2)" )
dfr.impMeth[2,] &lt;- c("v2_v4", "~ I(v2*v4)" )
dfr.impMeth[3,] &lt;- c("v4log", "~ I( log(abs(v4)))" )
dfr.impMeth[4,] &lt;- c("v12", "~ I( v1 + v2 + 3*v1_v1 - v2_v4 )" )
# add variables to dataset and imputation methods
VV &lt;- nrow(dfr.impMeth)
for (vv in 1:VV){
    impMethod[ dfr.impMeth[vv,1] ] &lt;- dfr.impMeth[vv,2]
    dat[, dfr.impMeth[vv,1] ] &lt;- NA
}

# run empty imputation model to obtain initial vector of visit sequence
imp0 &lt;- mice::mice( dat, m=1, method=impMethod, maxit=0 )
imp0$vis

# update visit sequence
vis1 &lt;- miceadds::visitSequence.determine( impMethod=impMethod, vis=imp0$vis, data=dat)

# imputation with updated visit sequence
imp &lt;- mice::mice( dat, m=1, method=impMethod, visitSequence=vis1, maxit=2)

## End(Not run)
</code></pre>


</div>