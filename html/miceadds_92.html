<div class="container">

<table style="width: 100%;"><tr>
<td>ma_lme4_formula</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Utility Functions for Working with <span class="pkg">lme4</span> Formula Objects
</h2>

<h3>Description</h3>

<p>Utility functions for working with <span class="pkg">lme4</span> formula objects. The function
<code>ma_lme4_formula_terms</code> decomposes an <span class="pkg">lme4</span> formula into several
parts for further processing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ma_lme4_formula_terms(formula)

ma_lme4_formula_design_matrices(formula, data, start_index=0, formula_terms=NULL,
        only_design_matrices=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>An <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> formula object
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_index</code></td>
<td>
<p>Starting index for cluster identifiers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula_terms</code></td>
<td>
<p>Optional argument with processed formula terms using the
function <code>ma_lme4_formula_terms</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_design_matrices</code></td>
<td>
<p>Logical indicating whether only design matrices should
be created</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List with several entries
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#############################################################################
# EXAMPLE 1: Splitting a lme4 formula
#############################################################################

#*** formula for a multilevel model
formula &lt;- y ~ I( miceadds::cwc(x, idcluster)) + z + I(z^2) + I( miceadds::gm(x, idcluster) ) + w +
                        ( x + I(x^2) | idcluster)  + (0 +  w | idcluster ) +
                        ( 0 + I(as.factor(f)) | idcluster)
miceadds::ma_lme4_formula_terms(formula)

#*** formula for a single level model
formula2 &lt;- y ~ I( miceadds::cwc(x, idcluster)) + z + I(z^2) + I( miceadds::gm(x, idcluster) ) + w
miceadds::ma_lme4_formula_terms(formula2)

#############################################################################
# EXAMPLE 2: Design matrices for multilevel model
#############################################################################

data(data.ma07, package="miceadds")
dat &lt;- data.ma07

formula &lt;- x1 ~ x2 + I( miceadds::gm( x2, id2)) + I( miceadds::gm( x2, id3)) + y1 + z1 +
                    ( x2 | id2:id3 ) + ( 1 | id3 ) + ( 0 + x2 | id3 )
res &lt;- miceadds::ma_lme4_formula_design_matrices(formula, data=dat)
str(res)

## End(Not run)
</code></pre>


</div>