<div class="container">

<table style="width: 100%;"><tr>
<td>build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build and start the microCRAN site</h2>

<h3>Description</h3>

<p><code>build</code> creates the Plumber-router and
<code>run</code> starts the service.
</p>


<h3>Usage</h3>

<pre><code class="language-R">build(
  repo_dir,
  url_path,
  redirect_url,
  title,
  description,
  contact,
  license,
  tos
)

run(pr, host = "127.0.0.1", port = 1881, url_path, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>repo_dir</code></td>
<td>
<p>Path to local directory, where the root of the repository is.
The (source) packages will be stored locally at
<code style="white-space: pre;">⁠{repo_dir}/src/contrib/⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>url_path</code></td>
<td>
<p>Optional prefix to endpoint. The CRAN repository will be
available at e.g. <code style="white-space: pre;">⁠http://127.0.0.1:port/path_prefix/⁠</code> with the
"contrib.url" as <code style="white-space: pre;">⁠http://127.0.0.1:port/path_prefix/src/contrib/⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>redirect_url</code></td>
<td>
<p>Url, if supplied, requests to static assets
(package files, etc.) are redirected to another service instead of being
handled by cran_static_path_handler.
It can be beneficial to let e.g. an Apache httpd service handle those.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title, description, contact, license, tos</code></td>
<td>
<p>Descriptions of the API.
Some defaults are used, see section below or
<a href="https://www.rplumber.io/articles/annotations.html">https://www.rplumber.io/articles/annotations.html</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pr</code></td>
<td>
<p>A Plumber-router, e.g. as returned from
<code>build</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>host</code></td>
<td>
<p>A string that is a valid IPv4 or IPv6 address that is owned by
this server, which the application will listen on.
"0.0.0.0" represents all IPv4 addresses and "::/0" represents all IPv6
addresses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>port</code></td>
<td>
<p>A number or integer that indicates the server port that should
be listened on. Note that on most Unix-like systems including Linux and
Mac OS X, port numbers smaller than 1025 require root privileges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed on to <code>plumber::pr_run()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run</code></td>
<td>
<p>Logical, should the method run the site immediately?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Point <code>repo_dir</code> to you <em>local</em> filesystem. If the (sub-)directory does not
exist, it will be created when an R-package is added through the corresponding
endpoint.
</p>


<h3>Value</h3>

<p>A new Plumber-router object.
</p>


<h3>API Descriptions</h3>

<p>The fields <code>title</code>, <code>description</code>, <code>contact</code>, <code>license</code>, and <code>tos</code>
are used for describing the API in the resulting Swagger-documents.
These follow the OpenAPI type descriptions, see
<a href="https://spec.openapis.org/oas/v3.0.3#info-object">https://spec.openapis.org/oas/v3.0.3#info-object</a>.</p>

<table>
<tr>
<td style="text-align: left;">
   Field name </td>
<td style="text-align: left;"> Type </td>
<td style="text-align: left;"> Description </td>
</tr>
<tr>
<td style="text-align: left;">
   title </td>
<td style="text-align: left;"> string </td>
<td style="text-align: left;"> The title of the API. </td>
</tr>
<tr>
<td style="text-align: left;">
   description </td>
<td style="text-align: left;"> string </td>
<td style="text-align: left;"> A short description of the API. </td>
</tr>
<tr>
<td style="text-align: left;">
   tos </td>
<td style="text-align: left;"> string </td>
<td style="text-align: left;"> A URL to the Terms of Service for the API. </td>
</tr>
<tr>
<td style="text-align: left;">
   contact </td>
<td style="text-align: left;"> list </td>
<td style="text-align: left;"> A "Contact Object", i.e., list-object with fields "name", "url" and "email". </td>
</tr>
<tr>
<td style="text-align: left;">
   license </td>
<td style="text-align: left;"> list </td>
<td style="text-align: left;"> A "License Object", i.e., list-object with fields "name" and "url". </td>
</tr>
<tr>
<td style="text-align: left;">
   version </td>
<td style="text-align: left;"> string </td>
<td style="text-align: left;"> The version of the API. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
</div>