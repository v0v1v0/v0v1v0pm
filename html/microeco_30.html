<div class="container">

<table style="width: 100%;"><tr>
<td>trans_venn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create <code>trans_venn</code> object for the Venn diagram, petal plot and UpSet plot.</h2>

<h3>Description</h3>

<p>This class is a wrapper for a series of intersection analysis related methods, including 2- to 5-way venn diagram, 
more than 5-way petal or UpSet plot and intersection transformations based on David et al. (2012) &lt;doi:10.1128/AEM.01459-12&gt;.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-trans_venn-new"><code>trans_venn$new()</code></a>
</p>
</li>
<li> <p><a href="#method-trans_venn-plot_venn"><code>trans_venn$plot_venn()</code></a>
</p>
</li>
<li> <p><a href="#method-trans_venn-plot_bar"><code>trans_venn$plot_bar()</code></a>
</p>
</li>
<li> <p><a href="#method-trans_venn-trans_comm"><code>trans_venn$trans_comm()</code></a>
</p>
</li>
<li> <p><a href="#method-trans_venn-print"><code>trans_venn$print()</code></a>
</p>
</li>
<li> <p><a href="#method-trans_venn-clone"><code>trans_venn$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-trans_venn-new"></a>



<h4>Method <code>new()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>trans_venn$new(dataset, ratio = NULL, name_joint = "&amp;")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt>
<dd>
<p>the object of <code>microtable</code> class or a matrix-like table (data.frame or matrix object).
If dataset is a matrix-like table, features must be rows.</p>
</dd>
<dt><code>ratio</code></dt>
<dd>
<p>default NULL; NULL, "numratio" or "seqratio"; "numratio": calculate the percentage of feature number; 
"seqratio": calculate the percentage of feature abundance; NULL: no additional percentage.</p>
</dd>
<dt><code>name_joint</code></dt>
<dd>
<p>default "&amp;"; the joint mark for generating multi-sample names.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>data_details</code> and <code>data_summary</code> stored in the object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\donttest{
data(dataset)
t1 &lt;- dataset$merge_samples("Group")
t1 &lt;- trans_venn$new(dataset = t1, ratio = "numratio")
}
</pre>
</div>


<hr>
<a id="method-trans_venn-plot_venn"></a>



<h4>Method <code>plot_venn()</code>
</h4>

<p>Plot venn diagram.
</p>


<h5>Usage</h5>

<div class="r"><pre>trans_venn$plot_venn(
  color_circle = RColorBrewer::brewer.pal(8, "Dark2"),
  fill_color = TRUE,
  text_size = 4.5,
  text_name_size = 6,
  text_name_position = NULL,
  alpha = 0.3,
  linesize = 1.1,
  petal_plot = FALSE,
  petal_color = "#BEAED4",
  petal_color_center = "#BEBADA",
  petal_a = 4,
  petal_r = 1,
  petal_use_lim = c(-12, 12),
  petal_center_size = 40,
  petal_move_xy = 4,
  petal_move_k = 2.3,
  petal_move_k_count = 1.3,
  petal_text_move = 40,
  other_text_show = NULL,
  other_text_position = c(2, 2),
  other_text_size = 5
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>color_circle</code></dt>
<dd>
<p>default <code>RColorBrewer::brewer.pal(8, "Dark2")</code>; color pallete.</p>
</dd>
<dt><code>fill_color</code></dt>
<dd>
<p>default TRUE; whether fill the area color.</p>
</dd>
<dt><code>text_size</code></dt>
<dd>
<p>default 4.5; text size in plot.</p>
</dd>
<dt><code>text_name_size</code></dt>
<dd>
<p>default 6; name size in plot.</p>
</dd>
<dt><code>text_name_position</code></dt>
<dd>
<p>default NULL; name position in plot.</p>
</dd>
<dt><code>alpha</code></dt>
<dd>
<p>default .3; alpha for transparency.</p>
</dd>
<dt><code>linesize</code></dt>
<dd>
<p>default 1.1; cycle line size.</p>
</dd>
<dt><code>petal_plot</code></dt>
<dd>
<p>default FALSE; whether use petal plot.</p>
</dd>
<dt><code>petal_color</code></dt>
<dd>
<p>default "#BEAED4"; color of the petals; If petal_color only has one color value, all the petals will be assigned with this color value.
If petal_color has multiple colors, and the number of color values is smaller than the petal number, 
the function can append more colors automatically with the color interpolation.</p>
</dd>
<dt><code>petal_color_center</code></dt>
<dd>
<p>default "#BEBADA"; color of the center in the petal plot.</p>
</dd>
<dt><code>petal_a</code></dt>
<dd>
<p>default 4; the length of the ellipse.</p>
</dd>
<dt><code>petal_r</code></dt>
<dd>
<p>default 1; scaling up the size of the ellipse.</p>
</dd>
<dt><code>petal_use_lim</code></dt>
<dd>
<p>default c(-12, 12); the width of the plot.</p>
</dd>
<dt><code>petal_center_size</code></dt>
<dd>
<p>default 40; petal center circle size.</p>
</dd>
<dt><code>petal_move_xy</code></dt>
<dd>
<p>default 4; the distance of text to circle.</p>
</dd>
<dt><code>petal_move_k</code></dt>
<dd>
<p>default 2.3; the distance of title to circle.</p>
</dd>
<dt><code>petal_move_k_count</code></dt>
<dd>
<p>default 1.3; the distance of data text to circle.</p>
</dd>
<dt><code>petal_text_move</code></dt>
<dd>
<p>default 40; the distance between two data text.</p>
</dd>
<dt><code>other_text_show</code></dt>
<dd>
<p>default NULL; other characters used to show in the plot.</p>
</dd>
<dt><code>other_text_position</code></dt>
<dd>
<p>default c(1, 1); the text position for text in <code>other_text_show</code>.</p>
</dd>
<dt><code>other_text_size</code></dt>
<dd>
<p>default 5; the text size for text in <code>other_text_show</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>ggplot.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\donttest{
t1$plot_venn()
}
</pre>
</div>


<hr>
<a id="method-trans_venn-plot_bar"></a>



<h4>Method <code>plot_bar()</code>
</h4>

<p>Plot the intersections using histogram, i.e. UpSet plot. Especially useful when samples &gt; 5.
</p>


<h5>Usage</h5>

<div class="r"><pre>trans_venn$plot_bar(
  left_plot = TRUE,
  sort_samples = FALSE,
  up_y_title = "Intersection size",
  up_y_title_size = 15,
  up_y_text_size = 8,
  up_bar_fill = "grey70",
  up_bar_width = 0.9,
  bottom_y_text_size = 12,
  bottom_height = 1,
  bottom_point_size = 3,
  bottom_point_color = "black",
  bottom_background_fill = "grey95",
  bottom_background_alpha = 1,
  bottom_line_width = 0.5,
  bottom_line_colour = "black",
  left_width = 0.3,
  left_bar_fill = "grey70",
  left_bar_alpha = 1,
  left_bar_width = 0.9,
  left_x_text_size = 10,
  left_background_fill = "white",
  left_background_alpha = 1
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>left_plot</code></dt>
<dd>
<p>default TRUE; whether add the left bar plot to show the feature number of each sample.</p>
</dd>
<dt><code>sort_samples</code></dt>
<dd>
<p>default FALSE; <code>TRUE</code> is used to sort samples according to the number of features in each sample.
<code>FALSE</code> means the sample order is same with that in sample_table of the raw dataset.</p>
</dd>
<dt><code>up_y_title</code></dt>
<dd>
<p>default "Intersection set"; y axis title of upper plot.</p>
</dd>
<dt><code>up_y_title_size</code></dt>
<dd>
<p>default 15; y axis title size of upper plot.</p>
</dd>
<dt><code>up_y_text_size</code></dt>
<dd>
<p>default 4; y axis text size of upper plot.</p>
</dd>
<dt><code>up_bar_fill</code></dt>
<dd>
<p>default "grey70"; bar fill color of upper plot.</p>
</dd>
<dt><code>up_bar_width</code></dt>
<dd>
<p>default 0.9; bar width of upper plot.</p>
</dd>
<dt><code>bottom_y_text_size</code></dt>
<dd>
<p>default 12; y axis text size, i.e. sample name size, of bottom sample plot.</p>
</dd>
<dt><code>bottom_height</code></dt>
<dd>
<p>default 1; bottom plot height relative to the upper bar plot. 1 represents the height of bottom plot is same with the upper bar plot.</p>
</dd>
<dt><code>bottom_point_size</code></dt>
<dd>
<p>default 3; point size of bottom plot.</p>
</dd>
<dt><code>bottom_point_color</code></dt>
<dd>
<p>default "black"; point color of bottom plot.</p>
</dd>
<dt><code>bottom_background_fill</code></dt>
<dd>
<p>default "grey95"; fill color for the striped background in the bottom sample plot.
If the parameter length is 1, use "white" to distinguish the color stripes.
If the parameter length is greater than 1, use all provided colors.</p>
</dd>
<dt><code>bottom_background_alpha</code></dt>
<dd>
<p>default 1; the color transparency for the parameter <code>bottom_background_fill</code>.</p>
</dd>
<dt><code>bottom_line_width</code></dt>
<dd>
<p>default 0.5; the line width in the bottom plot.</p>
</dd>
<dt><code>bottom_line_colour</code></dt>
<dd>
<p>default "black"; the line color in the bottom plot.</p>
</dd>
<dt><code>left_width</code></dt>
<dd>
<p>default 0.3; left bar plot width relative to the right bottom plot.</p>
</dd>
<dt><code>left_bar_fill</code></dt>
<dd>
<p>default "grey70"; fill color for the left bar plot presenting feature number.</p>
</dd>
<dt><code>left_bar_alpha</code></dt>
<dd>
<p>default 1; the color transparency for the parameter <code>left_bar_fill</code>.</p>
</dd>
<dt><code>left_bar_width</code></dt>
<dd>
<p>default 0.9; bar width of left plot.</p>
</dd>
<dt><code>left_x_text_size</code></dt>
<dd>
<p>default 10; x axis text size of the left bar plot.</p>
</dd>
<dt><code>left_background_fill</code></dt>
<dd>
<p>default "white"; fill color for the striped background in the left plot.
If the parameter length is 1, use "white" to distinguish the color stripes.
If the parameter length is greater than 1, use all provided colors.</p>
</dd>
<dt><code>left_background_alpha</code></dt>
<dd>
<p>default 1; the color transparency for the parameter <code>left_background_fill</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a ggplot2 object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\donttest{
t2 &lt;- t1$plot_bar()
}
</pre>
</div>


<hr>
<a id="method-trans_venn-trans_comm"></a>



<h4>Method <code>trans_comm()</code>
</h4>

<p>Transform intersection result to community-like microtable object for further composition analysis.
</p>


<h5>Usage</h5>

<div class="r"><pre>trans_venn$trans_comm(use_frequency = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>use_frequency</code></dt>
<dd>
<p>default TRUE; whether only use OTUs occurrence frequency, i.e. presence/absence data; if FALSE, use abundance data.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a new <code>microtable</code> class.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\donttest{
t2 &lt;- t1$trans_comm(use_frequency = TRUE)
}
</pre>
</div>


<hr>
<a id="method-trans_venn-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Print the trans_venn object.
</p>


<h5>Usage</h5>

<div class="r"><pre>trans_venn$print()</pre></div>


<hr>
<a id="method-trans_venn-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>trans_venn$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">
## ------------------------------------------------
## Method `trans_venn$new`
## ------------------------------------------------


data(dataset)
t1 &lt;- dataset$merge_samples("Group")
t1 &lt;- trans_venn$new(dataset = t1, ratio = "numratio")


## ------------------------------------------------
## Method `trans_venn$plot_venn`
## ------------------------------------------------


t1$plot_venn()


## ------------------------------------------------
## Method `trans_venn$plot_bar`
## ------------------------------------------------


t2 &lt;- t1$plot_bar()


## ------------------------------------------------
## Method `trans_venn$trans_comm`
## ------------------------------------------------


t2 &lt;- t1$trans_comm(use_frequency = TRUE)

</code></pre>


</div>