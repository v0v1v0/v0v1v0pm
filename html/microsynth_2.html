<div class="container">

<table style="width: 100%;"><tr>
<td>plot_microsynth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting for microsynth objects.</h2>

<h3>Description</h3>

<p>Using a <code>microsynth</code> object as an input, this function gives time
series plots of selected outcomes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_microsynth(
  ms,
  plot.var = NULL,
  start.pre = NULL,
  end.pre = NULL,
  end.post = NULL,
  file = NULL,
  sep = TRUE,
  plot.first = NULL,
  legend.spot = "bottomleft",
  height = NULL,
  width = NULL,
  at = NULL,
  labels = NULL,
  all = "cases",
  main.tc = NULL,
  main.diff = NULL,
  xlab.tc = NULL,
  xlab.diff = NULL,
  ylab.tc = NULL,
  ylab.diff = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ms</code></td>
<td>
<p>A microsynth object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.var</code></td>
<td>
<p>A vector of variable names giving the outcome variables that
are shown in plots.  If <code>plot.var = NULL</code>, all outcome variables that
are included in <code>ms</code> are plotted.  Only variables contained in
the input <code>result.var</code> as used in the creation of <code>ms</code> can
be plotted using <code>plot()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.pre</code></td>
<td>
<p>An integer indicating the time point that corresponds to the
earliest time period that will be plotted.
When <code>start.pre = NULL</code>, it is reset to the
minimum time appearing in <code>ms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end.pre</code></td>
<td>
<p>An integer that gives the final time point of the
pre-intervention period.  That is, <code>end.pre</code> is the last time at
which treatment and synthetic control will were matched to one another.
All time points
following <code>end.pre</code> are considered to be post-intervention and the
behavior of outcomes will be compared between the treatment and synthetic
control groups across those time periods.
If <code>end.pre = NULL</code> the end of the pre-intervention period will be
determined from the object <code>ms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end.post</code></td>
<td>
<p>An integer that gives final time point that will be plotted.
When <code>end.post = NULL</code> (the default), it is reset
to the maximum time that appears in <code>ms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A character string giving the name of file that will be
created in the home directory containing plots.
The name should have a <code>.pdf</code> extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>If <code>sep = TRUE</code>, separate plots will be generated for each
outcome.  Applicable only if plots are saved to file (
<code>plot.file</code> is <code>non-NULL</code>). To change display of plots produced
as output, use <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.first</code></td>
<td>
<p>The number of permutation groups to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.spot</code></td>
<td>
<p>The location of the legend in the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>The height of the graphics region (in inches)
when a pdf is created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>The width of the graphics region (in inches)
when a pdf is created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p>A vector that gives the location of user-specified x-axis labels.
<code>at</code> should be a (numeric) subset of the named time points contained
in <code>ms</code> (e.g., <code>colnames(ms$Plot.Stats$Treatment)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>A vector of the same length as <code>at</code> that gives the names
of the labels that will be marked at the times indicated by <code>at</code> in
the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>A scalar character string giving the unit name for cases.
If <code>NULL</code>, a third curve showing the overall outcome levels is
not plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main.tc</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the title to be used for the first plots
(that show treatment and control).  Defaults to <code>plot.var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main.diff</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the title to be used for the second plots
(that show differences between treatment and control).
Defaults to <code>plot.var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab.tc</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the x-axis labels to be used for the first plots
(that show treatment and control).  Defaults to <code>''</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab.diff</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the x-axis labels to be used for the second plots
(that show differences between treatment and control).
Defaults to <code>''</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab.tc</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the y-axis labels to be used for the first plots
(that show treatment and control).  Defaults to <code>plot.var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab.diff</code></td>
<td>
<p>A scalar (or a vector of the same length as <code>plot.var</code>)
character string giving the y-axis labels to be used for the second plots
(that show differences between treatment and control).
Defaults to <code>'Treatment - Control'</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Plots are given over both pre- and
intervention time periods and shown in terms of raw outcome values or
treatment/control differences.  Time series of permutation groups may be
overlaid to help illustrate statistical uncertainty.
</p>
<p>Only required input is a parameter <code>ms</code> which is a microsynth object.
</p>


<h3>Value</h3>

<p>No return value, called for side effects (i.e., to produce plots
of outcome values and treatment/control differences, with the option to
write to file).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Declare time-variant (outcome) and time-invariant variables for matching
cov.var &lt;- c('TotalPop', 'BLACK', 'HISPANIC', 'Males_1521',
       'HOUSEHOLDS', 'FAMILYHOUS', 'FEMALE_HOU', 'RENTER_HOU', 'VACANT_HOU')

match.out &lt;- c('i_felony', 'i_misdemea', 'i_drugs', 'any_crime')

set.seed(99199) # for reproducibility



# Perform matching and estimation, without permutations or jackknife
# runtime: &lt;1 min
sea1 &lt;- microsynth(seattledmi,
                  idvar='ID', timevar='time', intvar='Intervention',
                  start.pre=1, end.pre=12, end.post=16,
                  match.out=match.out, match.covar=cov.var,
                  result.var=match.out, omnibus.var=match.out,
                  test='lower',
                  n.cores = min(parallel::detectCores(), 2))

# Plot with default settings in the GUI.
plot_microsynth(sea1)

# Make plots, display, and save to a single file (plots.pdf).
plot_microsynth(sea1, file = file.path(tempdir(), 'plots.pdf'), sep = FALSE)

# Make plots for only one outcome, display, and save to a single file.
plot_microsynth(sea1, plot.var = 'any_crime',
     file = file.path(tempdir(), 'plots.pdf'), sep = FALSE)


</code></pre>


</div>