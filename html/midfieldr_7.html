<div class="container">

<table style="width: 100%;"><tr>
<td>filter_cip</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subset rows that include matches to search strings</h2>

<h3>Description</h3>

<p>Subset a CIP data frame, retaining rows that match or partially match a
vector of character strings. Columns are not subset unless selected in an
optional argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filter_cip(keep_text = NULL, ..., drop_text = NULL, cip = NULL, select = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>keep_text</code></td>
<td>
<p>Character vector of search text for retaining rows,
not case-sensitive. Can be empty if <code>drop_text</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used for passing values; forces subsequent arguments to be
referable only by name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_text</code></td>
<td>
<p>Optional character vector of search text for dropping
rows, default NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cip</code></td>
<td>
<p>Data frame to be searched. Default <code>cip</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>Optional character vector of column names to return,
default all columns.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Search terms can include regular expressions. Uses <code>grepl()</code>, therefore
non-character columns (if any) that can be coerced to character are also
searched for matches. Columns are subset by the values in <code>select</code> after the
search concludes.
</p>
<p>If none of the optional arguments are specified, the function returns the
original data frame.
</p>


<h3>Value</h3>

<p>A data frame in <code>data.table</code> format, a subset of <code>cip</code>,
with the following properties: exclude rows that match
elements of <code>drop_text</code>; of the remaining rows, include those that
match elements of <code>keep_text</code>; if <code>select</code> is empty, all columns are
preserved, otherwise only columns included in <code>select</code> are retained;
grouping structures are not preserved.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Subset using keywords
filter_cip(keep_text = "engineering")


    # Multiple passes to narrow the results
    first_pass &lt;- filter_cip("civil")
    second_pass &lt;- filter_cip("engineering", cip = first_pass)
    filter_cip(drop_text = "technology", cip = second_pass)
    
    # drop_text argument, when used, must be named
    filter_cip("civil engineering", drop_text = "technology")
    
    # Subset using numerical codes
    filter_cip(keep_text = c("050125", "160501"))
    
    # Subset using regular expressions
    filter_cip(keep_text = "^54")
    filter_cip(keep_text = c("^1407", "^1408"))
    
    # Select columns
    filter_cip(keep_text = "^54", select = c("cip6", "cip4name"))

</code></pre>


</div>