<div class="container">

<table style="width: 100%;"><tr>
<td>build_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a state migration (transition) matrix</h2>

<h3>Description</h3>

<p><code>build_matrix()</code> creates a state transition matrix from summarized data (i.e.,
a data frame returned by <code>migrate()</code>) representing each unique combination
of beginning &amp; ending states and a numeric metric.
</p>


<h3>Usage</h3>

<pre><code class="language-R">build_matrix(data, state_start = NULL, state_end = NULL, metric = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or data frame extension (e.g., a tibble or
data.table) containing a minimum of three (3) column variables representing
a starting credit risk state, an ending credit risk state, and a metric
containing values representing the movement (i.e., "transition) in that
metric between the starting credit risk state point in time and the ending
credit risk state point in time. This style of data frame is output by the
<code>migrate()</code> function within this package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_start</code></td>
<td>
<p>(Optional) A symbol or string, representing the column
variable of the <code>data</code> data frame argument that contains the starting
credit risk state values. If left null, function will attempt to find it
for you.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_end</code></td>
<td>
<p>(Optional) A symbol or string, representing the column
variable of the <code>data</code> data frame argument that contains the starting
credit risk state values. If left null, function will attempt to find it
for you.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>(Optional) A symbol or string, representing the column variable
of the <code>data</code> data frame argument that contains the metric for which the
grouped difference in value between the starting credit risk state period
and ending credit risk state period was computed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix object, where the first (row) dimension represents the starting
credit risk state, the second (column) dimension represents the ending credit
risk state, and the values within the matrix represent the transitioned
amount based upon the values in the <code>metric</code> numeric column variable from
the <code>data</code> data frame.
</p>
<p>Note: A matrix object can be coerced to a data frame using <code>as.data.frame()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Let `build_matrix()` guess which column variables represent `state_start`,
# `state_end` and `metric`
mock_credit |&gt;
  migrate(
    time = date,
    state = risk_rating,
    id = customer_id,
    metric = principal_balance
  ) |&gt;
  build_matrix()

# Specify which column variables represent `state_start`, `state_end` and
# `metric`
mock_credit |&gt;
  migrate(
    id = customer_id,
    time = date,
    state = risk_rating,
    percent = FALSE
  ) |&gt;
  build_matrix(
    state_start = risk_rating_start,
    state_end = risk_rating_end,
    metric = count
  )
</code></pre>


</div>