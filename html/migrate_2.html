<div class="container">

<table style="width: 100%;"><tr>
<td>migrate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize the migration of a data frame</h2>

<h3>Description</h3>

<p><code>migrate()</code> summarizes the transition amount (or percentage) of a numeric
variable from each beginning credit risk state category to each ending credit
risk state, given a data frame input.
</p>


<h3>Usage</h3>

<pre><code class="language-R">migrate(
  data,
  id,
  time,
  state,
  metric = NULL,
  percent = TRUE,
  fill_state = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or data frame extension (e.g., a tibble or
data.table) containing a minimum of three (3) column variables representing
a time, a credit risk state, and an ID identifying the credit facility (we
would expect to see most unique values in this column variable appear twice
in the dataset; once at the first unique <code>time</code> value and again at the
second unique <code>time</code> value, unless the ID only existed at one of those two
times).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>The column variable of the <code>data</code> data frame argument that contains
the unique identifier to track where a particular credit facility migrated
to/from. If left null, <code>migrate()</code> will attempt to use the first column
variable from the data frame provided in the <code>data</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The column variable of in the <code>data</code> data frame representing the
timepoint (e.g., a Date) of each observation; this column should contain
two unique values (migration from Time A to Time B)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state</code></td>
<td>
<p>The column variable of the <code>data</code> data frame argument that
contains the credit risk state values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>(Optional) The column variable of type "numeric" in the <code>data</code>
data frame argument that contains the continuous metric values to weight
the state migration by</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percent</code></td>
<td>
<p>If <code>FALSE</code>, will calculate the migration on an absolute basis
(rather than a percentage basis, which is the default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_state</code></td>
<td>
<p>(Optional) A value (e.g., a character string such as "No
Rating" or "NR") to be used as the <em>filler</em> <code>state</code> for any <code>id</code> values
that only exist at one timepoint in the <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>TRUE</code>, the function returns an informational message about
the transition period</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame containing three (3) column variables representing the unique
combinations of starting &amp; ending credit risk states and the calculated
migration observed during the period.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Return the percent migration of the number of credit facilities
migrate(
  data = mock_credit,
  id = customer_id,
  time = date,
  state = risk_rating
)

# Return the absolute migration in `principal_balance`
migrate(
  data = mock_credit,
  id = customer_id,
  time = date,
  state = risk_rating,
  metric = principal_balance,
  percent = FALSE
)

# Provide a filler `state` value when a unique `id` is missing a timepoint
migrate(
  data = head(mock_credit, n = 995),   # drop the last 5 observations
  id = customer_id,
  time = date,
  state = risk_rating,
  fill_state = "NR",
  percent = FALSE
)
</code></pre>


</div>