<div class="container">

<table style="width: 100%;"><tr>
<td>export</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export miic result for plotting (with igraph)</h2>

<h3>Description</h3>

<p>This function creates an object built from the result returned
by <code>miic</code> that is ready to be fed to the plotting method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">export(
  miic_obj,
  method = "igraph",
  pcor_palette = NULL,
  display = "compact",
  show_self_loops = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>miic_obj</code></td>
<td>
<p>[a miic object, required]
</p>
<p>The object returned by the <code>miic</code> execution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>[a string, optional, default value "igraph"]
</p>
<p>The plotting method, currently only "igraph" is supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcor_palette</code></td>
<td>
<p>[a color palette, optional, default value
grDevices::colorRampPalette(c("blue", "darkgrey", "red")]
</p>
<p>Used to represent the partial correlations (the color of the edges).
The palette must be able to handle 201 shades to cover the correlation range
from -100 to +100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display</code></td>
<td>
<p>[a string, optional, default value "compact"]
</p>
<p>Used only when exporting object returned by miic in temporal mode.
It allows different representations of the temporal graph.
Possible values are <em>"raw"</em>, <em>"lagged"</em>, <em>"compact"</em>,
<em>"combine"</em>, <em>"unique"</em>, <em>"drop"</em>:
</p>

<ul>
<li>
<p> When <em>display</em> = <em>"raw"</em>, the export function will
use the tmiic graph object as it, leading to the return of a lagged
graph.
</p>
</li>
<li>
<p> When <em>display</em> = <em>"lagged"</em>, the export function will
repeat the edges over history assuming stationarity and return a lagged
graph.
</p>
</li>
<li>
<p> When <em>display</em> = <em>"compact"</em>, the default, nodes
and edges are converted into a flattened version to produce a compact
view of the temporal network whilst still presenting all the information
in the export.<br>
e.g. X_lag1-&gt;Y_lag0, X_lag2&lt;-Y_lag0 become respectively X-&gt;Y lag=1,
X&lt;-Y lag=2.
</p>
</li>
<li>
<p> When <em>display</em> = <em>"combine"</em>, prior to the export,
a pre-processing will be applied to kept only one edge
per pair of nodes. The info_shifted will be the highest one
of the summarized edges whilst the lag and orientation of the
summarized edge will be an aggregation.<br>
e.g. X_lag2-&gt;Y_lag0, X_lag0&lt;-Y_lag1 will become X&lt;-&gt;Y lag=1-2 with
the info_shifted of X_lag2-&gt;Y_lag0 if info_shifted of
X_lag2-&gt;Y_lag0 &gt; X_lag0&lt;-Y_lag1.
</p>
</li>
<li>
<p> When <em>display</em> = <em>"unique"</em>, prior to the export,
a pre-processing will be applied to kept only the edges having the
highest info_shifted for a pair of nodes.
If several edges between the sames nodes have the same
info_shifted, then the edge kept is the one with the minimum lag.<br>
e.g. X_lag1-&gt;Y_lag0, X_lag0&lt;-Y_lag2 with info_shifted of
X_lag1-&gt;Y_lag0 &gt; X_lag0&lt;-Y_lag2 become X-&gt;Y lag=1.
</p>
</li>
<li>
<p> When <em>display</em> = <em>"drop"</em>, the same pre-processing
as <em>"unique"</em> will be applied, then the lag information will be
dropped before the export.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_self_loops</code></td>
<td>
<p>[a boolean, optional, TRUE by default]
</p>
<p>Used only when exporting object returned by miic in temporal mode.
When TRUE, the lagged edges starting and ending on the same node
are included in the igraph  object.
When FALSE, only edges having different nodes are present in the igraph
object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The behavior depends on the method used for the export.
</p>
<p>For igraph, edge attributes are passed to the igraph graph
and can be accessed with e.g. <code>E(g)$partial_correlation</code>.
See <code>miic</code> for more details on edge parameters.
By default, edges are colored according to the partial correlation
between two nodes conditioned on the conditioning set
(negative is blue, null is gray and positive is red)
and their width is based on the conditional mutual information
minus the complexity cost.
</p>


<h3>Value</h3>

<p>A graph object adapted to the method.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(miic)
data(hematoData)

# execute MIIC (reconstruct graph)
miic_obj &lt;- miic(
  input_data = hematoData, latent = "yes",
  n_shuffles = 10, conf_threshold = 0.001
)

# Using igraph
if(require(igraph)) {
g = export(miic_obj, "igraph")
plot(g) # Default visualisation, calls igraph::plot.igraph()

# Specifying layout (see ?igraph::layout_)
l &lt;-layout_with_kk(g)
plot(g, layout=l)

# Override some graphical parameters
plot(g, edge.curved = .2)
plot(g, vertex.shape="none", edge.color="gray85", vertex.label.color="gray10")
}

# In temporal mode, execute MIIC
data(covidCases)
tmiic_obj &lt;- miic(input_data = covidCases, mode = "TS", n_layers = 3, delta_t = 1, mov_avg = 14)

# Plot by default the compact display of the temporal network using igraph
if(require(igraph)) {
g = export (tmiic_obj)
plot(g)

# Plot the raw temporal network using igraph
g = export(tmiic_obj, display="raw")
plot(g)

# Plot the complete temporal network using igraph (completed by stationarity)
g = export(tmiic_obj, display="lagged")
plot(g)

# Specifying layout (see ?igraph::layout_)
l &lt;- layout_on_grid(g, width = 5, height = 3, dim = 2)
plot(g, layout=l)

# For compact temporal display, please be aware that the rendering of
# igraph::plot.igraph() is not optimal when the graph contains
# multiple edges between the same nodes.
# So, the recommend way to plot a compact graph is to use tmiic plotting:
plot(tmiic_obj)
}


</code></pre>


</div>