<div class="container">

<table style="width: 100%;"><tr>
<td>preprocess_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Preprocess data prior to running machine learning</h2>

<h3>Description</h3>

<p>Function to preprocess your data for input into <code>run_ml()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">preprocess_data(
  dataset,
  outcome_colname,
  method = c("center", "scale"),
  remove_var = "nzv",
  collapse_corr_feats = TRUE,
  to_numeric = TRUE,
  group_neg_corr = TRUE,
  prefilter_threshold = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Data frame with an outcome variable and other columns as features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome_colname</code></td>
<td>
<p>Column name as a string of the outcome variable
(default <code>NULL</code>; the first column will be chosen automatically).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Methods to preprocess the data, described in
<code>caret::preProcess()</code> (default: <code>c("center","scale")</code>, use <code>NULL</code> for
no normalization).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_var</code></td>
<td>
<p>Whether to remove variables with near-zero variance
(<code>'nzv'</code>; default), zero variance (<code>'zv'</code>), or none (<code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse_corr_feats</code></td>
<td>
<p>Whether to keep only one of perfectly correlated
features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_numeric</code></td>
<td>
<p>Whether to change features to numeric where possible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_neg_corr</code></td>
<td>
<p>Whether to group negatively correlated features
together (e.g. c(0,1) and c(1,0)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefilter_threshold</code></td>
<td>
<p>Remove features which only have non-zero &amp; non-NA
values N rows or fewer (default: 1). Set this to -1 to keep all columns at
this step. This step will also be skipped if <code>to_numeric</code> is set to
<code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Named list including:
</p>

<ul>
<li> <p><code>dat_transformed</code>: Preprocessed data.
</p>
</li>
<li> <p><code>grp_feats</code>: If features were grouped together, a named list of the features corresponding to each group.
</p>
</li>
<li> <p><code>removed_feats</code>: Any features that were removed during preprocessing (e.g. because there was zero variance or near-zero variance for those features).
</p>
</li>
</ul>
<p>If the <code>progressr</code> package is installed, a progress bar with time elapsed
and estimated time to completion can be displayed.
</p>


<h3>More details</h3>

<p>See the <a href="http://www.schlosslab.org/mikropml/articles/preprocess.html">preprocessing vignette</a>
for more details.
</p>
<p>Note that if any values in <code>outcome_colname</code> contain spaces, they will be
converted to underscores for compatibility with <code>caret</code>.
</p>


<h3>Author(s)</h3>

<p>Zena Lapp, <a href="mailto:zenalapp@umich.edu">zenalapp@umich.edu</a>
</p>
<p>Kelly Sovacool, <a href="mailto:sovacool@umich.edu">sovacool@umich.edu</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">preprocess_data(mikropml::otu_small, "dx")

# the function can show a progress bar if you have the progressr package installed
## optionally, specify the progress bar format
progressr::handlers(progressr::handler_progress(
  format = ":message :bar :percent | elapsed: :elapsed | eta: :eta",
  clear = FALSE,
  show_after = 0
))
## tell progressor to always report progress
## Not run: 
progressr::handlers(global = TRUE)
## run the function and watch the live progress udpates
dat_preproc &lt;- preprocess_data(mikropml::otu_small, "dx")

## End(Not run)
</code></pre>


</div>