<div class="container">

<table style="width: 100%;"><tr>
<td>generate_mild_df</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate mild_df using multivariate t and normal distributions.</h2>

<h3>Description</h3>

<p>This function samples multiple instance distributional data (a <code>mild_df</code>
object) where each row corresponds to a sample from a given instance
distribution.  Instance distributions can be multivariate t and normal, with
mean and variance parameters that can be fixed or sampled based on prior
parameters.  These instances are grouped into bags and the bag labels
follow the standard MI assumption.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_mild_df(
  nbag = 50,
  ninst = 4,
  nsample = 50,
  ncov = 10,
  nimp_pos = 1:ncov,
  nimp_neg = 1:ncov,
  positive_prob = 0.2,
  dist = c("mvt", "mvnormal", "mvnormal"),
  mean = list(rep(0, length(nimp_pos)), rep(0, length(nimp_neg)), 0),
  sd_of_mean = c(0.5, 0.5, 0.5),
  cov = list(diag(1, nrow = length(nimp_pos)), diag(1, nrow = length(nimp_neg)), 1),
  sample_cov = FALSE,
  df_wishart_cov = c(length(nimp_pos), length(nimp_neg), ncov - length(nimp_pos)),
  degree = c(3, NA, NA),
  positive_bag_prob = NULL,
  n_noise_inst = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nbag</code></td>
<td>
<p>The number of bags (default 50).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ninst</code></td>
<td>
<p>The number of instances for each bag (default 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsample</code></td>
<td>
<p>The number of samples for each instance (default 50).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncov</code></td>
<td>
<p>The number of total covariates (default 10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nimp_pos</code></td>
<td>
<p>An index of important covariates for positve instances
(default <code>1:ncov</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nimp_neg</code></td>
<td>
<p>An index of important covariates for negative instances
(default <code>1:ncov</code>).
(default <code>1:ncov</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positive_prob</code></td>
<td>
<p>A numeric value between 0 and 1 indicating the
probability of an instance being positive (default 0.2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>A vector (length 3) of distributions for the positive, negative, and
remaining instances, respectively.  Distributions can be one of
<code>'mvnormal'</code> for multivariate normal or <code>'mvt'</code> for multivariate
student's t.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>A list (length 3) of mean vectors for the positive, negative, and
remaining distributions.  <code>mean[[1]]</code> should match <code>nimp_pos</code> in length;
<code>mean[[2]]</code> should match <code>nimp_neg</code> in length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_of_mean</code></td>
<td>
<p>A vector (length 3) of standard deviations in sampling the
mean for positive, negative, and remaining distributions, where the prior
is given by <code>mean</code>.  Use <code>sd_of_mean = c(0, 0, 0)</code> to keep the mean
consistent across all instances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov</code></td>
<td>
<p>A list (length 3) of covariance matrices for the positive,
negative, and remaining distributions.  <code>cov[[3]]</code> should be an integer
since the dimension of remaining features can vary depending on if the
important distribution is positive or negative.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_cov</code></td>
<td>
<p>A logical value for whether to sample the covariance for
each distribution.  If <code>FALSE</code> (the default), each covariance is fixed at
<code>cov</code>. If <code>TRUE</code>, the prior is given by <code>cov</code> and sampled from a Wishart
distribution with <code>df_wishart_cov</code> degrees of freedom to have an
expectation of <code>cov</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_wishart_cov</code></td>
<td>
<p>A vector (length 3) of degrees-of-freedom to use in the
Wishart covariance matrix sampling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>degree</code></td>
<td>
<p>A vector (length 3) of degrees-of-freedom used when any of
<code>dist</code> is <code>'mvt'</code>.  This parameter is ignored when <code>dist[i] == 'mvnormal'</code>,
in which case <code>NA</code> can be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positive_bag_prob</code></td>
<td>
<p>A numeric value between 0 and 1 indicating the
probability of a bag being positive. Must be specified jointly with
<code>n_noise_inst</code>, in which case <code>positive_prob</code> is ignored.  If <code>NULL</code> (the
default), instance labels are sampled first according to <code>positive_prob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_noise_inst</code></td>
<td>
<p>An integer indicating the number of negative instances in
a positive bag. Must be specified jointly with <code>positive_bag_prob</code>.
<code>n_noise_inst</code> should be less than <code>ninst</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The first consideration to use this function is to determine the number of
bags, instances per bag, and samples per instance using the <code>nbag</code>, <code>ninst</code>,
and <code>nsample</code> arguments. Next, one must consider the number of covariates
<code>ncov</code>, and how those covariates will differ between instances with positive
and negative labels.  Some covariates can be common between the positive and
negative instances, which we call the remainder distribution.  Use <code>nimp_pos</code>
and <code>nimp_neg</code> to specify the index of the important (non-remainder)
covariates in the distributions with positive and negative instance labels.
</p>
<p>The structure of how many instances/bags are positive and negative is
determined by <code>positive_prob</code> or the joint specification of
<code>positive_bag_prob</code> and <code>n_noise_inst</code>. In the first case, instances labels
have independent Bernoulli draws based on <code>positive_prob</code> and bag labels are
determined by the standard MI assumption (i.e. positive if any instance in
the bag is positive).  In the second case, bag labels are drawn independently
as Bernoilli with <code>positive_bag_prob</code> chance of success.  Each positive bag
will be given <code>n_noise_inst</code> values with instance label of 0, and the
remaining with instance label of 1.
</p>
<p>The remaining arguments are used to determine the distributions used for the
positive, negative, and remaining features.  Each argument will be a vector
of list of length 3 corresponding to these 3 different groups.  To create
different distributions, the strategy is to first draw the mean parameter
from Normal(<code>mean</code>, <code>sd_of_mean</code> * I) and the covariance parameter from
Wishart(<code>df_wishart_cov</code>, <code>cov</code>), with expectation equal to <code>cov</code>.  Then we
can sample i.i.d. draws from the specified distribution (either multivariate
normal or student's t). To ensure that each instance distribution has the
same mean, set <code>sd_of_mean</code> to 0. To ensure that each instance distribution
has the same covariance, set <code>sample_cov = FALSE</code>.
</p>
<p>The final data.frame will have <code>nsample</code> * <code>nbag</code> * <code>ninst</code> rows and <code>ncov + 3</code> columns including the bag_label, bag_name, instance_name, and <code>ncov</code>
sampled covariates.
</p>


<h3>Value</h3>

<p>A <code>mild_df</code> object.
</p>


<h3>Author(s)</h3>

<p>Yifei Liu, Sean Kent
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(8)
mild_data &lt;- generate_mild_df(nbag = 7, ninst = 3, nsample = 20,
                              ncov = 2,
                              nimp_pos = 1,
                              dist = rep("mvnormal", 3),
                              mean = list(
                                rep(5, 1),
                                rep(15, 2),
                                0
                              ))

library(dplyr)
distinct(mild_data, bag_label, bag_name, instance_name)
split(mild_data[, 4:5], mild_data$instance_name) %&gt;%
  sapply(colMeans) %&gt;%
  round(2) %&gt;%
  t()
</code></pre>


</div>