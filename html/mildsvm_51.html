<div class="container">

<table style="width: 100%;"><tr>
<td>predict.mior</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predict method for <code>mior</code> object</h2>

<h3>Description</h3>

<p>Predict method for <code>mior</code> object
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'mior'
predict(
  object,
  new_data,
  type = c("class", "raw"),
  layer = c("bag", "instance"),
  new_bags = "bag_name",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>mior</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_data</code></td>
<td>
<p>A data frame to predict from. This needs to have all of the
features that the data was originally fitted with.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>If <code>'class'</code>, return predicted values with threshold of 0 as
-1 or +1.  If <code>'raw'</code>, return the raw predicted scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>If <code>'bag'</code>, return predictions at the bag level.  If
<code>'instance'</code>, return predictions at the instance level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_bags</code></td>
<td>
<p>A character or character vector.  Can specify a singular
character that provides the column name for the bag names in <code>new_data</code>
(default <code>'bag_name'</code>).  Can also specify a vector of length
<code>nrow(new_data)</code> that has bag name for each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When the object was fitted using the <code>formula</code> method, then the parameters
<code>new_bags</code> and <code>new_instances</code> are not necessary, as long as the names match
the original function call.
</p>


<h3>Value</h3>

<p>A tibble with <code>nrow(new_data)</code> rows.  If <code>type = 'class'</code>, the tibble
will have a column <code>.pred_class</code>.  If <code>type = 'raw'</code>, the tibble will have
a column <code>.pred</code>.
</p>


<h3>Author(s)</h3>

<p>Sean Kent
</p>


<h3>See Also</h3>

<p><code>mior()</code> for fitting the <code>mior</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (require(gurobi)) {
  set.seed(8)
  # make some data
  n &lt;- 15
  X &lt;- rbind(
    mvtnorm::rmvnorm(n/3, mean = c(4, -2, 0)),
    mvtnorm::rmvnorm(n/3, mean = c(0, 0, 0)),
    mvtnorm::rmvnorm(n/3, mean = c(-2, 1, 0))
  )
  score &lt;- X %*% c(2, -1, 0)
  y &lt;- as.numeric(cut(score, c(-Inf, quantile(score, probs = 1:2 / 3), Inf)))
  bags &lt;- 1:length(y)

  # add in points outside boundaries
  X &lt;- rbind(
    X,
    mvtnorm::rmvnorm(n, mean = c(6, -3, 0)),
    mvtnorm::rmvnorm(n, mean = c(-6, 3, 0))
  )
  y &lt;- c(y, rep(-1, 2*n))
  bags &lt;- rep(bags, 3)
  repr &lt;- c(rep(1, n), rep(0, 2*n))

  y_bag &lt;- classify_bags(y, bags, condense = FALSE)

  mdl1 &lt;- mior(X, y_bag, bags)
  # summarize predictions at the bag layer
  library(dplyr)
  df1 &lt;- bind_cols(y = y_bag, bags = bags, as.data.frame(X))
  df1 %&gt;%
    bind_cols(predict(mdl1, df1, new_bags = bags, type = "class")) %&gt;%
    bind_cols(predict(mdl1, df1, new_bags = bags, type = "raw")) %&gt;%
    distinct(y, bags, .pred_class, .pred)
}

</code></pre>


</div>