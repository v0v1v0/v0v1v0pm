<div class="container">

<table style="width: 100%;"><tr>
<td>predict.smm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predict method for <code>smm</code> object</h2>

<h3>Description</h3>

<p>Predict method for <code>smm</code> object
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'smm'
predict(
  object,
  new_data,
  type = c("class", "raw"),
  layer = "instance",
  new_instances = "instance_name",
  new_bags = "bag_name",
  kernel = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class <code>smm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_data</code></td>
<td>
<p>A data frame to predict from. This needs to have all of the
features that the data was originally fitted with.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>If <code>'class'</code>, return predicted values with threshold of 0 as
-1 or +1.  If <code>'raw'</code>, return the raw predicted scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>If <code>'instance'</code>, return predictions at the instance level.
Option <code>'bag'</code> returns predictions at the bag level, but only if the model
was fit with <code>smm.mild_df()</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_instances</code></td>
<td>
<p>A character or character vector.  Can specify a singular
character that provides the column name for the instance names in
<code>new_data</code> (default <code>'instance_name'</code>).  Can also specify a vector of length
<code>nrow(new_data)</code> that has instance name for each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_bags</code></td>
<td>
<p>A character or character vector.  Only relevant when fit with
<code>smm.mild_df()</code>, which contains bag level information.  Can specify a
singular character that provides the column name for the bag names in
<code>new_data</code>, default = "bag_name".  Can also specify a vector of length
<code>nrow(new_data)</code> that has bag name for each instance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernel</code></td>
<td>
<p>An optional pre-computed kernel matrix at the instance level or
<code>NULL</code> (default <code>NULL</code>). The rows should correspond to instances in the new
data to predict, and columns should correspond to instances in the original
training data, such as a call to <code>kme()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When the object was fitted using the <code>formula</code> method, then the parameters
<code>new_bags</code> and <code>new_instances</code> are not necessary, as long as the names match
the original function call.
</p>


<h3>Value</h3>

<p>tibble with <code>nrow(new_data)</code> rows.  If <code>type = 'class'</code>, the tibble
will have a column named <code>.pred_class</code>.  If <code>type = 'raw'</code>, the tibble will
have a column name <code>.pred</code>.
</p>


<h3>Author(s)</h3>

<p>Sean Kent
</p>


<h3>See Also</h3>

<p><code>smm()</code> for fitting the <code>smm</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(8)
n_instances &lt;- 10
n_samples &lt;- 20
y &lt;- rep(c(1, -1), each = n_samples * n_instances / 2)
instances &lt;- as.character(rep(1:n_instances, each = n_samples))
x &lt;- data.frame(x1 = rnorm(length(y), mean = 1*(y==1)),
                x2 = rnorm(length(y), mean = 2*(y==1)),
                x3 = rnorm(length(y), mean = 3*(y==1)))

mdl &lt;- smm(x, y, instances, control = list(sigma = 1/3))

# instance level predictions (training data)
suppressWarnings(library(dplyr))
data.frame(instance_name = instances, y = y, x) %&gt;%
  bind_cols(predict(mdl, type = "raw", new_data = x, new_instances = instances)) %&gt;%
  bind_cols(predict(mdl, type = "class", new_data = x, new_instances = instances)) %&gt;%
  distinct(instance_name, y, .pred, .pred_class)

# test data
new_inst &lt;- rep(c("11", "12"), each = 30)
new_y &lt;- rep(c(1, -1), each = 30)
new_x &lt;- data.frame(x1 = rnorm(length(new_inst), mean = 1*(new_inst=="11")),
                    x2 = rnorm(length(new_inst), mean = 2*(new_inst=="11")),
                    x3 = rnorm(length(new_inst), mean = 3*(new_inst=="11")))

# instance level predictions (test data)
data.frame(instance_name = new_inst, y = new_y, new_x) %&gt;%
  bind_cols(predict(mdl, type = "raw", new_data = new_x, new_instances = new_inst)) %&gt;%
  bind_cols(predict(mdl, type = "class", new_data = new_x, new_instances = new_inst)) %&gt;%
  distinct(instance_name, y, .pred, .pred_class)

</code></pre>


</div>