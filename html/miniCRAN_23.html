<div class="container">

<table style="width: 100%;"><tr>
<td>updatePackages</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check for available package updates in a miniCRAN repo.</h2>

<h3>Description</h3>

<p><code>oldPackages()</code> indicates packages which have a (suitable) later version on
the repositories whereas <code>updatePackages()</code> offers to download and install
such packages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">oldPackages(
  path = NULL,
  repos = getOption("repos"),
  availPkgs = pkgAvail(repos = repos, type = type, Rversion = Rversion),
  method,
  availableLocal = pkgAvail(repos = path, type = type, Rversion = Rversion, quiet =
    quiet),
  type = "source",
  Rversion = R.version,
  quiet = FALSE
)

updatePackages(
  path = NULL,
  repos = getOption("repos"),
  method = NULL,
  ask = TRUE,
  availPkgs = pkgAvail(repos = repos, type = type, Rversion = Rversion),
  oldPkgs = NULL,
  type = "source",
  Rversion = R.version,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Destination download path. This path is the root folder of your
new repository.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repos</code></td>
<td>
<p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"https://cran.us.r-project.org"</code>. Passed to <code>available.packages()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>availPkgs</code></td>
<td>
<p>Data frame with an element called <code>package</code>. The <code>package</code>
element is a vector of available packages.  Defaults to reading this list
from CRAN, using <code>available.packages()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Download method, see <code>download.file()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>availableLocal</code></td>
<td>
<p>all packages hosted in the miniCRAN repo, as returned
by <code>pkgAvail()</code>. A subset can be specified; currently this must be in the
same (character matrix) format as returned by <code>pkgAvail()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Possible values are (currently) "source", "mac.binary" and
"win.binary": the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code>download.packages()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rversion</code></td>
<td>
<p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to R.version, but this can be specified as any of the following formats:
</p>

<ul>
<li>
<p> a character string with the two digit R version, e.g. "3.1"
</p>
</li>
<li>
<p> a list with components <code>major</code> and <code>minor</code>
</p>
</li>
<li>
<p> the result of <code>getRversion()</code>
</p>
</li>
<li>
<p> the result of R.version
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>logical indicating whether to ask user before packages are
actually downloaded and installed.  Alternatively, the value <code>"graphics"</code>
starts an interactive widget to allow the user to (de-)select from the list of
packages which could be updated or added. The latter value only works on
systems with a GUI version of <code>select.list()</code>, and is otherwise equivalent
to <code>ask = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oldPkgs</code></td>
<td>
<p>if specified as non-NULL, <code>updatePackages()</code> only considers
these packages for updating. This may be a character vector of package
names or a matrix as returned by <code>oldPackages()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are based on <code>update.packages()</code>.  However, rather than
looking for locally installed packages they look for the package source and
binaries in the miniCRAN repository.
</p>


<h3>Value</h3>

<p><code>oldPackages()</code> returns a matrix with one row per package and columns
for "Package", "LocalVer", "ReposVer" and "Repository".  The matrix row
names the package names.
</p>
<p><code>updatePackages</code> returns <code>NULL</code> invisibly.
</p>


<h3>See Also</h3>

<p><code>updatePackages()</code>, <code>pkgAvail()</code>.
</p>
<p>Other update repo functions: 
<code>addOldPackage()</code>,
<code>addPackage()</code>,
<code>checkVersions()</code>,
<code>makeRepo()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">### `oldPackages` and `updatePackages` require an existing miniCRAN repo

# Specify list of packages to download
mirror &lt;- c(CRAN = "https://cloud.r-project.org")
pkgs &lt;- c("foreach")

pdb &lt;- cranJuly2014

if (interactive()) {
  pdb &lt;- pkgAvail(repos = mirror, type = "source")
  
  pkgList &lt;- pkgDep(pkgs, availPkgs = pdb, repos = mirror, type = "source", suggests = FALSE)
  pkgList
  
  # Create temporary folder for miniCRAN
  dir.create(pth &lt;- file.path(tempdir(), "miniCRAN"))
  
  # create the miniCRAN directory structure but only add bin files
  makeRepo(pkgList, path = pth, repos = mirror, type = "source", download = FALSE)
  makeRepo(pkgList, path = pth, repos = mirror, type = "win.binary", download = TRUE)
  
  # download old source package version and create repo index
  oldVers &lt;- data.frame(package = c("foreach", "codetools", "iterators"),
                        version = c("1.4.0", "0.2-7", "1.0.5"),
                        stringsAsFactors = FALSE)
  addOldPackage(pkgList, path = pth, repos = mirror, vers = oldVers$version, type = "source")
  # NOTE: older binary versions would need to be build from source
  
  # Check if updated packages are available
  oldPackages(path = pth, repos = mirror, type = "source") # should need update
  oldPackages(path = pth, repos = mirror, type = "win.binary") # should be current
  
  # Update available packages
  updatePackages(path = pth, repos = mirror, type = "source", ask = FALSE) # should need update
  updatePackages(path = pth, repos = mirror, type = "win.binary") # should be current
  
  # Delete temporary folder
  unlink(pth, recursive = TRUE)
}
</code></pre>


</div>