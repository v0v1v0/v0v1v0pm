<div class="container">

<table style="width: 100%;"><tr>
<td>nls.lm.control</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Control various aspects of the Levenberg-Marquardt algorithm</h2>

<h3>Description</h3>

<p>Allow the user to set some characteristics 
Levenberg-Marquardt nonlinear least squares algorithm implemented
in <code>nls.lm</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nls.lm.control(ftol = sqrt(.Machine$double.eps),
ptol = sqrt(.Machine$double.eps), gtol = 0, diag = list(), epsfcn = 0,
factor = 100, maxfev = integer(), maxiter = 50, nprint = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ftol</code></td>
<td>
<p>non-negative numeric. Termination occurs when
both the actual and predicted relative reductions in the sum of
squares are at most <code>ftol</code>. Therefore, <code>ftol</code> measures
the relative error desired in the sum of squares.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptol</code></td>
<td>
<p>non-negative numeric. Termination occurs when
the relative error between two consecutive iterates is at most
<code>ptol</code>. Therefore, <code>ptol</code> measures the relative error
desired in the approximate solution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gtol</code></td>
<td>
<p>non-negative numeric. Termination occurs when
the cosine of the angle between result of <code>fn</code> evaluation
<code class="reqn">fvec</code> and any column of the Jacobian is at most <code>gtol</code>
in absolute value. Therefore, <code>gtol</code> measures the
orthogonality desired between the function vector and the
columns of the Jacobian.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>
<p>a list or numeric vector containing positive
entries that serve as multiplicative scale factors for the
parameters. Length of <code>diag</code> should be equal to that of
<code>par</code>. If not, user-provided <code>diag</code> is ignored and
<code>diag</code> is internally set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsfcn</code></td>
<td>
<p>(used if <code>jac</code> is not provided) is a
numeric used in determining a suitable step for the
forward-difference approximation. This approximation assumes
that the relative errors in the functions are of the order of
<code>epsfcn</code>. If <code>epsfcn</code> is less than the machine
precision, it is assumed that the relative errors in the
functions are of the order of the machine precision.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor</code></td>
<td>
<p>positive numeric, used in determining the
initial step bound.  This bound is set to the product of
<code>factor</code> and the <code class="reqn">|\code{diag}*\code{par}|</code> if nonzero,
or else to <code>factor</code> itself. In most cases <code>factor</code>
should lie in the interval (0.1,100). 100 is a generally
recommended value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxfev</code></td>
<td>
<p>integer; termination occurs
when the number of calls to <code>fn</code> has reached <code>maxfev</code>.
Note that <code>nls.lm</code> sets the value of <code>maxfev</code> to 
<code>100*(length(par) + 1)</code> if 
<code>maxfev = integer()</code>, where <code>par</code> is the list or
vector of parameters to be optimized.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>
<p>positive integer. Termination occurs
when the number of iterations reaches <code>maxiter</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nprint</code></td>
<td>
<p>is an integer; set <code>nprint</code> to be positive
to enable printing of iterates</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>list</code> with exactly nine components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>ftol</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptol</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gtol</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsfcn</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxfev</code></td>
<td>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nprint</code></td>
<td>
</td>
</tr>
</table>
<p>with meanings as explained under ‘Arguments’.
</p>


<h3>References</h3>

<p>J.J. Moré, "The Levenberg-Marquardt algorithm: implementation and
theory," in <em>Lecture Notes in Mathematics</em>
<b>630</b>: Numerical Analysis, G.A. Watson (Ed.),
Springer-Verlag: Berlin, 1978, pp. 105-116.
</p>


<h3>See Also</h3>

<p><code>nls.lm</code></p>


<h3>Examples</h3>

<pre><code class="language-R">nls.lm.control(maxiter = 4)
</code></pre>


</div>