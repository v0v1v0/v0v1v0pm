<div class="container">

<table style="width: 100%;"><tr>
<td>make_cluster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make Mirai Cluster</h2>

<h3>Description</h3>

<p><code>make_cluster</code> creates a cluster of type ‘miraiCluster’, which
may be used as a cluster object for any function in the <span class="pkg">parallel</span>
base package such as <code>clusterApply</code> or
<code>parLapply</code>.
</p>
<p><code>stop_cluster</code> stops a cluster created by <code>make_cluster</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_cluster(n, url = NULL, remote = NULL, ...)

stop_cluster(cl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer number of nodes (automatically launched on the local machine
unless ‘url’ is supplied).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>url</code></td>
<td>
<p>[default NULL] (specify for remote nodes) the character URL on the
host for remote nodes to dial into, including a port accepting incoming
connections, e.g. 'tcp://10.75.37.40:5555'. Specify a URL with the scheme
‘tls+tcp://’ to use secure TLS connections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remote</code></td>
<td>
<p>[default NULL] (specify to launch remote nodes) a remote launch
configuration generated by <code>remote_config</code> or
<code>ssh_config</code>. If not supplied, nodes may be deployed manually
on remote resources.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed onto <code>daemons</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl</code></td>
<td>
<p>a ‘miraiCluster’.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For <strong>make_cluster</strong>: An object of class ‘miraiCluster’
and ‘cluster’. Each ‘miraiCluster’ has an automatically
assigned ID and ‘n’ nodes of class ‘miraiNode’. If
‘url’ is supplied but not ‘remote’, the shell commands for
deployment of nodes on remote resources are printed to the console.
</p>
<p>For <strong>stop_cluster</strong>: invisible NULL.
</p>


<h3>Remote Nodes</h3>

<p>Specify ‘url’ and ‘n’ to set up a host connection for
remote nodes to dial into. ‘n’ defaults to one if not specified.
</p>
<p>Also specify ‘remote’ to launch the nodes using a configuration
generated by <code>remote_config</code> or <code>ssh_config</code>.
In this case, the number of nodes is inferred from the configuration
provided and ‘n’ is disregarded.
</p>
<p>If ‘remote’ is not supplied, the shell commands for deploying
nodes manually on remote resources are automatically printed to the
console.
</p>
<p><code>launch_remote</code> may be called at any time on a
‘miraiCluster’ to return the shell commands for deployment of all
nodes, or on a ‘miraiNode’ to return the command for a single node.
</p>


<h3>Status</h3>

<p>Call <code>status</code> on a ‘miraiCluster’ to check the number
of currently active connections as well as the host URL.
</p>


<h3>Errors</h3>

<p>Errors are thrown by the ‘parallel’ mechanism if one or more nodes
failed (quit unexpectedly). The resulting ‘errorValue’ returned is
19 (Connection reset). Other types of error, e.g. in evaluation, should
result in the usual ‘miraiError’ being returned.
</p>


<h3>Note</h3>

<p>The default behaviour of clusters created by this function is designed
to map as closely as possible to clusters created by the <span class="pkg">parallel</span>
package. However, ‘...’ arguments are passed onto
<code>daemons</code> for additional customisation if desired, although
resultant behaviour may not always be supported.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
# Only run examples in interactive R sessions

cl &lt;- make_cluster(2)
cl
cl[[1L]]

Sys.sleep(0.5)
status(cl)

stop_cluster(cl)

}

</code></pre>


</div>