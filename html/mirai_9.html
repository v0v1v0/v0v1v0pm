<div class="container">

<table style="width: 100%;"><tr>
<td>collect_mirai</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>mirai (Collect Value)</h2>

<h3>Description</h3>

<p><code>collect_mirai</code> waits for the ‘mirai’ to resolve if still in
progress, and returns its value directly. It is a more efifcient version
of and equivalent to <code>call_mirai(x)$data</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">collect_mirai(x)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a ‘mirai’ object, or list of ‘mirai’ objects.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function will wait for the asynchronous operation(s) to
complete if still in progress (blocking), and is not interruptible.
</p>
<p><code>x[]</code> may be used to wait for and return the value of a mirai
<code>x</code>, and is the user-interruptible counterpart to
<code>collect_mirai(x)</code>.
</p>


<h3>Value</h3>

<p>An object (the return value of the ‘mirai’), or a list of such
objects (the same length as ‘x’, preserving names).
</p>


<h3>Alternatively</h3>

<p>The value of a ‘mirai’ may be accessed at any time at
<code>$data</code>, and if yet to resolve, an ‘unresolved’ logical NA
will be returned instead.
</p>
<p>Using <code>unresolved</code> on a ‘mirai’ returns TRUE only if
it has yet to resolve and FALSE otherwise. This is suitable for use in
control flow statements such as <code>while</code> or <code>if</code>.
</p>


<h3>Errors</h3>

<p>If an error occurs in evaluation, the error message is returned as a
character string of class ‘miraiError’ and ‘errorValue’
(the stack trace is available at <code>$stack.trace</code> on the error
object). <code>is_mirai_error</code> may be used to test for this.
</p>
<p>If a daemon crashes or terminates unexpectedly during evaluation, an
‘errorValue’ 19 (Connection reset) is returned (when not using
dispatcher or using dispatcher with <code>retry = FALSE</code>). Otherwise,
using dispatcher with <code>retry = TRUE</code>, the mirai will remain
unresolved and is automatically re-tried on the next daemon to connect to
the particular instance. To cancel the task instead, use
<code>saisei(force = TRUE)</code> (see <code>saisei</code>).
</p>
<p><code>is_error_value</code> tests for all error conditions including
‘mirai’ errors, interrupts, and timeouts.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
# Only run examples in interactive R sessions

# using collect_mirai()
df1 &lt;- data.frame(a = 1, b = 2)
df2 &lt;- data.frame(a = 3, b = 1)
m &lt;- mirai(as.matrix(rbind(df1, df2)), df1 = df1, df2 = df2, .timeout = 1000)
collect_mirai(m)

# using x[]
m[]

}

</code></pre>


</div>