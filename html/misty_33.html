<div class="container">

<table style="width: 100%;"><tr>
<td>cluster.scores</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cluster Scores</h2>

<h3>Description</h3>

<p>This function computes group means by default.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cluster.scores(..., data = NULL, cluster,
              fun = c("mean", "sum", "median", "var", "sd", "min", "max"),
              expand = TRUE, append = TRUE, name = ".a", as.na = NULL,
              check = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>a numeric vector for computing cluster scores for a variable,
matrix or data frame for computing cluster scores for more than
one variable. Alternatively, an expression indicating the variable
names in <code>data</code> e.g., <code>ci.mean(x1, x2, data = dat)</code>.
Note that the operators
<code>.</code>, <code>+</code>, <code>-</code>, <code>~</code>, <code>:</code>, <code>::</code>,
and <code>!</code> can also be used to select variables, see 'Details'
in the <code>df.subset</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame when specifying one or more variables in the
argument <code>...</code>. Note that the argument is <code>NULL</code>
when specifying a numeric vector, matrix, or data frame for
the argument <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>either a character string indicating the variable name of
the cluster variable in <code>...</code> or <code>data</code>, or a
vector representing the nested grouping structure (i.e.,
group or cluster variable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>character string indicating the function used to compute group
scores, default: <code>"mean"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expand</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), vector of cluster scores is expanded
to match the input vector <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), cluster scores are
appended to the data frame specified in the argument <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>a character string or character vector indicating the names
of the computed variables. By default, variables are named with the ending
<code>".a"</code> resulting in e.g. <code>"x1.a"</code> and <code>"x2.a"</code>. Variable names
can also be specified using a character vector matching the number
of variables specified in <code>x</code> (e.g.,
<code>name = c("cluster.x1", "cluster.x2")</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.na</code></td>
<td>
<p>a numeric vector indicating user-defined missing values, i.e.
these values are converted to <code>NA</code> before conducting the
analysis. Note that <code>as.na()</code> function is only applied to
the argument <code>x</code>, but not to <code>cluster</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), argument specification is checked.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a numeric vector or data frame containing cluster scores with the same
length or same number of rows as <code>x</code> if <code>expand = TRUE</code> or with the
length or number of rows as <code>length(unique(cluster))</code> if <code>expand = FALSE</code>.
</p>


<h3>Author(s)</h3>

<p>Takuya Yanagida <a href="mailto:takuya.yanagida@univie.ac.at">takuya.yanagida@univie.ac.at</a>
</p>


<h3>References</h3>

<p>Hox, J., Moerbeek, M., &amp; van de Schoot, R. (2018). <em>Multilevel analysis:
Techniques and applications</em> (3rd. ed.). Routledge.
</p>
<p>Snijders, T. A. B., &amp; Bosker, R. J. (2012). <em>Multilevel analysis: An
introduction to basic and advanced multilevel modeling</em> (2nd ed.). Sage
Publishers.
</p>


<h3>See Also</h3>

<p><code>item.scores</code>, <code>multilevel.descript</code>,
<code>multilevel.icc</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data set "Demo.twolevel" in the lavaan package
data("Demo.twolevel", package = "lavaan")

# Example 1a: Compute cluster means for 'y1' and expand to match the input 'y1'
cluster.scores(Demo.twolevel$y1, cluster = Demo.twolevel$cluster)

# Example 1b: Alternative specification using the 'data' argument
cluster.scores(y1, data = Demo.twolevel, cluster = "cluster")

# Example 2: Compute standard deviation for each cluster
# and expand to match the input x
cluster.scores(Demo.twolevel$y1, cluster = Demo.twolevel$cluster, fun = "sd")

# Example 3: Compute cluster means without expanding the vector
cluster.scores(Demo.twolevel$y1, cluster = Demo.twolevel$cluster, expand = FALSE)

# Example 4a: Compute cluster means for 'y1' and 'y2' and append to 'Demo.twolevel'
cbind(Demo.twolevel,
      cluster.scores(Demo.twolevel[, c("y1", "y2")], cluster = Demo.twolevel$cluster))

# Example 4b: Alternative specification using the 'data' argument
cluster.scores(y1, y2, data = Demo.twolevel, cluster = "cluster")
</code></pre>


</div>