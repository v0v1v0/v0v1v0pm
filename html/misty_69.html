<div class="container">

<table style="width: 100%;"><tr>
<td>mplus.update</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mplus Input Updating</h2>

<h3>Description</h3>

<p>This function updates specific input command sections of a <code>misty.object</code>
of type <code>mplus</code> to create an updated Mplus input file, run the updated
input file by using the <code>mplus.run()</code> function, and print the updated Mplus
output file by using the <code>mplus.print()</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mplus.update(x, update, file = "Mplus_Input_Update.inp", comment = FALSE,
             replace.inp = TRUE, mplus.run = TRUE,
             show.out = FALSE, replace.out = c("always", "never", "modified"),
             print = c("all", "input", "result"),
             input = c("all", "default", "data", "variable", "define",
                       "analysis", "model", "montecarlo", "mod.pop", "mod.cov",
                       "mod.miss", "message"),
             result = c("all", "default", "summary.analysis.short",
                        "summary.data.short", "random.starts", "summary.fit",
                        "mod.est", "fit", "class.count", "classif",
                        "mod.result", "total.indirect"),
             exclude = NULL, variable = FALSE, not.input = TRUE, not.result = TRUE,
             write = NULL, append = TRUE, check = TRUE, output = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>misty.object</code> object of type <code>mplus</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update</code></td>
<td>
<p>a character string containing the updated input command
sections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>a character string indicating the name of the updated Mplus
input file with or without the file extension <code>.inp</code>,
e.g., <code>"Mplus_Input_Update.inp"</code> or <code>"Mplus_Input_Update"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comment</code></td>
<td>
<p>logical: if <code>FALSE</code> (default), comments (i.e., text
after the <code>!</code> symbol) are removed from the input text
specified in the argument <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace.inp</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), an existing input
file will be replaced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mplus.run</code></td>
<td>
<p>logical: if <code>TRUE</code>, the input file specified in the
argument <code>file</code> containing the input text specified
in the argument <code>x</code> is run using the <code>mplus.run</code>
function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.out</code></td>
<td>
<p>logical: if <code>TRUE</code>, estimation output (<code>TECH8</code>)
is show on the R console. Note that if run within Rgui,
output will display within R, but if run via Rterm, a
separate window will appear during estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace.out</code></td>
<td>
<p>a character string for specifying three settings:
<code>"always"</code> (default), which runs all models, regardless
of whether an output file for the model exists, <code>"never"</code>,
which does not run any model that has an existing output file,
and <code>"modified"</code>, which only runs a model if the
modified date for the input file is more recent than the
output file modified date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>a character vector indicating which results to show, i.e.
<code>"all"</code> (default) for all results <code>"input"</code> for
input command sections, and <code>"result"</code> for result sections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>a character vector specifying Mplus input command sections
included in the output (see 'Details' in the <code>mplus.print</code>
function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>a character vector specifying Mplus result sections included
in the output (see 'Details' in the <code>mplus.print</code>
function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>a character vector specifying Mplus input command or result
sections excluded from the output (see 'Details' in the
<code>mplus.print</code> function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>logical: if <code>TRUE</code>, names of the variables in the data
set (<code>NAMES ARE</code>) specified in the <code>VARIABLE:</code>
command section are shown. By default, names of the variables
in the data set are excluded from the output unless all variables
are used in the analysis (i.e., no <code>USEVARIABLES</code> command
specified in the Mplus input file).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>not.input</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), character vector indicating
the input commands not requested are shown on the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>not.result</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), character vector indicating
the result sections not requested are shown on the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write</code></td>
<td>
<p>a character string naming a file for writing the output into
a text file with file extension <code>".txt"</code> (e.g.,
<code>"Output.txt"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output will be appended
to an existing text file with extension <code>.txt</code> specified
in <code>write</code>, if <code>FALSE</code> existing text file will be
overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), argument specification is
checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output is shown on the
console by using the function <code>mplus.print</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>


<dl>
<dt><strong>Mplus Input Sections</strong></dt>
<dd>
<p>The function is used to update
following Mplus input sections:
</p>

<ul>
<li>
<p><code>TITLE</code>
</p>
</li>
<li>
<p><code>DATA</code>
</p>
</li>
<li>
<p><code>DATA IMPUTATION</code>
</p>
</li>
<li>
<p><code>DATA WIDETOLONG</code>
</p>
</li>
<li>
<p><code>DATA LONGTOWIDE</code>
</p>
</li>
<li>
<p><code>DATA TWOPARTE</code>
</p>
</li>
<li>
<p><code>DATA MISSING</code>
</p>
</li>
<li>
<p><code>DATA SURVIVAL</code>
</p>
</li>
<li>
<p><code>DATA COHORT</code>
</p>
</li>
<li>
<p><code>VARIABLE</code>
</p>
</li>
<li>
<p><code>DEFINE</code>
</p>
</li>
<li>
<p><code>ANALYSIS</code>
</p>
</li>
<li>
<p><code>MODEL</code>
</p>
</li>
<li>
<p><code>MODEL INDIRECT</code>
</p>
</li>
<li>
<p><code>MODEL CONSTRAINT</code>
</p>
</li>
<li>
<p><code>MODEL TEST</code>
</p>
</li>
<li>
<p><code>MODEL PRIORS</code>
</p>
</li>
<li>
<p><code>MODEL MONTECARLO</code>
</p>
</li>
<li>
<p><code>MODEL POPULATION</code>
</p>
</li>
<li>
<p><code>MODEL COVERAGE</code>
</p>
</li>
<li>
<p><code>MODEL MISSING</code>
</p>
</li>
<li>
<p><code>OUTPUT</code>
</p>
</li>
<li>
<p><code>SAVEDATA</code>
</p>
</li>
<li>
<p><code>PLOT</code>
</p>
</li>
</ul>
</dd>
<dt><strong>The <code>...;</code> Specification</strong></dt>
<dd>
<p>The <code>...;</code> Specification
is used to update specific options in the <code>VARIABLE</code> and <code>ANALYSIS</code>
section, while keeping all other options in the <code>misty.object</code> of type
<code>mplus</code> specified in the argument <code>x</code>. The <code>...;</code> specification
is only available for the <code>VARIABLE</code> and <code>ANALYSIS</code> section. Note
that <code>...;</code> including the semicolon <code>;</code> needs to be specified,
i.e., <code>...</code> without the semicolon <code>;</code> will result in an error message.</p>
</dd>
<dt><strong>The <code>---;</code> Specification</strong></dt>
<dd>
<p>The <code>---;</code> specification is
used to remove entire sections (e.g., <code>OUTPUT: ---;</code>) or options within the
<code>VARIABLE:</code> and <code>ANALYSIS:</code> section (e.g., <code>ANALYSIS: ESTIMATOR IS ---;</code>)
from the Mplus input. Note that <code>---;</code> including the semicolon <code>;</code>
needs to be specified, i.e., <code>---</code> without the semicolon <code>;</code> will
result in an error message.</p>
</dd>
<dt><strong>Comments in the Mplus Input</strong></dt>
<dd>
<p>Comments in the Mplus Input can cause
problems when following keywords in uppercase, lower case, or mixed upper and lower
case letters are involved in the comments of the <code>VARIABLE</code> and <code>ANALYSIS</code>
section:
</p>

<ul>
<li>
<p><strong><code>VARIABLE</code> section</strong>: <code>"NAMES", "USEOBSERVATIONS",
     "USEVARIABLES", "MISSING", "CENSORED", "CATEGORICAL", "NOMINAL", "COUNT",
     "DSURVIVAL", "GROUPING", "IDVARIABLE", "FREQWEIGHT", "TSCORES", "AUXILIARY",
     "CONSTRAINT", "PATTERN", "STRATIFICATION", "CLUSTER", "WEIGHT", "WTSCALE",
     "BWEIGHT", "B2WEIGHT", "B3WEIGHT", "BWTSCALE", "REPWEIGHTS", "SUBPOPULATION",
     "FINITE", "CLASSES", "KNOWNCLASS", "TRAINING", "WITHIN", "BETWEEN", "SURVIVAL",
     "TIMECENSORED", "LAGGED"</code>, or <code>"TINTERVAL"</code>.
</p>
</li>
<li>
<p><strong><code>ANALYSIS</code> section</strong>: <code>"TYPE", "ESTIMATOR", "MODEL",
     "ALIGNMENT", "DISTRIBUTION", "PARAMETERIZATION", "LINK", "ROTATION",
     "ROWSTANDARDIZATION", "PARALLEL", "REPSE", "BASEHAZARD", "CHOLESKY", "ALGORITHM",
     "INTEGRATION", "MCSEED", "ADAPTIVE", "INFORMATION", "BOOTSTRAP", "LRTBOOTSTRAP",
     "STARTS", "STITERATIONS", "STCONVERGENCE", "STSCALE", "STSEED", "OPTSEED",
     "K-1STARTS", "LRTSTARTS", "RSTARTS", "ASTARTS", "H1STARTS", "DIFFTEST",
     "MULTIPLIER", "COVERAGE", "ADDFREQUENCY", "ITERATIONS", "SDITERATIONS",
     "H1ITERATIONS", "MITERATIONS", "MCITERATIONS", "MUITERATIONS", "RITERATIONS",
     "AITERATIONS", "CONVERGENCE", "H1CONVERGENCE", "LOGCRITERION", "RLOGCRITERION",
     "MCONVERGENCE", "MCCONVERGENCE", "MUCONVERGENCE", "RCONVERGENCE", "ACONVERGENCE",
     "MIXC", "MIXU", "LOGHIGH", "LOGLOW", "UCELLSIZE", "VARIANCE", "SIMPLICITY",
     "TOLERANCE", "METRIC", "MATRIX", "POINT", "CHAINS", "BSEED", "STVALUES",
     "PREDICTOR", "ALGORITHM", "BCONVERGENCE", "BITERATIONS", "FBITERATIONS",
     "THIN", "MDITERATIONS", "KOLMOGOROV", "PRIOR", "INTERACTIVE"</code>, or <code>"PROCESSORS"</code>.
</p>
</li>
</ul>
<p>Note that comments are removed from the input text by default, i.e., <code>comment = FALSE</code>.
</p>
</dd>
</dl>
<h3>Value</h3>

<p>Returns an object of class <code>misty.object</code>, which is a list with following
entries:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>function call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>misty.object</code> object of type <code>mplus</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>specification of function arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>list with input command sections</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write</code></td>
<td>
<p>updated write command sections</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>list with input command sections (<code>input</code>) and
result sections (<code>input</code>)</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Takuya Yanagida
</p>


<h3>References</h3>

<p>Muthen, L. K., &amp; Muthen, B. O. (1998-2017). <em>Mplus User's Guide</em> (8th ed.).
Muthen &amp; Muthen.
</p>


<h3>See Also</h3>

<p><code>read.mplus</code>, <code>write.mplus</code>, <code>mplus</code>,
<code>mplus.print</code>, <code>mplus.plot</code>, <code>mplus.bayes</code>,
<code>mplus.run</code>, <code>mplus.lca</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#----------------------------------------------------------------------------
# Example 1: Update VARIABLE and MODEL section

# Write Mplus Data File
write.mplus(ex3_1, file = "ex3_1.dat")

# Specify Mplus input
input &lt;- '
DATA:     FILE IS ex3_1.dat;
VARIABLE: NAMES ARE y1 x1 x3;
MODEL:    y1 ON x1 x3;
OUTPUT:   SAMPSTAT;
'

# Run Mplus input
mod0 &lt;- mplus(input, file = "ex3_1.inp")

# Update VARIABLE and MODEL section
update1 &lt;- '
VARIABLE: ...;
          USEVARIABLES ARE y1 x1;
MODEL:    y1 ON x1;
'

# Run updated Mplus input
mod1 &lt;- mplus.update(mod1, update1, file = "ex3_1_update1.inp")

#----------------------------------------------------------------------------
# Example 2: Update ANALYSIS section

# Update ANALYSIS section
update2 &lt;- '
ANALYSIS: ESTIMATOR IS MLR;
'

# Run updated Mplus input
mod2 &lt;- mplus.update(mod2, update2, file = "ex3_1_update2.inp")

#----------------------------------------------------------------------------
# Example 3: Remove OUTPUT section

Remove OUTPUT section
update3 &lt;- '
OUTPUT: ---;
'

# Run updated Mplus input
mod3 &lt;- mplus.update(mod3, update3, file = "ex3_1_update3.inp")

## End(Not run)
</code></pre>


</div>