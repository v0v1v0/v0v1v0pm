<div class="container">

<table style="width: 100%;"><tr>
<td>na.pattern</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Missing Data Pattern</h2>

<h3>Description</h3>

<p>This function computes a summary of missing data patterns, i.e., number (
cases with a specific missing data pattern and plots the missing data
patterns.
</p>


<h3>Usage</h3>

<pre><code class="language-R">na.pattern(..., data = NULL, order = FALSE, n.pattern = NULL, plot = FALSE,
           square = TRUE, rotate = FALSE, fill.col = c("#B61A51B3", "#006CC2B3"),
           alpha = 0.6, plot.margin = c(4, 16, 0, 4),
           legend.box.margin = c(-8, 6, 6, 6), legend.key.size = 12,
           legend.text.size = 9, saveplot = FALSE, file = "NA_Patternt.pdf",
           width = NA, height = NA, units = c("in", "cm", "mm", "px"), dpi = 600,
           digits = 2, as.na = NULL, write = NULL, append = TRUE, check = TRUE,
           output = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>a matrix or data frame with incomplete data, where missing
values are coded as <code>NA</code>. a matrix or data frame with incomplete data, where missing
values are coded as <code>NA</code>. Alternatively, an expression
indicating the variable names in <code>data</code> e.g.,
<code>na.pattern(x1, x2, x3, data = dat)</code>.Note that the operators
<code>.</code>, <code>+</code>, <code>-</code>, <code>~</code>, <code>:</code>, <code>::</code>,
and <code>!</code> can also be used to select variables, see 'Details'
in the <code>df.subset</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame when specifying one or more variables in the
argument <code>...</code>. Note that the argument is <code>NULL</code>
when specifying a matrix or data frame for the argument <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>logical: if <code>TRUE</code>, variables are ordered from left to
right in increasing order of missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.pattern</code></td>
<td>
<p>an integer value indicating the minimum number of cases sharing
a missing data pattern to be included in the result table and the plot, e.g., specifying
<code>n.pattern = 5</code> excludes missing data patters with less than <code>5</code> cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical: if <code>TRUE</code>, missing data pattern is plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>square</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), the plot tiles are squares
to mimic the <code>md.pattern</code> function in the package <span class="pkg">mice</span>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate</code></td>
<td>
<p>logical: if <code>TRUE</code>, the variable name labels are rotated 90 degrees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill.col</code></td>
<td>
<p>a character string indicating the color for the <code>"fill"</code> argument.
Note that the first color represents missing values and the second color
represent observed values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>a numeric value between 0 and 1 for the <code>alpha</code> argument (default is <code>0.1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.margin</code></td>
<td>
<p>a numeric vector indicating the <code>plot.margin</code> argument for the <code>theme</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.box.margin</code></td>
<td>
<p>a numeric vector indicating the <code>legend.box.margin</code>
argument for the <code>theme</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.key.size</code></td>
<td>
<p>a numeric value indicating the <code>legend.key</code>
argument (default is <code>unit(12, "pt")</code>) for the <code>theme</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.text.size</code></td>
<td>
<p>a numeric value indicating the <code>legend.text</code>
argument (default is <code>element_text(size = 10)</code>) for the <code>theme</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveplot</code></td>
<td>
<p>logical: if <code>TRUE</code>, the ggplot is saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>a character string indicating the <code>filename</code> argument (default is <code>"NA_Pattern.pdf"</code>) including
the file extension for the <code>ggsave</code> function. Note that one of <code>".eps"</code>, <code>".ps"</code>,
<code>".tex"</code>, <code>".pdf"</code> (default), <code>".jpeg"</code>, <code>".tiff"</code>, <code>".png"</code>, <code>".bmp"</code>,
<code>".svg"</code> or <code>".wmf"</code> needs to be specified as file extension in the <code>file</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>a numeric value indicating the <code>width</code> argument (default is the
size of the current graphics device) for the <code>ggsave</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>a numeric value indicating the <code>height</code> argument
(default is the size of the current graphics device) for the <code>ggsave</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>a character string indicating the <code>units</code> argument
(default is <code>in</code>) for the <code>ggsave</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>a numeric value indicating the <code>dpi</code> argument
(default is <code>600</code>) for the <code>ggsave</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>an integer value indicating the number of decimal places to
be used for displaying percentages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.na</code></td>
<td>
<p>a numeric vector indicating user-defined missing values,
i.e. these values are converted to NA before conducting the
analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write</code></td>
<td>
<p>a character string naming a file for writing the output into
either a text file with file extension <code>".txt"</code> (e.g.,
<code>"Output.txt"</code>) or Excel file with file extension
<code>".xlsx"</code>  (e.g., <code>"Output.xlsx"</code>). If the file
name does not contain any file extension, an Excel file will
be written.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output will be appended
to an existing text file with extension <code>.txt</code> specified
in <code>write</code>, if <code>FALSE</code> existing text file will be
overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), argument specification is checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output is shown.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an object of class <code>misty.object</code>, which is a list with following
entries:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>function call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>list with data frames, i.e., <code>data</code> for the data frame
with variables used in the current analysis, and <code>plotdat</code>
for the data frame used for plotting the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>specification of function arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>result table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>ggplot2 object for plotting the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>a numeric vector indicating the missing data pattern for each case</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The code for plotting missing data patterns is based on the <code>plot_pattern</code>
function in the <span class="pkg">ggmice</span> package by Hanne Oberman.
</p>


<h3>Author(s)</h3>

<p>Takuya Yanagida <a href="mailto:takuya.yanagida@univie.ac.at">takuya.yanagida@univie.ac.at</a>
</p>


<h3>References</h3>

<p>Enders, C. K. (2010). <em>Applied missing data analysis</em>. Guilford Press.
</p>
<p>Graham, J. W. (2009). Missing data analysis: Making it work in the real world.
<em>Annual Review of Psychology, 60</em>, 549-576.
https://doi.org/10.1146/annurev.psych.58.110405.085530
</p>
<p>Oberman, H. (2023). <em>ggmice: Visualizations for 'mice' with 'ggplot2'</em>.
R package version 0.1.0. https://doi.org/10.32614/CRAN.package.ggmice
</p>
<p>van Buuren, S. (2018). <em>Flexible imputation of missing data</em> (2nd ed.).
Chapman &amp; Hall.
</p>


<h3>See Also</h3>

<p><code>write.result</code>, <code>as.na</code>, <code>na.as</code>,
<code>na.auxiliary</code>, <code>na.coverage</code>, <code>na.descript</code>,
<code>na.indicator</code>, <code>na.prop</code>, <code>na.test</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Example 1a: Compute a summary of missing data patterns
dat.pattern &lt;- na.pattern(airquality)

# Example 1b: Alternative specification using the 'data' argument
dat.pattern &lt;- na.pattern(., data = airquality)

# Example 2a: Compute and plot a summary of missing data patterns
na.pattern(airquality, plot = TRUE)

# Example 2b: Plot missing data patterns with at least 3 cases
na.pattern(airquality, plot = TRUE, n.pattern = 3)

# Example 3: Vector of missing data pattern for each case
dat.pattern$pattern

# Data frame without cases with missing data pattern 2 and 4
airquality[!dat.pattern$pattern 

# Example 4a: Write Results into a text file
result &lt;- na.pattern(airquality, write = "NA_Pattern.xlsx")

# Example 4b: Write Results into a Excel file
result &lt;- na.pattern(airquality, write = "NA_Pattern.xlsx")

result &lt;- 4c.pattern(dat, output = FALSE)
write.result(result, "NA_Pattern.xlsx")

## End(Not run)
</code></pre>


</div>