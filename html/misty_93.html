<div class="container">

<table style="width: 100%;"><tr>
<td>rec</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Recode Variable</h2>

<h3>Description</h3>

<p>This function recodes numeric vectors, character vectors, or factors according
to recode specifications.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rec(..., data = NULL, spec, as.factor = FALSE, levels = NULL, append = TRUE,
    name = ".e", as.na = NULL, table = FALSE, check = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>a numeric vector, character vector, factor, matrix or data
frame. Alternatively, an expression indicating the variable
names in <code>data</code> e.g., <code>rec(x1, x2, x3, data = dat, spec = "1 = 0"))</code>.
Note that the operators
<code>.</code>, <code>+</code>, <code>-</code>, <code>~</code>, <code>:</code>, <code>::</code>,
and <code>!</code> can also be used to select variables, see 'Details'
in the <code>df.subset</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame when specifying one or more variables in the
argument <code>...</code>. Note that the argument is <code>NULL</code>
when specifying a a numeric vector, character vector, factor,
matrix or data frame for the argument <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>a character string of recode specifications (see 'Details').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.factor</code></td>
<td>
<p>logical: if <code>TRUE</code>, character vector will be coerced to
a factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>a character vector for specifying the levels in the returned
factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.na</code></td>
<td>
<p>a numeric vector indicating user-defined missing values,
i.e. these values are converted to <code>NA</code> before conducting
the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), centered variable(s) are
appended to the data frame specified in the argument <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>a character string or character vector indicating the names
of the recoded variables. By default, variables are named with the ending
<code>".r"</code> Resulting in e.g. <code>"x1.r"</code> and <code>"x2.r"</code>. Variable
names can also be specified using a character vector matching
the number of variables specified in <code>...</code> (e.g.,
<code>name = c("recode.x1", "recode.x2")</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>logical: if <code>TRUE</code>, a cross table variable x recoded
variable is printed on the console if only one variable is
specified in <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), argument specification is checked.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Recode specifications appear in a character string, separated by semicolons
(see the examples below), of the form input = output. If an input value satisfies
more than one specification, then the first (from left to right) applies. If
no specification is satisfied, then the input value is carried over to the
result. <code>NA</code> is allowed in input and output. Several recode specifications
are supported:
</p>

<dl>
<dt><strong>Single Value</strong></dt>
<dd>
<p>For example, <code>spec = "0 = NA".</code></p>
</dd>
<dt><strong>Vector of Values</strong></dt>
<dd>
<p>For example, <code>spec = "c(7, 8, 9) = 'high'"</code>.</p>
</dd>
<dt><strong>Range of Values</strong></dt>
<dd>
<p>For example, <code>spec = "7:9 = 'C'"</code>. The
special values <code>lo</code> (lowest value) and <code>hi</code> (highest value) may
appear in a range. For example, <code>spec = "lo:10 = 1"</code>. Note that <code>:</code>
is not the R sequence operator. In addition you may not use <code>:</code> with the
collect operator, e.g., <code>spec = "c(1, 3, 5:7)"</code> will cause an error.</p>
</dd>
<dt><strong>else</strong></dt>
<dd>
<p>For example, <code>spec = "0 = 1; else = NA"</code>. Everything
that does not fit a previous specification. Note that <code>else</code> matches all
otherwise unspecified values on input, including <code>NA</code>.</p>
</dd>
</dl>
<h3>Value</h3>

<p>Returns a numeric vector or data frame with the same length or same number of
rows as <code>...</code> containing the recoded coded variable(s).
</p>


<h3>Note</h3>

<p>This function was adapted from the <code>recode()</code> function in the <span class="pkg">car</span>
package by John Fox and Sanford Weisberg (2019).
</p>


<h3>Author(s)</h3>

<p>Takuya Yanagida <a href="mailto:takuya.yanagida@univie.ac.at">takuya.yanagida@univie.ac.at</a>
</p>


<h3>References</h3>

<p>Fox, J., &amp; Weisberg S. (2019). <em>An R Companion to Applied Regression</em> (3rd ed.).
Thousand Oaks CA: Sage. URL: https://socialsciences.mcmaster.ca/jfox/Books/Companion/
</p>


<h3>See Also</h3>

<p><code>coding</code>, <code>item.reverse</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#----------------------------------------------------------------------------
# Numeric vector
x.num &lt;- c(1, 2, 4, 5, 6, 8, 12, 15, 19, 20)

# Example 1a: Recode 5 = 50 and 19 = 190
rec(x.num, spec = "5 = 50; 19 = 190")

# Example 1b: Recode 1, 2, and 5 = 100 and 4, 6, and 7 = 200 and else = 300
rec(x.num, spec = "c(1, 2, 5) = 100; c(4, 6, 7) = 200; else = 300")

# Example 1c: Recode lowest value to 10 = 100 and 11 to highest value = 200
rec(x.num, spec = "lo:10 = 100; 11:hi = 200")

# Example 1d: Recode 5 = 50 and 19 = 190 and check recoding
rec(x.num, spec = "5 = 50; 19 = 190", table = TRUE)

#----------------------------------------------------------------------------
# Character vector
x.chr &lt;- c("a", "c", "f", "j", "k")

# Example 2a: Recode a to x
rec(x.chr, spec = "'a' = 'X'")

# Example 2b: Recode a and f to x, c and j to y, and else to z
rec(x.chr, spec = "c('a', 'f') = 'x'; c('c', 'j') = 'y'; else = 'z'")

# Example 2c: Recode a to x and coerce to a factor
rec(x.chr, spec = "'a' = 'X'", as.factor = TRUE)

#----------------------------------------------------------------------------
# Factor
x.fac &lt;- factor(c("a", "b", "a", "c", "d", "d", "b", "b", "a"))

# Example 3a: Recode a to x, factor levels ordered alphabetically
rec(x.fac, spec = "'a' = 'x'")

# Example 3b: Recode a to x, user-defined factor levels
rec(x.fac, spec = "'a' = 'x'", levels = c("x", "b", "c", "d"))

#----------------------------------------------------------------------------
# Multiple variables
dat &lt;- data.frame(x1.num = c(1, 2, 4, 5, 6),
                  x2.num = c(5, 19, 2, 6, 3),
                  x1.chr = c("a", "c", "f", "j", "k"),
                  x2.chr = c("b", "c", "a", "d", "k"),
                  x1.fac = factor(c("a", "b", "a", "c", "d")),
                  x2.fac = factor(c("b", "a", "d", "c", "e")))

# Example 4a: Recode numeric vector and attach to 'dat'
dat &lt;- cbind(dat, rec(dat[, c("x1.num", "x2.num")], spec = "5 = 50; 19 = 190"))

# Example 4b: Alternative specification using the 'data' argument,
rec(x1.num, x2.num, data = dat, spec = "5 = 50; 19 = 190")

# Example 4c: Recode character vector and attach to 'dat'
dat &lt;- cbind(dat, rec(dat[, c("x1.chr", "x2.chr")], spec = "'a' = 'X'"))

# Example 4d: Recode factor vector and attach to 'dat'
dat &lt;- cbind(dat, rec(dat[, c("x1.fac", "x2.fac")], spec = "'a' = 'X'"))
</code></pre>


</div>