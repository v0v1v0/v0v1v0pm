<div class="container">

<table style="width: 100%;"><tr>
<td>result.lca</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summary Result Table and Grouped Bar Charts for Latent Class Analysis Estimated in Mplus</h2>

<h3>Description</h3>

<p>This function reads all Mplus output files from latent class analysis in
subfolders to create a summary result table and bar charts for each latent
class solution separately. By default, the function reads output files in all
subfolders of the current working directory. Optionally, bar charts for each
latent class solution can be requested by setting the argument <code>plot</code>
to <code>TRUE</code>. Note that subfolders with only one Mplus output file are
excluded.
</p>


<h3>Usage</h3>

<pre><code class="language-R">result.lca(folder = getwd(), exclude = NULL, sort.n = TRUE, sort.p = TRUE,
           plot = FALSE, group.ind = TRUE, ci = TRUE, conf.level = 0.95, adjust = TRUE,
           axis.title = 7, axis.text = 7, levels = NULL, labels = NULL,
           ylim = NULL, ylab = "Mean Value", breaks = ggplot2::waiver(),
           error.width = 0.1, legend.title = 7, legend.text = 7, legend.key.size = 0.4,
           gray = FALSE, start = 0.15, end = 0.85, dpi = 600,
           width = "n.ind", height = 4, digits = 1, p.digits = 3,
           write = NULL, append = TRUE, check = TRUE, output = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>folder</code></td>
<td>
<p>a character vector indicating the name of the subfolders
to be excluded from the summary result table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>a character vector indicating the name of the subfolders
excluded from the result tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.n</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), result table is sorted
according to the number of classes within each folder.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.p</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), class proportions are
sorted decreasing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical: if <code>TRUE</code>, bar charts with
error bars for confidence intervals are saved
in the  folder <code>_Plots</code> within subfolders. Note
that plots are only available for LCA with continuous
or count indicator variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group.ind</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), latent class indicators
are represented by separate bars, if <code>FALSE</code> latent classes
are represented by separate bars.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), confidence intervals
are added to the bar charts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>a numeric value between 0 and 1 indicating the confidence
level of the interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjust</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), difference-adjustment
for the confidence intervals is applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.title</code></td>
<td>
<p>a numeric value specifying the size of the axis title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.text</code></td>
<td>
<p>a numeric value specifying the size of the axis text</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>a character string specifying the order of the indicator
variables shown on the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>a character string specifying the labels of the indicator
variables shown on the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>a numeric vector of length two specifying limits of the
y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a character string specifying the label of the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>a numeric vector specifying the points at which tick-marks
are drawn at the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error.width</code></td>
<td>
<p>a numeric vector specifying the width of the error bars.
By default, the width of the error bars is 0.1 plus
number of classes divided by 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.title</code></td>
<td>
<p>a numeric value specifying the size of the legend title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.text</code></td>
<td>
<p>a numeric value specifying the size of the legend text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.key.size</code></td>
<td>
<p>a numeric value specifying the size of the legend keys.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gray</code></td>
<td>
<p>logical: if <code>TRUE</code>, bar charts are drawn in gray
scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>a numeric value between 0 and 1 specifying the gray value
at the low end of the palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>a numeric value between 0 and 1 specifying the gray value
at the high end of the palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>a numeric value specifying the plot resolution when saving
the bar chart.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>a numeric value specifying the width of the plot when
saving the bar chart. By default, the width is number of
indicators plus number of classes divided by 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>a numeric value specifying the height of the plot when
saving the bar chart.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>an integer value indicating the number of decimal places
to be used for displaying results. Note that the scaling
correction factor is displayed  with <code>digits</code> plus 1
decimal places.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.digits</code></td>
<td>
<p>an integer value indicating the number of decimal places
to be used for displaying <em>p</em>-values, entropy value,
and class proportions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write</code></td>
<td>
<p>a character string naming a file for writing the output into
either a text file with file extension <code>".txt"</code> (e.g.,
<code>"Output.txt"</code>) or Excel file with file extension
<code>".xlsx"</code>  (e.g., <code>"Output.xlsx"</code>). If the file
name does not contain any file extension, an Excel file will
be written.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output will be appended
to an existing text file with extension <code>.txt</code> specified
in <code>write</code>, if <code>FALSE</code> existing text file will be
overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), argument specification is checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>logical: if <code>TRUE</code> (default), output is shown.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The result summary table comprises following entries:
</p>

<ul>
<li>
<p><code>"Folder"</code>: Subfolder from which the group of Mplus outputs files
were summarized.
</p>
</li>
<li>
<p><code>"#Class"</code>: Number of classes (i.e., <code>CLASSES ARE c(#Class)</code>).
</p>
</li>
<li>
<p><code>"Conv"</code>: Model converged, <code>TRUE</code> or <code>FALSE</code> (i.e.,
<code>THE MODEL ESTIMATION TERMINATED NORMALLY</code>.
</p>
</li>
<li>
<p><code>"#Param"</code>: Number of estimated parameters (i.e.,
<code>Number of Free Parameters</code>).
</p>
</li>
<li>
<p><code>"logLik"</code>: Log-likelihood of the estimated model (i.e., <code>H0 Value</code>).
</p>
</li>
<li>
<p><code>"Scale"</code>: Scaling correction factor (i.e.,
<code>H0 Scaling Correction Factor for</code>). Provided
only when <code>ESTIMATOR IS MLR</code>.
</p>
</li>
<li>
<p><code>"LL Rep"</code>: Best log-likelihood replicated, <code>TRUE</code> or <code>FALSE</code>
(i.e., <code>THE BEST LOGLIKELIHOOD VALUE HAS BEEN REPLICATED</code>).
</p>
</li>
<li>
<p><code>"AIC"</code>: Akaike information criterion (i.e., <code>Akaike (AIC)</code>).
</p>
</li>
<li>
<p><code>"CAIC"</code>: Consistent AIC, not reported in the Mplus output, but
simply <code>BIC + #Param</code>.
</p>
</li>
<li>
<p><code>"BIC"</code>: Bayesian information criterion (i.e., <code>Bayesian (BIC)</code>).
</p>
</li>
<li>
<p><code>"Chi-Pear"</code>: Pearson chi-square test of model fit (i.e., <code>Pearson Chi-Square</code>),
only available when indicators are count or ordered categorical.
</p>
</li>
<li>
<p><code>"Chi-LRT"</code>: Likelihood ratio chi-square test of model fit (i.e., <code>Likelihood Ratio Chi-Square</code>),
only available when indicators are count or ordered categorical.
</p>
</li>
<li>
<p><code>"SABIC"</code>: Sample-size adjusted BIC (i.e., <code>Sample-Size Adjusted BIC</code>).
</p>
</li>
<li>
<p><code>"LMR-LRT"</code>: Significance value (<em>p</em>-value) of the Vuong-Lo-Mendell-Rubin test
(i.e., <code>VUONG-LO-MENDELL-RUBIN LIKELIHOOD RATIO TEST</code>).
Provided only when <code>OUTPUT: TECH11</code>.
</p>
</li>
<li>
<p><code>"A-LRT"</code>: Significance value (<em>p</em>-value) of the Adjusted Lo-Mendell-Rubin Test
(i.e., <code>LO-MENDELL-RUBIN ADJUSTED LRT TEST</code>).
Provided only when <code>OUTPUT: TECH11</code>.
</p>
</li>
<li>
<p><code>"BLRT"</code>: Significance value (<em>p</em>-value) of the bootstrapped
likelihood ratio test. Provided only when <code>OUTPUT: TECH14</code>.
</p>
</li>
<li>
<p><code>"Entropy"</code>: Sample-size adjusted BIC (i.e., <code>Entropy</code>).
</p>
</li>
<li>
<p><code>"p1"</code>: Class proportion of the first class based on the estimated
posterior probabilities (i.e., <code>FINAL CLASS COUNTS AND PROPORTIONS</code>).
</p>
</li>
<li>
<p><code>"p2"</code>: Class proportion of the second class based on the estimated
posterior probabilities (i.e., <code>FINAL CLASS COUNTS AND PROPORTIONS</code>).
</p>
</li>
</ul>
<h3>Value</h3>

<p>Returns an object, which is a list with following entries:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>function call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>list with all Mplus outputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>specification of function arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>list with result tables, i.e., <code>summary</code> for the
summary result table, <code>mean_var</code> for the result
table with means and variances for each latent class
separately, <code>mean</code> for the result table with means
for each latent class separately, and <code>var</code> for the
result table with variances for each latent class separately</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Takuya Yanagida <a href="mailto:takuya.yanagida@univie.ac.at">takuya.yanagida@univie.ac.at</a>
</p>


<h3>References</h3>

<p>Masyn, K. E. (2013). Latent class analysis and finite mixture modeling. In T. D.
Little (Ed.), <em>The Oxford handbook of quantitative methods: Statistical analysis</em>
(pp. 551–611). Oxford University Press.
</p>
<p>Muthen, L. K., &amp; Muthen, B. O. (1998-2017). <em>Mplus User's Guide</em> (8th ed.).
Muthen &amp; Muthen.
</p>


<h3>See Also</h3>

<p><code>mplus.lca</code>, <code>mplus.run</code>, <code>read.mplus</code>,
<code>write.mplus</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Load data set "HolzingerSwineford1939" in the lavaan package
data("HolzingerSwineford1939", package = "lavaan")

# Run LCA with k = 1 to k = 6 classes
mplus.lca(HolzingerSwineford1939, ind = c("x1", "x2", "x3", "x4"),
          run.mplus = TRUE)

# Example 1a: Read Mplus output files, create result table, write table, and save plots
result.lca(write = "LCA.xlsx", plot = TRUE)

# Example 1b: Write results into a text file
result.lca(write = "LCA.txt")

#-------------------------------------------------------------------------------
# Example 2: Draw bar chart manually

library(ggplot2)

# Collect LCA results
lca.result &lt;- result.lca()

# Result table with means
means &lt;- lca.result$result$mean

# Extract results from variance-covariance structure A with 4 latent classes
plotdat &lt;- means[means$folder == "A_Invariant-Theta_Diagonal-Sigma" &amp;  means$nclass == 4, ]

# Draw bar chart
ggplot(plotdat, aes(ind, est, group = class, fill = class)) +
  geom_bar(stat = "identity", position = "dodge", color = "black",
           linewidth = 0.1) +
  geom_errorbar(aes(ymin = low, ymax = upp), width = 0.23,
                linewidth = 0.2, position = position_dodge(0.9)) +
  scale_x_discrete("") +
  scale_y_continuous("Mean Value", limits = c(0, 9),
                     breaks = seq(0, 9, by = 1)) +
  labs(fill = "Latent Class") +
  guides(fill = guide_legend(nrow = 1L)) +
  theme(axis.title = element_text(size = 11),
        axis.text = element_text(size = 11),
        legend.position = "bottom",
        legend.key.size = unit(0.5 , 'cm'),
        legend.title = element_text(size = 11),
        legend.text = element_text(size = 11),
        legend.box.spacing = unit(-9L, "pt"))

# Save bar chart
ggsave("LCA_4-Class.png", dpi = 600, width = 6, height = 4)

## End(Not run)
</code></pre>


</div>