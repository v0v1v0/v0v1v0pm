<div class="container">

<table style="width: 100%;"><tr>
<td>withPV</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Analyse plausible values in surveys
</h2>

<h3>Description</h3>

<p>Repeats an analysis for each of a set of 'plausible values' in a data
set, returning a list suitable for <code>MIcombine</code>. That is, the data
set contains some sets of columns where each set are multiple
imputations of the same variable. With
<code>rewrite=TRUE</code>, the <code>action</code> is rewritten to reference each
plausible value in turn; with coderewrite=FALSE a new data set is
constructed for each plausible value, which is slower but more general.
</p>


<h3>Usage</h3>

<pre><code class="language-R">withPV(mapping, data, action, rewrite=TRUE, ...)
## Default S3 method:
withPV(mapping, data, action, rewrite=TRUE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>

<p>A formula or list of formulas describing each variable in the analysis that has plausible values. The left-hand side of the formula is the name to use in the analysis; the right-hand side gives the names in the dataset.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A data frame. Methods for <code>withPV</code> dispatch on this argument, so
can be written for, eg, survey designs or out-of-memory datasets.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>action</code></td>
<td>

<p>With <code>rewrite=TRUE</code>, a quoted expression specifying the analysis,
or a function taking a data frame as its only argument.  With  <code>rewrite=FALSE</code>,
A function taking a data frame as its only argument, or a quoted
expression with <code>.DATA</code> referring to the newly-created data frame to be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rewrite</code></td>
<td>

<p>Rewrite <code>action</code> before evaluating it (versus constructing new data
sets)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>For methods
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of the results returned by each evaluation of <code>action</code>, with the call as an attribute.
</p>


<h3>Note</h3>

<p>I would be interested in seeing naturally-occurring examples where
<code>rewrite=TRUE</code> does not work</p>


<h3>See Also</h3>

<p><code>pisamaths</code>
</p>
<p><code>with.imputationList</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(pisamaths)

models&lt;-withPV(list(maths~PV1MATH+PV2MATH+PV3MATH+PV4MATH+PV5MATH), data=pisamaths,
       action= quote(lm(maths~ ST04Q01*(PCGIRLS+SMRATIO)+MATHEFF+OPENPS,
       data=.DATA)),
       rewrite=FALSE
)

summary(MIcombine(models))

## equivalently
models2&lt;-withPV(list(maths~PV1MATH+PV2MATH+PV3MATH+PV4MATH+PV5MATH), data=pisamaths,
       action=quote( lm(maths~ST04Q01*(PCGIRLS+SMRATIO)+MATHEFF+OPENPS)), rewrite=TRUE)


summary(MIcombine(models2))



</code></pre>


</div>