<div class="container">

<table style="width: 100%;"><tr>
<td>mixedMemModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Constructor for a Mixed Membership Model Object</h2>

<h3>Description</h3>

<p>Constructor for a <code>mixedMemModel</code> object which can be used for analysis
in the <code>mixedMem</code> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mixedMemModel(Total, J, Rj, Nijr, K, Vj, alpha, theta, phi = NULL,
  delta = NULL, dist, obs, fixedObs = NULL, P = NULL, beta = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Total</code></td>
<td>
<p>the number of individuals in the sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>J</code></td>
<td>
<p>the number of variables observed on each individual.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rj</code></td>
<td>
<p>a vector of length J specifying the number of repeated measurements
for each variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nijr</code></td>
<td>
<p>an array with dimension (<code>Total</code>, <code>J</code>, <code>max(Rj)</code>) indicating the number
of ranking levels for each variable and each replication. For multinomial and Bernoulli
variables, <code>Nijr</code>[i,j,r] = 1. For rank variables, <code>Nijr</code>[i,j,r] indicates the
number of alternatives ranked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>the number of sub-populations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Vj</code></td>
<td>
<p>a vector of length <code>J</code> specifying the number of possible candidates
for each variable. For a Bernoulli variable <code>Vj</code>[j] = 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>a vector of length <code>K</code> which is the parameter for Dirichlet
membership distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>an array with dimensions (<code>J</code>,<code>K</code>,<code>max(Vj)</code>) which governs the variable
distributions. The parameter <code>theta</code>[j,k,] governs the distribution of variable J for a complete member of sub-population k. For instance, if variable j is a Bernoulli variable, theta[j,k,1] is the probability of success; if
variable j is a multinomial variable, <code>theta</code>[j,k, 1:Vj[j]] is the probability for each of the <code>Vj</code>[j] categories; if variable j
is a rank variable, <code>theta</code>[j,k, 1:Vj[j]] are the support parameters for each of the <code>Vj</code>[j] alternatives. Since the dimension of the relevant parameters
can differ across variables, any unused elements of the array should be set to 0, while all other elements should be positive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phi</code></td>
<td>
<p>an array with dimensions (<code>Total</code>,<code>K</code>) which specifies the variational
parameters for the membership vectors, <code class="reqn">\lambda</code>. The default group membership initialization is uniform across all groups (phi[i,k] = 1/K for all k).
The default initialization is highly recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>an array with dimensions (<code>Total</code>,<code>J</code>,<code>max(Rj)</code>, <code>max(Nijr)</code>, <code>K</code>) which specifies
the variational parameters for the context vectors Z. The default initialization is
uniform across all sub-populations (<code>delta</code>[i, j, r, n, k] = 1/K for all k).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>a vector of length <code>J</code> specifying variable types. Options are
"bernoulli", "multinomial" or "rank" corresponing to the distributions
of the observed variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>an array with dimensions (<code>Total</code>,<code>J</code>,<code>max(Rj)</code>, <code>max(Nijr)</code>) corresponding to
the observed data. For Bernoulli random variables, the data consist of 0/1's.
For multinomial or rank data the data consist of integers 0,1,...,(Vj[j]-1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixedObs</code></td>
<td>
<p>an array with dimensions (1, <code>J</code>, <code>max(Rj)</code>, <code>max(Nijr)</code>) corresonding to the observed
responses for a fixed group in the extended GoM model from Erosheva et al (2007)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>scalar between 0 and 1 corresponding to initial value for the proportion of individuals in the fixed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>scalar between 0 and 1 corresponding to the initial value of beta, the conditional probability of being in the fixed group
for an individual who's observed responses match the fixed group.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function returns an object of <code>mixedMemModel</code> class. This object contains dimensions of the model,
the observed data, and the model parameters. Once a <code>mixedMemModel</code> object is created,
the specified model can be fit for the data using the <code>mmVarFit</code> function. If the inputs are inconsistent (ie if dimensions do not match,
or if observations and distribution types are not compatible,<code>mixedMemModel</code> will throw an error. For additional details on usage, and model
assumptions, see the corresponding vignette "Fitting Mixed Membership Models Using <code>mixedMem</code>".
</p>


<h3>Value</h3>

<p>returns an object of class <code>mixedMemModel</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
Total &lt;- 50 # 50 Individuals
J &lt;- 3 # 3 different variables
# distributions of each variable
dist &lt;- c("multinomial", "bernoulli", "rank")
# 100 repeated measures of the multinomial, 5 repeated measures of the
# Bernoulli, 1 repeated measure of the rank
Rj &lt;- c(100, 5, 1)

K &lt;- 4 # 4 sub-populations
alpha &lt;- rep(.5, K) #hyperparameter for dirichlet distribution

# Number of categories/alternatives for each variable. For the Bernoulli, Vj = 1
Vj &lt;- c(10, 1, 4)


theta &lt;- array(0, dim = c(J, K, max(Vj)))
# Parameters governing multinomial
theta[1,,] &lt;- gtools::rdirichlet(K, rep(.3, Vj[1]))
#parameters governing Bernoulli
theta[2,,] &lt;- cbind(rbeta(K, 1,1), matrix(0, nrow = K, ncol = Vj[1]-1))
theta[3,,] &lt;- cbind(gtools::rdirichlet(K, rep(.3, Vj[3])),
 matrix(0, nrow = K, ncol = Vj[1]-Vj[3]))

# Items selected for each observation. For Multinomial and Bernoulli, this is always 1
# For rank data, this will be the number of alternatives ranked
Nijr = array(0, dim = c(Total, J, max(Rj)))
Nijr[,1,c(1:Rj[1])] = 1 # N_ijr is 1 for multinomial variables
Nijr[,2,c(1:Rj[2])] = 1 # N_ijr is 1 for Bernoulli variables
Nijr[,3,c(1:Rj[3])] = sample.int(Vj[3], size = Total, replace = TRUE)

# generate random sample of observations
sampleMixedMem &lt;- rmixedMem(Total, J, Rj, Nijr, K, Vj,
dist, theta, alpha)

## Initialize a mixedMemModel object
test_model &lt;- mixedMemModel(Total = Total, J = J,Rj = Rj,
 Nijr= Nijr, K = K, Vj = Vj,dist = dist, obs = sampleMixedMem$obs,
  alpha = alpha, theta = theta)
# Look at Summary of the initialized model
summary(test_model)
# Plot the current values for theta
plot(test_model)
</code></pre>


</div>