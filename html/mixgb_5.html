<div class="container">

<table style="width: 100%;"><tr>
<td>mixgb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Multiple imputation through XGBoost</h2>

<h3>Description</h3>

<p>This function is used to generate multiply imputed datasets using XGBoost, subsampling and predictive mean matching (PMM).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mixgb(
  data,
  m = 5,
  maxit = 1,
  ordinalAsInteger = FALSE,
  bootstrap = FALSE,
  pmm.type = "auto",
  pmm.k = 5,
  pmm.link = "prob",
  initial.num = "normal",
  initial.int = "mode",
  initial.fac = "mode",
  save.models = FALSE,
  save.vars = NULL,
  verbose = F,
  xgb.params = list(max_depth = 3, gamma = 0, eta = 0.3, min_child_weight = 1,
    subsample = 0.7, colsample_bytree = 1, colsample_bylevel = 1, colsample_bynode = 1,
    tree_method = "auto", gpu_id = 0, predictor = "auto"),
  nrounds = 100,
  early_stopping_rounds = 10,
  print_every_n = 10L,
  xgboost_verbose = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame or data.table with missing values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The number of imputed datasets. Default: 5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxit</code></td>
<td>
<p>The number of imputation iterations. Default: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ordinalAsInteger</code></td>
<td>
<p>Whether to convert ordinal factors to integers. By default, <code>ordinalAsInteger = FALSE</code>. Setting <code>ordinalAsInteger = TRUE</code> may speed up the imputation process for large datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap</code></td>
<td>
<p>Whether to use bootstrapping for multiple imputation. By default, <code>bootstrap = FALSE</code>. Setting <code>bootstrap = TRUE</code> can improve imputation variability if sampling-related hyperparameters of XGBoost are set to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmm.type</code></td>
<td>
<p>The type of predictive mean matching (PMM). Possible values:
</p>

<ul>
<li> <p><code>NULL</code>: Imputations without PMM;
</p>
</li>
<li> <p><code>0</code>: Imputations with PMM type 0;
</p>
</li>
<li> <p><code>1</code>: Imputations with PMM type 1;
</p>
</li>
<li> <p><code>2</code>: Imputations with PMM type 2;
</p>
</li>
<li> <p><code>"auto"</code> (Default): Imputations with PMM type 2 for numeric/integer variables; imputations without PMM for categorical variables.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmm.k</code></td>
<td>
<p>The number of donors for predictive mean matching. Default: 5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmm.link</code></td>
<td>
<p>The link for predictive mean matching in binary variables
</p>

<ul>
<li> <p><code>"prob"</code> (Default): use probabilities;
</p>
</li>
<li> <p><code>"logit"</code>: use logit values.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.num</code></td>
<td>
<p>Initial imputation method for numeric type data:
</p>

<ul>
<li> <p><code>"normal"</code> (Default);
</p>
</li>
<li> <p><code>"mean"</code>;
</p>
</li>
<li> <p><code>"median"</code>;
</p>
</li>
<li> <p><code>"mode"</code>;
</p>
</li>
<li> <p><code>"sample"</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.int</code></td>
<td>
<p>Initial imputation method for integer type data:
</p>

<ul>
<li> <p><code>"mode"</code> (Default);
</p>
</li>
<li> <p><code>"sample"</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial.fac</code></td>
<td>
<p>Initial imputation method for factor type data:
</p>

<ul>
<li> <p><code>"mode"</code> (Default);
</p>
</li>
<li> <p><code>"sample"</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.models</code></td>
<td>
<p>Whether to save imputation models for imputing new data later on. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.vars</code></td>
<td>
<p>For the purpose of imputing new data, the imputation models for response variables specified in <code>save.vars</code> will be saved. The values in <code>save.vars</code> can be a vector of names or indices. By default, only the imputation models for variables with missing values in the original data will be saved (<code>save.vars = NULL</code>). To save imputation models for all variables, users can specify it with <code>save.vars = colnames(data)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Verbose setting for mixgb. If <code>TRUE</code>, will print out the progress of imputation. Default: <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xgb.params</code></td>
<td>
<p>A list of XGBoost parameters. For more details, please check <a href="https://xgboost.readthedocs.io/en/stable/parameter.html">XGBoost documentation on parameters</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrounds</code></td>
<td>
<p>The maximum number of boosting iterations for XGBoost. Default: 100</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>early_stopping_rounds</code></td>
<td>
<p>An integer value <code>k</code>. XGBoost training will stop if the validation performance has not improved for <code>k</code> rounds. Default: 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print_every_n</code></td>
<td>
<p>Print XGBoost evaluation information at every nth iteration if <code>xgboost_verbose &gt; 0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xgboost_verbose</code></td>
<td>
<p>Verbose setting for XGBoost training: 0 (silent), 1 (print information) and 2 (print additional information). Default: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments to be passed to XGBoost</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>save.models = FALSE</code>, this function will return a list of <code>m</code> imputed datasets. If <code>save.models = TRUE</code>, it will return an object with imputed datasets, saved models and parameters.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># obtain m multiply datasets without saving models
params &lt;- list(max_depth = 3, subsample = 0.7, nthread = 2)
mixgb.data &lt;- mixgb(data = nhanes3, m = 2, xgb.params = params, nrounds = 10)

# obtain m multiply imputed datasets and save models for imputing new data later on
mixgb.obj &lt;- mixgb(data = nhanes3, m = 2, xgb.params = params, nrounds = 10, save.models = TRUE)
</code></pre>


</div>