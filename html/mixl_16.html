<div class="container">

<table style="width: 100%;"><tr>
<td>specify_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Validate the utility functions against the dataset and generate the optimised logliklihood function</h2>

<h3>Description</h3>

<p>This function takes a utility function description, and generates a optimised C++ version
of the utility function which can be called from R. If the data_names are provided, then the variables
in the function are checked against those provided. If an <code>output_file</code> is provided, the C++ code is saved there.
See the user guide vignette for how to write valid utility scripts. There is some minimal specific syntax required.
</p>


<h3>Usage</h3>

<pre><code class="language-R">specify_model(
  utility_script,
  dataset = NULL,
  output_file = NULL,
  compile = TRUE,
  model_name = "mixl_model",
  disable_multicore = T,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>utility_script</code></td>
<td>
<p>The utility script to be compiled</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>An (optional) dataframe to check if the all the variables are present</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_file</code></td>
<td>
<p>An (optional) location where the compiled code should be saved (useful for debugging</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compile</code></td>
<td>
<p>If compile is false, then the code will not be compiled, but just validated and saved if an <code>output_file</code> is specified. Default is true.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_name</code></td>
<td>
<p>A name for the model, which will be used for saving. Defaults to <em>mixl_model</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disable_multicore</code></td>
<td>
<p>Depreciated and not used. Mutlicore is now autodetected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further parameters to pass to sourceCpp</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>object</code> which contains the loglikelihood function, and information from the compile process
</p>


<h3>See Also</h3>

<p>browseVignettes("mixl")
</p>


<h3>Examples</h3>

<pre><code class="language-R">
	data("Train", package="mlogit")
	Train$ID &lt;- Train$id
	Train$CHOICE &lt;- as.numeric(Train$choice)
	    
	mnl_test &lt;- "
	U_A = @B_price * $price_A / 1000 + @B_time * $time_A / 60;
	U_B = @asc + @B_price * $price_B / 1000 + @B_timeB * $time_B / 60;
	"

	model_spec &lt;- mixl::specify_model(mnl_test, Train, disable_multicore=T)

	#only take starting values that are needed
	est &lt;- stats::setNames(c(1, 1,1,1), c("asc", "B_price", "B_time", "B_timeB"))
	availabilities &lt;- mixl::generate_default_availabilities(
		Train, model_spec$num_utility_functions)

	model &lt;- mixl::estimate(model_spec, est, Train, availabilities = availabilities)
	print(model)

</code></pre>


</div>