<div class="container">

<table style="width: 100%;"><tr>
<td>estimate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Runs a maximum likelihood estimation on a mixl choice model</h2>

<h3>Description</h3>

<p>This function performs a maximum likelihood estimation for choice models speficied using this package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimate(
  model_spec,
  start_values,
  data,
  availabilities,
  draws,
  nDraws,
  fixedparam = c(),
  num_threads = 1,
  weights = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model_spec</code></td>
<td>
<p>The object that contains the loglikelihood function and other
variables that help return better error messages. This function is best generated using the
<code>specify_model()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_values</code></td>
<td>
<p>A named vector of start values for the estimation.
A warning and error will be given respectively if to many values are included or some are missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe of the observations. It must include The columns CHOICE and ID, as well as
columns for the variables specified in the utility function. The CHOICE variable must be from 1..k,
where k is the number of  utility functions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>availabilities</code></td>
<td>
<p>A 1/0 matrix of availabilities. The dimensions must be <code>nrows(data) * k</code>, where there are k utility functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draws</code></td>
<td>
<p>A numeric matrix of draws for calculating mixed effects. If there no mixed effects, this should be left null.
If the model specification included mixed effects, either this or <code>nDraws</code> need to be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nDraws</code></td>
<td>
<p>The number of draws to use in estimating a mixed model.
Only needed if <code>draws</code> is left null. Then a matrix of normal halton draws will be generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixedparam</code></td>
<td>
<p>(optional) Coefficients which should be fixed to their starting values during estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_threads</code></td>
<td>
<p>The maximum number of parallel cores to use in estimation. The default is 1.
This should only be speficied on machines with an openMP compiler (linux and some OSXs).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>(optional) A vector of weights (vector length must equal the number of observations).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>futher arguments. such as control are passed to the maximisaiton routine in maxLik.
See <code>maxLik::maxLik()</code> for more details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It is a wrapper for the maxLik function in the maxLik package.
And additional arguments can be passed through to this function if required.
</p>


<h3>Value</h3>

<p>a mixl object that contains the results of the estimation
</p>


<h3>Examples</h3>

<pre><code class="language-R">
	data("Train", package="mlogit")
	Train$ID &lt;- Train$id
	Train$CHOICE &lt;- as.numeric(Train$choice)
	    
	mnl_test &lt;- "
	U_A = @B_price * $price_A / 1000 + @B_time * $time_A / 60;
	U_B = @asc + @B_price * $price_B / 1000 + @B_timeB * $time_B / 60;
	"

	model_spec &lt;- mixl::specify_model(mnl_test, Train, disable_multicore=T)

	#only take starting values that are needed
	est &lt;- stats::setNames(c(1, 1,1,1), c("asc", "B_price", "B_time", "B_timeB"))
	availabilities &lt;- mixl::generate_default_availabilities(
		Train, model_spec$num_utility_functions)

	model &lt;- mixl::estimate(model_spec, est, Train, availabilities = availabilities)
	print(model)

</code></pre>


</div>