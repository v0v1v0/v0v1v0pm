<div class="container">

<table style="width: 100%;"><tr>
<td>contr.weighted</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Contrast matrix for weighted effect coding
</h2>

<h3>Description</h3>

<p>Weighted contrast coding for linear models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">contr.weighted(x, base)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
 <p><code>factor</code> for which a contrast matrix should be made.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
 <p><code>factor</code> level used as basis for contrast coding.
Default is the (first) level with maximum frequency.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Different from the contrasts made throught the <code>stats</code> package functions
this contrast requires a full <code>factor</code> vector as input rather than its
respective <code>levels</code> as weights are computed from the frequencies of the
<code>factor</code> <code>levels</code>.
</p>


<h3>Value</h3>

<p>A <code>matrix</code> with <code>n</code> rows and <code>n-1</code> values.
</p>


<h3>Note</h3>

<p><code>contr.weighted</code> cannot be used directly as a replacement for other
contrasts by name, but must be used via contrasts matrix computations.
</p>


<h3>Author(s)</h3>

<p>Kristian Hovde Liland
</p>


<h3>References</h3>

<p>Nieuwenhuis, R.; Grotenhuis, M.; Pelzer, B. Weighted Effect Coding for Observational Data with wec. R. J. 2017, 9, 477-485.
</p>


<h3>See Also</h3>

<p><code>lm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">balanced   &lt;- factor(c(rep("A", 3), rep("B", 3), rep("C", 3)))
unbalanced &lt;- factor(c(rep("A", 3), rep("B", 3), rep("C", 2)))
# Weighted coding when applied to balanced data
contr.weighted(balanced)
# Weighted coding when applied to unbalanced data (default base level)
contr.weighted(unbalanced)
# Weighted coding when applied to unbalanced data (base level = "C")
contr.weighted(unbalanced, "C")
</code></pre>


</div>