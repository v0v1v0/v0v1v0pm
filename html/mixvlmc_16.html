<div class="container">

<table style="width: 100%;"><tr>
<td>contexts.ctx_tree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Contexts of a context tree</h2>

<h3>Description</h3>

<p>This function extracts from a context tree a description of all of its
contexts.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'ctx_tree'
contexts(
  ct,
  sequence = FALSE,
  reverse = FALSE,
  frequency = NULL,
  positions = FALSE,
  ...
)

## S3 method for class 'ctx_tree_cpp'
contexts(
  ct,
  sequence = FALSE,
  reverse = FALSE,
  frequency = NULL,
  positions = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ct</code></td>
<td>
<p>a context tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sequence</code></td>
<td>
<p>if <code>TRUE</code> the function returns its results as a <code>data.frame</code>,
if <code>FALSE</code> (default) as a list of <code>ctx_node</code> objects. (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p>specifies the counts to be included in the result
data.frame. The default value of <code>NULL</code> does not include anything.
<code>"total"</code> gives the number of occurrences of each context in the original
sequence. <code>"detailed"</code> includes in addition the break down of these
occurrences into all the possible states.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positions</code></td>
<td>
<p>logical (defaults to FALSE). Specify whether the positions
of each context in the time series used to build the context tree should be
reported in a <code>positions</code> column of the result data frame. The availability
of the positions depends on the way the context tree was built. See details
for the definition of a position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for the contexts function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default behaviour of the function is to return a list of all the
contexts using <code>ctx_node</code> objects (as returned by <code>find_sequence()</code>). The
properties of the contexts can then be explored using adapted functions
such as <code>counts()</code> and <code>positions()</code>.
</p>
<p>When <code>sequence=TRUE</code> the method returns a data.frame whose first column,
named <code>context</code>, contains the contexts as vectors (i.e. the value returned
by <code>as_sequence()</code> applied to a <code>ctx_node</code> object). Other columns contain
context specific values specified by the additional parameters. Setting any
of those parameters to a value that ask for reporting information will
toggle the result type of the function to <code>data.frame</code>.
</p>
<p>If <code>frequency="total"</code>, an additional column named <code>freq</code> gives the number
of occurrences of each context in the series used to build the tree. If
<code>frequency="detailed"</code>, one additional column is added per state in the
context space. Each column records the number of times a given context is
followed by the corresponding value in the original series.
</p>


<h3>Value</h3>

<p>A list of class <code>contexts</code> containing the contexts represented in
this tree (as <code>ctx_node</code>) or a data.frame.
</p>


<h3>Positions</h3>

<p>A position of a context <code>ctx</code> in the time series <code>x</code> is
an index value <code>t</code> such that the context ends with <code>x[t]</code>. Thus <code>x[t+1]</code> is
after the context. For instance if <code>x=c(0, 0, 1, 1)</code> and <code>ctx=c(0, 1)</code> (in
standard state order), then the position of <code>ctx</code> in <code>x</code> is 3.
</p>


<h3>State order in a context</h3>

<p>Notice that contexts are given by default
in the temporal order and not in the "reverse" order used by many VLMC
research papers: older values are on the left. For instance, the context
<code>c(1, 0)</code> is reported if the sequence 0, then 1 appeared in the time series
used to build the context tree. Set reverse to <code>TRUE</code> for the reverse
convention which is somewhat easier to relate to the way the context trees
are represented by <code>draw()</code> (i.e. recent values at the top the tree).
</p>


<h3>See Also</h3>

<p><code>find_sequence()</code> and <code>find_sequence.covlmc()</code> for direct access to
a specific context, and <code>contexts.ctx_tree()</code>, <code>contexts.vlmc()</code> and
<code>contexts.covlmc()</code> for concrete implementations of <code>contexts()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">dts &lt;- sample(as.factor(c("A", "B", "C")), 100, replace = TRUE)
dts_tree &lt;- ctx_tree(dts, max_depth = 3, min_size = 5)
## direct representation with ctx_node objects
contexts(dts_tree)
## data.frame format
contexts(dts_tree, sequence = TRUE)
contexts(dts_tree, frequency = "total")
contexts(dts_tree, frequency = "detailed")
</code></pre>


</div>