<div class="container">

<table style="width: 100%;"><tr>
<td>plotBiomassObservedVsModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting observed vs. model biomass data</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
If biomass observations are available for at least some species via the
<code>biomass_observed</code> column in the species parameter data frame, this function
plots the biomass of each species in the model against the observed
biomasses. When called with a MizerSim object, the plot will use the model
biomasses predicted for the final time step in the simulation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plotBiomassObservedVsModel(
  object,
  species = NULL,
  ratio = TRUE,
  log_scale = TRUE,
  return_data = FALSE,
  labels = TRUE,
  show_unobserved = FALSE
)

plotlyBiomassObservedVsModel(
  object,
  species = NULL,
  ratio = FALSE,
  log_scale = TRUE,
  return_data = FALSE,
  show_unobserved = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class MizerParams or
MizerSim.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>The species to be included. Optional. By default all observed
biomasses will be included. A vector of species names, or a numeric vector
with the species indices, or a logical vector indicating for each species
whether it is to be included (TRUE) or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Whether to plot model biomass vs. observed biomass (FALSE) or
the ratio of model : observed biomass (TRUE). Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_scale</code></td>
<td>
<p>Whether to plot on the log10 scale (TRUE) or not (FALSE).
For the non-ratio plot this applies for both axes, for the ratio plot only
the x-axis is on the log10 scale. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_data</code></td>
<td>
<p>Whether to return the data frame for the plot (TRUE) or
not (FALSE). Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>Whether to show text labels for each species (TRUE) or not
(FALSE). Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_unobserved</code></td>
<td>
<p>Whether to include also species for which no
biomass observation is available. If TRUE, these species will be
shown as if their observed biomass was equal to the model biomass.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Before you can use this function you will need to have added a
<code>biomass_observed</code> column to your model which gives the observed biomass in
grams.  For species for which you have no observed biomass, you should set
the value in the <code>biomass_observed</code> column to 0 or NA.
</p>
<p>Biomass observations usually only include individuals above a certain size.
This size should be specified in a <code>biomass_cutoff</code> column of the species
parameter data frame. If this is missing, it is assumed that all sizes are
included in the observed biomass, i.e., it includes larval biomass.
</p>
<p>The total relative error is shown in the caption of the plot, calculated by
</p>
<p style="text-align: center;"><code class="reqn">TRE = \sum_i|1-\rm{ratio_i}|</code>
</p>
<p> where
<code class="reqn">\rm{ratio_i}</code> is the ratio of model biomass / observed
biomass for species i.
</p>


<h3>Value</h3>

<p>A ggplot2 object with the plot of model biomass by species compared
to observed biomass. If <code>return_data = TRUE</code>, the data frame used to
create the plot is returned instead of the plot.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># create an example
params &lt;- NS_params
species_params(params)$biomass_observed &lt;-
    c(0.8, 61, 12, 35, 1.6, NA, 10, 7.6, 135, 60, 30, NA)
species_params(params)$biomass_cutoff &lt;- 10
params &lt;- calibrateBiomass(params)

# Plot with default options
plotBiomassObservedVsModel(params)

# Plot including also species without observations
plotBiomassObservedVsModel(params, show_unobserved = TRUE)

# Show the ratio instead
plotBiomassObservedVsModel(params, ratio = TRUE)
</code></pre>


</div>