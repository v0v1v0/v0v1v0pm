<div class="container">

<table style="width: 100%;"><tr>
<td>plotSpectra</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot the abundance spectra</h2>

<h3>Description</h3>

<p>Plots the number density multiplied by a power of the weight, with the power
specified by the <code>power</code> argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plotSpectra(
  object,
  species = NULL,
  time_range,
  geometric_mean = FALSE,
  wlim = c(NA, NA),
  ylim = c(NA, NA),
  power = 1,
  biomass = TRUE,
  total = FALSE,
  resource = TRUE,
  background = TRUE,
  highlight = NULL,
  return_data = FALSE,
  ...
)

plotlySpectra(
  object,
  species = NULL,
  time_range,
  geometric_mean = FALSE,
  wlim = c(NA, NA),
  ylim = c(NA, NA),
  power = 1,
  biomass = TRUE,
  total = FALSE,
  resource = TRUE,
  background = TRUE,
  highlight = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class MizerSim or
MizerParams.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>The species to be selected. Optional. By default all target
species are selected. A vector of species names, or a
numeric vector with the species indices, or a logical vector indicating for
each species whether it is to be selected (TRUE) or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_range</code></td>
<td>
<p>The time range (either a vector of values, a vector of min
and max time, or a single value) to average the abundances over. Default is
the final time step. Ignored when called with a MizerParams
object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geometric_mean</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
If TRUE then the average of the abundances over the
time range is a geometric mean instead of the default arithmetic mean.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wlim</code></td>
<td>
<p>A numeric vector of length two providing lower and upper limits
for the w axis. Use NA to refer to the existing minimum or maximum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>A numeric vector of length two providing lower and upper limits
for the y axis. Use NA to refer to the existing minimum or maximum. Any
values below 1e-20 are always cut off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>The abundance is plotted as the number density times the weight
raised to <code>power</code>. The default <code>power = 1</code> gives the biomass
density, whereas <code>power = 2</code> gives the biomass density with respect
to logarithmic size bins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biomass</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>
Only used if <code>power</code> argument is missing. Then
<code>biomass = TRUE</code> is equivalent to <code>power=1</code> and
<code>biomass = FALSE</code> is equivalent to <code>power=0</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total</code></td>
<td>
<p>A boolean value that determines whether the total over all
species in the system is plotted as well. Note that even if the plot
only shows a selection of species, the total is including all species.
Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resource</code></td>
<td>
<p>A boolean value that determines whether resource is included.
Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>A boolean value that determines whether background species
are included. Ignored if the model does not contain background species.
Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highlight</code></td>
<td>
<p>Name or vector of names of the species to be highlighted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_data</code></td>
<td>
<p>A boolean value that determines whether the formatted data
used for the plot is returned instead of the plot itself. Default value is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments (currently unused)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When called with a MizerSim object, the abundance is averaged
over the specified time range (a single value for the time range can be used
to plot a single time step). When called with a MizerParams
object the initial abundance is plotted.
</p>


<h3>Value</h3>

<p>A ggplot2 object, unless <code>return_data = TRUE</code>, in which case a data
frame with the four variables 'w', 'value', 'Species', 'Legend' is
returned.
</p>


<h3>See Also</h3>

<p>plotting_functions
</p>
<p>Other plotting functions: 
<code>animateSpectra()</code>,
<code>plot,MizerSim,missing-method</code>,
<code>plotBiomass()</code>,
<code>plotDiet()</code>,
<code>plotFMort()</code>,
<code>plotFeedingLevel()</code>,
<code>plotGrowthCurves()</code>,
<code>plotPredMort()</code>,
<code>plotYield()</code>,
<code>plotYieldGear()</code>,
<code>plotting_functions</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
params &lt;-  NS_params
sim &lt;- project(params, effort=1, t_max=20, t_save = 2, progress_bar = FALSE)
plotSpectra(sim)
plotSpectra(sim, wlim = c(1e-6, NA))
plotSpectra(sim, time_range = 10:20)
plotSpectra(sim, time_range = 10:20, power = 0)
plotSpectra(sim, species = c("Cod", "Herring"), power = 1)

# Returning the data frame
fr &lt;- plotSpectra(sim, return_data = TRUE)
str(fr)

</code></pre>


</div>