<div class="container">

<table style="width: 100%;"><tr>
<td>confusion</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct and analyze confusion matrices</h2>

<h3>Description</h3>

<p>Confusion matrices compare two classifications (usually one done
automatically using a machine learning algorithm versus the true
classification done by a specialist... but one can also compare two automatic
or two manual classifications against each other).
</p>


<h3>Usage</h3>

<pre><code class="language-R">confusion(x, ...)

## Default S3 method:
confusion(
  x,
  y = NULL,
  vars = c("Actual", "Predicted"),
  labels = vars,
  merge.by = "Id",
  useNA = "ifany",
  prior,
  ...
)

## S3 method for class 'mlearning'
confusion(
  x,
  y = response(x),
  labels = c("Actual", "Predicted"),
  useNA = "ifany",
  prior,
  ...
)

## S3 method for class 'confusion'
print(x, sums = TRUE, error.col = sums, digits = 0, sort = "ward.D2", ...)

## S3 method for class 'confusion'
summary(object, type = "all", sort.by = "Fscore", decreasing = TRUE, ...)

## S3 method for class 'summary.confusion'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object with a <code>confusion()</code> method implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to the method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>another object, from which to extract the second classification, or
<code>NULL</code> if not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>the variables of interest in the first and second classification
in the case the objects are lists or data frames. Otherwise, this argument
is ignored and <code>x</code> and <code>y</code> must be factors with same length and same levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>labels to use for the two classifications. By default, they are
the same as <code>vars</code>, or the one in the confusion matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge.by</code></td>
<td>
<p>a character string with the name of variables to use to merge
the two data frames, or <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useNA</code></td>
<td>
<p>do we keep <code>NA</code>s as a separate category? The default <code>"ifany"</code>
creates this category only if there are missing values. Other possibilities
are <code>"no"</code>, or <code>"always"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior</code></td>
<td>
<p>class frequencies to use for first classifier that is tabulated
in the rows of the confusion matrix. For its value, see here under, the
<code style="white-space: pre;">⁠value=⁠</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sums</code></td>
<td>
<p>is the confusion matrix printed with rows and columns sums?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error.col</code></td>
<td>
<p>is a column with class error for first classifier added
(equivalent to false negative rate of FNR)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>the number of digits after the decimal point to print in the
confusion matrix. The default or zero leads to most compact presentation
and is suitable for frequencies, but not for relative frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>are rows and columns of the confusion matrix sorted so that
classes with larger confusion are closer together? Sorting is done
using a hierarchical clustering with <code>hclust()</code>. The clustering method
is <code>"ward.D2"</code> by default, but see the <code>hclust()</code> help for other options).
If <code>FALSE</code> or <code>NULL</code>, no sorting is done.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a <strong>confusion</strong> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>either <code>"all"</code> (by default), or considering <code>TP</code> is the true
positives, <code>FP</code> is the false positives, <code>TN</code> is the true negatives and <code>FN</code>
is the false negatives, one can also specify: <code>"Fscore"</code> (F-score = F-measure
= F1 score = harmonic mean of Precision and recall), <code>"Recall"</code>
(TP / (TP + FN) = 1 - FNR), <code>"Precision"</code> (TP / (TP + FP) = 1 - FDR),
<code>"Specificity"</code> (TN / (TN + FP) = 1 - FPR), <code>"NPV"</code> (Negative predicted value
= TN / (TN + FN) = 1 - FOR), <code>"FPR"</code> (False positive rate = 1 - Specificity
= FP / (FP + TN)), <code>"FNR"</code> (False negative rate = 1 - Recall = FN / (TP + FN)),
<code>"FDR"</code> (False Discovery Rate = 1 - Precision = FP / (TP + FP)), <code>"FOR"</code>
(False omission rate = 1 - NPV = FN / (FN + TN)), <code>"LRPT"</code> (Likelihood Ratio
for Positive Tests = Recall / FPR = Recall / (1 - Specificity)), <code>"LRNT"</code>
Likelihood Ratio for Negative Tests = FNR / Specificity = (1 - Recall) /
Specificity, <code>"LRPS"</code> (Likelihood Ratio for Positive Subjects = Precision /
FOR = Precision / (1 - NPV)), <code>"LRNS"</code> (Likelihood Ratio Negative Subjects =
FDR / NPV = (1 - Precision) / (1 - FOR)), <code>"BalAcc"</code> (Balanced accuracy
= (Sensitivity + Specificity) / 2), <code>"MCC"</code> (Matthews correlation coefficient),
<code>"Chisq"</code> (Chisq metric), or <code>"Bray"</code> (Bray-Curtis metric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.by</code></td>
<td>
<p>the statistics to use to sort the table (by default, Fmeasure,
the F1 score for each class = 2 * recall * precision / (recall + precision)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decreasing</code></td>
<td>
<p>do we sort in increasing or decreasing order?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A confusion matrix in a <strong>confusion</strong> object.
</p>


<h3>See Also</h3>

<p><code>mlearning()</code>, <code>plot.confusion()</code>, <code>prior()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("Glass", package = "mlbench")
# Use a little bit more informative labels for Type
Glass$Type &lt;- as.factor(paste("Glass", Glass$Type))

# Use learning vector quantization to classify the glass types
# (using default parameters)
summary(glass_lvq &lt;- ml_lvq(Type ~ ., data = Glass))

# Calculate cross-validated confusion matrix
(glass_conf &lt;- confusion(cvpredict(glass_lvq), Glass$Type))
# Raw confusion matrix: no sort and no margins
print(glass_conf, sums = FALSE, sort = FALSE)

summary(glass_conf)
summary(glass_conf, type = "Fscore")
</code></pre>


</div>