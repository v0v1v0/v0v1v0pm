<div class="container">

<table style="width: 100%;"><tr>
<td>plot.confusion</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot a confusion matrix</h2>

<h3>Description</h3>

<p>Several graphical representations of <strong>confusion</strong> objects are possible: an
image of the matrix with colored squares, a barplot comparing recall and
precision, a stars plot also comparing two metrics, possibly also comparing
two different classifiers of the same dataset, or a dendrogram grouping the
classes relative to the errors observed in the confusion matrix (classes
with more errors are pooled together more rapidly).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'confusion'
plot(
  x,
  y = NULL,
  type = c("image", "barplot", "stars", "dendrogram"),
  stat1 = "Recall",
  stat2 = "Precision",
  names,
  ...
)

confusion_image(
  x,
  y = NULL,
  labels = names(dimnames(x)),
  sort = "ward.D2",
  numbers = TRUE,
  digits = 0,
  mar = c(3.1, 10.1, 3.1, 3.1),
  cex = 1,
  asp = 1,
  colfun,
  ncols = 41,
  col0 = FALSE,
  grid.col = "gray",
  ...
)

confusionImage(
  x,
  y = NULL,
  labels = names(dimnames(x)),
  sort = "ward.D2",
  numbers = TRUE,
  digits = 0,
  mar = c(3.1, 10.1, 3.1, 3.1),
  cex = 1,
  asp = 1,
  colfun,
  ncols = 41,
  col0 = FALSE,
  grid.col = "gray",
  ...
)

confusion_barplot(
  x,
  y = NULL,
  col = c("PeachPuff2", "green3", "lemonChiffon2"),
  mar = c(1.1, 8.1, 4.1, 2.1),
  cex = 1,
  cex.axis = cex,
  cex.legend = cex,
  main = "F-score (precision versus recall)",
  numbers = TRUE,
  min.width = 17,
  ...
)

confusionBarplot(
  x,
  y = NULL,
  col = c("PeachPuff2", "green3", "lemonChiffon2"),
  mar = c(1.1, 8.1, 4.1, 2.1),
  cex = 1,
  cex.axis = cex,
  cex.legend = cex,
  main = "F-score (precision versus recall)",
  numbers = TRUE,
  min.width = 17,
  ...
)

confusion_stars(
  x,
  y = NULL,
  stat1 = "Recall",
  stat2 = "Precision",
  names,
  main,
  col = c("green2", "blue2", "green4", "blue4"),
  ...
)

confusionStars(
  x,
  y = NULL,
  stat1 = "Recall",
  stat2 = "Precision",
  names,
  main,
  col = c("green2", "blue2", "green4", "blue4"),
  ...
)

confusion_dendrogram(
  x,
  y = NULL,
  labels = rownames(x),
  sort = "ward.D2",
  main = "Groups clustering",
  ...
)

confusionDendrogram(
  x,
  y = NULL,
  labels = rownames(x),
  sort = "ward.D2",
  main = "Groups clustering",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <strong>confusion</strong> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p><code>NULL</code> (not used), or a second <strong>confusion</strong> object when two
different classifications are compared in the plot (<code>"stars"</code> type).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>the kind of plot to produce (<code>"image"</code>, the default, or
<code>"barplot"</code>, <code>"stars"</code>, <code>"dendrogram"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat1</code></td>
<td>
<p>the first metric to plot for the <code>"stars"</code> type (Recall by
default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat2</code></td>
<td>
<p>the second metric to plot for the <code>"stars"</code> type (Precision by
default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>names of the two classifiers to compare</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to the function. It can be all arguments
or the corresponding plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>labels to use for the two classifications. By default, they are
the same as <code>vars</code>, or the one in the confusion matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>are rows and columns of the confusion matrix sorted so that
classes with larger confusion are closer together? Sorting is done
using a hierarchical clustering with <code>hclust()</code>. The clustering method
is <code>"ward.D2"</code> by default, but see the <code>hclust()</code> help for other options).
If <code>FALSE</code> or <code>NULL</code>, no sorting is done.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numbers</code></td>
<td>
<p>are actual numbers indicated in the confusion matrix image?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>the number of digits after the decimal point to print in the
confusion matrix. The default or zero leads to most compact presentation
and is suitable for frequencies, but not for relative frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>graph margins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>text magnification factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asp</code></td>
<td>
<p>graph aspect ratio. There is little reasons to change the default
value of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colfun</code></td>
<td>
<p>a function that calculates a series of colors, like e.g.,
<code>cm.colors()</code> that accepts one argument being the number of colors
to be generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncols</code></td>
<td>
<p>the number of colors to generate. It should preferably be
2 * number of levels + 1, where levels is the number of frequencies you
want to evidence in the plot. Default to 41.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col0</code></td>
<td>
<p>should null values be colored or not (no, by default)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.col</code></td>
<td>
<p>color to use for grid lines, or <code>NULL</code> for not drawing grid
lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>color(s) to use for the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>idem for axes. If <code>NULL</code>, the axis is not drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.legend</code></td>
<td>
<p>idem for legend text. If <code>NULL</code>, no legend is added.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>main title of the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.width</code></td>
<td>
<p>minimum bar width required to add numbers.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Data calculate to create the plots are returned invisibly. These
functions are mostly used for their side-effect of producing a plot.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("Glass", package = "mlbench")
# Use a little bit more informative labels for Type
Glass$Type &lt;- as.factor(paste("Glass", Glass$Type))

# Use learning vector quantization to classify the glass types
# (using default parameters)
summary(glass_lvq &lt;- ml_lvq(Type ~ ., data = Glass))

# Calculate cross-validated confusion matrix and plot it in different ways
(glass_conf &lt;- confusion(cvpredict(glass_lvq), Glass$Type))
# Raw confusion matrix: no sort and no margins
print(glass_conf, sums = FALSE, sort = FALSE)
# Plots
plot(glass_conf) # Image by default
plot(glass_conf, sort = FALSE) # No sorting
plot(glass_conf, type = "barplot")
plot(glass_conf, type = "stars")
plot(glass_conf, type = "dendrogram")

# Build another classifier and make a comparison
summary(glass_naive_bayes &lt;- ml_naive_bayes(Type ~ ., data = Glass))
(glass_conf2 &lt;- confusion(cvpredict(glass_naive_bayes), Glass$Type))

# Comparison plot for two classifiers
plot(glass_conf, glass_conf2)
</code></pre>


</div>