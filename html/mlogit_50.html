<div class="container">

<table style="width: 100%;"><tr>
<td>mlogit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Multinomial logit model</h2>

<h3>Description</h3>

<p>Estimation by maximum likelihood of the multinomial logit model,
with alternative-specific and/or individual specific variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mlogit(
  formula,
  data,
  subset,
  weights,
  na.action,
  start = NULL,
  alt.subset = NULL,
  reflevel = NULL,
  nests = NULL,
  un.nest.el = FALSE,
  unscaled = FALSE,
  heterosc = FALSE,
  rpar = NULL,
  probit = FALSE,
  R = 40,
  correlation = FALSE,
  halton = NULL,
  random.nb = NULL,
  panel = FALSE,
  estimate = TRUE,
  seed = 10,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a symbolic description of the model to be estimated,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>the data: an <code>mlogit.data</code> object or an ordinary
<code>data.frame</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>an optional vector specifying a subset of
observations for <code>mlogit</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>an optional vector of weights,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>a function which indicates what should happen when
the data contains <code>NA</code>s,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>a vector of starting values,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alt.subset</code></td>
<td>
<p>a vector of character strings containing the
subset of alternative on which the model should be estimated,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reflevel</code></td>
<td>
<p>the base alternative (the one for which the
coefficients of individual-specific variables are normalized to
0),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nests</code></td>
<td>
<p>a named list of characters vectors, each names being a
nest, the corresponding vector being the set of alternatives
that belong to this nest,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>un.nest.el</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the hypothesis of unique
elasticity is imposed for nested logit models,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unscaled</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the unscaled version of the
nested logit model is estimated,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heterosc</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the heteroscedastic logit
model is estimated,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rpar</code></td>
<td>
<p>a named vector whose names are the random parameters
and values the distribution : <code>'n'</code> for normal, <code>'l'</code> for
log-normal, <code>'t'</code> for truncated normal, <code>'u' </code> for uniform,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probit</code></td>
<td>
<p>if <code>TRUE</code>, a multinomial porbit model is estimated,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>the number of function evaluation for the gaussian
quadrature method used if <code>heterosc = TRUE</code>, the number of
draws of pseudo-random numbers if <code>rpar</code> is not <code>NULL</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correlation</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, if true,
the correlation between random parameters is taken into
account,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>halton</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, if not <code>NULL</code>,
halton sequence is used instead of pseudo-random numbers. If
<code>halton = NA</code>, some default values are used for the prime of
the sequence (actually, the primes are used in order) and for
the number of elements droped. Otherwise, <code>halton</code> should be a
list with elements <code>prime</code> (the primes used) and <code>drop</code> (the
number of elements droped).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random.nb</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, a
user-supplied matrix of random,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code> and if the data
are repeated observations of the same unit ; if <code>TRUE</code>, the
mixed-logit model is estimated using panel techniques,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate</code></td>
<td>
<p>a boolean indicating whether the model should be
estimated or not: if not, the <code>model.frame</code> is returned,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>the seed to use for random numbers (for mixed logit and
probit models),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to <code>mlogit.data</code> or
<code>mlogit.optim</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For how to use the formula argument, see <code>Formula()</code>.
</p>
<p>The <code>data</code> argument may be an ordinary <code>data.frame</code>. In this case,
some supplementary arguments should be provided and are passed to
<code>mlogit.data()</code>. Note that it is not necessary to indicate the
choice argument as it is deduced from the formula.
</p>
<p>The model is estimated using the <code>mlogit.optim()</code>.
function.
</p>
<p>The basic multinomial logit model and three important extentions of
this model may be estimated.
</p>
<p>If <code>heterosc=TRUE</code>, the heteroscedastic logit model is estimated.
<code>J - 1</code> extra coefficients are estimated that represent the scale
parameter for <code>J - 1</code> alternatives, the scale parameter for the
reference alternative being normalized to 1. The probabilities
don't have a closed form, they are estimated using a gaussian
quadrature method.
</p>
<p>If <code>nests</code> is not <code>NULL</code>, the nested logit model is estimated.
</p>
<p>If <code>rpar</code> is not <code>NULL</code>, the random parameter model is estimated.
The probabilities are approximated using simulations with <code>R</code> draws
and halton sequences are used if <code>halton</code> is not
<code>NULL</code>. Pseudo-random numbers are drawns from a standard normal and
the relevant transformations are performed to obtain numbers drawns
from a normal, log-normal, censored-normal or uniform
distribution. If <code>correlation = TRUE</code>, the correlation between the
random parameters are taken into account by estimating the
components of the cholesky decomposition of the covariance
matrix. With G random parameters, without correlation G standard
deviations are estimated, with correlation G * (G + 1) /2
coefficients are estimated.
</p>


<h3>Value</h3>

<p>An object of class <code>"mlogit"</code>, a list with elements:
</p>

<ul>
<li>
<p> coefficients: the named vector of coefficients,
</p>
</li>
<li>
<p> logLik: the value of the log-likelihood,
</p>
</li>
<li>
<p> hessian: the hessian of the log-likelihood at convergence,
</p>
</li>
<li>
<p> gradient: the gradient of the log-likelihood at convergence,
</p>
</li>
<li>
<p> call: the matched call,
</p>
</li>
<li>
<p> est.stat: some information about the estimation (time used,
optimisation method),
</p>
</li>
<li>
<p> freq: the frequency of choice,
</p>
</li>
<li>
<p> residuals: the residuals,
</p>
</li>
<li>
<p> fitted.values: the fitted values,
</p>
</li>
<li>
<p> formula: the formula (a <code>Formula</code> object),
</p>
</li>
<li>
<p> expanded.formula: the formula (a <code>formula</code> object),
</p>
</li>
<li>
<p> model: the model frame used,
</p>
</li>
<li>
<p> index: the index of the choice and of the alternatives.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>References</h3>

<p>McFadden D (1973).
“Conditional Logit Analysis of Qualitative Choice Behaviour.”
In Zarembka P (ed.), <em>Frontiers in Econometrics</em>, 105-142.
Academic Press New York, New York, NY, USA.
</p>
<p>McFadden D (1974).
“The measurement of urban travel demand.”
<em>Journal of Public Economics</em>, <b>3</b>(4), 303 - 328.
ISSN 0047-2727, <a href="https://www.sciencedirect.com/science/article/pii/0047272774900036">https://www.sciencedirect.com/science/article/pii/0047272774900036</a>.
</p>
<p>Train K (2009).
<em>Discrete Choice Methods with Simulation</em>.
Cambridge University Press.
<a href="https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555">https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555</a>.
</p>


<h3>See Also</h3>

<p><code>mlogit.data()</code> to shape the data. <code>nnet::multinom()</code> from
package <code>nnet</code> performs the estimation of the multinomial logit
model with individual specific variables. <code>mlogit.optim()</code>
details about the optimization function.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Cameron and Trivedi's Microeconometrics p.493 There are two
## alternative specific variables : price and catch one individual
## specific variable (income) and four fishing mode : beach, pier, boat,
## charter

data("Fishing", package = "mlogit")
Fish &lt;- dfidx(Fishing, varying = 2:9, shape = "wide", choice = "mode")

## a pure "conditional" model
summary(mlogit(mode ~ price + catch, data = Fish))

## a pure "multinomial model"
summary(mlogit(mode ~ 0 | income, data = Fish))

## which can also be estimated using multinom (package nnet)
summary(nnet::multinom(mode ~ income, data = Fishing))

## a "mixed" model
m &lt;- mlogit(mode ~ price + catch | income, data = Fish)
summary(m)

## same model with charter as the reference level
m &lt;- mlogit(mode ~ price + catch | income, data = Fish, reflevel = "charter")

## same model with a subset of alternatives : charter, pier, beach
m &lt;- mlogit(mode ~ price + catch | income, data = Fish,
            alt.subset = c("charter", "pier", "beach"))

## model on unbalanced data i.e. for some observations, some
## alternatives are missing
# a data.frame in wide format with two missing prices
Fishing2 &lt;- Fishing
Fishing2[1, "price.pier"] &lt;- Fishing2[3, "price.beach"] &lt;- NA
mlogit(mode ~ price + catch | income, Fishing2, shape = "wide", varying = 2:9)

# a data.frame in long format with three missing lines
data("TravelMode", package = "AER")
Tr2 &lt;- TravelMode[-c(2, 7, 9),]
mlogit(choice ~ wait + gcost | income + size, Tr2)

## An heteroscedastic logit model
data("TravelMode", package = "AER")
hl &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode, heterosc = TRUE)

## A nested logit model
TravelMode$avincome &lt;- with(TravelMode, income * (mode == "air"))
TravelMode$time &lt;- with(TravelMode, travel + wait)/60
TravelMode$timeair &lt;- with(TravelMode, time * I(mode == "air"))
TravelMode$income &lt;- with(TravelMode, income / 10)
# Hensher and Greene (2002), table 1 p.8-9 model 5
TravelMode$incomeother &lt;- with(TravelMode, ifelse(mode %in% c('air', 'car'), income, 0))
nl &lt;- mlogit(choice ~ gcost + wait + incomeother, TravelMode,
             nests = list(public = c('train', 'bus'), other = c('car','air')))
             
# same with a comon nest elasticity (model 1)
nl2 &lt;- update(nl, un.nest.el = TRUE)

## a probit model
## Not run: 
pr &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode, probit = TRUE)

## End(Not run)

## a mixed logit model
## Not run: 
rpl &lt;- mlogit(mode ~ price + catch | income, Fishing, varying = 2:9,
              rpar = c(price= 'n', catch = 'n'), correlation = TRUE,
              alton = NA, R = 50)
summary(rpl)
rpar(rpl)
cor.mlogit(rpl)
cov.mlogit(rpl)
rpar(rpl, "catch")
summary(rpar(rpl, "catch"))

## End(Not run)

# a ranked ordered model
data("Game", package = "mlogit")
g &lt;- mlogit(ch ~ own | hours, Game, varying = 1:12, ranked = TRUE,
            reflevel = "PC", idnames = c("chid", "alt"))
</code></pre>


</div>