<div class="container">

<table style="width: 100%;"><tr>
<td>DataBackend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>DataBackend</h2>

<h3>Description</h3>

<p>This is the abstract base class for data backends.
</p>
<p>Data backends provide a layer of abstraction for various data storage systems.
It is not recommended to work directly with the DataBackend.
Instead, all data access is handled transparently via the Task.
</p>
<p>This package comes with two implementations for backends:
</p>

<ul>
<li> <p>DataBackendDataTable which stores the data as <code>data.table::data.table()</code>.
</p>
</li>
<li> <p>DataBackendMatrix which stores the data as sparse <code>Matrix::sparseMatrix()</code>.
</p>
</li>
</ul>
<p>To connect to out-of-memory database management systems such as SQL servers,
see the extension package <a href="https://CRAN.R-project.org/package=mlr3db"><span class="pkg">mlr3db</span></a>.
</p>


<h3>Details</h3>

<p>The required set of fields and methods to implement a custom <code>DataBackend</code> is
listed in the respective sections (see DataBackendDataTable or
DataBackendMatrix for exemplary implementations of the interface).
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>primary_key</code></dt>
<dd>
<p>(<code>character(1)</code>)<br>
Column name of the primary key column of positive and unique integer row ids.</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>data_formats</code></dt>
<dd>
<p>(<code>character()</code>)<br>
Supported data format. Always <code>"data.table"</code>..
This is deprecated and will be removed in the future.</p>
</dd>
<dt><code>hash</code></dt>
<dd>
<p>(<code>character(1)</code>)<br>
Hash (unique identifier) for this object.</p>
</dd>
<dt><code>col_hashes</code></dt>
<dd>
<p>(named <code>character</code>)<br>
Hash (unique identifier) for all columns except the <code>primary_key</code>: A <code>character</code> vector, named by the columns that each element refers to.<br>
Columns of different <code>Task</code>s or <code>DataBackend</code>s that have agreeing <code>col_hashes</code> always represent the same data, given that the same <code>row</code>s are selected.
The reverse is not necessarily true: There can be columns with the same content that have different <code>col_hashes</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataBackend-new"><code>DataBackend$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackend-format"><code>DataBackend$format()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackend-print"><code>DataBackend$print()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-DataBackend-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates a new instance of this R6 class.
</p>
<p>Note: This object is typically constructed via a derived classes, e.g.
DataBackendDataTable or DataBackendMatrix, or via the S3 method
<code>as_data_backend()</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackend$new(data, primary_key, data_formats)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt>
<dd>
<p>(any)<br>
The format of the input data depends on the specialization. E.g.,
DataBackendDataTable expects a <code>data.table::data.table()</code> and
DataBackendMatrix expects a <code>Matrix::Matrix()</code> from <a href="https://CRAN.R-project.org/package=Matrix"><span class="pkg">Matrix</span></a>.</p>
</dd>
<dt><code>primary_key</code></dt>
<dd>
<p>(<code>character(1)</code>)<br>
Each DataBackend needs a way to address rows, which is done via a
column of unique integer values, referenced here by <code>primary_key</code>. The
use of this variable may differ between backends.</p>
</dd>
<dt><code>data_formats</code></dt>
<dd>
<p>(<code>character()</code>)<br>
Deprecated: ignored, and will be removed in the future.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-DataBackend-format"></a>



<h4>Method <code>format()</code>
</h4>

<p>Helper for print outputs.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackend$format(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt>
<dd>
<p>(ignored).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-DataBackend-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Printer.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackend$print()</pre></div>




<h3>See Also</h3>


<ul>
<li>
<p> Chapter in the <a href="https://mlr3book.mlr-org.com/">mlr3book</a>:
<a href="https://mlr3book.mlr-org.com/chapters/chapter10/advanced_technical_aspects_of_mlr3.html#sec-backends">https://mlr3book.mlr-org.com/chapters/chapter10/advanced_technical_aspects_of_mlr3.html#sec-backends</a>
</p>
</li>
<li>
<p> Package <a href="https://CRAN.R-project.org/package=mlr3db"><span class="pkg">mlr3db</span></a> to interface out-of-memory data,
e.g. SQL servers or <a href="https://CRAN.R-project.org/package=duckdb"><span class="pkg">duckdb</span></a>.
</p>
</li>
</ul>
<p>Other DataBackend: 
<code>DataBackendDataTable</code>,
<code>DataBackendMatrix</code>,
<code>as_data_backend.Matrix()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data = data.table::data.table(id = 1:5, x = runif(5),
  y = sample(letters[1:3], 5, replace = TRUE))

b = DataBackendDataTable$new(data, primary_key = "id")
print(b)
b$head(2)
b$data(rows = 1:2, cols = "x")
b$distinct(rows = b$rownames, "y")
b$missings(rows = b$rownames, cols = names(data))
</code></pre>


</div>