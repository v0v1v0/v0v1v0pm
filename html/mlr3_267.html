<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_test_helpers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Documentation of mlr3 test helpers</h2>

<h3>Description</h3>

<p>The mlr3 package contains various helper functions to test the validity of objects such as learners.
These functions are not contained in the mlr3 namespaces and are instead located in the <code>inst/testthat</code>
directory of the source package or the <code>testthat</code> directory of the installed package.
</p>
<p>These files can be sourced with the following line of code:
</p>
<div class="sourceCode"><pre>lapply(list.files(system.file("testthat", package = "mlr3"), pattern = "^helper.*\\.[rR]", full.names = TRUE), source)
</pre></div>
<p>Other extension packages such as <code>mlr3proba</code> have similar files that can be sourced accordingly.
</p>
<p>This manual page documents the most important helper functions that are relevant when users implement their own
custom learners.
</p>


<h3>run_autotest()</h3>

<p>This function runs a Learner's automatic test suite.
</p>
<p>During the autotests, multiple tasks are generated depending on the properties of the learner.
The <code>run_autotest()</code> function then trains the learner on each task and predicts with all supported predict types.
(see argument <code>predict_types</code>).
To debug, simply run <code>result = run_autotest(learner)</code> and proceed with investigating
the task, learner and prediction of the returned <code>result</code>.
</p>
<p>For example usages you can look at the autotests in various mlr3 source repositories such as mlr3learners.
More information can be found in the <code>inst/testthat/autotest.R</code> file.
</p>
<p><strong>Parameters</strong>:
</p>

<ul>
<li> <p><code>learner</code> (<code>Learner</code>)<br>
The learner to check.
</p>
</li>
<li> <p><code>N</code> (<code>integer(1)</code>)<br>
The number of rows of the generated tasks.
</p>
</li>
<li> <p><code>exclude</code> (<code>character()</code>)<br>
Each task on which the learner is trained has an id.
If for some reason, one or more such tests ought to be disabled, this argument takes in a regular expression
that disables all tasks whose id matches the regular expression.
</p>
</li>
<li> <p><code>predict_types</code> (<code>character()</code>)<br>
The predict types of the learner to check.
Defaults to all predict typpes of the learner.
</p>
</li>
<li> <p><code>check_replicable</code> (<code>logical(1)</code>)<br>
Whether to check that running the learner twice with the same seed should result in identical predictions.
Default is <code>TRUE</code>.
</p>
</li>
<li> <p><code>configure_learner</code> (<code style="white-space: pre;">⁠function(learner, task)⁠</code>)<br>
Before running a <code>learner</code> on a <code>task</code>, this function allows to change its parameter values depending on the input task.
</p>
</li>
</ul>
<h3>run_paramtest()</h3>

<p><strong>Description</strong>:
</p>
<p>Checks parameters of mlr3 Learners against parameters defined in the upstream functions of the respective learner.
The goal is to detect if parameters have been dropped or added in the upstream implementation.
Some learners do not have all of their parameters stored within the learner function that is called during training.
Sometimes learners come with a "control" function, e.g. <code>glmnet.control()</code> from package <a href="https://CRAN.R-project.org/package=glmnet"><span class="pkg">glmnet</span></a>.
Such learners need to be checked as well since they make up the full ParamSet of the respective learner.
</p>
<p>To work nicely with the defined ParamSet, certain parameters need to be
excluded because these are only present in either the "control" object or the
actual top-level function call. Such exclusions should go into argument
<code>exclude</code> with a comment for the reason of the exclusion. See examples for
more information.
</p>
<p>For example usages you can look at the parameter tests in various mlr3 source repositories such as <a href="https://CRAN.R-project.org/package=mlr3learners"><span class="pkg">mlr3learners</span></a>.
</p>
<p><strong>Parameters</strong>:
</p>

<ul>
<li> <p><code>learner</code> (<code>Learner</code>)<br>
The learner whose parameter set is being checked.
</p>
</li>
<li> <p><code>fun</code> (<code style="white-space: pre;">⁠function()⁠</code> or list of <code>functions()</code>s)<br>
The function(s) containing the parameters that must be implemented by the learner.
</p>
</li>
<li> <p><code>exclude</code> (<code>character()</code>)<br>
Argument names that specified through this argument are exempt from checking.
This can be used when parameters that are available in the <code>fun</code> function(s) are not implemented in the learner,
or when the learner implements additional parameters that are not available in the <code>fun</code> function(s).
</p>
</li>
<li> <p><code>tag</code> (<code>character(1)</code>)<br>
Only parameters that are tagged with this tag are being checked.
If <code>NULL</code> (default), all parameters are checked.
</p>
</li>
</ul>
<h3>expect_learner()</h3>

<p>Checks various properties that learners have to satisfy.
Used for testing learner implementations, especially if all methods and fields are implement as document.
</p>
<p><strong>Parameters</strong>
</p>

<ul>
<li> <p><code>lrn</code> :: (<code>Learner</code>)<br>
The learner whose properties are being verified.
</p>
</li>
<li> <p><code>tsk</code> :: (<code>Task</code>)<br>
Optional argument (default is <code>NULL</code>).
If provided, some additional checks are being run that check the compatibility of the learner and task.
</p>
</li>
<li> <p><code>check_man</code> :: (<code>logical(1)</code>)<br>
Whether to check if the learner has a man page.
</p>
</li>
</ul>
</div>