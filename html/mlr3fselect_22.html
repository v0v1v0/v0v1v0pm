<div class="container">

<table style="width: 100%;"><tr>
<td>fselect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function for Feature Selection</h2>

<h3>Description</h3>

<p>Function to optimize the features of a mlr3::Learner.
The function internally creates a FSelectInstanceBatchSingleCrit or FSelectInstanceBatchMultiCrit which describes the feature selection problem.
It executes the feature selection with the FSelector (<code>method</code>) and returns the result with the fselect instance (<code style="white-space: pre;">⁠$result⁠</code>).
The ArchiveBatchFSelect (<code style="white-space: pre;">⁠$archive⁠</code>) stores all evaluated hyperparameter configurations and performance scores.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fselect(
  fselector,
  task,
  learner,
  resampling,
  measures = NULL,
  term_evals = NULL,
  term_time = NULL,
  terminator = NULL,
  store_benchmark_result = TRUE,
  store_models = FALSE,
  check_values = FALSE,
  callbacks = NULL,
  ties_method = "least_features"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fselector</code></td>
<td>
<p>(FSelector)<br>
Optimization algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>task</code></td>
<td>
<p>(mlr3::Task)<br>
Task to operate on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>learner</code></td>
<td>
<p>(mlr3::Learner)<br>
Learner to optimize the feature subset for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resampling</code></td>
<td>
<p>(mlr3::Resampling)<br>
Resampling that is used to evaluated the performance of the feature subsets.
Uninstantiated resamplings are instantiated during construction so that all feature subsets are evaluated on the same data splits.
Already instantiated resamplings are kept unchanged.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measures</code></td>
<td>
<p>(mlr3::Measure or list of mlr3::Measure)<br>
A single measure creates a FSelectInstanceBatchSingleCrit and multiple measures a FSelectInstanceBatchMultiCrit.
If <code>NULL</code>, default measure is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term_evals</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
Number of allowed evaluations.
Ignored if <code>terminator</code> is passed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term_time</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
Maximum allowed time in seconds.
Ignored if <code>terminator</code> is passed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>terminator</code></td>
<td>
<p>(bbotk::Terminator)<br>
Stop criterion of the feature selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>store_benchmark_result</code></td>
<td>
<p>(<code>logical(1)</code>)<br>
Store benchmark result in archive?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>store_models</code></td>
<td>
<p>(<code>logical(1)</code>).
Store models in benchmark result?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_values</code></td>
<td>
<p>(<code>logical(1)</code>)<br>
Check the parameters before the evaluation and the results for
validity?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>callbacks</code></td>
<td>
<p>(list of CallbackBatchFSelect)<br>
List of callbacks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ties_method</code></td>
<td>
<p>(<code>character(1)</code>)<br>
The method to break ties when selecting sets while optimizing and when selecting the best set.
Can be <code>"least_features"</code> or <code>"random"</code>.
The option <code>"least_features"</code> (default) selects the feature set with the least features.
If there are multiple best feature sets with the same number of features, one is selected randomly.
The <code>random</code> method returns a random feature set from the best feature sets.
Ignored if multiple measures are used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The mlr3::Task, mlr3::Learner, mlr3::Resampling, mlr3::Measure and bbotk::Terminator are used to construct a FSelectInstanceBatchSingleCrit.
If multiple performance Measures are supplied, a FSelectInstanceBatchMultiCrit is created.
The parameter <code>term_evals</code> and <code>term_time</code> are shortcuts to create a bbotk::Terminator.
If both parameters are passed, a bbotk::TerminatorCombo is constructed.
For other Terminators, pass one with <code>terminator</code>.
If no termination criterion is needed, set <code>term_evals</code>, <code>term_time</code> and <code>terminator</code> to <code>NULL</code>.
</p>


<h3>Value</h3>

<p>FSelectInstanceBatchSingleCrit | FSelectInstanceBatchMultiCrit
</p>


<h3>Resources</h3>

<p>There are several sections about feature selection in the <a href="https://mlr3book.mlr-org.com">mlr3book</a>.
</p>

<ul>
<li>
<p> Getting started with <a href="https://mlr3book.mlr-org.com/chapters/chapter6/feature_selection.html#sec-fs-wrapper">wrapper feature selection</a>.
</p>
</li>
<li>
<p> Do a <a href="https://mlr3book.mlr-org.com/chapters/chapter6/feature_selection.html#sec-fs-wrapper-example">sequential forward selection</a> Palmer Penguins data set.
</p>
</li>
</ul>
<p>The <a href="https://mlr-org.com/gallery.html">gallery</a> features a collection of case studies and demos about optimization.
</p>

<ul>
<li>
<p> Utilize the built-in feature importance of models with <a href="https://mlr-org.com/gallery/optimization/2023-02-07-recursive-feature-elimination/">Recursive Feature Elimination</a>.
</p>
</li>
<li>
<p> Run a feature selection with <a href="https://mlr-org.com/gallery/optimization/2023-02-01-shadow-variable-search/">Shadow Variable Search</a>.
</p>
</li>
<li> <p><a href="https://mlr-org.com/gallery/optimization/2020-09-14-mlr3fselect-basic/">Feature Selection</a> on the Titanic data set.
</p>
</li>
</ul>
<h3>Analysis</h3>

<p>For analyzing the feature selection results, it is recommended to pass the archive to <code>as.data.table()</code>.
The returned data table is joined with the benchmark result which adds the mlr3::ResampleResult for each feature set.
</p>
<p>The archive provides various getters (e.g. <code style="white-space: pre;">⁠$learners()⁠</code>) to ease the access.
All getters extract by position (<code>i</code>) or unique hash (<code>uhash</code>).
For a complete list of all getters see the methods section.
</p>
<p>The benchmark result (<code style="white-space: pre;">⁠$benchmark_result⁠</code>) allows to score the feature sets again on a different measure.
Alternatively, measures can be supplied to <code>as.data.table()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Feature selection on the Palmer Penguins data set
task = tsk("pima")
learner = lrn("classif.rpart")

# Run feature selection
instance = fselect(
  fselector = fs("random_search"),
  task = task,
  learner = learner,
  resampling = rsmp ("holdout"),
  measures = msr("classif.ce"),
  term_evals = 4)

# Subset task to optimized feature set
task$select(instance$result_feature_set)

# Train the learner with optimal feature set on the full data set
learner$train(task)

# Inspect all evaluated configurations
as.data.table(instance$archive)
</code></pre>


</div>