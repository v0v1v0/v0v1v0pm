<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_acqfunctions_ei</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Acquisition Function Expected Improvement</h2>

<h3>Description</h3>

<p>Expected Improvement.
</p>


<h3>Dictionary</h3>

<p>This AcqFunction can be instantiated via the dictionary
mlr_acqfunctions or with the associated sugar function <code>acqf()</code>:
</p>
<div class="sourceCode"><pre>mlr_acqfunctions$get("ei")
acqf("ei")
</pre></div>


<h3>Parameters</h3>


<ul><li> <p><code>"epsilon"</code> (<code>numeric(1)</code>)<br><code class="reqn">\epsilon</code> value used to determine the amount of exploration.
Higher values result in the importance of improvements predicted by the posterior mean
decreasing relative to the importance of potential improvements in regions of high predictive uncertainty.
Defaults to <code>0</code> (standard Expected Improvement).
</p>
</li></ul>
<h3>Super classes</h3>

<p><code>bbotk::Objective</code> -&gt; <code>mlr3mbo::AcqFunction</code> -&gt; <code>AcqFunctionEI</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>y_best</code></dt>
<dd>
<p>(<code>numeric(1)</code>)<br>
Best objective function value observed so far.
In the case of maximization, this already includes the necessary change of sign.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-AcqFunctionEI-new"><code>AcqFunctionEI$new()</code></a>
</p>
</li>
<li> <p><a href="#method-AcqFunctionEI-update"><code>AcqFunctionEI$update()</code></a>
</p>
</li>
<li> <p><a href="#method-AcqFunctionEI-clone"><code>AcqFunctionEI$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Objective" data-id="eval"><a href="../../bbotk/html/Objective.html#method-Objective-eval"><code>bbotk::Objective$eval()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Objective" data-id="format"><a href="../../bbotk/html/Objective.html#method-Objective-format"><code>bbotk::Objective$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Objective" data-id="help"><a href="../../bbotk/html/Objective.html#method-Objective-help"><code>bbotk::Objective$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Objective" data-id="print"><a href="../../bbotk/html/Objective.html#method-Objective-print"><code>bbotk::Objective$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3mbo" data-topic="AcqFunction" data-id="eval_dt"><a href="../../mlr3mbo/html/AcqFunction.html#method-AcqFunction-eval_dt"><code>mlr3mbo::AcqFunction$eval_dt()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3mbo" data-topic="AcqFunction" data-id="eval_many"><a href="../../mlr3mbo/html/AcqFunction.html#method-AcqFunction-eval_many"><code>mlr3mbo::AcqFunction$eval_many()</code></a></span></li>
</ul></details><hr>
<a id="method-AcqFunctionEI-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates a new instance of this R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>AcqFunctionEI$new(surrogate = NULL, epsilon = 0)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>surrogate</code></dt>
<dd>
<p>(<code>NULL</code> | SurrogateLearner).</p>
</dd>
<dt><code>epsilon</code></dt>
<dd>
<p>(<code>numeric(1)</code>).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-AcqFunctionEI-update"></a>



<h4>Method <code>update()</code>
</h4>

<p>Update the acquisition function and set <code>y_best</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>AcqFunctionEI$update()</pre></div>


<hr>
<a id="method-AcqFunctionEI-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>AcqFunctionEI$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>References</h3>


<ul><li>
<p> Jones, R. D, Schonlau, Matthias, Welch, J. W (1998).
“Efficient Global Optimization of Expensive Black-Box Functions.”
<em>Journal of Global optimization</em>, <b>13</b>(4), 455–492.
</p>
</li></ul>
<h3>See Also</h3>

<p>Other Acquisition Function: 
<code>AcqFunction</code>,
<code>mlr_acqfunctions</code>,
<code>mlr_acqfunctions_aei</code>,
<code>mlr_acqfunctions_cb</code>,
<code>mlr_acqfunctions_ehvi</code>,
<code>mlr_acqfunctions_ehvigh</code>,
<code>mlr_acqfunctions_eips</code>,
<code>mlr_acqfunctions_mean</code>,
<code>mlr_acqfunctions_multi</code>,
<code>mlr_acqfunctions_pi</code>,
<code>mlr_acqfunctions_sd</code>,
<code>mlr_acqfunctions_smsego</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (requireNamespace("mlr3learners") &amp;
    requireNamespace("DiceKriging") &amp;
    requireNamespace("rgenoud")) {
  library(bbotk)
  library(paradox)
  library(mlr3learners)
  library(data.table)

  fun = function(xs) {
    list(y = xs$x ^ 2)
  }
  domain = ps(x = p_dbl(lower = -10, upper = 10))
  codomain = ps(y = p_dbl(tags = "minimize"))
  objective = ObjectiveRFun$new(fun = fun, domain = domain, codomain = codomain)

  instance = OptimInstanceBatchSingleCrit$new(
    objective = objective,
    terminator = trm("evals", n_evals = 5))

  instance$eval_batch(data.table(x = c(-6, -5, 3, 9)))

  learner = default_gp()

  surrogate = srlrn(learner, archive = instance$archive)

  acq_function = acqf("ei", surrogate = surrogate)

  acq_function$surrogate$update()
  acq_function$update()
  acq_function$eval_dt(data.table(x = c(-1, 0, 1)))
}
</code></pre>


</div>