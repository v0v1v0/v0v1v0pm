<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_pipeops_missind</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Missing Indicator Columns</h2>

<h3>Description</h3>

<p>Add missing indicator columns ("dummy columns") to the <code>Task</code>.
Drops original features; should probably be used in combination with <code>PipeOpFeatureUnion</code> and imputation <code>PipeOp</code>s (see examples).
</p>
<p>Note the <code>affect_columns</code> is initialized with <code>selector_invert(selector_type(c("factor", "ordered", "character")))</code>, since missing
values in factorial columns are often indicated by out-of-range imputation (<code>PipeOpImputeOOR</code>).
</p>


<h3>Format</h3>

<p><code>R6Class</code> object inheriting from <code>PipeOpTaskPreprocSimple</code>/<code>PipeOpTaskPreproc</code>/<code>PipeOp</code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpMissInd$new(id = "missind", param_vals = list())
</pre></div>

<ul>
<li> <p><code>id</code> :: <code>character(1)</code>
Identifier of the resulting  object, defaulting to <code>"missind"</code>.
</p>
</li>
<li> <p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code>list()</code>.
</p>
</li>
</ul>
<h3>State</h3>

<p><code style="white-space: pre;">⁠$state⁠</code> is a named <code>list</code> with the <code style="white-space: pre;">⁠$state⁠</code> elements inherited from <code>PipeOpTaskPreproc</code>, as well as:
</p>

<ul><li> <p><code>indicand_cols</code> :: <code>character</code><br>
Names of columns for which indicator columns are added. If the <code>which</code> parameter is <code>"all"</code>, this is just the names of all features,
otherwise it is the names of all features that had missing values during training.
</p>
</li></ul>
<h3>Parameters</h3>

<p>The parameters are the parameters inherited from the <code>PipeOpTaskPreproc</code>, as well as:
</p>

<ul>
<li> <p><code>which</code> :: <code>character(1)</code><br>
Determines for which features the indicator columns are added. Can either be <code>"missing_train"</code> (default), adding indicator columns
for each feature that actually has missing values, or <code>"all"</code>, adding indicator columns for all features.
</p>
</li>
<li> <p><code>type</code> :: <code>character(1)</code><br>
Determines the type of the newly created columns. Can be one of <code>"factor"</code> (default), <code>"integer"</code>, <code>"logical"</code>, <code>"numeric"</code>.
</p>
</li>
</ul>
<h3>Internals</h3>

<p>This <code>PipeOp</code> should cover most cases where "dummy columns" or "missing indicators" are desired. Some edge cases:
</p>

<ul>
<li>
<p> If imputation
for factorial features is performed and only numeric features should gain missing indicators, the <code>affect_columns</code> parameter
can be set to <code>selector_type("numeric")</code>.
</p>
</li>
<li>
<p> If missing indicators should only be added for features that have more than a fraction of <code>x</code> missing values, the
<code>PipeOpRemoveConstants</code> can be used with <code>affect_columns = selector_grep("^missing_")</code> and <code>ratio = x</code>.
</p>
</li>
</ul>
<h3>Fields</h3>

<p>Fields inherited from <code>PipeOpTaskPreproc</code>/<code>PipeOp</code>.
</p>


<h3>Methods</h3>

<p>Methods inherited from <code>PipeOpTaskPreproc</code>/<code>PipeOp</code>.
</p>


<h3>See Also</h3>

<p>https://mlr-org.com/pipeops.html
</p>
<p>Other PipeOps: 
<code>PipeOp</code>,
<code>PipeOpEnsemble</code>,
<code>PipeOpImpute</code>,
<code>PipeOpTargetTrafo</code>,
<code>PipeOpTaskPreproc</code>,
<code>PipeOpTaskPreprocSimple</code>,
<code>mlr_pipeops</code>,
<code>mlr_pipeops_adas</code>,
<code>mlr_pipeops_blsmote</code>,
<code>mlr_pipeops_boxcox</code>,
<code>mlr_pipeops_branch</code>,
<code>mlr_pipeops_chunk</code>,
<code>mlr_pipeops_classbalancing</code>,
<code>mlr_pipeops_classifavg</code>,
<code>mlr_pipeops_classweights</code>,
<code>mlr_pipeops_colapply</code>,
<code>mlr_pipeops_collapsefactors</code>,
<code>mlr_pipeops_colroles</code>,
<code>mlr_pipeops_copy</code>,
<code>mlr_pipeops_datefeatures</code>,
<code>mlr_pipeops_encode</code>,
<code>mlr_pipeops_encodeimpact</code>,
<code>mlr_pipeops_encodelmer</code>,
<code>mlr_pipeops_featureunion</code>,
<code>mlr_pipeops_filter</code>,
<code>mlr_pipeops_fixfactors</code>,
<code>mlr_pipeops_histbin</code>,
<code>mlr_pipeops_ica</code>,
<code>mlr_pipeops_imputeconstant</code>,
<code>mlr_pipeops_imputehist</code>,
<code>mlr_pipeops_imputelearner</code>,
<code>mlr_pipeops_imputemean</code>,
<code>mlr_pipeops_imputemedian</code>,
<code>mlr_pipeops_imputemode</code>,
<code>mlr_pipeops_imputeoor</code>,
<code>mlr_pipeops_imputesample</code>,
<code>mlr_pipeops_kernelpca</code>,
<code>mlr_pipeops_learner</code>,
<code>mlr_pipeops_modelmatrix</code>,
<code>mlr_pipeops_multiplicityexply</code>,
<code>mlr_pipeops_multiplicityimply</code>,
<code>mlr_pipeops_mutate</code>,
<code>mlr_pipeops_nmf</code>,
<code>mlr_pipeops_nop</code>,
<code>mlr_pipeops_ovrsplit</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_pca</code>,
<code>mlr_pipeops_proxy</code>,
<code>mlr_pipeops_quantilebin</code>,
<code>mlr_pipeops_randomprojection</code>,
<code>mlr_pipeops_randomresponse</code>,
<code>mlr_pipeops_regravg</code>,
<code>mlr_pipeops_removeconstants</code>,
<code>mlr_pipeops_renamecolumns</code>,
<code>mlr_pipeops_replicate</code>,
<code>mlr_pipeops_rowapply</code>,
<code>mlr_pipeops_scale</code>,
<code>mlr_pipeops_scalemaxabs</code>,
<code>mlr_pipeops_scalerange</code>,
<code>mlr_pipeops_select</code>,
<code>mlr_pipeops_smote</code>,
<code>mlr_pipeops_smotenc</code>,
<code>mlr_pipeops_spatialsign</code>,
<code>mlr_pipeops_subsample</code>,
<code>mlr_pipeops_targetinvert</code>,
<code>mlr_pipeops_targetmutate</code>,
<code>mlr_pipeops_targettrafoscalerange</code>,
<code>mlr_pipeops_textvectorizer</code>,
<code>mlr_pipeops_threshold</code>,
<code>mlr_pipeops_tunethreshold</code>,
<code>mlr_pipeops_unbranch</code>,
<code>mlr_pipeops_updatetarget</code>,
<code>mlr_pipeops_vtreat</code>,
<code>mlr_pipeops_yeojohnson</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("mlr3")


task = tsk("pima")$select(c("insulin", "triceps"))
sum(complete.cases(task$data()))
task$missings()
tail(task$data())

po = po("missind")
new_task = po$train(list(task))[[1]]

tail(new_task$data())

# proper imputation + missing indicators

impgraph = list(
  po("imputesample"),
  po("missind")
) %&gt;&gt;% po("featureunion")

tail(impgraph$train(task)[[1]]$data())
</code></pre>


</div>