<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_pipeops_tunethreshold</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tune the Threshold of a Classification Prediction</h2>

<h3>Description</h3>

<p>Tunes optimal probability thresholds over different <code>PredictionClassif</code>s.
</p>
<p><code>mlr3::Learner</code> <code>predict_type</code>: <code>"prob"</code> is required.
Thresholds for each learner are optimized using the <code>Optimizer</code> supplied via
the <code>param_set</code>.
Defaults to <code>GenSA</code>.
Returns a single <code>PredictionClassif</code>.
</p>
<p>This PipeOp should be used in conjunction with <code>PipeOpLearnerCV</code> in order to
optimize thresholds of cross-validated predictions.
In order to optimize thresholds without cross-validation, use <code>PipeOpLearnerCV</code>
in conjunction with <code>ResamplingInsample</code>.
</p>


<h3>Format</h3>

<p><code>R6Class</code> object inheriting from <code>PipeOp</code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>* `PipeOpTuneThreshold$new(id = "tunethreshold", param_vals = list())` \cr
  (`character(1)`, `list`) -&gt; `self` \cr
</pre></div>

<ul>
<li> <p><code>id</code> :: <code>character(1)</code><br>
Identifier of resulting object. Default: "tunethreshold".
</p>
</li>
<li> <p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings
that would otherwise be set during construction. Default <code>list()</code>.
</p>
</li>
</ul>
<h3>Input and Output Channels</h3>

<p>Input and output channels are inherited from <code>PipeOp</code>.
</p>


<h3>State</h3>

<p>The <code style="white-space: pre;">⁠$state⁠</code> is a named <code>list</code> with elements
</p>

<ul><li> <p><code>thresholds</code> :: <code>numeric</code> learned thresholds
</p>
</li></ul>
<h3>Parameters</h3>

<p>The parameters are the parameters inherited from <code>PipeOp</code>, as well as:
</p>

<ul>
<li> <p><code>measure</code> :: <code>Measure</code>  | <code>character</code><br><code>Measure</code> to optimize for.
Will be converted to a <code>Measure</code> in case it is <code>character</code>.
Initialized to <code>"classif.ce"</code>, i.e. misclassification error.
</p>
</li>
<li> <p><code>optimizer</code> :: <code>Optimizer</code>|<code>character(1)</code><br><code>Optimizer</code> used to find optimal thresholds.
If <code>character</code>, converts to <code>Optimizer</code>
via <code>opt</code>. Initialized to <code>OptimizerGenSA</code>.
</p>
</li>
<li> <p><code>log_level</code> :: <code>character(1)</code> | <code>integer(1)</code><br>
Set a temporary log-level for <code>lgr::get_logger("bbotk")</code>. Initialized to: "warn".
</p>
</li>
</ul>
<h3>Internals</h3>

<p>Uses the <code>optimizer</code> provided as a <code>param_val</code> in order to find an optimal threshold.
See the <code>optimizer</code> parameter for more info.
</p>


<h3>Fields</h3>

<p>Fields inherited from <code>PipeOp</code>, as well as:
</p>

<ul><li> <p><code>predict_type</code> :: <code>character(1)</code><br>
Type of prediction to return. Either <code>"prob"</code> (default) or <code>"response"</code>.
Setting to <code>"response"</code> should rarely be used; it may potentially save some memory but has
no other benefits.
</p>
</li></ul>
<h3>Methods</h3>

<p>Only methods inherited from <code>PipeOp</code>.
</p>


<h3>See Also</h3>

<p>https://mlr-org.com/pipeops.html
</p>
<p>Other PipeOps: 
<code>PipeOp</code>,
<code>PipeOpEnsemble</code>,
<code>PipeOpImpute</code>,
<code>PipeOpTargetTrafo</code>,
<code>PipeOpTaskPreproc</code>,
<code>PipeOpTaskPreprocSimple</code>,
<code>mlr_pipeops</code>,
<code>mlr_pipeops_adas</code>,
<code>mlr_pipeops_blsmote</code>,
<code>mlr_pipeops_boxcox</code>,
<code>mlr_pipeops_branch</code>,
<code>mlr_pipeops_chunk</code>,
<code>mlr_pipeops_classbalancing</code>,
<code>mlr_pipeops_classifavg</code>,
<code>mlr_pipeops_classweights</code>,
<code>mlr_pipeops_colapply</code>,
<code>mlr_pipeops_collapsefactors</code>,
<code>mlr_pipeops_colroles</code>,
<code>mlr_pipeops_copy</code>,
<code>mlr_pipeops_datefeatures</code>,
<code>mlr_pipeops_encode</code>,
<code>mlr_pipeops_encodeimpact</code>,
<code>mlr_pipeops_encodelmer</code>,
<code>mlr_pipeops_featureunion</code>,
<code>mlr_pipeops_filter</code>,
<code>mlr_pipeops_fixfactors</code>,
<code>mlr_pipeops_histbin</code>,
<code>mlr_pipeops_ica</code>,
<code>mlr_pipeops_imputeconstant</code>,
<code>mlr_pipeops_imputehist</code>,
<code>mlr_pipeops_imputelearner</code>,
<code>mlr_pipeops_imputemean</code>,
<code>mlr_pipeops_imputemedian</code>,
<code>mlr_pipeops_imputemode</code>,
<code>mlr_pipeops_imputeoor</code>,
<code>mlr_pipeops_imputesample</code>,
<code>mlr_pipeops_kernelpca</code>,
<code>mlr_pipeops_learner</code>,
<code>mlr_pipeops_missind</code>,
<code>mlr_pipeops_modelmatrix</code>,
<code>mlr_pipeops_multiplicityexply</code>,
<code>mlr_pipeops_multiplicityimply</code>,
<code>mlr_pipeops_mutate</code>,
<code>mlr_pipeops_nmf</code>,
<code>mlr_pipeops_nop</code>,
<code>mlr_pipeops_ovrsplit</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_pca</code>,
<code>mlr_pipeops_proxy</code>,
<code>mlr_pipeops_quantilebin</code>,
<code>mlr_pipeops_randomprojection</code>,
<code>mlr_pipeops_randomresponse</code>,
<code>mlr_pipeops_regravg</code>,
<code>mlr_pipeops_removeconstants</code>,
<code>mlr_pipeops_renamecolumns</code>,
<code>mlr_pipeops_replicate</code>,
<code>mlr_pipeops_rowapply</code>,
<code>mlr_pipeops_scale</code>,
<code>mlr_pipeops_scalemaxabs</code>,
<code>mlr_pipeops_scalerange</code>,
<code>mlr_pipeops_select</code>,
<code>mlr_pipeops_smote</code>,
<code>mlr_pipeops_smotenc</code>,
<code>mlr_pipeops_spatialsign</code>,
<code>mlr_pipeops_subsample</code>,
<code>mlr_pipeops_targetinvert</code>,
<code>mlr_pipeops_targetmutate</code>,
<code>mlr_pipeops_targettrafoscalerange</code>,
<code>mlr_pipeops_textvectorizer</code>,
<code>mlr_pipeops_threshold</code>,
<code>mlr_pipeops_unbranch</code>,
<code>mlr_pipeops_updatetarget</code>,
<code>mlr_pipeops_vtreat</code>,
<code>mlr_pipeops_yeojohnson</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


library("mlr3")

task = tsk("iris")
pop = po("learner_cv", lrn("classif.rpart", predict_type = "prob")) %&gt;&gt;%
  po("tunethreshold")

task$data()
pop$train(task)

pop$state



</code></pre>


</div>