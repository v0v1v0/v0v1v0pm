<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_pipeops_updatetarget</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform a Target without an Explicit Inversion</h2>

<h3>Description</h3>

<p>EXPERIMENTAL, API SUBJECT TO CHANGE
</p>
<p>Handles target transformation operations that do not need explicit inversion.
In case the new target is required during predict, creates a vector of <code>NA</code>.
Works similar to <code>PipeOpTargetTrafo</code> and <code>PipeOpTargetMutate</code>, but forgoes the
inversion step.
In case target after the <code>trafo</code> is a factor, levels are saved to <code style="white-space: pre;">⁠$state⁠</code>.<br></p>
<p>During prediction: Sets all target values to <code>NA</code> before calling the <code>trafo</code> again.
In case target after the <code>trafo</code> is a factor, levels saved in the <code>state</code> are
set during prediction.
</p>
<p>As a special case when <code>trafo</code> is <code>identity</code> and <code>new_target_name</code> matches an existing column
name of the data of the input <code>Task</code>, this column is set as the new target. Depending on
<code>drop_original_target</code> the original target is then either dropped or added to the features.
</p>


<h3>Format</h3>

<p>Abstract <code>R6Class</code> inheriting from <code>PipeOp</code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpUpdateTarget$new(id, param_set = ps(),
  param_vals = list(), packages = character(0))
</pre></div>

<ul>
<li> <p><code>id</code> :: <code>character(1)</code><br>
Identifier of resulting object. See <code style="white-space: pre;">⁠$id⁠</code> slot of <code>PipeOp</code>.
</p>
</li>
<li> <p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings given in <code>param_set</code>.
The subclass should have its own <code>param_vals</code> parameter and pass it on to <code>super$initialize()</code>.
Default <code>list()</code>.
</p>
</li>
</ul>
<h3>Parameters</h3>

<p>The parameters are the parameters inherited from <code>PipeOpTargetTrafo</code>, as well as:
</p>

<ul>
<li> <p><code>trafo</code> :: <code>function</code><br>
Transformation function for the target. Should only be a function of the target, i.e., taking a
single argument. Default is <code>identity</code>.
Note, that the data passed on to the target is a <code>data.table</code> consisting of all target column.
</p>
</li>
<li> <p><code>new_target_name</code> :: <code>character(1)</code><br>
Optionally give the transformed target a new name. By default the original name is used.
</p>
</li>
<li> <p><code>new_task_type</code> :: <code>character(1)</code><br>
Optionally a new task type can be set. Legal types are listed in
<code>mlr_reflections$task_types$type</code>.
#' <code>drop_original_target</code> :: <code>logical(1)</code><br>
Whether to drop the original target column. Default: <code>TRUE</code>.
</p>
</li>
</ul>
<h3>State</h3>

<p>The <code style="white-space: pre;">⁠$state⁠</code> is a list of class levels for each target after trafo.
<code>list()</code> if none of the targets have levels.
</p>


<h3>Methods</h3>

<p>Only methods inherited from <code>PipeOp</code>.
</p>


<h3>See Also</h3>

<p>https://mlr-org.com/pipeops.html
</p>
<p>Other mlr3pipelines backend related: 
<code>Graph</code>,
<code>PipeOp</code>,
<code>PipeOpTargetTrafo</code>,
<code>PipeOpTaskPreproc</code>,
<code>PipeOpTaskPreprocSimple</code>,
<code>mlr_graphs</code>,
<code>mlr_pipeops</code>
</p>
<p>Other PipeOps: 
<code>PipeOp</code>,
<code>PipeOpEnsemble</code>,
<code>PipeOpImpute</code>,
<code>PipeOpTargetTrafo</code>,
<code>PipeOpTaskPreproc</code>,
<code>PipeOpTaskPreprocSimple</code>,
<code>mlr_pipeops</code>,
<code>mlr_pipeops_adas</code>,
<code>mlr_pipeops_blsmote</code>,
<code>mlr_pipeops_boxcox</code>,
<code>mlr_pipeops_branch</code>,
<code>mlr_pipeops_chunk</code>,
<code>mlr_pipeops_classbalancing</code>,
<code>mlr_pipeops_classifavg</code>,
<code>mlr_pipeops_classweights</code>,
<code>mlr_pipeops_colapply</code>,
<code>mlr_pipeops_collapsefactors</code>,
<code>mlr_pipeops_colroles</code>,
<code>mlr_pipeops_copy</code>,
<code>mlr_pipeops_datefeatures</code>,
<code>mlr_pipeops_encode</code>,
<code>mlr_pipeops_encodeimpact</code>,
<code>mlr_pipeops_encodelmer</code>,
<code>mlr_pipeops_featureunion</code>,
<code>mlr_pipeops_filter</code>,
<code>mlr_pipeops_fixfactors</code>,
<code>mlr_pipeops_histbin</code>,
<code>mlr_pipeops_ica</code>,
<code>mlr_pipeops_imputeconstant</code>,
<code>mlr_pipeops_imputehist</code>,
<code>mlr_pipeops_imputelearner</code>,
<code>mlr_pipeops_imputemean</code>,
<code>mlr_pipeops_imputemedian</code>,
<code>mlr_pipeops_imputemode</code>,
<code>mlr_pipeops_imputeoor</code>,
<code>mlr_pipeops_imputesample</code>,
<code>mlr_pipeops_kernelpca</code>,
<code>mlr_pipeops_learner</code>,
<code>mlr_pipeops_missind</code>,
<code>mlr_pipeops_modelmatrix</code>,
<code>mlr_pipeops_multiplicityexply</code>,
<code>mlr_pipeops_multiplicityimply</code>,
<code>mlr_pipeops_mutate</code>,
<code>mlr_pipeops_nmf</code>,
<code>mlr_pipeops_nop</code>,
<code>mlr_pipeops_ovrsplit</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_pca</code>,
<code>mlr_pipeops_proxy</code>,
<code>mlr_pipeops_quantilebin</code>,
<code>mlr_pipeops_randomprojection</code>,
<code>mlr_pipeops_randomresponse</code>,
<code>mlr_pipeops_regravg</code>,
<code>mlr_pipeops_removeconstants</code>,
<code>mlr_pipeops_renamecolumns</code>,
<code>mlr_pipeops_replicate</code>,
<code>mlr_pipeops_rowapply</code>,
<code>mlr_pipeops_scale</code>,
<code>mlr_pipeops_scalemaxabs</code>,
<code>mlr_pipeops_scalerange</code>,
<code>mlr_pipeops_select</code>,
<code>mlr_pipeops_smote</code>,
<code>mlr_pipeops_smotenc</code>,
<code>mlr_pipeops_spatialsign</code>,
<code>mlr_pipeops_subsample</code>,
<code>mlr_pipeops_targetinvert</code>,
<code>mlr_pipeops_targetmutate</code>,
<code>mlr_pipeops_targettrafoscalerange</code>,
<code>mlr_pipeops_textvectorizer</code>,
<code>mlr_pipeops_threshold</code>,
<code>mlr_pipeops_tunethreshold</code>,
<code>mlr_pipeops_unbranch</code>,
<code>mlr_pipeops_vtreat</code>,
<code>mlr_pipeops_yeojohnson</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
# Create a binary class task from iris
library(mlr3)
trafo_fun = function(x) {factor(ifelse(x$Species == "setosa", "setosa", "other"))}
po = PipeOpUpdateTarget$new(param_vals = list(trafo = trafo_fun, new_target_name = "setosa"))
po$train(list(tsk("iris")))
po$predict(list(tsk("iris")))

## End(Not run)

</code></pre>


</div>