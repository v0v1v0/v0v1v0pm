<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_graphs_stacking</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create A Graph to Perform Stacking.</h2>

<h3>Description</h3>

<p>Create a new <code>Graph</code> for stacking. A stacked learner uses predictions of
several base learners and fits a super learner using these predictions as
features in order to predict the outcome.
</p>
<p>All input arguments are cloned and have no references in common with the returned <code>Graph</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pipeline_stacking(
  base_learners,
  super_learner,
  method = "cv",
  folds = 3,
  use_features = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>base_learners</code></td>
<td>
<p><code>list</code> of <code>Learner</code><br>
A list of base learners.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>super_learner</code></td>
<td>
<p><code>Learner</code><br>
The super learner that makes the final prediction based on the base learners.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p><code>character(1)</code><br><code>"cv"</code> (default) for building a super learner using cross-validated predictions of the
base learners or <code>"insample"</code> for building a super learner using the
predictions of the base learners trained on all training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folds</code></td>
<td>
<p><code>integer(1)</code><br>
Number of cross-validation folds. Only used for <code>method = "cv"</code>. Default 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_features</code></td>
<td>
<p><code>logical(1)</code><br>
Whether the original features should also be passed to the super learner.
Default <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>Graph</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (requireNamespace("kknn")) {
library(mlr3)
library(mlr3learners)

base_learners = list(
  lrn("classif.rpart", predict_type = "prob"),
  lrn("classif.kknn", predict_type = "prob")
)
super_learner = lrn("classif.log_reg")

graph_stack = pipeline_stacking(base_learners, super_learner)
graph_learner = as_learner(graph_stack)
graph_learner$train(tsk("german_credit"))
}

</code></pre>


</div>