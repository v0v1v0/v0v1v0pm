<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_pipeops_classifavg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Majority Vote Prediction</h2>

<h3>Description</h3>

<p>Perform (weighted) majority vote prediction from classification <code>Prediction</code>s by connecting
<code>PipeOpClassifAvg</code> to multiple <code>PipeOpLearner</code> outputs.
</p>
<p>Always returns a <code>"prob"</code> prediction, regardless of the incoming <code>Learner</code>'s
<code style="white-space: pre;">⁠$predict_type⁠</code>. The label of the class with the highest predicted probability is selected as the
<code>"response"</code> prediction. If the <code>Learner</code>'s <code style="white-space: pre;">⁠$predict_type⁠</code> is set to <code>"prob"</code>,
the prediction obtained is also a <code>"prob"</code> type prediction with the probability predicted to be a
weighted average of incoming predictions.
</p>
<p>All incoming <code>Learner</code>'s <code style="white-space: pre;">⁠$predict_type⁠</code> must agree.
</p>
<p>Weights can be set as a parameter; if none are provided, defaults to
equal weights for each prediction.
Defaults to equal weights for each model.
</p>
<p>If '
</p>


<h3>Format</h3>

<p><code>R6Class</code> inheriting from <code>PipeOpEnsemble</code>/<code>PipeOp</code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpClassifAvg$new(innum = 0, collect_multiplicity = FALSE, id = "classifavg", param_vals = list())
</pre></div>

<ul>
<li> <p><code>innum</code> :: <code>numeric(1)</code><br>
Determines the number of input channels.
If <code>innum</code> is 0 (default), a vararg input channel is created that can take an arbitrary number of inputs.
</p>
</li>
<li> <p><code>collect_multiplicity</code> :: <code>logical(1)</code><br>
If <code>TRUE</code>, the input is a <code>Multiplicity</code> collecting channel. This means, a
<code>Multiplicity</code> input, instead of multiple normal inputs, is accepted and the members are aggregated. This requires <code>innum</code> to be 0.
Default is <code>FALSE</code>.
</p>
</li>
<li> <p><code>id</code> :: <code>character(1)</code>
Identifier of the resulting object, default <code>"classifavg"</code>.
</p>
</li>
<li> <p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code>list()</code>.
</p>
</li>
</ul>
<h3>Input and Output Channels</h3>

<p>Input and output channels are inherited from <code>PipeOpEnsemble</code>. Instead of a <code>Prediction</code>, a <code>PredictionClassif</code>
is used as input and output during prediction.
</p>


<h3>State</h3>

<p>The <code style="white-space: pre;">⁠$state⁠</code> is left empty (<code>list()</code>).
</p>


<h3>Parameters</h3>

<p>The parameters are the parameters inherited from the <code>PipeOpEnsemble</code>.
</p>


<h3>Internals</h3>

<p>Inherits from <code>PipeOpEnsemble</code> by implementing the <code>private$weighted_avg_predictions()</code> method.
</p>


<h3>Fields</h3>

<p>Only fields inherited from <code>PipeOpEnsemble</code>/<code>PipeOp</code>.
</p>


<h3>Methods</h3>

<p>Only methods inherited from <code>PipeOpEnsemble</code>/<code>PipeOp</code>.
</p>


<h3>See Also</h3>

<p>https://mlr-org.com/pipeops.html
</p>
<p>Other PipeOps: 
<code>PipeOp</code>,
<code>PipeOpEnsemble</code>,
<code>PipeOpImpute</code>,
<code>PipeOpTargetTrafo</code>,
<code>PipeOpTaskPreproc</code>,
<code>PipeOpTaskPreprocSimple</code>,
<code>mlr_pipeops</code>,
<code>mlr_pipeops_adas</code>,
<code>mlr_pipeops_blsmote</code>,
<code>mlr_pipeops_boxcox</code>,
<code>mlr_pipeops_branch</code>,
<code>mlr_pipeops_chunk</code>,
<code>mlr_pipeops_classbalancing</code>,
<code>mlr_pipeops_classweights</code>,
<code>mlr_pipeops_colapply</code>,
<code>mlr_pipeops_collapsefactors</code>,
<code>mlr_pipeops_colroles</code>,
<code>mlr_pipeops_copy</code>,
<code>mlr_pipeops_datefeatures</code>,
<code>mlr_pipeops_encode</code>,
<code>mlr_pipeops_encodeimpact</code>,
<code>mlr_pipeops_encodelmer</code>,
<code>mlr_pipeops_featureunion</code>,
<code>mlr_pipeops_filter</code>,
<code>mlr_pipeops_fixfactors</code>,
<code>mlr_pipeops_histbin</code>,
<code>mlr_pipeops_ica</code>,
<code>mlr_pipeops_imputeconstant</code>,
<code>mlr_pipeops_imputehist</code>,
<code>mlr_pipeops_imputelearner</code>,
<code>mlr_pipeops_imputemean</code>,
<code>mlr_pipeops_imputemedian</code>,
<code>mlr_pipeops_imputemode</code>,
<code>mlr_pipeops_imputeoor</code>,
<code>mlr_pipeops_imputesample</code>,
<code>mlr_pipeops_kernelpca</code>,
<code>mlr_pipeops_learner</code>,
<code>mlr_pipeops_missind</code>,
<code>mlr_pipeops_modelmatrix</code>,
<code>mlr_pipeops_multiplicityexply</code>,
<code>mlr_pipeops_multiplicityimply</code>,
<code>mlr_pipeops_mutate</code>,
<code>mlr_pipeops_nmf</code>,
<code>mlr_pipeops_nop</code>,
<code>mlr_pipeops_ovrsplit</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_pca</code>,
<code>mlr_pipeops_proxy</code>,
<code>mlr_pipeops_quantilebin</code>,
<code>mlr_pipeops_randomprojection</code>,
<code>mlr_pipeops_randomresponse</code>,
<code>mlr_pipeops_regravg</code>,
<code>mlr_pipeops_removeconstants</code>,
<code>mlr_pipeops_renamecolumns</code>,
<code>mlr_pipeops_replicate</code>,
<code>mlr_pipeops_rowapply</code>,
<code>mlr_pipeops_scale</code>,
<code>mlr_pipeops_scalemaxabs</code>,
<code>mlr_pipeops_scalerange</code>,
<code>mlr_pipeops_select</code>,
<code>mlr_pipeops_smote</code>,
<code>mlr_pipeops_smotenc</code>,
<code>mlr_pipeops_spatialsign</code>,
<code>mlr_pipeops_subsample</code>,
<code>mlr_pipeops_targetinvert</code>,
<code>mlr_pipeops_targetmutate</code>,
<code>mlr_pipeops_targettrafoscalerange</code>,
<code>mlr_pipeops_textvectorizer</code>,
<code>mlr_pipeops_threshold</code>,
<code>mlr_pipeops_tunethreshold</code>,
<code>mlr_pipeops_unbranch</code>,
<code>mlr_pipeops_updatetarget</code>,
<code>mlr_pipeops_vtreat</code>,
<code>mlr_pipeops_yeojohnson</code>
</p>
<p>Other Multiplicity PipeOps: 
<code>Multiplicity()</code>,
<code>PipeOpEnsemble</code>,
<code>mlr_pipeops_featureunion</code>,
<code>mlr_pipeops_multiplicityexply</code>,
<code>mlr_pipeops_multiplicityimply</code>,
<code>mlr_pipeops_ovrsplit</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_regravg</code>,
<code>mlr_pipeops_replicate</code>
</p>
<p>Other Ensembles: 
<code>PipeOpEnsemble</code>,
<code>mlr_learners_avg</code>,
<code>mlr_pipeops_ovrunite</code>,
<code>mlr_pipeops_regravg</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library("mlr3")

# Simple Bagging
gr = ppl("greplicate",
  po("subsample") %&gt;&gt;%
  po("learner", lrn("classif.rpart")),
  n = 3
) %&gt;&gt;%
  po("classifavg")

resample(tsk("iris"), GraphLearner$new(gr), rsmp("holdout"))


</code></pre>


</div>