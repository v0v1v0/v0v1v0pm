<div class="container">

<table style="width: 100%;"><tr>
<td>DataBackendRaster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>DataBackend for Raster Objects</h2>

<h3>Description</h3>

<p>mlr3::DataBackend for terra::SpatRaster raster objects.
</p>


<h3>Read mode</h3>

<p>There are two different ways the reading of values is performed internally:
</p>

<ul>
<li>
<p> "Block mode" reads complete rows of the raster file and subsets the requested cells.
This mode is faster than "cell mode" if the complete raster file is iterated over.
</p>
</li>
<li>
<p> "Cell mode" reads individual cells.
This is faster than "block mode" if only a few cells are sampled.
</p>
</li>
</ul>
<p>"Block mode" is activated if <code style="white-space: pre;">⁠$data(rows)⁠</code> is used with a increasing integer sequence e.g. <code>200:300</code>.
If only a single cell is requested, "cell mode" is used.
</p>


<h3>Super class</h3>

<p><code>mlr3::DataBackend</code> -&gt; <code>DataBackendRaster</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>rownames</code></dt>
<dd>
<p>(<code>integer()</code>)<br>
Returns vector of all distinct row identifiers, i.e. the contents of the primary key column.</p>
</dd>
<dt><code>colnames</code></dt>
<dd>
<p>(<code>character()</code>)<br>
Returns vector of all column names.</p>
</dd>
<dt><code>nrow</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
Number of rows (observations).</p>
</dd>
<dt><code>ncol</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
Number of columns (variables).</p>
</dd>
<dt><code>stack</code></dt>
<dd>
<p>(<code>SpatRaster</code>)<br>
Raster stack.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataBackendRaster-new"><code>DataBackendRaster$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackendRaster-data"><code>DataBackendRaster$data()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackendRaster-head"><code>DataBackendRaster$head()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackendRaster-distinct"><code>DataBackendRaster$distinct()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackendRaster-missings"><code>DataBackendRaster$missings()</code></a>
</p>
</li>
<li> <p><a href="#method-DataBackendRaster-coordinates"><code>DataBackendRaster$coordinates()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="DataBackend" data-id="format"><a href="../../mlr3/html/DataBackend.html#method-DataBackend-format"><code>mlr3::DataBackend$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="DataBackend" data-id="print"><a href="../../mlr3/html/DataBackend.html#method-DataBackend-print"><code>mlr3::DataBackend$print()</code></a></span></li>
</ul></details><hr>
<a id="method-DataBackendRaster-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates a new instance of this R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$new(data)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt>
<dd>
<p>(terra::SpatRaster)<br>
The input terra::SpatRaster.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-DataBackendRaster-data"></a>



<h4>Method <code>data()</code>
</h4>

<p>Returns a slice of the raster in the specified format.
Currently, the only supported formats is <code>"data.table"</code>.
</p>
<p>The rows must be addressed as vector of cells indices, columns must be
referred to via layer names. Queries for rows with no matching row id and
queries for columns with no matching column name are silently ignored.
</p>
<p>Rows are guaranteed to be returned in the same order as <code>rows</code>, columns
may be returned in an arbitrary order. Duplicated row ids result in
duplicated rows, duplicated column names lead to an exception.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$data(rows, cols, data_format = "data.table")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rows</code></dt>
<dd>
<p><code>integer()</code><br>
Row indices. Row indices start with 1 in the upper left corner in the
raster, increase from left to right and then from top to bottom. The last
cell is in the bottom right corner and the row index equals the number of
cells in the raster.</p>
</dd>
<dt><code>cols</code></dt>
<dd>
<p><code>character()</code><br>
Column names.</p>
</dd>
<dt><code>data_format</code></dt>
<dd>
<p>(<code>character(1)</code>)<br>
Desired data format. Currently only <code>"data.table"</code> supported.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-DataBackendRaster-head"></a>



<h4>Method <code>head()</code>
</h4>

<p>Retrieve the first <code>n</code> rows.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$head(n = 6L)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>n</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
Number of rows.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>data.table::data.table()</code> of the first <code>n</code> rows.
</p>


<hr>
<a id="method-DataBackendRaster-distinct"></a>



<h4>Method <code>distinct()</code>
</h4>

<p>Returns a named list of vectors of distinct values for each column
specified. If <code>na_rm</code> is <code>TRUE</code>, missing values are removed from the
returned vectors of distinct values. Non-existing rows and columns are
silently ignored.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$distinct(rows, cols, na_rm = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rows</code></dt>
<dd>
<p><code>integer()</code><br>
Row indices. Row indices start with 1 in the upper left corner in the
raster, increase from left to right and then from top to bottom. The last
cell is in the bottom right corner and the row index equals the number of
cells in the raster.</p>
</dd>
<dt><code>cols</code></dt>
<dd>
<p><code>character()</code><br>
Column names.</p>
</dd>
<dt><code>na_rm</code></dt>
<dd>
<p><code>logical(1)</code><br>
Whether to remove NAs or not.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Named <code>list()</code> of distinct values.
</p>


<hr>
<a id="method-DataBackendRaster-missings"></a>



<h4>Method <code>missings()</code>
</h4>

<p>Returns the number of missing values per column in the specified slice
of data. Non-existing rows and columns are silently ignored.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$missings(rows, cols)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rows</code></dt>
<dd>
<p><code>integer()</code><br>
Row indices. Row indices start with 1 in the upper left corner in the
raster, increase from left to right and then from top to bottom. The last
cell is in the bottom right corner and the row index equals the number of
cells in the raster.</p>
</dd>
<dt><code>cols</code></dt>
<dd>
<p><code>character()</code><br>
Column names.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Total of missing values per column (named <code>numeric()</code>).
</p>


<hr>
<a id="method-DataBackendRaster-coordinates"></a>



<h4>Method <code>coordinates()</code>
</h4>

<p>Returns the coordinates of <code>rows</code>.
If <code>rows</code> is missing, all coordinates are returned.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataBackendRaster$coordinates(rows)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>rows</code></dt>
<dd>
<p><code>integer()</code><br>
Row indices. Row indices start with 1 in the upper left corner in the
raster, increase from left to right and then from top to bottom. The last
cell is in the bottom right corner and the row index equals the number of
cells in the raster.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>data.table::data.table()</code> of coordinates of <code>rows</code>.
</p>




</div>