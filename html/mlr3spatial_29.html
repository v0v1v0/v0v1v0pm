<div class="container">

<table style="width: 100%;"><tr>
<td>predict_spatial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predict on Spatial Objects with mlr3 Learners</h2>

<h3>Description</h3>

<p>This function allows to directly predict mlr3 learners on various spatial objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">predict_spatial(
  newdata,
  learner,
  chunksize = 200L,
  format = "terra",
  filename = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>(terra::SpatRaster | <code>stars::stars</code> | sf::sf | <code>raster::RasterStack</code> | <code>raster::RasterBrick</code>).
New data to predict on. All spatial data formats convertible by <code>as_data_backend()</code> are supported e.g. terra::SpatRaster or sf::sf.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>learner</code></td>
<td>
<p>(Learner).
Learner with trained model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunksize</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
The chunksize determines in how many subparts the prediction task will be
split into. The value can be roughly thought of as megabyte of a raster file
on disk. For example, if a prediction on a 1 GB file would be carried out
with <code>chunksize = 100L</code>, the prediction would happen in 10 chunks.
</p>
<p>The default of <code>chunksize = 1000L</code> might be a good compromise between speed
and memory usage. If you find yourself running out of memory, reduce this
value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>(<code>character(1)</code>)<br>
Output class of the resulting object.
Accepted values are <code>"raster"</code>, <code>"stars"</code> and <code>"terra"</code> if the input is a raster.
Note that when choosing something else than <code>"terra"</code>, the spatial object is converted into the respective format which might cause overhead both in runtime and memory allocation.
For vector data only <code>"sf"</code> is supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>(<code>character(1)</code>)<br>
Path where the spatial object should be written to.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Spatial object of class given in argument <code>format</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra, exclude = "resample")

# fit rpart on training points
task_train = tsk("leipzig")
learner = lrn("classif.rpart")
learner$train(task_train)

# load raster
stack = rast(system.file("extdata", "leipzig_raster.tif", package = "mlr3spatial"))

# predict land cover classes
pred = predict_spatial(stack, learner, chunksize = 1L)
</code></pre>


</div>