<div class="container">

<table style="width: 100%;"><tr>
<td>autoplot.ResamplingSptCVCstf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualization Functions for SptCV Cstf Methods.</h2>

<h3>Description</h3>

<p>Generic S3 <code>plot()</code> and <code>autoplot()</code> (ggplot2) methods to
visualize mlr3 spatiotemporal resampling objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'ResamplingSptCVCstf'
autoplot(
  object,
  task,
  fold_id = NULL,
  plot_as_grid = TRUE,
  train_color = "#0072B5",
  test_color = "#E18727",
  repeats_id = NULL,
  tickformat_date = "%Y-%m",
  nticks_x = 3,
  nticks_y = 3,
  point_size = 3,
  axis_label_fontsize = 11,
  static_image = FALSE,
  show_omitted = FALSE,
  plot3D = NULL,
  plot_time_var = NULL,
  sample_fold_n = NULL,
  ...
)

## S3 method for class 'ResamplingRepeatedSptCVCstf'
autoplot(
  object,
  task,
  fold_id = NULL,
  repeats_id = 1,
  plot_as_grid = TRUE,
  train_color = "#0072B5",
  test_color = "#E18727",
  tickformat_date = "%Y-%m",
  nticks_x = 3,
  nticks_y = 3,
  point_size = 3,
  axis_label_fontsize = 11,
  plot3D = NULL,
  plot_time_var = NULL,
  ...
)

## S3 method for class 'ResamplingSptCVCstf'
plot(x, ...)

## S3 method for class 'ResamplingRepeatedSptCVCstf'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p><code style="white-space: pre;">⁠[Resampling]⁠</code><br>
mlr3 spatial resampling object of class ResamplingSptCVCstf or
ResamplingRepeatedSptCVCstf.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>task</code></td>
<td>
<p><code style="white-space: pre;">⁠[TaskClassifST]/[TaskRegrST]⁠</code><br>
mlr3 task object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fold_id</code></td>
<td>
<p><code style="white-space: pre;">⁠[numeric]⁠</code><br>
Fold IDs to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_as_grid</code></td>
<td>
<p><code style="white-space: pre;">⁠[logical(1)]⁠</code><br>
Should a gridded plot using via <a href="https://CRAN.R-project.org/package=patchwork"><span class="pkg">patchwork</span></a> be created? If <code>FALSE</code>
a list with of <a href="https://CRAN.R-project.org/package=ggplot2"><span class="pkg">ggplot2</span></a> objects is returned.
Only applies if a numeric vector is passed to argument <code>fold_id</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_color</code></td>
<td>
<p><code style="white-space: pre;">⁠[character(1)]⁠</code><br>
The color to use for the training set observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_color</code></td>
<td>
<p><code style="white-space: pre;">⁠[character(1)]⁠</code><br>
The color to use for the test set observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeats_id</code></td>
<td>
<p><code style="white-space: pre;">⁠[numeric]⁠</code><br>
Repetition ID to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tickformat_date</code></td>
<td>
<p><code style="white-space: pre;">⁠[character]⁠</code><br>
Date format for z-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nticks_x</code></td>
<td>
<p><code style="white-space: pre;">⁠[integer]⁠</code><br>
Number of x axis breaks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nticks_y</code></td>
<td>
<p><code style="white-space: pre;">⁠[integer]⁠</code><br>
Number of y axis breaks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point_size</code></td>
<td>
<p><code style="white-space: pre;">⁠[numeric]⁠</code><br>
Point size of markers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis_label_fontsize</code></td>
<td>
<p><code style="white-space: pre;">⁠[integer]⁠</code><br>
Font size of axis labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>static_image</code></td>
<td>
<p><code style="white-space: pre;">⁠[logical]⁠</code><br>
Whether to create a static image from the plotly plot via <code>plotly::orca()</code>.
This requires the <code>orca</code> utility to be available.
See <a href="https://github.com/plotly/orca">https://github.com/plotly/orca</a> for
more information.
When used, by default a file named <code>plot.png</code> is created in the current
working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_omitted</code></td>
<td>
<p><code style="white-space: pre;">⁠[logical]⁠</code><br>
Whether to show points not used in train or test set for the current fold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot3D</code></td>
<td>
<p><code style="white-space: pre;">⁠[logical]⁠</code><br>
Whether to create a 2D image via <span class="pkg">ggplot2</span> or a 3D plot via
<span class="pkg">plotly</span>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_time_var</code></td>
<td>
<p><code style="white-space: pre;">⁠[character]⁠</code><br>
The variable to use for the z-axis (time).
Remove the column role <code>feature</code> for this variable to only use
it for plotting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_fold_n</code></td>
<td>
<p><code style="white-space: pre;">⁠[integer]⁠</code><br>
Number of points in a random sample stratified over partitions.
This argument aims to keep file sizes of resulting plots reasonable and
reduce overplotting in dense datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Passed down to <code>plotly::orca()</code>. Only effective when
<code>static_image = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code style="white-space: pre;">⁠[Resampling]⁠</code><br>
mlr3 spatial resampling object of class ResamplingSptCVCstf or
ResamplingRepeatedSptCVCstf.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This method requires to set argument <code>fold_id</code>.
No plot showing all folds in one plot can be created.
This is because the LLTO method does not make use of all observations but only
a subset of them (many observations are omitted).
Hence, train and test sets of one fold are not re-used in other folds as in
other methods and plotting these without a train/test indicator would be
misleading.
</p>


<h3>2D vs 3D plotting</h3>

<p>This method has both a 2D and a 3D plotting method.
The 2D method returns a <span class="pkg">ggplot</span> with x and y axes representing the spatial
coordinates.
The 3D method uses <span class="pkg">plotly</span> to create an interactive 3D plot.
Set <code>plot3D = TRUE</code> to use the 3D method.
</p>
<p>Note that spatiotemporal datasets usually suffer from overplotting in 2D
mode.
</p>


<h3>See Also</h3>


<ul>
<li>
<p> mlr3book chapter on <a href="https://mlr3book.mlr-org.com/chapters/chapter13/beyond_regression_and_classification.html#spatiotemp-cv">"Spatiotemporal Visualization"</a>
</p>
</li>
<li>
<p> Vignette <a href="https://mlr3spatiotempcv.mlr-org.com/articles/spatiotemp-viz.html">Spatiotemporal Visualization</a>.
</p>
</li>
<li> <p><code>autoplot.ResamplingSpCVBlock()</code>
</p>
</li>
<li> <p><code>autoplot.ResamplingSpCVBuffer()</code>
</p>
</li>
<li> <p><code>autoplot.ResamplingSpCVCoords()</code>
</p>
</li>
<li> <p><code>autoplot.ResamplingSpCVEnv()</code>
</p>
</li>
<li> <p><code>autoplot.ResamplingCV()</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
if (mlr3misc::require_namespaces(c("sf", "plotly"), quietly = TRUE)) {
  library(mlr3)
  library(mlr3spatiotempcv)
  task_st = tsk("cookfarm_mlr3")
  task_st$set_col_roles("SOURCEID", "space")
  task_st$set_col_roles("Date", "time")
  resampling = rsmp("sptcv_cstf", folds = 5)
  resampling$instantiate(task_st)

  # with both `"space"` and `"time"` column roles set (LLTO), the omitted
  # observations per fold can be shown by setting `show_omitted = TRUE`
  autoplot(resampling, task_st, fold_id = 1, show_omitted = TRUE)
}

</code></pre>


</div>