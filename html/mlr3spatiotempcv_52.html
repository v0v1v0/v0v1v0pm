<div class="container">

<table style="width: 100%;"><tr>
<td>mlr_resamplings_sptcv_cstf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>(CAST) Spatiotemporal "Leave-location-and-time-out" resampling</h2>

<h3>Description</h3>

<p>Splits data using Leave-Location-Out (LLO), Leave-Time-Out (LTO) and
Leave-Location-and-Time-Out (LLTO) partitioning.
See the upstream implementation at <code>CreateSpacetimeFolds()</code>
(package <a href="https://CRAN.R-project.org/package=CAST"><span class="pkg">CAST</span></a>) and Meyer et al. (2018) for further information.
</p>


<h3>Details</h3>

<p>LLO predicts on unknown locations i.e. complete locations are left out in the
training sets.
The <code>"space"</code> role in <code>Task$col_roles</code> identifies spatial units.
If <code>stratify</code> is <code>TRUE</code>, the target distribution is similar in each fold.
This is useful for land cover classification when the observations
are polygons.
In this case, LLO with stratification should be used to hold back complete
polygons and have a similar target distribution in each fold.
LTO leaves out complete temporal units which are identified by the
<code>"time"</code> role in <code>Task$col_roles</code>.
LLTO leaves out spatial and temporal units.
See the examples.
</p>


<h3>Parameters</h3>


<ul>
<li> <p><code>folds</code> (<code>integer(1)</code>)<br>
Number of folds.
</p>
</li>
<li> <p><code>stratify</code><br>
If <code>TRUE</code>, stratify on the target column.
</p>
</li>
</ul>
<h3>Super class</h3>

<p><code>mlr3::Resampling</code> -&gt; <code>ResamplingSptCVCstf</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>iters</code></dt>
<dd>
<p><code>integer(1)</code><br>
Returns the number of resampling iterations, depending on the
values stored in the <code>param_set</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ResamplingSptCVCstf-new"><code>ResamplingSptCVCstf$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ResamplingSptCVCstf-instantiate"><code>ResamplingSptCVCstf$instantiate()</code></a>
</p>
</li>
<li> <p><a href="#method-ResamplingSptCVCstf-clone"><code>ResamplingSptCVCstf$clone()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="format"><a href="../../mlr3/html/Resampling.html#method-Resampling-format"><code>mlr3::Resampling$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="help"><a href="../../mlr3/html/Resampling.html#method-Resampling-help"><code>mlr3::Resampling$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="print"><a href="../../mlr3/html/Resampling.html#method-Resampling-print"><code>mlr3::Resampling$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="test_set"><a href="../../mlr3/html/Resampling.html#method-Resampling-test_set"><code>mlr3::Resampling$test_set()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="train_set"><a href="../../mlr3/html/Resampling.html#method-Resampling-train_set"><code>mlr3::Resampling$train_set()</code></a></span></li>
</ul></details><hr>
<a id="method-ResamplingSptCVCstf-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a "Spacetime Folds" resampling instance.
</p>


<h5>Usage</h5>

<div class="r"><pre>ResamplingSptCVCstf$new(id = "sptcv_cstf")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p><code>character(1)</code><br>
Identifier for the resampling strategy.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ResamplingSptCVCstf-instantiate"></a>



<h4>Method <code>instantiate()</code>
</h4>

<p>Materializes fixed training and test splits for a given task.
</p>


<h5>Usage</h5>

<div class="r"><pre>ResamplingSptCVCstf$instantiate(task)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>task</code></dt>
<dd>
<p>Task<br>
A task to instantiate.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ResamplingSptCVCstf-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ResamplingSptCVCstf$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>References</h3>

<p>Meyer H, Reudenbach C, Hengl T, Katurji M, Nauss T (2018).
“Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation.”
<em>Environmental Modelling &amp; Software</em>, <b>101</b>, 1–9.
<a href="https://doi.org/10.1016/j.envsoft.2017.12.001">doi:10.1016/j.envsoft.2017.12.001</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(mlr3)
task = tsk("cookfarm_mlr3")
task$set_col_roles("SOURCEID", roles = "space")
task$set_col_roles("Date", roles = "time")

# Instantiate Resampling
rcv = rsmp("sptcv_cstf", folds = 5)
rcv$instantiate(task)

### Individual sets:
# rcv$train_set(1)
# rcv$test_set(1)
# check that no obs are in both sets
intersect(rcv$train_set(1), rcv$test_set(1)) # good!

# Internal storage:
# rcv$instance # table

</code></pre>


</div>