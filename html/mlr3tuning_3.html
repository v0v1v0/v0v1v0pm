<div class="container">

<table style="width: 100%;"><tr>
<td>ArchiveBatchTuning</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class for Logging Evaluated Hyperparameter Configurations</h2>

<h3>Description</h3>

<p>The <code>ArchiveBatchTuning</code> stores all evaluated hyperparameter configurations and performance scores in a <code>data.table::data.table()</code>.
</p>


<h3>Details</h3>

<p>The ArchiveBatchTuning is a container around a <code>data.table::data.table()</code>.
Each row corresponds to a single evaluation of a hyperparameter configuration.
See the section on Data Structure for more information.
The archive stores additionally a mlr3::BenchmarkResult (<code style="white-space: pre;">⁠$benchmark_result⁠</code>) that records the resampling experiments.
Each experiment corresponds to to a single evaluation of a hyperparameter configuration.
The table (<code style="white-space: pre;">⁠$data⁠</code>) and the benchmark result (<code style="white-space: pre;">⁠$benchmark_result⁠</code>) are linked by the <code>uhash</code> column.
If the archive is passed to <code>as.data.table()</code>, both are joined automatically.
</p>


<h3>Data Structure</h3>

<p>The table (<code style="white-space: pre;">⁠$data⁠</code>) has the following columns:
</p>

<ul>
<li>
<p> One column for each hyperparameter of the search space (<code style="white-space: pre;">⁠$search_space⁠</code>).
</p>
</li>
<li>
<p> One (list-)column for the <code>internal_tuned_values</code>
</p>
</li>
<li>
<p> One column for each performance measure (<code style="white-space: pre;">⁠$codomain⁠</code>).
</p>
</li>
<li> <p><code>x_domain</code> (<code>list()</code>)<br>
Lists of (transformed) hyperparameter values that are passed to the learner.
</p>
</li>
<li> <p><code>runtime_learners</code> (<code>numeric(1)</code>)<br>
Sum of training and predict times logged in learners per mlr3::ResampleResult / evaluation.
This does not include potential overhead time.
</p>
</li>
<li> <p><code>timestamp</code> (<code>POSIXct</code>)<br>
Time stamp when the evaluation was logged into the archive.
</p>
</li>
<li> <p><code>batch_nr</code> (<code>integer(1)</code>)<br>
Hyperparameters are evaluated in batches.
Each batch has a unique batch number.
</p>
</li>
<li> <p><code>uhash</code> (<code>character(1)</code>)<br>
Connects each hyperparameter configuration to the resampling experiment stored in the mlr3::BenchmarkResult.
</p>
</li>
</ul>
<h3>Analysis</h3>

<p>For analyzing the tuning results, it is recommended to pass the ArchiveBatchTuning to <code>as.data.table()</code>.
The returned data table is joined with the benchmark result which adds the mlr3::ResampleResult for each hyperparameter evaluation.
</p>
<p>The archive provides various getters (e.g. <code style="white-space: pre;">⁠$learners()⁠</code>) to ease the access.
All getters extract by position (<code>i</code>) or unique hash (<code>uhash</code>).
For a complete list of all getters see the methods section.
</p>
<p>The benchmark result (<code style="white-space: pre;">⁠$benchmark_result⁠</code>) allows to score the hyperparameter configurations again on a different measure.
Alternatively, measures can be supplied to <code>as.data.table()</code>.
</p>
<p>The <a href="https://CRAN.R-project.org/package=mlr3viz"><span class="pkg">mlr3viz</span></a> package provides visualizations for tuning results.
</p>


<h3>S3 Methods</h3>


<ul><li> <p><code>as.data.table.ArchiveTuning(x, unnest = "x_domain", exclude_columns = "uhash", measures = NULL)</code><br>
Returns a tabular view of all evaluated hyperparameter configurations.<br>
ArchiveBatchTuning -&gt; <code>data.table::data.table()</code><br></p>

<ul>
<li> <p><code>x</code> (ArchiveBatchTuning)
</p>
</li>
<li> <p><code>unnest</code> (<code>character()</code>)<br>
Transforms list columns to separate columns. Set to <code>NULL</code> if no column should be unnested.
</p>
</li>
<li> <p><code>exclude_columns</code> (<code>character()</code>)<br>
Exclude columns from table. Set to <code>NULL</code> if no column should be excluded.
</p>
</li>
<li> <p><code>measures</code> (List of mlr3::Measure)<br>
Score hyperparameter configurations on additional measures.
</p>
</li>
</ul>
</li></ul>
<h3>Super classes</h3>

<p><code>bbotk::Archive</code> -&gt; <code>bbotk::ArchiveBatch</code> -&gt; <code>ArchiveBatchTuning</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>benchmark_result</code></dt>
<dd>
<p>(mlr3::BenchmarkResult)<br>
Benchmark result.</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>internal_search_space</code></dt>
<dd>
<p>(paradox::ParamSet)<br>
The search space containing those parameters that are internally optimized by the <code>mlr3::Learner</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ArchiveBatchTuning-new"><code>ArchiveBatchTuning$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-learner"><code>ArchiveBatchTuning$learner()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-learners"><code>ArchiveBatchTuning$learners()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-learner_param_vals"><code>ArchiveBatchTuning$learner_param_vals()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-predictions"><code>ArchiveBatchTuning$predictions()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-resample_result"><code>ArchiveBatchTuning$resample_result()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-print"><code>ArchiveBatchTuning$print()</code></a>
</p>
</li>
<li> <p><a href="#method-ArchiveBatchTuning-clone"><code>ArchiveBatchTuning$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Archive" data-id="format"><a href="../../bbotk/html/Archive.html#method-Archive-format"><code>bbotk::Archive$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="Archive" data-id="help"><a href="../../bbotk/html/Archive.html#method-Archive-help"><code>bbotk::Archive$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="ArchiveBatch" data-id="add_evals"><a href="../../bbotk/html/ArchiveBatch.html#method-ArchiveBatch-add_evals"><code>bbotk::ArchiveBatch$add_evals()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="ArchiveBatch" data-id="best"><a href="../../bbotk/html/ArchiveBatch.html#method-ArchiveBatch-best"><code>bbotk::ArchiveBatch$best()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="ArchiveBatch" data-id="clear"><a href="../../bbotk/html/ArchiveBatch.html#method-ArchiveBatch-clear"><code>bbotk::ArchiveBatch$clear()</code></a></span></li>
<li><span class="pkg-link" data-pkg="bbotk" data-topic="ArchiveBatch" data-id="nds_selection"><a href="../../bbotk/html/ArchiveBatch.html#method-ArchiveBatch-nds_selection"><code>bbotk::ArchiveBatch$nds_selection()</code></a></span></li>
</ul></details><hr>
<a id="method-ArchiveBatchTuning-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates a new instance of this R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$new(
  search_space,
  codomain,
  check_values = FALSE,
  internal_search_space = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>search_space</code></dt>
<dd>
<p>(paradox::ParamSet)<br>
Hyperparameter search space. If <code>NULL</code> (default), the search space is
constructed from the paradox::TuneToken of the learner's parameter set
(learner$param_set).</p>
</dd>
<dt><code>codomain</code></dt>
<dd>
<p>(bbotk::Codomain)<br>
Specifies codomain of objective function i.e. a set of performance measures.
Internally created from provided mlr3::Measures.</p>
</dd>
<dt><code>check_values</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
If <code>TRUE</code> (default), hyperparameter configurations are check for validity.</p>
</dd>
<dt><code>internal_search_space</code></dt>
<dd>
<p>(paradox::ParamSet or <code>NULL</code>)<br>
The internal search space of the tuner. This includes parameters that the learner can optimize internally
durign <code style="white-space: pre;">⁠$train()⁠</code>, such as the number of epochs via early stopping.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-learner"></a>



<h4>Method <code>learner()</code>
</h4>

<p>Retrieve mlr3::Learner of the i-th evaluation, by position or by unique hash <code>uhash</code>.
<code>i</code> and <code>uhash</code> are mutually exclusive.
Learner does not contain a model. Use <code style="white-space: pre;">⁠$learners()⁠</code> to get learners with models.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$learner(i = NULL, uhash = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>i</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
The iteration value to filter for.</p>
</dd>
<dt><code>uhash</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
The <code>uhash</code> value to filter for.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-learners"></a>



<h4>Method <code>learners()</code>
</h4>

<p>Retrieve list of trained mlr3::Learner objects of the i-th evaluation, by position or by unique hash <code>uhash</code>.
<code>i</code> and <code>uhash</code> are mutually exclusive.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$learners(i = NULL, uhash = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>i</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
The iteration value to filter for.</p>
</dd>
<dt><code>uhash</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
The <code>uhash</code> value to filter for.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-learner_param_vals"></a>



<h4>Method <code>learner_param_vals()</code>
</h4>

<p>Retrieve param values of the i-th evaluation, by position or by unique hash <code>uhash</code>.
<code>i</code> and <code>uhash</code> are mutually exclusive.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$learner_param_vals(i = NULL, uhash = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>i</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
The iteration value to filter for.</p>
</dd>
<dt><code>uhash</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
The <code>uhash</code> value to filter for.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-predictions"></a>



<h4>Method <code>predictions()</code>
</h4>

<p>Retrieve list of mlr3::Prediction objects of the i-th evaluation, by position or by unique hash <code>uhash</code>.
<code>i</code> and <code>uhash</code> are mutually exclusive.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$predictions(i = NULL, uhash = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>i</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
The iteration value to filter for.</p>
</dd>
<dt><code>uhash</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
The <code>uhash</code> value to filter for.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-resample_result"></a>



<h4>Method <code>resample_result()</code>
</h4>

<p>Retrieve mlr3::ResampleResult of the i-th evaluation, by position or by unique hash <code>uhash</code>.
<code>i</code> and <code>uhash</code> are mutually exclusive.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$resample_result(i = NULL, uhash = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>i</code></dt>
<dd>
<p>(<code>integer(1)</code>)<br>
The iteration value to filter for.</p>
</dd>
<dt><code>uhash</code></dt>
<dd>
<p>(<code>logical(1)</code>)<br>
The <code>uhash</code> value to filter for.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Printer.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$print()</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt>
<dd>
<p>(ignored).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-ArchiveBatchTuning-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ArchiveBatchTuning$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




</div>