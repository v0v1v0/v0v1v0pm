<div class="container">

<table style="width: 100%;"><tr>
<td>setMBOControlTermination</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set termination options.</h2>

<h3>Description</h3>

<p>Extends an MBO control object with infill criteria and infill optimizer options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setMBOControlTermination(
  control,
  iters = NULL,
  time.budget = NULL,
  exec.time.budget = NULL,
  target.fun.value = NULL,
  max.evals = NULL,
  more.termination.conds = list(),
  use.for.adaptive.infill = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>[<code>MBOControl</code>]<br>
Control object for mbo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters</code></td>
<td>
<p>[<code>integer(1)</code>]<br>
Number of sequential optimization steps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.budget</code></td>
<td>
<p>[<code>numeric(1)</code> | NULL]<br>
Running time budget in seconds. Note that the actual mbo run can take more time since
the condition is checked after each iteration.
The default <code>NULL</code> means: There is no time budget.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exec.time.budget</code></td>
<td>
<p>[<code>numeric(1)</code> | NULL]<br>
Execution time (time spent executing the function passed to <code>mbo</code>)
budget in seconds. Note that the actual mbo run can take more time since
the condition is checked after each iteration.
The default <code>NULL</code> means: There is no execution time budget.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target.fun.value</code></td>
<td>
<p>[<code>numeric(1)</code>] | NULL]<br>
Termination criterion for single-objective optimization: Stop if a function evaluation
is better than this given target.value.
The default <code>NULL</code> means: The function value won't be taken into account for termination.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.evals</code></td>
<td>
<p>[<code>integer(1) | NULL</code>]<br>
Maximal number of function evaluations.
The default <code>NULL</code> means: The total number of evaluations won't be taken into account for termination.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>more.termination.conds</code></td>
<td>
<p>[<code>list</code>]<br>
Optional list of termination conditions. Each condition needs to be a function
of a single argument <code>opt.state</code> of type <code>OptState</code> and should
return a list with the following elements:
</p>

<dl>
<dt>term [<code>logical(1)</code>]</dt>
<dd>
<p>Logical value indicating whether the
termination condition is met.</p>
</dd>
<dt>message [<code>character(1)</code>]</dt>
<dd>
<p>Termination message. At the moment we just allow <code>term.custom</code>.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.for.adaptive.infill</code></td>
<td>
<p>[<code>character(1)</code>|NULL]<br>
Which termination criterion should determine the progress that is used for adaptive infill criteria like [<code>makeMBOInfillCritAdaCB</code>].
The default is <code>NULL</code> which means, that the first supplied argument is taken, following the order of the function signature.
Other values can be <code>"iters"</code>, <code>"time.budget"</code>, etc.<br>
If you want to to use it together with a criterion you supplied in <code>more.termination.conds</code>, <code>more.termination.conds</code> has to be a named list and the function further has to return a list element <code>progress</code> with values between 0 and 1.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>[<code>MBOControl</code>].
</p>


<h3>See Also</h3>

<p>Other MBOControl: 
<code>makeMBOControl()</code>,
<code>setMBOControlInfill()</code>,
<code>setMBOControlMultiObj()</code>,
<code>setMBOControlMultiPoint()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">fn = smoof::makeSphereFunction(1L)
ctrl = makeMBOControl()

# custom termination condition (stop if target function value reached)
# We neglect the optimization direction (min/max) in this example.
yTargetValueTerminator = function(y.val) {
  force(y.val)
  function(opt.state) {
    opt.path = opt.state$opt.path
    current.best = getOptPathEl(opt.path, getOptPathBestIndex((opt.path)))$y
    term = (current.best &lt;= y.val)
    message = if (!term) NA_character_ else sprintf("Target function value %f reached.", y.val)
    return(list(term = term, message = message))
  }
}

# assign custom termination condition
ctrl = setMBOControlTermination(ctrl, more.termination.conds = list(yTargetValueTerminator(0.05)))
res = mbo(fn, control = ctrl)
print(res)
</code></pre>


</div>