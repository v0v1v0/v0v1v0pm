<div class="container">

<table style="width: 100%;"><tr>
<td>sparsify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sparsify</h2>

<h3>Description</h3>

<p>Convert a data.table object into a sparse matrix (with the same number of rows).
</p>


<h3>Usage</h3>

<pre><code class="language-R">sparsify(dt, sparsifyNAs = FALSE, naCols = "none")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>A data.table object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparsifyNAs</code></td>
<td>
<p>Should NAs be converted to 0s and sparsified?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naCols</code></td>
<td>

<ul>
<li>
<p><b>"none"</b> Don't generate columns to identify NA values
</p>
</li>
<li>
<p><b>"identify"</b> For each column of dt with an NA value, generate a column in the 
sparse matrix with 1s indicating NAs. Columns will be named like "color_NA"
</p>
</li>
<li>
<p><b>"efficient"</b> For each column of dt with an NA value, generate a column in the 
sparse matrix with 1s indicating either NAs or Non NAs - whichever is more memory efficient. 
Columns will be named like "color_NA" or "color_NotNA"
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Converts a data.table object to a sparse matrix (class "dgCMatrix"). Requires the <span class="pkg">Matrix</span> package. 
All sparsified data is assumed to take on the value 0/FALSE 
</p>
<p>### Data Type | Description &amp; NA handling
</p>
<p>numeric | If <code>sparsifyNAs</code> = FALSE, only 0s will be sparsified
If <code>sparsifyNAs</code> = TRUE, 0s and NAs will be sparsified
</p>
<p>factor (unordered) | Each level will generate a sparsified binary column
Column names are feature_level, e.g. "color_red", "color_blue"
</p>
<p>factor (ordered) | Levels are converted to numeric, 1 - NLevels
If <code>sparsifyNAs</code> = FALSE, NAs will remain as NAs
If <code>sparsifyNAs</code> = TRUE, NAs will be sparsified
</p>
<p>logical | TRUE and FALSE values will be converted to 1s and 0s
If <code>sparsifyNAs</code> = FALSE, only FALSEs will be sparsified
If <code>sparsifyNAs</code> = TRUE, FALSEs and NAs will be sparsified
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(data.table)
library(Matrix)

dt &lt;- data.table(
  intCol=c(1L, NA_integer_, 3L, 0L),
  realCol=c(NA, 2, NA, NA),
  logCol=c(TRUE, FALSE, TRUE, FALSE),
  ofCol=factor(c("a", "b", NA, "b"), levels=c("a", "b", "c"), ordered=TRUE),
  ufCol=factor(c("a", NA, "c", "b"), ordered=FALSE)
)

sparsify(dt)
sparsify(dt, sparsifyNAs=TRUE)
sparsify(dt[, list(realCol)], naCols="identify")
sparsify(dt[, list(realCol)], naCols="efficient")
</code></pre>


</div>