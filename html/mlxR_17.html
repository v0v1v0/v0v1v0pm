<div class="container">

<table style="width: 100%;"><tr>
<td>simulx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulation of mixed effects models and longitudinal data</h2>

<h3>Description</h3>

<p>Compute predictions and sample data from <code>Mlxtran</code> and <code>R</code> models
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulx(
  model = NULL,
  parameter = NULL,
  output = NULL,
  treatment = NULL,
  regressor = NULL,
  varlevel = NULL,
  group = NULL,
  data = NULL,
  project = NULL,
  nrep = 1,
  npop = NULL,
  fim = NULL,
  result.folder = NULL,
  result.file = NULL,
  stat.f = "statmlx",
  addlines = NULL,
  settings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a <code>Mlxtran</code>, or <code>R</code> model used for the simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameter</code></td>
<td>
<p>a vector of parameters with their names and values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>a list (or list of lists) with fields: 
</p>

<ul>
<li> <p><code>name</code>: a vector of output names
</p>
</li>
<li> <p><code>time</code>: a vector of times (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>lloq</code>: lower limit of quantification (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>uloq</code>: upper limit of quantification (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>limit</code>: lower bound of the censoring interval (only for the longitudinal outputs)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>time</code> : a vector of input times,
</p>
</li>
<li> <p><code>amount</code> : a scalar or a vector of amounts,
</p>
</li>
<li> <p><code>rate</code> : a scalar or a vector of infusion rates (default=<code>Inf</code>),
</p>
</li>
<li> <p><code>tinf</code> : a scalar or a vector of infusion times (default=0),
</p>
</li>
<li> <p><code>type</code> : the type of input (default=1),
</p>
</li>
<li> <p><code>target</code> : the target compartment (default=NULL). 
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regressor</code></td>
<td>
<p>a list, or a list of lists, with fields
</p>

<ul>
<li> <p><code>name</code> : a vector of regressor names,
</p>
</li>
<li> <p><code>time</code> : a vector of times,
</p>
</li>
<li> <p><code>value</code> : a vector of values.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlevel</code></td>
<td>
<p>(IOV supported by mlxR &gt;= 3.2.2) a list (or a dataframe) with fields: 
</p>

<ul>
<li> <p><code>name</code> : name of the variable which defines the occasions,
</p>
</li>
<li> <p><code>time</code> : a vector of times (beginnings of occasions) ,
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>a list, or a list of lists, with fields: 
</p>

<ul>
<li> <p><code>size</code> : size of the group (default=1),
</p>
</li>
<li> <p><code>level</code> : level(s) of randomization,
</p>
</li>
<li> <p><code>parameter</code> : if different parameters per group are defined,
</p>
</li>
<li> <p><code>output</code> : if different outputs per group are defined,
</p>
</li>
<li> <p><code>treatment</code> : if different treatements per group are defined,
</p>
</li>
<li> <p><code>regressor</code> : if different regression variables per group are defined.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a list (output of simulx when settings$data.in==TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project</code></td>
<td>
<p>the name of a Monolix project</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrep</code></td>
<td>
<p>number of replicates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npop</code></td>
<td>
<p>number of population parameters to draw randomly</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fim</code></td>
<td>
<p>a string with the Fisher Information Matrix to be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result.folder</code></td>
<td>
<p>the name of the folder where the outputs of simulx should be stored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result.file</code></td>
<td>
<p>the name of the single file where the outputs of simulx should be saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat.f</code></td>
<td>
<p>a R function for computing some summary (mean, quantiles, survival,...) of the simulated data. Default = "statmlx".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addlines</code></td>
<td>
<p>a list with fields: 
</p>

<ul>
<li> <p><code>section</code>: a string (default = "[LONGITUDINAL]"),
</p>
</li>
<li> <p><code>block</code>: a string (default = "EQUATION:"),
</p>
</li>
<li> <p><code>formula</code>: string, or vector of strings, to be inserted .
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>settings</code></td>
<td>
<p>a list of optional settings
</p>

<ul>
<li> <p><code>seed</code> : initialization of the random number generator (integer),
</p>
</li>
<li> <p><code>load.design</code> : TRUE/FALSE (if load.design is not defined, a test is automatically performed to check if a new design has been defined),
</p>
</li>
<li> <p><code>data.in</code> : TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>id.out</code>  : add columns id (when N=1) and group (when #group=1), TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>kw.max</code> : maximum number of trials for generating a positive definite covariance matrix (default = 100) 
</p>
</li>
<li> <p><code>sep</code> : the field separator character (default = ",") 
</p>
</li>
<li> <p><code>digits</code> : number of decimal digits in output files (default = 5) 
</p>
</li>
<li> <p><code>disp.iter</code> : TRUE/FALSE (default = FALSE) display replicate and population numbers
</p>
</li>
<li> <p><code>replacement</code> : TRUE/FALSE (default = FALSE) sample id's with/without replacement
</p>
</li>
<li> <p><code>out.trt</code> : TRUE/FALSE (default = TRUE) output of simulx includes treatment
</p>
</li>
<li> <p><code>format.original</code> : TRUE/FALSE (default = FALSE) with a Monolix project, write data in result.file using the original format of the data file
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>simulx takes advantage of the modularity of hierarchical models for simulating 
different components of a model: models for population parameters, individual 
covariates, individual parameters and longitudinal data.
</p>
<p>Furthermore, <code>simulx</code> allows to draw different types of longitudinal data, 
including continuous, count, categorical, and time-to-event data.
</p>
<p>The models are encoded using either the model coding language ‘<span class="samp">⁠Mlxtran⁠</span>’, or ‘<span class="samp">⁠R⁠</span>’. 
‘<span class="samp">⁠Mlxtran⁠</span>’ models are automatically converted into C++ codes, 
compiled on the fly and linked to R using the ‘<span class="samp">⁠Rcpp⁠</span>’ package. 
That allows one to implement very easily complex models and to take advantage 
of the numerical sovers used by the C++ ‘<span class="samp">⁠mlxLibrary⁠</span>’.
</p>
<p>See http://simulx.webpopix.org for more details.
</p>


<h3>Value</h3>

<p>A list of data frames. Each data frame is an output of simulx
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
myModel &lt;- inlineModel("
[LONGITUDINAL]
input = {A, k, c, a}
EQUATION:
t0    = 0 
f_0   = A
ddt_f = -k*f/(c+f)
DEFINITION:
y = {distribution=normal, prediction=f, sd=a}
[INDIVIDUAL]
input = {k_pop, omega}
DEFINITION:
k = {distribution=lognormal, prediction=k_pop, sd=omega}
")
f &lt;- list(name='f', time=seq(0, 30, by=0.1))
y &lt;- list(name='y', time=seq(0, 30, by=2))
res &lt;- simulx(model     = 'model/home.txt', 
              parameter = c(A=100, k_pop=6, omega=0.3, c=10, a=2), 
              output    = list(f,y,"k"),
              group     = list(size=4, level='individual'))

plot(ggplotmlx() + geom_line(data=res$f, aes(x=time, y=f, colour=id)) +
     geom_point(data=res$y, aes(x=time, y=y, colour=id)))
print(res$parameter)

## End(Not run)

</code></pre>


</div>