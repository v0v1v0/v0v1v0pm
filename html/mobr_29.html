<div class="container">

<table style="width: 100%;"><tr>
<td>plot_rarefaction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot rarefaction curves for each treatment group</h2>

<h3>Description</h3>

<p>Plot rarefaction curves for each treatment group
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_rarefaction(
  mob_in,
  group_var,
  ref_level = NULL,
  method,
  spat_algo = NULL,
  dens_ratio = 1,
  scales = c("alpha", "gamma", "study"),
  raw = TRUE,
  smooth = FALSE,
  avg = FALSE,
  col = NULL,
  lwd = 3,
  log = "",
  leg_loc = "topleft",
  one_panel = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mob_in</code></td>
<td>
<p>a 'mob_in' class object produced by 'make_mob_in'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_var</code></td>
<td>
<p>String that specifies which field in <code>mob_in$env</code> the
data should be grouped by</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref_level</code></td>
<td>
<p>String that defines the reference level of <code>group_var</code>
to which all other groups are compared with, defaults to <code>NULL</code>.
If <code>NULL</code> then the default contrasts of <code>group_var</code> are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string that specifies the method of rarefaction 
curve construction it can be one of the following: 
</p>

<ul>
<li> <p><code>'IBR'</code> ... individual-based rarefaction in which species
are accumulated by randomly sampling individuals
</p>
</li>
<li> <p><code>'SBR'</code> ... sample-based rarefaction in which species are 
accumulated by randomly sampling samples (i.e., plots). Note that within plot spatial 
aggregation is maintained with this approach. Although this curve
is implemented here, it is not used in the current version of the MoB framework
</p>
</li>
<li> <p><code>'nsSBR'</code> ... non-spatial, sampled-based rarefaction in which
species are accumulated by randomly sampling samples that represent a 
spatially random sample of individuals (i.e., no with-in plot spatial 
aggregation). The argument <code>dens_ratio</code> must also be set otherwise 
this sampling results in a curve identical to the IBR (see Details). 
</p>
</li>
<li> <p><code>'sSBR'</code> ... spatial sample-based rarefaction in which species 
are accumulated by including spatially proximate samples first.
</p>
</li>
<li> <p><code>'spexSBR'</code>  ... spatially-explicit sample-based rarefaction
in which species are accumulated as in <code>'sSBR'</code> but sampling
effort is not measured by no. of samples, but by cumulative distance or
cumulative area as specified by <code>'spat_algo'</code> (see details)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spat_algo</code></td>
<td>
<p>character string that can be either: <code>'kNN'</code>,
<code>'kNCN'</code>, or <code>'convexhull'</code> for k-nearest neighbor, 
k-nearest centroid neighbor sampling, or convex-hull polygon calculation 
respectively. It defaults to k-nearest neighbor which is a 
more computationally efficient algorithm that closely approximates the 
potentially more correct k-NCN algo (see Details). Currently, <code>'kNN'</code> and
<code>'k-NCN'</code> are available for method <code>'ssBR'</code>, while <code>'kNN'</code>
<code>'convexhull'</code> are available for method <code>'spexSBR'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dens_ratio</code></td>
<td>
<p>the ratio of individual density between a reference group
and the community data (i.e., x) under consideration. This argument is
used to rescale the rarefaction curve when estimating the effect of
individual density on group differences in richness.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scales</code></td>
<td>
<p>character string which defaults to c('alpha', 'gamma', 'study')
indicating that rarefaction curves at the alpha (i.e., single plot), gamma 
(i.e., group of plots), and study (i.e., all plots) scales should be computed
and plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw</code></td>
<td>
<p>boolean. Defaults to TRUE so that raw rarefaction curves
without averaging or smoothing are plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>boolean. Defaults to FALSE. If set to TRUE a lowess smoother is 
used on the 'alpha' scale curves. Has no effect at gamma or study scales</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avg</code></td>
<td>
<p>boolean. Defaults to FALSE. If set to TRUE then the average richness
across the groups is computed and plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>optional vector of colors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>a number which specifies the width of the lines</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>a string that specifies if any axes are to be log transformed, 
options include 'x', 'y' or 'xy' in which either the x-axis, y-axis, or
both axes are log transformed respectively</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg_loc</code></td>
<td>
<p>a string that specifies the location of the legend, 
options include: 'lowerleft', 'topleft', 'loweright','topright'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>one_panel</code></td>
<td>
<p>boolean. Defaults to FALSE. If set to TRUE then the alpha
scale and gamma scale curves are put on the same graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to provide to <code>rarefaction</code></p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">data(inv_comm)
data(inv_plot_attr)
inv_mob_in = make_mob_in(inv_comm, inv_plot_attr, coord_names = c('x', 'y'))
# random individual based rarefaction curves
par(mfrow=c(1,2))
plot_rarefaction(inv_mob_in, 'group', 'uninvaded', 'IBR',
                 leg_loc='bottomright')
plot_rarefaction(inv_mob_in, 'group', 'uninvaded', 'IBR',
                 log='xy')
# random sample based rarefaction curves 
plot_rarefaction(inv_mob_in, 'group', 'uninvaded', 'SBR', log='xy',
                 leg_loc='bottomright')
# spatial sample based rarefaction curves 
plot_rarefaction(inv_mob_in, 'group', 'uninvaded', 'sSBR', log='xy',
                 leg_loc='bottomright', avg = TRUE, smooth = TRUE)
</code></pre>


</div>