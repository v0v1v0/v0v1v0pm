<div class="container">

<table style="width: 100%;"><tr>
<td>stub</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Replace a function with a stub.</h2>

<h3>Description</h3>

<p>The result of calling <code>stub</code> is that, when <code>where</code>
is invoked and when it internally makes a call to <code>what</code>,
<code>how</code> is going to be called instead.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stub(where, what, how, depth = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>where</code></td>
<td>
<p>Function to be called that will in turn call
<code>what</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>
<p>Name of the function you want to stub out (a
<code>character</code> string).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>how</code></td>
<td>
<p>Replacement function (also a <code>mock</code> function)
or a return value for which a function will be created
automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>Specifies the depth to which the function should be stubbed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is much more limited in scope in comparison to
<code>with_mock</code> which effectively replaces
<code>what</code> everywhere. In other words, when using <code>with_mock</code>
and regardless of the number of intermediate calls, <code>how</code> is
always called instead of <code>what</code>. However, using this API,
the replacement takes place only for a single function <code>where</code>
and only for calls originating in that function.
</p>


<h3>Examples</h3>

<pre><code class="language-R">f &lt;- function() TRUE
g &lt;- function() f()
stub(g, 'f', FALSE)

# now g() returns FALSE because f() has been stubbed out
g()

# you can stub multiple functions by calling stub() multiple times 
f &lt;- function() TRUE
g &lt;- function() TRUE
h &lt;- function() any(f(), g())
stub(h, 'f', FALSE)
stub(h, 'g', FALSE)

# now h() returns FALSE because both f() and g() have been stubbed out
h()

</code></pre>


</div>