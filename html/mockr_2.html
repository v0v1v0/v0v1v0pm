<div class="container">

<table style="width: 100%;"><tr>
<td>get_mock_env</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get environment for mocking</h2>

<h3>Description</h3>

<p>Called by default from <code>with_mock()</code> to determine
the environment where to update mocked functions.
This function is exported to help troubleshooting.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_mock_env(.parent = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>.parent</code></td>
<td>
<p><code style="white-space: pre;">⁠[environment]⁠</code><br> the environment in which to evaluate the expressions,
defaults to <code>parent.frame()</code>. Usually doesn't need to be changed.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function works differently depending on
<code>testthat::is_testing()</code>.
</p>
<p>Outside testthat, <code>topenv(.parent)</code> is returned.
This was the default for mockr &lt; 0.1.0 and works for many cases.
</p>
<p>In testthat, <code>asNamespace("&lt;package&gt;")</code> for the tested package is returned.
The tested package is determined via <code>testthat::testing_package()</code>.
If this is empty (e.g. if a <code>test_that()</code> block is run in interactive mode),
this function looks in the search path for packages loaded by
<code>pkgload::load_all()</code>.
</p>


</div>