<div class="container">

<table style="width: 100%;"><tr>
<td>Dsquared</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Explained deviance
</h2>

<h3>Description</h3>

<p>This function computes the (adjusted) amount of deviance accounted for by a model, given a model object or a set of observed and predicted values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Dsquared(model = NULL, obs = NULL, pred = NULL, family = NULL,
adjust = FALSE, npar = NULL, na.rm = TRUE, rm.dup = FALSE,
dismo.version = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a model object of class implemented in <code>mod2obspred</code>. If this argument is provided, 'obs' and 'pred' will be extracted with that function. Alternatively, you can input the 'obs' and 'pred' arguments instead of 'model'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>alternatively to 'model' and together with 'pred', a numeric vector of observed values of the response variable. Alternatively (and if 'pred' is a 'SpatRaster'), a two-column matrix or data frame containing, respectively, the x (longitude) and y (latitude) coordinates of presence points, in which case the 'obs' vector of presences and absences will be extracted with <code>ptsrast2obspred</code>. This argument is ignored if 'model' is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>alternatively to 'model' and together with 'obs', a vector with the corresponding predicted values, of the same length and in the same order as 'obs'. Alternatively (and if 'obs' is a set of point coordinates), a 'SpatRaster' map of the predicted values for the entire evaluation region, in which case the 'pred' vector will be extracted with <code>ptsrast2obspred</code>. This argument is ignored if 'model' is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>a character vector (i.e. in quotes) of length 1 specifying the family of the model that generated the 'pred' values. This argument is ignored if <code>model</code> is provided and is of a class for which <code>family</code> provides a result; otherwise (i.e. if 'obs' and 'pred' are provided rather than a model object), family can be specified by the user, or (if left NULL) will be guessed (with a message) given the values of the response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjust</code></td>
<td>
<p>logical, whether or not to adjust the D-squared value for the number of observations and parameters in the model (see Details). The default is <code>FALSE</code>; <code>TRUE</code> requires either providing the <code>model</code> object of class GLM, or specifying the number of parameters in the model that produced the <code>pred</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npar</code></td>
<td>
<p>integer value indicating the number of parameters in the model. This argument is ignored and taken from <code>model</code> if this argument is provided and of class GLM, or if <code>adjust = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Logical value indicating whether missing values should be ignored in computations. Defaults to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rm.dup</code></td>
<td>
<p>If <code>TRUE</code> and if 'pred' is a SpatRaster and if there are repeated points within the same pixel, a maximum of one point per pixel is used to compute the presences. See examples in <code>ptsrast2obspred</code>. The default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dismo.version</code></td>
<td>
<p>Logical value indicating whether the deviance should be computed with code from the dismo::calc.deviance() function. The default is FALSE, for back-compatibility.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Linear models have an R-squared value (commonly provided with the model summary) which measures the proportion of variation that the model accounts for. For generalized linear models (GLMs) and others based on non-continuous response variables, an equivalent is the amount of deviance accounted for (D-squared; Guisan &amp; Zimmermann 2000), though this value is not routinely provided with the model summary. The <code>Dsquared</code> function calculates it as the proportion of the null deviance (i.e. the deviance of a model with no predictor variables) that is accounted for by the model. There is also an option to compute the adjusted D-squared, which takes into account the number of observations and the number of parameters, thus allowing direct comparison among the output for different models (Weisberg 1980, Guisan &amp; Zimmermann 2000).
</p>
<p>The function computes the mean residual deviance (as in the <code>calc.deviance</code> function of package <span class="pkg">dismo</span>) of the observed (response) against the predicted values, and the mean deviance of a null model (with no predictor variables), i.e. of the response against the mean of the response. Finally, it gets the explained deviance as (null-residual)/null.
</p>


<h3>Value</h3>

<p>The function returns a numeric value indicating the (optionally adjusted) proportion of deviance accounted for by the input model predictions.
</p>


<h3>Author(s)</h3>

<p>A. Marcia Barbosa, with parts of code from 'dismo::calc.deviance' by John R. Leathwick and Jane Elith
</p>


<h3>References</h3>

<p>Guisan, A. &amp; Zimmermann, N.E. (2000) Predictive habitat distribution models in ecology. Ecological Modelling 135: 147-186
</p>
<p>Weisberg, S. (1980) Applied Linear Regression. Wiley, New York
</p>


<h3>See Also</h3>

<p><code>plotGLM</code>, <code>RsqGLM</code>, <code>dismo::calc.deviance</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load sample models:
data(rotif.mods)

# choose a particular model to play with:
mod &lt;- rotif.mods$models[[1]]

Dsquared(model = mod)

Dsquared(model = mod, adjust = TRUE)


# you can also use Dsquared with vectors of observed and predicted values
# instead of with a model object:

presabs &lt;- mod$y
prediction &lt;- mod$fitted.values
parameters &lt;- attributes(logLik(mod))$df

Dsquared(obs = presabs, pred = prediction, family = "binomial")

Dsquared(obs = presabs, pred = prediction, family = "binomial",
adjust = TRUE, npar = parameters)


# 'obs' can also be a table of presence point coordinates
# and 'pred' a SpatRaster of predicted values
</code></pre>


</div>