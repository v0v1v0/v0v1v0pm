<div class="container">

<table style="width: 100%;"><tr>
<td>modelStudio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Interactive Studio for Explanatory Model Analysis</h2>

<h3>Description</h3>

<p>This function computes various (instance and dataset level) model explanations and
produces a customisable dashboard, which consists of multiple panels for plots with their
short descriptions. Easily save the dashboard and share it with others. Tools for
<a href="https://ema.drwhy.ai/">Explanatory Model Analysis</a> unite with tools for
Exploratory Data Analysis to give a broad overview of the model behavior.
</p>
<p>The extensive documentation covers:
</p>

<ul>
<li>
<p> Function parameters description -
<a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html"><b>perks and features</b></a>
</p>
</li>
<li>
<p> Framework and model compatibility -
<a href="https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html"><b>R &amp; Python examples</b></a>
</p>
</li>
<li>
<p> Theoretical introduction to the plots -
<a href="https://ema.drwhy.ai/">Explanatory Model Analysis: Explore, Explain, and Examine Predictive Models</a>
</p>
</li>
</ul>
<p>Displayed variable can be changed by clicking on the bars of plots or with the first dropdown list,
and observation can be changed with the second dropdown list.
The dashboard gathers useful, but not sensitive, information about how it is being used (e.g. computation length,
package version, dashboard dimensions). This is for the development purposes only and can be blocked
by setting <code>telemetry</code> to <code>FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">modelStudio(explainer, ...)

## S3 method for class 'explainer'
modelStudio(
  explainer,
  new_observation = NULL,
  new_observation_y = NULL,
  new_observation_n = 3,
  facet_dim = c(2, 2),
  time = 500,
  max_features = 10,
  max_features_fi = NULL,
  N = 300,
  N_fi = N * 10,
  N_sv = N * 3,
  B = 10,
  B_fi = B,
  eda = TRUE,
  open_plots = c("fi"),
  show_info = TRUE,
  parallel = FALSE,
  options = ms_options(),
  viewer = "external",
  widget_id = NULL,
  license = NULL,
  telemetry = TRUE,
  max_vars = NULL,
  verbose = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>An <code>explainer</code> created with <code>DALEX::explain()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation</code></td>
<td>
<p>New observations with columns that correspond to variables used in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation_y</code></td>
<td>
<p>True label for <code>new_observation</code> (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation_n</code></td>
<td>
<p>Number of observations to be taken from the <code>explainer$data</code> if <code>new_observation = NULL</code>.
See <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#instance-explanations"><b>vignette</b></a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet_dim</code></td>
<td>
<p>Dimensions of the grid. Default is <code>c(2,2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Time in ms. Set the animation length. Default is <code>500</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_features</code></td>
<td>
<p>Maximum number of features to be included in BD, SV, and FI plots.
Default is <code>10</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_features_fi</code></td>
<td>
<p>Maximum number of features to be included in FI plot. Default is <code>max_features</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Number of observations used for the calculation of PD and AD. Default is <code>300</code>.
See <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#more-calculations-means-more-time"><b>vignette</b></a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_fi</code></td>
<td>
<p>Number of observations used for the calculation of FI. Default is <code>10*N</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_sv</code></td>
<td>
<p>Number of observations used for the calculation of SV. Default is <code>3*N</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of permutation rounds used for calculation of SV. Default is <code>10</code>.
See <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#more-calculations-means-more-time"><b>vignette</b></a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B_fi</code></td>
<td>
<p>Number of permutation rounds used for calculation of FI. Default is <code>B</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eda</code></td>
<td>
<p>Compute EDA plots and Residuals vs Feature plot, which adds the data to the dashboard. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>open_plots</code></td>
<td>
<p>A vector listing plots to be initially opened (and on which positions). Default is <code>c("fi")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_info</code></td>
<td>
<p>Verbose a progress on the console. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Speed up the computation using <code>parallelMap::parallelMap()</code>.
See <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#parallel-computation"><b>vignette</b></a>.
This might interfere with showing progress using <code>show_info</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>Customize <code>modelStudio</code>. See <code>ms_options</code> and
<a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#additional-options-1"><b>vignette</b></a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer</code></td>
<td>
<p>Default is <code>external</code> to display in an external RStudio window.
Use <code>browser</code> to display in an external browser or
<code>internal</code> to use the RStudio internal viewer pane for output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>widget_id</code></td>
<td>
<p>Use an explicit element ID for the widget (rather than an automatically generated one).
Useful e.g. when using <code>modelStudio</code> with Shiny.
See <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html#shiny-1"><b>vignette</b></a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>license</code></td>
<td>
<p>Path to the file containing the license (<code>con</code> parameter passed to <code>readLines()</code>).
It can be used e.g. to include the license for <code>explainer$data</code> as a comment in the source of <code>.html</code> output file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>telemetry</code></td>
<td>
<p>The dashboard gathers useful, but not sensitive, information about how it is being used (e.g. computation length,
package version, dashboard dimensions). This is for the development purposes only and can be blocked by setting <code>telemetry</code> to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_vars</code></td>
<td>
<p>An alias for <code>max_features</code>. If provided, it will override the value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>An alias for <code>show_info</code>. If provided, it will override the value.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of the <code>r2d3, htmlwidget, modelStudio</code> class.
</p>


<h3>References</h3>


<ul>
<li>
<p> The input object is implemented in <a href="https://modeloriented.github.io/DALEX/"><b>DALEX</b></a>
</p>
</li>
<li>
<p> Feature Importance, Ceteris Paribus, Partial Dependence and Accumulated Dependence explanations
are implemented in <a href="https://modeloriented.github.io/ingredients/"><b>ingredients</b></a>
</p>
</li>
<li>
<p> Break Down and Shapley Values explanations are implemented in
<a href="https://modeloriented.github.io/iBreakDown/"><b>iBreakDown</b></a>
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Vignettes: <a href="https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html"><b>modelStudio - R &amp; Python examples</b></a>
and <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html"><b>modelStudio - perks and features</b></a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("DALEX")
library("modelStudio")

#:# ex1 classification on 'titanic' data

# fit a model
model_titanic &lt;- glm(survived ~., data = titanic_imputed, family = "binomial")

# create an explainer for the model
explainer_titanic &lt;- explain(model_titanic,
                             data = titanic_imputed,
                             y = titanic_imputed$survived,
                             label = "Titanic GLM")

# pick observations
new_observations &lt;- titanic_imputed[1:2,]
rownames(new_observations) &lt;- c("Lucas","James")

# make a studio for the model
modelStudio(explainer_titanic,
            new_observations,
            N = 200,  B = 5) # faster example



#:# ex2 regression on 'apartments' data
if (requireNamespace("ranger", quietly=TRUE)) {
  library("ranger")
  model_apartments &lt;- ranger(m2.price ~. ,data = apartments)

  explainer_apartments &lt;- explain(model_apartments,
                                  data = apartments,
                                  y = apartments$m2.price)

  new_apartments &lt;- apartments[1:2,]
  rownames(new_apartments) &lt;- c("ap1","ap2")

  # change dashboard dimensions and animation length
  modelStudio(explainer_apartments,
              new_apartments,
              facet_dim = c(2, 3),
              time = 800)

  # add information about true labels
  modelStudio(explainer_apartments,
              new_apartments,
              new_observation_y = new_apartments$m2.price)

  # don't compute EDA plots
  modelStudio(explainer_apartments,
              eda = FALSE)
}

#:# ex3 xgboost model on 'HR' dataset
if (requireNamespace("xgboost", quietly=TRUE)) {
  library("xgboost")
  HR_matrix &lt;- model.matrix(status == "fired" ~ . -1, HR)

  # fit a model
  xgb_matrix &lt;- xgb.DMatrix(HR_matrix, label = HR$status == "fired")
  params &lt;- list(max_depth = 3, objective = "binary:logistic", eval_metric = "auc")
  model_HR &lt;- xgb.train(params, xgb_matrix, nrounds = 300)

  # create an explainer for the model
  explainer_HR &lt;- explain(model_HR,
                          data = HR_matrix,
                          y = HR$status == "fired",
                          type = "classification",
                          label = "xgboost")

  # pick observations
  new_observation &lt;- HR_matrix[1:2, , drop=FALSE]
  rownames(new_observation) &lt;- c("id1", "id2")

  # make a studio for the model
  modelStudio(explainer_HR,
              new_observation)
}


</code></pre>


</div>