<div class="container">

<table style="width: 100%;"><tr>
<td>measurement_invariance_models</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Measurement Invariance Models</h2>

<h3>Description</h3>

<p>Generate metric and
scalar invariance models and their
partial invariance versions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">measurement_invariance_models(
  cfa_out,
  max_free = 1,
  metric = TRUE,
  scalar = TRUE,
  progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cfa_out</code></td>
<td>
<p>The output of
<code>lavaan::cfa()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_free</code></td>
<td>
<p>The maximum number of
constraints to be released when
generating the partial invariance
models. For example, if set to 1,
then only the partial metric invariance
model only has at most one item allowed
to have different loadings across
group. Default is 1. If set to zero,
then no partial invariance models
will be generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>Logical. If <code>TRUE</code>,
the default, then metric invariance
model and its partial invariance
versions are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scalar</code></td>
<td>
<p>Logical. If <code>TRUE</code>,
the default, then scalar invariance
model and its partial invariance
versions are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical. If <code>TRUE</code>,
the default, progress bars will be
displayed when fitting partial
invariance models.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This a helper function to generate,
based on a multigroup confirmatory
factor analysis (CFA) model with
no between-group equality constraints,
the following models:
</p>

<ul>
<li>
<p> A metric invariance model (loadings
constrained to be equal across
groups).
</p>
</li>
<li>
<p> A scalar invariance model (intercepts
and loadings constrained to be equal
across groups).
</p>
</li>
<li>
<p> Partial invariance versions of the
previous two models, such as a
model with the loadings of all items,
except for one, constrained to be
equal across groups.
</p>
</li>
</ul>
<p>The models generated can then be used
in <code>model_set()</code> to compute BPPs.
</p>


<h4>Requirements</h4>

<p>The model used as the input needs to
be fitted with no between group
constrains, that is, it is a
configural invariance model. Although
not a must, it is advised to use
the default way to identify each
factor (that is, fixing a loading
to one).
</p>



<h4>Implementation</h4>

<p>This function simply use the
<code>group.partial</code> and <code>group.equal</code>
argument of <code>lavaan::cfa()</code> to
generate the models.
</p>



<h3>Value</h3>

<p>A list of <code>lavaan::cfa()</code>
output. The names are automatically
generated to indicate whether a model
is configural, metric, or scalar
invariance, or the item(s) without
between-group constraints on the
loadings (for partial metric
invariance) or intercepts (for
partial scalar invariance).
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>See Also</h3>

<p><code>model_set()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(lavaan)
# For illustration, only one factor is used,
# with one item from another factor added
# just to make the model not saturated.
HSmod &lt;-
"
spatial =~ x1 + x2 + x3 + x4
"
fit_config &lt;- cfa(model = HSmod,
                  data = HolzingerSwineford1939,
                  group = "school")
fit_mi &lt;- measurement_invariance_models(fit_config)
names(fit_mi)
# Need to add 'skip_check_sem_out = TRUE' to use multigroup models.
out &lt;- model_set(sem_out = fit_mi,
                 skip_check_sem_out = TRUE,
                 progress = FALSE,
                 parallel = FALSE)
print(out)

</code></pre>


</div>