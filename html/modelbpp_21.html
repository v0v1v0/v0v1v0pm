<div class="container">

<table style="width: 100%;"><tr>
<td>model_graph</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a Graph of Models</h2>

<h3>Description</h3>

<p>Generate an 'igraph' object from a
'model_set' object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">model_graph(
  object,
  node_size_by_x = TRUE,
  x = NULL,
  node_size = 5,
  min_size = 5,
  max_size = 35,
  color_original = "lightblue",
  color_add = "burlywood1",
  color_drop = "lightgreen",
  color_others = "lightgrey",
  color_label = "black",
  node_label_size = 1,
  original = "original",
  drop_redundant_direct_paths = TRUE,
  label_arrow_by_df = NULL,
  arrow_label_size = 1,
  weight_arrows_by_df = c("inverse", "normal", "none"),
  arrow_min_width = 0.5,
  arrow_max_width = 2,
  progress = TRUE,
  short_names = FALSE,
  min_bpp_labelled = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Must be a
<code>model_set</code>-class object for now.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_size_by_x</code></td>
<td>
<p>Logical. Whether
node (vertex) sizes are determined
by a variable. Default is <code>TRUE</code>.
See <code>x</code> below on how size is
determined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>If not <code>NULL</code>, it should be
a numeric vector of length equal to
the number of models. The node sizes
will be proportional to the values
of <code>x</code>, offset by <code>min_size</code>. If
<code>NULL</code>, the default, the BIC
posterior probabilities
stored in <code>object</code> will be retrieved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_size</code></td>
<td>
<p>If <code>node_size_by_x</code>
is <code>FALSE</code>, this is the size for
all nodes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>The minimum size
of a node. Default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_size</code></td>
<td>
<p>The maximum size
of a node. Default is 35.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_original</code></td>
<td>
<p>The color
of node of the original model.
Default is <code>"lightblue"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_add</code></td>
<td>
<p>The color of
the nodes of models formed by
adding one or more free parameters to
the original model.
Default is <code>"burlywood1"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_drop</code></td>
<td>
<p>The color of
the nodes of models formed by
dropping one or more free parameters
from the original model.
Default is <code>"lightgreen"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_others</code></td>
<td>
<p>The color
of other models not specified above.
Default is <code>"grey50"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_label</code></td>
<td>
<p>The color of the
text labels of the nodes. Default
is <code>"black"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_label_size</code></td>
<td>
<p>The size of
the labels of the nodes. Default is
1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>original</code></td>
<td>
<p>String. The name
of the original model (target model).
Default is <code>"original"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_redundant_direct_paths</code></td>
<td>
<p>Logical. Whether the redundant direct
path between two models. A direct path
is redundant if two models are also
connected through at least one
another model. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_arrow_by_df</code></td>
<td>
<p>If <code>TRUE</code>,
then an arrow (edge) is always labelled
by the difference in model <em>df</em>s.
If <code>FALSE</code>, then no arrows are
labelled. If <code>NULL</code>, then arrows are
labelled when not all differences
in model <em>df</em>s are equal to one.
Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrow_label_size</code></td>
<td>
<p>The size of
the labels of the arrows (edges), if labelled.
Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_arrows_by_df</code></td>
<td>
<p>String.
Use if model <em>df</em>
differences are stored.
If <code>"inverse"</code>, larger the
difference in model <em>df</em>, <em>narrower</em>
an arrow. That is, more similar two
models are, thicker the arrow. If
<code>"normal"</code>, larger the difference
in model <em>df</em>, <em>wider</em> an arrow.
If <code>"none"</code>, then arrow width is
constant, set to <code>arrow_max_width</code>.
Default is <code>"inverse"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrow_min_width</code></td>
<td>
<p>If
<code>weight_arrows_by_df</code> is not <code>"none"</code>,
this is the minimum width of an
arrow.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrow_max_width</code></td>
<td>
<p>If
<code>weight_arrows_by_df</code> is not <code>"none"</code>,
this is the maximum width of an
arrow. If <code>weight_arrows_by_df</code> is
<code>"none"</code>, this is the width of all
arrows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Whether a progress
bar will be displayed for some
steps (e.g., checking for nested
relations). Default
is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>short_names</code></td>
<td>
<p>If <code>TRUE</code> and
short model names are stored,
they will be used as model labels.
Please print the object with
<code>short_names = TRUE</code> to find the
corresponding full model names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_bpp_labelled</code></td>
<td>
<p>If not <code>NULL</code>,
this is the minimum BPP for a model
to be labelled. Models with BPP less
than this value will not be labelled.
Useful when the number of models
is large.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments. Not
used for now.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It extracts the model list stored
in <code>object</code>, creates an adjacency
matrix, and then creates an <code>igraph</code>
object customized for visualizing
model relations.
</p>


<h4>Construction of the Graph</h4>

<p>This is the default way to construct
the graph when the model set is
automatically by <code>model_set()</code>.
</p>

<ul><li>
<p> Each model is connected by an
arrow, pointing from one model to
another model that
</p>
<p>a. can be formed by adding one
or more free parameter, or
</p>
<p>b. can be formed by releasing one
or more equality constraint
between two
parameters.
</p>
<p>c. has nested relation with this
model as determined by the
method proposed by Bentler
and Satorra (2010), if the
models are not generated
internally.
</p>
</li></ul>
<p>That is, it points to a model with
more degrees of freedom (more
complicated),
and
is nested within that model in either
parameter sense or covariance sense.
</p>

<ul>
<li>
<p> By default, the size of the node
for each model is scaled by its
BIC posterior probability, if
available. See <em>The Size of a Node</em>
below.
</p>
</li>
<li>
<p> If a model is designated as the
original (target) model,
than he original model, the models
with
more degrees of freedom than the
original model,
and the models with fewer degrees
of freedom than the original models,
are colored differently.
</p>
</li>
<li>
<p> The default layout is the Sugiyama
layout, with simpler models (models
with fewer degrees of freedom) on
the top. The lower a model is in
the network, the more the degrees
of freedom it has. This layout is
suitable for showing the nested
relations of the models. Models on
the same level (layer) horizontally
have the same model <em>df</em>.
</p>
</li>
</ul>
<p>The output is an <code>igraph</code> object.
Users can customize it in any way
they want using functions from
the <code>igraph</code> package.
</p>
<p>If a model has no nested relation
with all other model, it will not
be connected to other models.
</p>
<p>If no model is named <code>original</code>
(default is <code>"original"</code>), then no
model is colored as the original model.
</p>



<h4>User-Provided Models</h4>

<p>If <code>object</code> contained one or more
user-provided models which are not
generated automatically by
<code>model_set()</code> or similar functions
(e.g., <code>gen_models()</code>), then the
method by Bentler and Satorra (2010)
will be used to determine model
relations. Models connected by an
arrow has a nested relation based on
the NET method by Bentler and Satorra
(2010). An internal function inspired
by the <code>net</code> function from the
<code>semTools</code> package is used to
implement the NET method.
</p>



<h4>The Size of a Node</h4>

<p>When a model is scaled by <code>x</code>,
which usually is the BIC posterior
probability, its size is determined
by:
</p>
<p><code>max_size * (x - min(x))/(max(x) - min(x)) + min_size</code>
</p>



<h3>Value</h3>

<p>A <code>model_graph</code>-class object that
can be used as as an <code>igraph</code>-object,
with a plot method (<code>plot.model_graph()</code>)
with settings
suitable for plotting a network
of models with BIC posterior probabilities
computed.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
The internal function for nesting
inspired by the <code>net</code> function
from the <code>semTools</code> package,
which was developed by
Terrence D. Jorgensen.
</p>


<h3>References</h3>

<p>Bentler, P. M., &amp; Satorra, A. (2010).
Testing model nesting and equivalence.
<em>Psychological Methods, 15</em>(2),
111–123. <a href="https://doi.org/10.1037/a0019625">doi:10.1037/a0019625</a>
Asparouhov, T., &amp; Muthén, B. (2019).
Nesting and Equivalence Testing for
Structural Equation Models.
<em>Structural Equation Modeling: A Multidisciplinary Journal, 26</em>(2),
302–309. <a href="https://doi.org/10.1080/10705511.2018.1513795">doi:10.1080/10705511.2018.1513795</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(lavaan)

mod &lt;-
"
m1 ~ x
y ~ m1
"

fit &lt;- sem(mod, dat_serial_4, fixed.x = TRUE)

out &lt;- model_set(fit)
out

g &lt;- model_graph(out)
plot(g)

</code></pre>


</div>