<div class="container">

<table style="width: 100%;"><tr>
<td>create_xreg_recipe</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Developer Tools for preparing XREGS (Regressors)</h2>

<h3>Description</h3>

<p>These functions are designed to assist developers in extending the <code>modeltime</code>
package. <code>create_xregs_recipe()</code> makes it simple to automate conversion
of raw un-encoded features to machine-learning ready features.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_xreg_recipe(
  data,
  prepare = TRUE,
  clean_names = TRUE,
  dummy_encode = TRUE,
  one_hot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prepare</code></td>
<td>
<p>Whether or not to run <code>recipes::prep()</code> on the final recipe.
Default is to prepare. User can set this to FALSE to return an un prepared recipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean_names</code></td>
<td>
<p>Uses <code>janitor::clean_names()</code> to process the names and improve robustness
to failure during dummy (one-hot) encoding step.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dummy_encode</code></td>
<td>
<p>Should <code>factors</code> (categorical data) be</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>one_hot</code></td>
<td>
<p>If <code>dummy_encode = TRUE</code>, should the encoding return
one column for each feature or one less column than each feature. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default recipe contains steps to:
</p>

<ol>
<li>
<p> Remove date features
</p>
</li>
<li>
<p> Clean the column names removing spaces and bad characters
</p>
</li>
<li>
<p> Convert ordered factors to regular factors
</p>
</li>
<li>
<p> Convert factors to dummy variables
</p>
</li>
<li>
<p> Remove any variables that have zero variance
</p>
</li>
</ol>
<h3>Value</h3>

<p>A <code>recipe</code> in either prepared or un-prepared format.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(timetk)
library(recipes)
library(lubridate)

predictors &lt;- m4_monthly %&gt;%
    filter(id == "M750") %&gt;%
    select(-value) %&gt;%
    mutate(month = month(date, label = TRUE))
predictors

# Create default recipe
xreg_recipe_spec &lt;- create_xreg_recipe(predictors, prepare = TRUE)

# Extracts the preprocessed training data from the recipe (used in your fit function)
juice_xreg_recipe(xreg_recipe_spec)

# Applies the prepared recipe to new data (used in your predict function)
bake_xreg_recipe(xreg_recipe_spec, new_data = predictors)

</code></pre>


</div>