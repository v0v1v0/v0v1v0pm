<div class="container">

<table style="width: 100%;"><tr>
<td>marg.glm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predicted Margins for 'glm' objects</h2>

<h3>Description</h3>

<p>Obtains predicted margins and standard errors
of those predictions from a fitted generalized linear model object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'glm'
marg(
  mod,
  var_interest,
  data = mod$data[names(mod$prior.weights), ],
  weights = mod$prior.weights,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mod</code></td>
<td>
<p>model object, currently only support those of class <code>glm</code>
or <code>ivreg</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_interest</code></td>
<td>
<p>name of the variable of interest, must correspond to a
covariate in the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame that margins should run over, defaults changes based
on class-specific method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>numeric, vector of weights used to generate predicted levels,
defaults changes based on class-specific method. Must be equal to the number
of rows in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed to <code>?marg</code>.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">data(mtcars)
mod &lt;- glm(vs ~ as.factor(gear) + mpg, data = mtcars, family = 'binomial')

# Get the level of the outcome variable at different values of `gear`
marg(mod, var_interest = 'gear', type = 'levels')
# Get the effect of `gear` on the outcome value, holding values of `mpg`
# constant
marg(mod, var_interest = 'gear', type = 'effects',
     at = list(mpg = c(15, 21)))

data(margex)
mod &lt;- glm(outcome ~ as.factor(treatment) + distance,
       data = margex, family = 'binomial')
# Get the level of the outcome variable at different values of `treatment`
marg(mod, var_interest = 'treatment', type = 'levels', at = NULL)
# Get the effect of `treatment` on the outcome variable
marg(mod, var_interest = 'treatment', type = 'effects', at = NULL)
# Get the level of the outcome variable at different values of `distance`
marg(mod, var_interest = 'distance', type = 'levels',
          at = NULL, at_var_interest = c(10, 20, 30))

# Using a custom variance-covariance matrix for clustered standard errors
# (also requires custom degrees of freedom for T statistic with OLS model),
# clustering on the "arm" variable

data(margex)
data(cvcov)
# ?cvcov
v &lt;- cvcov$ols$clust
d &lt;- cvcov$ols$stata_dof
mod &lt;- glm(outcome ~ treatment + distance,
           data = margex, family = 'binomial')
marg(mod, var_interest = 'treatment', type = 'levels',
          vcov_mat = v, dof = d)

# Using weights
data(margex)
mm &lt;- glm(y ~ as.factor(treatment) + age, data = margex, family = 'gaussian',
          weights = distance)
z1 &lt;- marg(mod = mm, var_interest = 'treatment', type = 'levels')[[1]]
z2 &lt;- marg(mod = mm, var_interest = 'treatment', type = 'effects')[[1]]

</code></pre>


</div>