<div class="container">

<table style="width: 100%;"><tr>
<td>extend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extend existing module definitions</h2>

<h3>Description</h3>

<p>extend can be used to extend an existing module definition. This can
be very useful to write unit tests when they need to have access to private
member functions of the module. This function breaks encapsulation of modules
and should be used with great care. As a mechanism for reuse consider
'composition' using expose and use.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extend(module, with)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>module</code></td>
<td>
<p>(character | module) a module as file or folder name or a list
representing a module.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with</code></td>
<td>
<p>(expression) an expression to add to the module definition.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A module can be characterized by its source code, the top enclosing
environment and the environment the module has been defined in.
extend will keep the latter two intact and only change the source
code. That means that the new module will have the same scope as the module
to be extended. import, use, and export declarations
can be added as needed.
</p>
<p>This approach gives access to all implementation details of a module and
breaks encapsulation. Possible use cases are: unit tests, and hacking the
module system when necessary. For general reuse of modules, consider using
expose and use which are safer to use.
</p>
<p>Since <code>extend</code> will alter the source code, the state of the
module is ignored and will not be present in the new module. A fresh
instance of that new module is returned and can in turn be extended and/or
treated like any other module.
</p>


<h3>Examples</h3>

<pre><code class="language-R">m1 &lt;- module({
  foo &lt;- function() "foo"
})
m2 &lt;- extend(m1, {
  bar &lt;- function() "bar"
})
m1$foo()
m2$foo()
m2$bar()
# For unit tests consider using:
extend(m1, {
  stopifnot(foo() == "foo")
})
</code></pre>


</div>