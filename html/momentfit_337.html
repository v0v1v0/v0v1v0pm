<div class="container">

<table style="width: 100%;"><tr>
<td>gmm4</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>GMM estimation
</h2>

<h3>Description</h3>

<p>The main functions and methods to fit any model with GMM. As opposed to
<code>gmmFit</code>, models don't need to be created. It is all done by
the functions. It is meant to be more user friendly. This document
needs to changed. It is just a copy and paste from the gmm package
</p>


<h3>Usage</h3>

<pre><code class="language-R">gmm4(g, x, theta0 = NULL, grad = NULL, 
     type = c("twostep", "iter", "cue", "onestep"),
     vcov = c("iid", "HAC", "MDS", "TrueFixed", "CL"),
     initW = c("ident", "tsls", "EbyE"), weights = "optimal", 
     itermaxit = 50, cstLHS=NULL, cstRHS=NULL,
     vcovOptions=list(), survOptions=list(),
     itertol = 1e-07, centeredVcov = TRUE,
     data = parent.frame(), ...)

## S4 method for signature 'formula'
tsls(model, x, vcov = c("iid", "HAC", "MDS", "CL"),
         vcovOptions=list(), survOptions=list(), centeredVcov = TRUE,
         data = parent.frame())

## S4 method for signature 'list'
tsls(model, x=NULL, vcov = c("iid", "HAC", "MDS",
          "CL"), vcovOptions=list(), survOptions=list(),
          centeredVcov = TRUE, data = parent.frame())

## S4 method for signature 'list'
ThreeSLS(model, x=NULL, vcov = c("iid", "HAC", "MDS",
          "CL"), vcovOptions=list(), survOptions=list(),
          centeredVcov = TRUE, data = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A formula or a list of formulas.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>A function of the form <code class="reqn">g(\theta,x)</code> and which returns a
<code class="reqn">n \times q</code> matrix with typical element <code class="reqn">g_i(\theta,x_t)</code> for
<code class="reqn">i=1,...q</code> and <code class="reqn">t=1,...,n</code>. This matrix is then used to build
the q sample moment conditions. It can also be a formula if the model
is linear or nonlinear, or a list of formulas for systems of equations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The matrix or vector of data from which the function
<code class="reqn">g(\theta,x)</code> is computed. If "g" is a formula, it is an <code class="reqn">n
    \times Nh</code> matrix of instruments or a formula (see details below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta0</code></td>
<td>
<p>A <code class="reqn">k \times 1</code> vector of starting values. It is required
only when "g" is a function or a nonlinear equation defined by a
formula, in which case, it must be a named vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grad</code></td>
<td>
<p>A function of the form <code class="reqn">G(\theta,x)</code> which returns a
<code class="reqn">q\times k</code> matrix of derivatives of <code class="reqn">\bar{g}(\theta)</code> with
respect to <code class="reqn">\theta</code>. By default, the numerical algorithm
<code>numericDeriv</code> is used. It is of course strongly suggested to
provide this function when it is possible. This gradient is used to
compute the asymptotic covariance matrix of <code class="reqn">\hat{\theta}</code> and to
obtain the analytical gradient of the objective function if the method
is set to "CG" or "BFGS" in <code>optim</code> and if "type" is not
set to "cue". If "g" is a formula, the gradiant is not required (see
the details below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>What GMM methods should we use? for
<code>type=="onestep"</code>, if <code>"weights"</code> is not a matrix, the
model will be estimated with the weights equals to the identity
matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov</code></td>
<td>
<p>Assumption on the properties of the random vector x. By
default, x is a weakly dependant process. The "iid" option will avoid
using the HAC matrix which will accelerate the estimation if one is
ready to make that assumption. The option "TrueFixed" is used only
when the matrix of weights is provided and it is the optimal one. For
type <code>CL</code>, clustered covariance matrix is computed. The options
are then included in <code>vcovOptions</code> (see <code>meatCL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initW</code></td>
<td>
<p>How should be compute the initial coefficient vector in
the first. It only makes a difference for linear models for which
the choice is GMM with identity matrix or two-stage least quares.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>What weighting matrix to use? The
choices are <code>"optimal"</code>, in which case it is the inverse of the
moment vovariance matrix, <code>"ident"</code> for the identity matrix, or
a fixed matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itermaxit</code></td>
<td>
<p>Maximum iterations for iterative GMM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itertol</code></td>
<td>
<p>Tolance for the stopping rule in iterative GMM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centeredVcov</code></td>
<td>
<p>Should the moment function be centered when
computing its covariance matrix. Doing so may improve inference.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame or a matrix with column names (Optional). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstLHS</code></td>
<td>
<p>The left hand side of the constraints to impose on the
coefficients. See <code>restModel</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cstRHS</code></td>
<td>
<p>The right hand side of the constraints to impose on the
coefficients. See <code>restModel</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcovOptions</code></td>
<td>
<p>A list of options for the covariance matrix of the
moment conditions. See <code>vcovHAC</code> for the default values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survOptions</code></td>
<td>
<p>If needed, a list with the type of survey weights and
the weights as a numeric vector, data.frame or formula. The type is either
<code>"sampling"</code> or <code>"fequency"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to <code>optim</code> when the model
is nonlinear.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>It returns an object of class <code>"gmmfit"</code>  
</p>


<h3>References</h3>

<p>Zeileis A (2006), Object-oriented Computation of Sandwich Estimators.
<em>Journal of Statistical Software</em>, <b>16</b>(9), 1–16.
URL doi: <a href="https://doi.org/10.18637/jss.v016.i09">10.18637/jss.v016.i09</a>.
</p>
<p>Andrews DWK (1991),
Heteroskedasticity and Autocorrelation Consistent Covariance Matrix Estimation.
<em>Econometrica</em>, <b>59</b>,
817–858.
</p>
<p>Newey WK &amp; West KD (1987), A Simple, Positive Semi-Definite,
Heteroskedasticity and Autocorrelation Consistent Covariance
Matrix. <em>Econometrica</em>, <b>55</b>, 703–708.
</p>
<p>Newey WK &amp; West KD (1994), Automatic Lag Selection in Covariance
Matrix Estimation. <em>Review of Economic Studies</em>, <b>61</b>, 631-653.
</p>
<p>Hansen, L.P. (1982),
Large Sample Properties of Generalized Method of Moments Estimators.
<em>Econometrica</em>, <b>50</b>,
1029-1054,
</p>
<p>Hansen, L.P. and Heaton, J. and Yaron, A.(1996),
Finite-Sample Properties of Some Alternative GMM Estimators.
<em>Journal of Business and Economic Statistics</em>, <b>14</b>
262-280.
</p>


<h3>See Also</h3>

<p><code>gmmFit</code>, <code>momentModel</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(simData)

res &lt;- gmm4(y~x1, ~z1+z2, vcov="MDS", type="iter", data=simData)
res
</code></pre>


</div>