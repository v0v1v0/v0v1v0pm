<div class="container">

<table style="width: 100%;"><tr>
<td>cum.bin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Monotonic binning based on maximum cumulative target rate (MAPA)</h2>

<h3>Description</h3>

<p><code>cum.bin</code> implements monotonic binning based on maximum cumulative target rate.
This algorithm is known as MAPA (Monotone Adjacent Pooling Algorithm).
</p>


<h3>Usage</h3>

<pre><code class="language-R">cum.bin(
  x,
  y,
  sc = c(NA, NaN, Inf, -Inf),
  sc.method = "together",
  g = 15,
  y.type = NA,
  force.trend = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric vector to be binned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Numeric target vector (binary or continuous).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sc</code></td>
<td>
<p>Numeric vector with special case elements. Default values are <code>c(NA, NaN, Inf, -Inf)</code>.
Recommendation is to keep the default values always and add new ones if needed. Otherwise, if these values exist
in <code>x</code> and are not defined in the <code>sc</code> vector, function will report the error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sc.method</code></td>
<td>
<p>Define how special cases will be treated, all together or in separate bins.
Possible values are <code>"together", "separately"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>Number of starting groups. Default is 15.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.type</code></td>
<td>
<p>Type of <code>y</code>, possible options are <code>"bina"</code> (binary) and  <code>"cont"</code> (continuous).
If default value (<code>NA</code>) is passed, then algorithm will identify if <code>y</code> is 0/1 or continuous variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force.trend</code></td>
<td>
<p>If the expected trend should be forced. Possible values: <code>"i"</code> for
increasing trend (<code>y</code> increases with increase of <code>x</code>), <code>"d"</code> for decreasing trend
(<code>y</code> decreases with decrease of <code>x</code>). Default value is <code>NA</code>.
If the default value is passed, then trend will be identified based on the sign of the Spearman correlation
coefficient between <code>x</code> and <code>y</code> on complete cases.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The command <code>cum.bin</code> generates a list of two objects. The first object, data frame <code>summary.tbl</code>
presents a summary table of final binning, while <code>x.trans</code> is a vector of discretized values.
In case of single unique value for <code>x</code> or <code>y</code> in complete cases (cases different than special cases),
it will return data frame with info.
</p>


<h3>Examples</h3>

<pre><code class="language-R">suppressMessages(library(monobin))
data(gcd)
amount.bin &lt;- cum.bin(x = gcd$amount, y = gcd$qual)
amount.bin[[1]]
gcd$amount.bin &lt;- amount.bin[[2]]
gcd %&gt;% group_by(amount.bin) %&gt;% summarise(n = n(), y.avg = mean(qual))
#increase default number of groups (g = 20)
amount.bin.1 &lt;- cum.bin(x = gcd$amount, y = gcd$qual, g = 20)
amount.bin.1[[1]]
#force trend to decreasing
cum.bin(x = gcd$amount, y = gcd$qual, g = 20, force.trend = "d")[[1]]

</code></pre>


</div>