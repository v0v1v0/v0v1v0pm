<div class="container">

<table style="width: 100%;"><tr>
<td>life.table</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates a life table</h2>

<h3>Description</h3>

<p><code>life.table</code> calculates
<a href="https://en.wikipedia.org/wiki/Life_table">life table(s)</a>.
The algorithm is optimised for deceased populations
encountered in archaeological research.
See <em>Chamberlain 2006</em>, 27ff., <em>Herrmann et. al 1990</em>, 303ff.,
<em>Kokkotidis/Richter 1991</em>, <em>Keyfitz et al. 2005</em>
for selected literature. <br>
The function takes an individual data.frame or a list of
data.frames and returns an object of class mortaar_life_table
or mortaar_life_table_list, for which specialised summary,
print and plot functions exist.
</p>


<h3>Usage</h3>

<pre><code class="language-R">life.table(neclist, agecor = TRUE, agecorfac = c(), option_spline = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>neclist</code></td>
<td>
<p>single data.frame or list of data.frames
with the columns 'x', 'a', 'Dx'.
</p>

<ul>
<li> <p><b>x</b>:  age interval identifier, optional. -
Otherwise determined from <b>a</b>.
</p>
</li>
<li> <p><b>a</b>:  years within x.
</p>
</li>
<li> <p><b>Dx</b>: number of deaths within x.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agecor</code></td>
<td>
<p>logical, optional. If set TRUE, the average number of years lived within a
given age class of individuals having died in this class can be adjusted via agecorfac.
If set FALSE, it is assumed that they died in the middle of this class. Due to the higher
mortality rates of infants, this assumption is certainly inaccurate for individuals
&lt;= 5 years.
</p>
<p>Default setup is: TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agecorfac</code></td>
<td>
<p>numeric vector, optional. Only applies if agecor == TRUE. Given values
replace the standard values from the first age interval onward.
</p>
<p>Default setup is 1/3 for every age class &lt;= 5 life years, and 1/2 for the others.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>option_spline</code></td>
<td>
<p>integer, optional. If &gt; 0, values for adults will be
interpolated by a monotonic cubic spline. Usual options will by '10' or '20' which
will interpolate the values for individuals of an age of 20 or older by 10- or 20-
year cumulated values. To be used carefully, as diagnostic features of the life
table might be smoothed and essentially removed. Only available when the methods
'Standard' or 'Equal5' in prep.life.table have been chosen.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class mortaar_life_table or mortaar_life_table_list.
Each mortaar_life_table contains the following variables:
</p>

<ul>
<li> <p><b>x</b>:  age interval.
</p>
</li>
<li> <p><b>a</b>:  years within x.
</p>
</li>
<li> <p><b>Ax</b>: average number of years lived by an
individual that died within a specific
age class x :
</p>
<p><code class="reqn">A_{x} = a_{x} * agecorfac_{x}</code>
</p>
</li>
<li> <p><b>Dx</b>: number of deaths within x.
</p>
</li>
<li> <p><b>dx</b>: proportion of deaths within x (percent) :
</p>
<p><code class="reqn">d_{x} = \frac{D_{x}}{\sum_{i=1}^{n} D_{i}} * 100</code>
</p>
</li>
<li> <p><b>lx</b>: survivorship within x (percent) :
</p>
<p><code class="reqn">l_{x+1} = l_{x} - d_{x}</code> with <code class="reqn">l_{0} = 100</code>
</p>
</li>
<li> <p><b>qx</b>: probability of death within x (percent) :
</p>
<p><code class="reqn">q_{x} = \frac{d_{x}}{l_{x}}* 100</code>
</p>
</li>
<li> <p><b>Lx</b>: number of years lived within x by those that died within x and those
that reached the next age class :
</p>
<p><code class="reqn">L_{x} = (a_{x} * l_{x}) - ((a_{x} - A_{x}) * d_{x})</code>
</p>
</li>
<li> <p><b>Tx</b>: sum of years lived within
current and remaining x :
</p>
<p><code class="reqn">T_{x+1} = T_{x} - L_{x}</code> with <code class="reqn">T_{0} = \sum_{i=1}^{n}{L_{i}}</code>
</p>
</li>
<li> <p><b>ex</b>: average years of life remaining
(average life expectancy at mean(x)) :
</p>
<p><code class="reqn">e_{x} = \frac{T_{x}}{l_{x}}</code>
</p>
</li>
<li> <p><b>rel_popx</b>: percentage of L(x) of the sum of L(x) :
</p>
<p><code class="reqn">relpopx_{x} = \frac{L_{x}}{\sum_{i=1}^{n}{L_{i}}} * 100</code>
</p>
</li>
</ul>
<h3>References</h3>

<p>Chamberlain AT (2006).
<em>Demography in archaeology</em>,  Cambridge Manuals in Archaeology.
Cambridge University Press.
<a href="https://doi.org/10.1017/CBO9780511607165">https://doi.org/10.1017/CBO9780511607165</a>.
</p>
<p>Herrmann B, Grupe G, Hummel S, Piepenbrink H, Schutkowski H (1990).
<em>Praehistorische Anthropologie: Leitfaden der Feld- und Labormethoden</em>.
Springer, Berlin.
</p>
<p>Keyfitz N, Caswell H (2005).
<em>Applied Mathematical Demography</em>.
Springer.
<a href="https://link.springer.com/book/10.1007/b139042">https://link.springer.com/book/10.1007/b139042</a>.
</p>
<p>Kokkotidis KG, Richter J (1991).
“Graeberfeld-Sterbetafeln.”
<em>Archaeologische Informationen. Mitteilungen zur Ur- und Fruehgeschichte</em>, <b>14</b>(2), 219–241.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Create a mortaar_life_table from a prepared dataset.
schleswig_1 &lt;- life.table(schleswig_ma[c("a", "Dx")])
print(schleswig_1)
plot(schleswig_1, display = "lx")

# Create a mortaar_life_table_list from two datasets.
odagsen &lt;- life.table(list(
  "corpus mandibulae" = odagsen_cm[c("a", "Dx")],
  "margo orbitalis" = odagsen_mo[c("a", "Dx")]
))
print(odagsen)
plot(odagsen, display = "ex")

# Prepare a real world dataset and create a mortaar_life_table.
library(magrittr)
magdalenenberg %&gt;%
 replace(. == "60-x", "60-70") %&gt;%
 tidyr::separate(a, c("from", "to")) %&gt;%
 dplyr::mutate(from = as.numeric(from), to = as.numeric(to)) %&gt;%
 prep.life.table(
  dec = "Dx",
  agebeg = "from",
  ageend = "to",
  method = "Standard",
  agerange = "excluded"
 ) %&gt;%
 life.table()


</code></pre>


</div>