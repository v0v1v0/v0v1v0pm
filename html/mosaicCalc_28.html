<div class="container">

<table style="width: 100%;"><tr>
<td>df2matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct a model matrix from data as if by hand</h2>

<h3>Description</h3>

<p>The <em>MOSAIC Calculus</em> course includes a block on linear algebra.
As part of this block, we want to cover creating model matrices and evaluating
the model constructed from them. One way to do this is to introduce
<code>lm()</code> and the domain specific language for specifying model terms. However,
that introduces oddities. For instance, <code>lm(mpg ~ hp + hp^2, data = mtcars)</code> does
NOT add the quadratic term to the model matrix. Also, <code>lm()</code> doesn't produce
a residual or the model vector (ahem ... the fitted values) in the form of vectors.
That's fine if you're teaching statistical modeling, but in the <em>MOSAIC Calculus</em>
linear algebra block we are not teaching statistics, but the mathematical
pre-requisites to understanding statistics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">df2matrix(..., data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Expressions, written in terms of the variable names in the data frame,
that are to be collected into the model matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data frame from which to which the variable names will be bound.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Specifically for <em>MOSAIC Calculus</em>, we have added this <code>df2matrix()</code> function.
It serves much the same purpose as <code>cbind()</code>, that is, collecting vectors into a
matrix. But is has two additional features:
</p>

<ol>
<li>
<p> It has a <code style="white-space: pre;">⁠data=⁠</code> argument so that it can refer to a data frame.
</p>
</li>
<li>
<p> It names the columns of the matrix with the code that was used to create
each column.
</p>
</li>
</ol>
<p>The consequence of (2) is that the <code>x</code> vector produced by <code>qr.solve()</code> will have the
same names as the matrix. That helps in interpreting <code>x</code>. But those names
can also be used by <code>makeFun()</code> to generate a function from <code>x</code>.
</p>
<p><code>1</code> is a good form in which to write the intercept term.
</p>


<h3>Value</h3>

<p>a matrix
</p>


<h3>Examples</h3>

<pre><code class="language-R">A &lt;- df2matrix(1, disp, log(hp), sin(cyl)*sqrt(hp), data = mtcars)
b &lt;- df2matrix(mpg, data = mtcars)
x &lt;- qr.solve(A, b)
f &lt;- makeFun(x)
f(hp=3, disp=2, cyl=4)

</code></pre>


</div>