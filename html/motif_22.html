<div class="container">

<table style="width: 100%;"><tr>
<td>lsp_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transforms lsp objects</h2>

<h3>Description</h3>

<p>It allows for transforming spatial signatures (outputs of
the <code>lsp_signature()</code> function) using user-provided functions.
See examples for more details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">lsp_transform(x, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object of class <code>lsp</code> - usually the output of
the <code>lsp_signature()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A user-provided function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for <code>fun</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Object of class <code>lsp</code>.
It has three columns: (1) <code>id</code> - an id of each window.
For irregular windows, it is the values provided in the <code>window</code> argument,
(2) <code>na_prop</code> - share (0-1) of <code>NA</code> cells for each window,
(3) <code>signature</code> - a list-column containing with calculated signatures
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(stars)
landform = read_stars(system.file("raster/landforms.tif", package = "motif"))
result_coma500 = lsp_signature(landform, type = "coma", threshold = 0.5, window = 500)

#see how the first signature looks
result_coma500$signature[[1]]

my_function = function(mat){
    mat_c = colSums(mat)
    freqs = mat_c / sum(mat)
    # entropy
    -sum(freqs * log2(freqs), na.rm = TRUE)
}

result_coma500_2 = lsp_transform(result_coma500, my_function)

#see how the first signature looks after transformation
result_coma500_2$signature[[1]]


# larger data example
library(stars)
landform = read_stars(system.file("raster/landform.tif", package = "motif"))
result_coma500 = lsp_signature(landform, type = "coma", threshold = 0.5, window = 500)

#see how the first signature looks
result_coma500$signature[[1]]

my_function = function(mat){
    mat_c = colSums(mat)
    freqs = mat_c / sum(mat)
    # entropy
    -sum(freqs * log2(freqs), na.rm = TRUE)
}

result_coma500_2 = lsp_transform(result_coma500, my_function)

#see how the first signature looks after transformation
result_coma500_2$signature[[1]]

</code></pre>


</div>