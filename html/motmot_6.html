<div class="container">

<table style="width: 100%;"><tr>
<td>as.rateData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Conversion among data and phylogeny objects</h2>

<h3>Description</h3>

<p>Function to generate a "rateData" object containing the discrete explanatory variable, continuous response variable and set of variance co-variance matrices. It loads the trait data and removes species with missing data from the data and vcv matrix. 
<code>as.rateData</code> requires either a set of matrices in rateMatrix format created using <code>as.rateMatrix</code> or, if no rateMatrix object is input then it requires a phylogeny in "phylo" format. If  a "phylo" object is used  <code>as.rateData</code> will call <code>as.rateMatrix</code> internally.
<code>as.rateMatrix</code> calls the "ape" function <code>vcv.phylo</code> multiple times and this can be slow for large phylogenies. It will often be more efficient to use <code>as.rateMatrix</code> first to create a "rateMatrix" object to pass to <code>as.rateData</code>, particularly if there are many response traits of interest to be fitted to the same phylogeny and set of reconstructed ancestral states.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.rateData(
  y,
  x,
  rateMatrix = NULL,
  phy = NULL,
  data,
  meserr.col = NULL,
  meserr.propn = NULL,
  log.y = FALSE,
  report_prune = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The response variable - typically a continuous trait. Specified as a column name or index</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The explanatory (discrete) variable used to define the hypothesised rate categories. Specified as a column name or index.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rateMatrix</code></td>
<td>
<p>A "rateMatrix" object or NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phy</code></td>
<td>
<p>An object of class "phylo" (see <span class="pkg">ape</span>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing (minimally) the x and y variables as columns with species names as rownames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meserr.col</code></td>
<td>
<p>Column name or index containing measurement error for species means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meserr.propn</code></td>
<td>
<p>Single value specifying the proportional measurement to be applied across all species.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log.y</code></td>
<td>
<p>Logical, natural log transform response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>report_prune</code></td>
<td>
<p>Logical. Prints a list of dropped species if TRUE</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>rateData An object of class "rateData" which is a list containing the response (y) and explanatory (x) variable along with a list of variance-covaraince matrices.
</p>


<h3>Author(s)</h3>

<p>Gavin Thomas
</p>


<h3>References</h3>

<p>Thomas GH, Meiri S, &amp; Phillimore AB. 2009. Body size diversification in Anolis: novel environments and island effects. Evolution 63, 2017-2030.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Read in phylogeny and data from Thomas et al. (2009)
data(anolis.tree)
data(anolis.data)

## Convert data to class rateData with a rateMatrix object as input
anolis.rateMatrix &lt;- as.rateMatrix(phy=anolis.tree, x="geo_ecomorph", data=anolis.data)

anolis.rateData &lt;- as.rateData(y="Female_SVL", x="geo_ecomorph", 
rateMatrix = anolis.rateMatrix, phy=NULL, data=anolis.data, log.y=TRUE)  

## Convert data to class rateData with a phylo object as input 
anolis.rateData &lt;- as.rateData(y="Female_SVL", x="geo_ecomorph", 
rateMatrix = NULL, phy=anolis.tree, data=anolis.data, log.y=TRUE)
</code></pre>


</div>