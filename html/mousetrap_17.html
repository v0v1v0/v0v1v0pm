<div class="container">

<table style="width: 100%;"><tr>
<td>mt_average</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Average trajectories across intervals.</h2>

<h3>Description</h3>

<p>Average trajectory data across specified intervals (e.g., constant time
intervals). For every specified dimension in the trajectory array (by
default, every dimension, i.e., x- and y-position, possibly also velocity and
acceleration etc.), the mean value for the respective interval is calculated
(see Details for information regarding the exact averaging procedure).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mt_average(
  data,
  use = "trajectories",
  save_as = "av_trajectories",
  dimensions = "all",
  av_dimension = "timestamps",
  intervals = NULL,
  interval_size = 100,
  max_interval = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a mousetrap data object created using one of the mt_import
functions (see mt_example for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>a character string specifying which trajectory data should be
used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_as</code></td>
<td>
<p>a character string specifying where the resulting trajectory
data should be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimensions</code></td>
<td>
<p>a character vector specifying the dimensions in the
trajectory array that should be averaged. By default (<code>"all"</code>), all
trajectory dimensions will be averaged.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>av_dimension</code></td>
<td>
<p>a character string specifying which values should be used
for determining the intervals for averaging (<code>"timestamps"</code> by
default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intervals</code></td>
<td>
<p>an optional numeric vector. If specified, these values are
taken as the borders of the intervals (<code>interval_size</code> and
<code>max_interval</code> are ignored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval_size</code></td>
<td>
<p>an integer specifying the size of the constant dimension
interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_interval</code></td>
<td>
<p>an integer specifying the upper limit of the last
dimension value that should be included (therefore, it should be a multiple
of the <code>interval_size</code>). If specified, only values will be used for
averaging where the dimension values are smaller than <code>max_interval</code>.
If unspecified (the default), all values will be included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical indicating whether function should report its
progress.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each interval, it is first determined which of the values lie within the
respective interval of the dimension used for averaging (e.g., timestamps).
Intervals are left-open, right-closed (e.g., if values are averaged across
constant timestamps of 100 ms, a timestamp of 1200 would be included in the
interval 1100-1200 while a timestamp of 1300 would be included in the
interval 1200-1300). Then, all values for which the corresponding average
dimension values lie within the interval are averaged.
</p>
<p>In case the last interval is not fully covered (e.g., if the last timestamp
has the value 1250), values for the corresponding interval (1200-1300) will
be computed based on the average of the values up to the last existing value.
</p>
<p>Note that <code>mt_average</code> assumes that the trajectory variables are
recorded with a constant sampling rate (i.e., with a constant difference in
the timestamps). If the sampling rate varies considerably, mt_resample
should be called before averaging to arrive at equally spaced timestamps. The
sampling rate can be investigated using mt_check_resolution.
</p>
<p>If average velocity and acceleration are of interest,
mt_derivatives should be called before averaging.
</p>


<h3>Value</h3>

<p>A mousetrap data object (see mt_example) with an additional
array (by default called <code>av_trajectories</code>) that contains the average
trajectory data per dimension interval. If a trajectory array was provided
directly as <code>data</code>, only the average trajectories will be returned.
</p>
<p>For the dimension values used for averaging (specified in
<code>av_dimension</code>), the mid point of the respective interval is reported,
which is helpful for plotting the trajectory data later on. However, this
value does not necessarily correspond to the empirical mean of the
dimension values in the interval.
</p>


<h3>Author(s)</h3>

<p>Pascal J. Kieslich
</p>
<p>Felix Henninger
</p>


<h3>See Also</h3>

<p>mt_derivatives for calculating velocity and
acceleration.
</p>
<p>mt_resample for resampling trajectories using a constant time
interval.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mt_example &lt;- mt_derivatives(mt_example)

# average trajectories across 100 ms intervals
mt_example &lt;- mt_average(mt_example, save_as="av_trajectories",
  interval_size=100)

# average time-normalized trajectories across specific intervals
# of the time steps
mt_example &lt;- mt_time_normalize(mt_example)
mt_example &lt;- mt_average(mt_example,
  use="tn_trajectories", save_as="av_tn_trajectories",
  av_dimension = "steps", intervals = c(0.5,33.5,67.5,101.5))

</code></pre>


</div>