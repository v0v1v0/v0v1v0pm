<div class="container">

<table style="width: 100%;"><tr>
<td>moverank</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R function for calculating sub-optimal least-cost paths bewteen an origin and a destination location</h2>

<h3>Description</h3>

<p>The function provides the facility to calculate the LCP between an origin and a destination location and (more importantly) to
work out the first five sub-optimal LCPs between those locations. The underlying idea is the following: given two locations, we can
calculate the least-costly path between them; but, if we disregard that LCP, what path would be the second least costly?
And if we in turn disregard those first two, what the third least costly path would be? The same reasoning holds for all the subsequent n-th LCPs. Under the hood,
<code>moverank()</code> rests on <code>movecost</code> and implements the same cost functions. See the help documentation of <code>movecost()</code> for further details.<br>
Visit this <a href="https://drive.google.com/file/d/1gLDrkZFh1b_glzCEqKdkPrer72JJ9Ffa/view?usp=sharing">LINK</a> to access the package's vignette.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">moverank(
  dtm = NULL,
  origin,
  destin,
  studyplot = NULL,
  barrier = NULL,
  plot.barrier = FALSE,
  irregular.dtm = FALSE,
  funct = "t",
  time = "h",
  lcp.n = 3,
  move = 16,
  cogn.slp = FALSE,
  sl.crit = 10,
  W = 70,
  L = 0,
  N = 1,
  V = 1.2,
  z = 9,
  use.corr = FALSE,
  leg.pos = "topright",
  leg.cex = 0.55,
  add.chart = FALSE,
  bubble.cex = 0.5,
  transp = 0.5,
  export = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>Digital Terrain Model (RasterLayer class); if not provided, elevation data will be acquired online for the area enclosed by the 'studyplot' parameter (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>location from which least-cost path(s) is calculated (SpatialPointsDataFrame class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destin</code></td>
<td>
<p>location(s) to which least-cost path(s) is calculated (SpatialPointsDataFrame class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyplot</code></td>
<td>
<p>polygon (SpatialPolygonDataFrame class) representing the study area for which online elevation data are acquired (see <code>movecost</code>); NULL is default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barrier</code></td>
<td>
<p>area where the movement is inhibited (SpatialLineDataFrame or SpatialPolygonDataFrame class) (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.barrier</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the barrier to be plotted (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>irregular.dtm</code></td>
<td>
<p>TRUE or FALSE (default) if the input DTM features irregular margins (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>funct</code></td>
<td>
<p>cost function to be used (for details on each of the following, see <code>movecost</code>):<br></p>
<p><strong>-functions expressing cost as walking time-</strong><br><strong>t</strong> (default) uses the on-path Tobler's hiking function;<br><strong>tofp</strong> uses the off-path Tobler's hiking function;<br><strong>mp</strong> uses the Marquez-Perez et al.'s modified Tobler's function;<br><strong>icmonp</strong> uses the Irmischer-Clarke's hiking function (male, on-path);<br><strong>icmoffp</strong> uses the Irmischer-Clarke's hiking function (male, off-path);<br><strong>icfonp</strong> uses the Irmischer-Clarke's hiking function (female, on-path);<br><strong>icfoffp</strong> uses the Irmischer-Clarke's hiking function (female, off-path);<br><strong>ug</strong> uses the Uriarte Gonzalez's walking-time cost function;<br><strong>ma</strong> uses the Marin Arroyo's walking-time cost function;<br><strong>alb</strong> uses the Alberti's Tobler hiking function modified for pastoral foraging excursions;<br><strong>gkrs</strong> uses the Garmy, Kaddouri, Rozenblat, and Schneider's hiking function;<br><strong>r</strong> uses the Rees' hiking function;<br><strong>ks</strong> uses the Kondo-Seino's hiking function;<br><strong>trp</strong> uses the Tripcevich's hiking function;<br></p>
<p><strong>-functions for wheeled-vehicles-</strong><br><strong>wcs</strong> uses the wheeled-vehicle critical slope cost function;<br></p>
<p><strong>-functions expressing abstract cost-</strong><br><strong>ree</strong> uses the relative energetic expenditure cost function;<br><strong>b</strong> uses the Bellavia's cost function;<br><strong>e</strong> uses the Eastman's cost function;<br></p>
<p><strong>-functions expressing cost as metabolic energy expenditure-</strong><br><strong>p</strong> uses the Pandolf et al.'s metabolic energy expenditure cost function;<br><strong>pcf</strong> uses the Pandolf et al.'s cost function with correction factor for downhill movements;<br><strong>m</strong> uses the Minetti et al.'s metabolic energy expenditure cost function;<br><strong>hrz</strong> uses the Herzog's metabolic energy expenditure cost function;<br><strong>vl</strong> uses the Van Leusen's metabolic energy expenditure cost function;<br><strong>ls</strong> uses the Llobera-Sluckin's metabolic energy expenditure cost function;<br><strong>a</strong> uses the Ardigo et al.'s metabolic energy expenditure cost function;<br><strong>h</strong> uses the Hare's metabolic energy expenditure cost function (for all the mentioned cost functions, see <code>movecost</code>).<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>time-unit expressed by the accumulated raster if Tobler's and other time-related cost functions are used; h' for hour, 'm' for minutes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lcp.n</code></td>
<td>
<p>number of LCPs rendered in the output plot (min=1, max=6; 3 by default; the 1st LCP is the optimal one, while the LCPs from the 2nd to the 6th are the sub-optimal ones).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>move</code></td>
<td>
<p>number of directions in which cells are connected: 4 (rook's case), 8 (queen's case), 16 (knight and one-cell queen moves; default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cogn.slp</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the 'cognitive slope' to be used in place of the real slope (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl.crit</code></td>
<td>
<p>critical slope (in percent), typically in the range 8-16 (10 by default) (used by the wheeled-vehicle cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>walker's body weight (in Kg; 70 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>carried load weight (in Kg; 0 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>coefficient representing ease of movement (1 by default) (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>speed in m/s (1.2 by default) (used by the Pandolf et al.'s, Pandolf et al.s with correction factor, Van Leusen's, and Ardigo et al.'s cost function; if set to 0, it is internally worked out on the basis of Tobler on-path hiking function (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>zoom level for the elevation data downloaded from online sources (from 0 to 15; 9 by default) (see <code>movecost</code> and <code>get_elev_raster</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.corr</code></td>
<td>
<p>TRUE or FALSE (default) is the user wants or does not want the least-cost corridor raster to be rendered in place of the input DTM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.pos</code></td>
<td>
<p>set the position of the legend in rendered plot; 'topright' by default (other options: "bottomright", "bottom", "bottomleft", "left", "topleft", "top", "topright", "right", "center").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.cex</code></td>
<td>
<p>set the size of the labels used in the legend displayed in the rendered plot (0.55 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.chart</code></td>
<td>
<p>TRUE or FALSE (default) is the user wants or does not want a bubble chart visualising LCPs length vs rank vs cost to be rendered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bubble.cex</code></td>
<td>
<p>set the size of the labels reporting the LCPs cost in the bubble chart (0.5 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transp</code></td>
<td>
<p>set the transparency of the slopeshade raster that is plotted over the least-cost corridor raster (0.5 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the output to be exported; if TRUE, the least-cost corridor and the DTM (if not provided by the user but acquired online)
are expoerted as a GeoTiff file, while the LCPs as a shapefile layer. All the exported files (excluding the DTM) will bear a suffix corresponding to the cost function selected by the user.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Internally, <code>moverank()</code> uses <code>movecost()</code> to generate the first (optimal) LCP. In a second iteration,
the optimal LCP is internally used as barrier (see <code>movecost</code>) when calculating the 2nd LCPs. Then, in a third iteration,
the two previously generated LCPs are used as barriers when working out the 3rd LCPs. The process repeats along the same lines until the
6th LCP is calculated. The 1st LCP is deemed to represent the optimal path (cost-wise) between the two locations, while the
2nd-to-5th LCPs are deemed to represent progressively sub-optimal paths.<br></p>
<p>It is worth noting that it may happen that some LCP will cross another one; this cannot be anticipated and is context dependent.
In those cases, the user may want to set the <code>move</code> parameter to 8 (see the section about
inhibition of movement in the help documentation of <code>movecost</code>). <br></p>
<p>The function provides the facility to render the LCPs either on the input DTM or on the least-cost corridor
between the two locations. The second option can be obtained by setting the <code>use.corr</code> parameter to <code>TRUE</code>.
Also, by setting the <code>add.chart</code> parameter to <code>TRUE</code>, the function renders a bubble chart that plots the LCPs length
against their rank, while the size of the bubbles is proportional to the cost. All the LCPs will be plotted.<br></p>
<p>By setting the <code>export</code> parameter to <code>TRUE</code>, the LCPs, the DTM (if acquired online), and the least-cost corridor
(if obtained by setting the <code>use.corr</code> parameter to <code>TRUE</code>), will be exported: the DTM and least-cost corridor as a raster layer,
the LCPs as shapefile layer. The LCPs and the least-cost corridor files will be given a suffix indicating which cost function has been used.<br></p>


<h3>Value</h3>

<p>The function returns a list storing the following components
</p>

<ul>
<li>
<p> dtm: Digital Terrain Model ('RasterLayer' class); returned only if not provided by the user and acquired online instead
</p>
</li>
<li>
<p> LCPs: least-cost paths ('SpatialLinesDataFrame' class) ranked from 1 (optimal) to 6 (sub-optimal LCPs)
</p>
</li>
<li>
<p> lc.corr: least-cost corridor between the origin and destination location ('RasterLayer' class); returned if the <code>use.corr</code> parameter is set to <code>TRUE</code>
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>movecost</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load a sample Digital Terrain Model
data(volc)


# load the sample destination locations on the above DTM
data(destin.loc)

# calculate the optimal and sub-optimals LCPs between two locations
#result &lt;- moverank(volc, destin.loc[1,], destin.loc[4,], move=8, funct="t")

</code></pre>


</div>