<div class="container">

<table style="width: 100%;"><tr>
<td>movealloc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R function for calculating slope-dependant walking-cost allocation to origins</h2>

<h3>Description</h3>

<p>The function provides the facility to carry out a cost allocation analysis. Given a number of origin locations,
a cost allocation raster is produced; each cell of the cost allocation raster is given an integer indicating to which origin
a cell is closer in terms of cost. Needless to say, the cost can be conceptualized in terms of either walking time or
energy expenditure, and is function of the terrain slope.<br>
Visit this <a href="https://drive.google.com/file/d/1gLDrkZFh1b_glzCEqKdkPrer72JJ9Ffa/view?usp=sharing">LINK</a> to access the package's vignette.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">movealloc(
  dtm = NULL,
  origin,
  studyplot = NULL,
  funct = "t",
  time = "h",
  move = 16,
  cogn.slp = FALSE,
  sl.crit = 10,
  W = 70,
  L = 0,
  N = 1,
  V = 1.2,
  z = 9,
  isolines = FALSE,
  breaks = NULL,
  cont.lab = TRUE,
  cex.breaks = 0.6,
  leg.alloc = FALSE,
  leg.pos = "topright",
  cex.leg = 0.75,
  transp = 0.5,
  export = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>Digital Terrain Model (RasterLayer class); if not provided, elevation data will be acquired online for the area enclosed by the 'studyplot' parameter (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>locations (two at least) in relation to which the cost allocation is carried out (SpatialPointsDataFrame class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyplot</code></td>
<td>
<p>polygon (SpatialPolygonDataFrame class) representing the study area for which online elevation data are acquired (see <code>movecost</code>); NULL is default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>funct</code></td>
<td>
<p>cost function to be used (for details on each of the following, see <code>movecost</code>):<br></p>
<p><strong>-functions expressing cost as walking time-</strong><br><strong>t</strong> (default) uses the on-path Tobler's hiking function;<br><strong>tofp</strong> uses the off-path Tobler's hiking function;<br><strong>mp</strong> uses the Marquez-Perez et al.'s modified Tobler's function;<br><strong>icmonp</strong> uses the Irmischer-Clarke's hiking function (male, on-path);<br><strong>icmoffp</strong> uses the Irmischer-Clarke's hiking function (male, off-path);<br><strong>icfonp</strong> uses the Irmischer-Clarke's hiking function (female, on-path);<br><strong>icfoffp</strong> uses the Irmischer-Clarke's hiking function (female, off-path);<br><strong>ug</strong> uses the Uriarte Gonzalez's walking-time cost function;<br><strong>ma</strong> uses the Marin Arroyo's walking-time cost function;<br><strong>alb</strong> uses the Alberti's Tobler hiking function modified for pastoral foraging excursions;<br><strong>gkrs</strong> uses the Garmy, Kaddouri, Rozenblat, and Schneider's hiking function;<br><strong>r</strong> uses the Rees' hiking function;<br><strong>ks</strong> uses the Kondo-Seino's hiking function;<br><strong>trp</strong> uses the Tripcevich's hiking function;<br></p>
<p><strong>-functions for wheeled-vehicles-</strong><br><strong>wcs</strong> uses the wheeled-vehicle critical slope cost function;<br></p>
<p><strong>-functions expressing abstract cost-</strong><br><strong>ree</strong> uses the relative energetic expenditure cost function;<br><strong>b</strong> uses the Bellavia's cost function;<br><strong>e</strong> uses the Eastman's cost function;<br></p>
<p><strong>-functions expressing cost as metabolic energy expenditure-</strong><br><strong>p</strong> uses the Pandolf et al.'s metabolic energy expenditure cost function;<br><strong>pcf</strong> uses the Pandolf et al.'s cost function with correction factor for downhill movements;<br><strong>m</strong> uses the Minetti et al.'s metabolic energy expenditure cost function;<br><strong>hrz</strong> uses the Herzog's metabolic energy expenditure cost function;<br><strong>vl</strong> uses the Van Leusen's metabolic energy expenditure cost function;<br><strong>ls</strong> uses the Llobera-Sluckin's metabolic energy expenditure cost function;<br><strong>a</strong> uses the Ardigo et al.'s metabolic energy expenditure cost function;<br><strong>h</strong> uses the Hare's metabolic energy expenditure cost function (for all the mentioned cost functions, see <code>movecost</code>).<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>time-unit expressed by the isoline(s) if Tobler's and other time-related cost functions are used; h' for hour, 'm' for minutes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>move</code></td>
<td>
<p>number of directions in which cells are connected: 4 (rook's case), 8 (queen's case), 16 (knight and one-cell queen moves; default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cogn.slp</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the 'cognitive slope' to be used in place of the real slope (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl.crit</code></td>
<td>
<p>critical slope (in percent), typically in the range 8-16 (10 by default) (used by the wheeled-vehicle cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>walker's body weight (in Kg; 70 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>carried load weight (in Kg; 0 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>coefficient representing ease of movement (1 by default) (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>speed in m/s (1.2 by default) (used by the Pandolf et al.'s, Pandolf et al.s with correction factor, Van Leusen's, and Ardigo et al.'s cost function; if set to 0, it is internally worked out on the basis of Tobler on-path hiking function (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>zoom level for the elevation data downloaded from online sources (from 0 to 15; 9 by default) (see <code>movecost</code> and <code>get_elev_raster</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isolines</code></td>
<td>
<p>TRUE or FALSE (default) is the user wants or does not want cost isolines/contours around the origins to be calculated and plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>contours' (i.e., isolines') interval; if no value is supplied, the interval is set by default to 1/10 of the range of values of the cost surface accumulated around the origins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cont.lab</code></td>
<td>
<p>if set to TRUE (default) display the labels of the cost contours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.breaks</code></td>
<td>
<p>set the size of the labels attached to the cost contours (0.6 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.alloc</code></td>
<td>
<p>if set to TRUE, display the legend in the plotted cost allocation raster; FALSE by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.pos</code></td>
<td>
<p>set the position of the legend in the plotted cost allocation raster; 'topright' by default (other options: "bottomright", "bottom", "bottomleft", "left", "topleft", "top", "topright", "right", "center").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.leg</code></td>
<td>
<p>set the size of the labels used in the legend displayed in the plotted allocation raster (0.75 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transp</code></td>
<td>
<p>set the transparency of the slopeshade raster that is plotted over the cost allocation raster (0.5 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the output to be exported; if TRUE, the isolines (i.e. the contours) and the allocation boundaries will be exported as a shapefile;
the cost allocation raster will be exported as 'GeoTiff'; the DTM is exported only if it was not provided by the user and downloaded by the function from online sources; all the exported files (excluding the DTM)
will bear a suffix corresponding to the cost function selected by the user.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function requires an input DTM ('RasterLayer' class) and a dataset ('SpatialPointsDataFrame' class) containing the
origin locations. If a DTM is not provided, <code>movealloc()</code> will download elevation data from online sources (see <code>movecost</code> for more details).
Under the hood, <code>movealloc()</code> relies on the <code>movecost()</code> function and implements the same cost functions:
see the help documentation of <code>movecost()</code> for further information.<br></p>
<p>Internally, what <code>movealloc()</code> does is producing an accumulated cost surface around each individual origin location; those
accumulated cost surfaces are then stacked together, and then the function looks at each pixel in the stack of surfaces and
returns 1 if the first stacked surface has the smallest pixel value, or 2 if the second stacked surface has the smallest pixel value, and so on for bigger stacks.<br></p>
<p><code>movealloc()</code> produces a plot featuring a slopeshade image that is overlaid by the cost allocation raster and by a polygon layer
where each polygon represents the limits of each allocation zone. A legend can be optionally added to the plot via the <code>leg.alloc</code> parameter (FALSE by default).
Isolines (i.e., contour lines) around each origin location can be optionally plotted via the 'isolines' parameter (FALSE by default).<br></p>
<p>The DTM, the cost allocation raster, the cost allocation polygons, and the isolines (if requested by the user by setting the  <code>isolines</code> parameter to TRUE), can
be exported by setting the 'export' parameter to TRUE. All the exported files (excluding the DTM) will bear a suffix corresponding to the cost function selected by the user.
</p>


<h3>Value</h3>

<p>The function returns a list storing the following components
</p>

<ul>
<li>
<p> dtm: Digital Terrain Model ('RasterLayer' class)
</p>
</li>
<li>
<p> cost.allocation.raster: raster of the cost allocation ('RasterLayer' class)
</p>
</li>
<li>
<p> isolines: contour lines representing the accumulated cost around the origins ('SpatialLinesDataFrame' class); returned if the 'isolines' parameter is set to TRUE
</p>
</li>
<li>
<p> alloc.boundaries: polygons representing the allocation zones ('SpatialPolygonsDataFrame' class)
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>movecost</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load a sample Digital Terrain Model
data(volc)


# load the sample locations on the above DTM
data(destin.loc)


#carry out a cost allocation analysis using the Tobler's off-path hiking function,
#setting the time to minutes and the isolines (i.e., contours) interval to 1 minute;
#only 3 locations are used

#result &lt;- movealloc(dtm=volc, origin=destin.loc[c(3,7,9),], funct="tofp", time="m",
#breaks=1, isolines=TRUE)


#same as above, using all the locations and the Kondo-Seino's cost function

#result &lt;- movealloc(dtm=volc, origin=destin.loc, funct="ks", time="m",
#breaks=1, isolines=TRUE)


</code></pre>


</div>