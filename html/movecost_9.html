<div class="container">

<table style="width: 100%;"><tr>
<td>movecomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R function for comparing least-cost paths generated using different cost functions</h2>

<h3>Description</h3>

<p>The function provides the facility to calculate LCPs using different cost functions and to plot them in the same visual output to allow
comparability. See, for instance, fig. 14.2 in Parcero-Oubina C. et al, Footprints and Cartwheels on a Pixel Road: On the Applicability of GIS for
the Modelling of Ancient (Roman) Routes (2019). In Verhagen P., Joyce J., Groenhuijzen M.R. (eds), Finding the
Limits of the Limes. Modelling Demography, Economy and Transport on the Edge of the Roman Empire, Springer,  291-311.<br>
Visit this <a href="https://drive.google.com/file/d/1gLDrkZFh1b_glzCEqKdkPrer72JJ9Ffa/view?usp=sharing">LINK</a> to access the package's vignette.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">movecomp(
  dtm = NULL,
  origin,
  destin,
  studyplot = NULL,
  barrier = NULL,
  plot.barrier = FALSE,
  irregular.dtm = FALSE,
  choice,
  time = "h",
  move = 16,
  field = 0,
  cogn.slp = FALSE,
  sl.crit = 10,
  W = 70,
  L = 0,
  N = 1,
  V = 1.2,
  z = 9,
  return.base = FALSE,
  leg.pos = "topright",
  leg.cex = 0.75,
  transp = 0.5,
  add.chart = FALSE,
  oneplot = TRUE,
  export = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>Digital Terrain Model (RasterLayer class); if not provided, elevation data will be acquired online for the area enclosed by the 'studyplot' parameter (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>location from which least-cost path(s) is calculated (SpatialPointsDataFrame class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destin</code></td>
<td>
<p>location(s) to which least-cost path(s) is calculated (SpatialPointsDataFrame class).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyplot</code></td>
<td>
<p>polygon (SpatialPolygonDataFrame class) representing the study area for which online elevation data are acquired (see <code>movecost</code>); NULL is default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barrier</code></td>
<td>
<p>area where the movement is inhibited (SpatialLineDataFrame or SpatialPolygonDataFrame class) (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.barrier</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the barrier to be plotted (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>irregular.dtm</code></td>
<td>
<p>TRUE or FALSE (default) if the input DTM features irregular margins (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>choice</code></td>
<td>
<p>character vector indicating the cost functions to be compared (for details on each of the following, see <code>movecost</code>):<br></p>
<p><strong>-functions expressing cost as walking time-</strong><br><strong>t</strong> (default) uses the on-path Tobler's hiking function;<br><strong>tofp</strong> uses the off-path Tobler's hiking function;<br><strong>mp</strong> uses the Marquez-Perez et al.'s modified Tobler's function;<br><strong>icmonp</strong> uses the Irmischer-Clarke's hiking function (male, on-path);<br><strong>icmoffp</strong> uses the Irmischer-Clarke's hiking function (male, off-path);<br><strong>icfonp</strong> uses the Irmischer-Clarke's hiking function (female, on-path);<br><strong>icfoffp</strong> uses the Irmischer-Clarke's hiking function (female, off-path);<br><strong>ug</strong> uses the Uriarte Gonzalez's walking-time cost function;<br><strong>ma</strong> uses the Marin Arroyo's walking-time cost function;<br><strong>alb</strong> uses the Alberti's Tobler hiking function modified for pastoral foraging excursions;<br><strong>gkrs</strong> uses the Garmy, Kaddouri, Rozenblat, and Schneider's hiking function;<br><strong>r</strong> uses the Rees' hiking function;<br><strong>ks</strong> uses the Kondo-Seino's hiking function;<br><strong>trp</strong> uses the Tripcevich's hiking function;<br></p>
<p><strong>-functions for wheeled-vehicles-</strong><br><strong>wcs</strong> uses the wheeled-vehicle critical slope cost function;<br></p>
<p><strong>-functions expressing abstract cost-</strong><br><strong>ree</strong> uses the relative energetic expenditure cost function;<br><strong>b</strong> uses the Bellavia's cost function;<br><strong>e</strong> uses the Eastman's cost function;<br></p>
<p><strong>-functions expressing cost as metabolic energy expenditure-</strong><br><strong>p</strong> uses the Pandolf et al.'s metabolic energy expenditure cost function;<br><strong>pcf</strong> uses the Pandolf et al.'s cost function with correction factor for downhill movements;<br><strong>m</strong> uses the Minetti et al.'s metabolic energy expenditure cost function;<br><strong>hrz</strong> uses the Herzog's metabolic energy expenditure cost function;<br><strong>vl</strong> uses the Van Leusen's metabolic energy expenditure cost function;<br><strong>ls</strong> uses the Llobera-Sluckin's metabolic energy expenditure cost function;<br><strong>a</strong> uses the Ardigo et al.'s metabolic energy expenditure cost function;<br><strong>h</strong> uses the Hare's metabolic energy expenditure cost function (for all the mentioned cost functions, see <code>movecost</code>).<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>time-unit to be used if Tobler's and other time-related cost functions are used; h' for hour, 'm' for minutes;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>move</code></td>
<td>
<p>number of directions in which cells are connected: 4 (rook's case), 8 (queen's case), 16 (knight and one-cell queen moves; default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p>value assigned to the cells coinciding with the barrier (0 by default) (see <code>movecost</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cogn.slp</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the 'cognitive slope' to be used in place of the real slope (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl.crit</code></td>
<td>
<p>critical slope (in percent), typically in the range 8-16 (10 by default) (used by the wheeled-vehicle cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>walker's body weight (in Kg; 70 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>carried load weight (in Kg; 0 by default; used by the Pandolf's and Van Leusen's cost function; see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>coefficient representing ease of movement (1 by default) (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>speed in m/s (1.2 by default) (used by the Pandolf et al.'s, Pandolf et al.s with correction factor, Van Leusen's, and Ardigo et al.'s cost function; if set to 0, it is internally worked out on the basis of Tobler on-path hiking function (see <code>movecost</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>zoom level for the elevation data downloaded from online sources (from 0 to 15; 9 by default) (see <code>movecost</code> and <code>get_elev_raster</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.base</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the least-cost paths back to the origin to be calculated and plotted (as dashed lines).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.pos</code></td>
<td>
<p>set the position of the legend in the plotted cost allocation raster; 'topright' by default (other options: "bottomright", "bottom", "bottomleft", "left", "topleft", "top", "topright", "right", "center").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.cex</code></td>
<td>
<p>set the size of the labels used in the legend displayed in the rendered plot (0.75 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transp</code></td>
<td>
<p>set the transparency of the slopeshade raster that is plotted over the DTM (0.5 by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.chart</code></td>
<td>
<p>TRUE or FALSE (default) is the user wants or does not want boxplots visualising LCPs length/cost vs cost function to be rendered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oneplot</code></td>
<td>
<p>TRUE (default) or FALSE if the user wants or does not want the plots displayed in a single window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>
<p>TRUE or FALSE (default) if the user wants or does not want the LCPs to be exported as a shapefile; the DTM is exported only if it was not provided by the user
and downloaded by the function from online sources.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Like <code>movecost()</code>, the function just requires an input DTM ('RasterLayer' class), and an origin and destination dataset  ('SpatialPointsDataFrame' class).
The cost functions to be used have to be entered into 'movecomp()' via a character vector fed via the <code>choice</code> parameter (see the examples below).
If a DTM is not provided, <code>movecomp()</code> downloads elevation data from online sources for the area enclosed by the polygon fed via
the <code>studyplot</code> parameter (see <code>movecost</code> for more details). Under the hood, <code>movecomp()</code> relies on <code>movecost()</code> and implements the same cost functions:
see the help documentation of <code>movecost()</code> for further information.<br></p>
<p><code>movecomp()</code> produces a plot representing the input DTM overlaid by a slopeshade raster, whose transparency can be adjusted using
the 'transp' parameter. On the rendered plot, the LPCs ('SpatialLinesDataFrame' class) generated by the different input cost functions are given a different line type; a legend
indicates which line type corresponds to which cost function. LCPs back to the origin can be calculated (and plotted) setting the
parameter <code>return.base</code> to <code>TRUE</code>.<br></p>
<p>The function returns the LCPs and (if requested by the user) the LCPs back to the origin. If the DTM has been acquired online, it will be returned as well.
The LCPs (and the LCPs back to the origin) will store three variables: the length of each path, the cost of each path, and an abbreviation corresponding to the cost function used to
generate the LCPs. The mentioned data can be exported by setting the <code>export</code> parameter to <code>TRUE</code>.<br></p>
<p>If the users want to compare the distribution of the length of the LCPs generate by different cost functions,
it suffices to set the <code>add.chart</code> parameter to <code>TRUE</code>. Two charts featuring boxplots will be rendered:
one plotting the distribution of the LCPs length by cost function; one portaying the distribution of the cost by cost function.<br></p>
<p>The following example uses in-built datasets to compare the LCPs generated using two cost functions: the Tobler hiking function , the
wheeled vehicle cost function, and the Pantolf. et al's cost function with correction factor.
LCPs back to the origin location will be calculated as well. The origin and destination locations are close to Mt Etna (Sicily, Italy).
Note that elevation data are acquired online for the area enclosed by the polygon fed via the <code>studyplot</code> parameter:<br></p>
<p>result &lt;- movecomp(origin=Etna_start_location, destin=Etna_end_location, choice=c("t", "wcs", "pcf"), studyplot = Etna_boundary, return.base=TRUE)<br></p>


<h3>Value</h3>

<p>The function returns a list storing the following components
</p>

<ul>
<li>
<p> dtm: Digital Terrain Model ('RasterLayer' class); returned only if acquired online
</p>
</li>
<li>
<p> LCPs: estimated least-cost paths ('SpatialLinesDataFrame' class); three variables are stored: 'length', 'cost', and
'funct'.
</p>
</li>
<li>
<p> LCPs.back: estimated least-cost paths back to the origin ('SpatialLinesDataFrame' class); three variables are stored; see above.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>movecost</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load a sample Digital Terrain Model
data(volc)


# load the sample destination locations on the above DTM
data(destin.loc)


# compare the LCPs generated using different walking-time cost functions (time in minutes)

result &lt;- movecomp(volc, volc.loc, destin.loc, choice=c("t", "ug", "gkrs"), time="m", move=8)

# the distribution of the length and cost of the LCPs by cost function can be easily compared
# using the 'add.chart' parameter:
#result &lt;- movecomp(volc, volc.loc, destin.loc, choice=c("t", "ug", "gkrs"), time="m",
#move=8, add.chart=T)


</code></pre>


</div>