<div class="container">

<table style="width: 100%;"><tr>
<td>filter_insource_ions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Filter Insource ions</h2>

<h3>Description</h3>

<p><code>filter_insource_ions()</code> identifies and removes in-source ion clusters based
on a Pearson correlation threshold. Groups of co-eluting features with
identical retention time are identified and used to generate Pearson
correlation matrices. Clusters with self-similarity greater than the
user-defined <code>cluster_threshold</code> within these matrices are identified as
likely belonging to a single precursor ion and is associated insource ion.
Highly correlated ions are identified and removed.
</p>
<p><code>copy_object</code>: mpactr is built on an R6 class-system, meaning it operates on
reference semantics in which data is updated <em>in-place</em>. Compared to a
shallow copy, where only data pointers are copied, or a deep copy, where
the entire data object is copied in memory, any changes to the original
data object, regardless if they are assigned to a new object, result in
changes to the original data object. We recommend using the default
<code>copy_object = FALSE</code> as this makes for an extremely fast and
memory-efficient way to chain mpactr filters together; however, if you
would like to run the filters individually with traditional R style objects,
you can set <code>copy_object</code> to <code>TRUE</code> as shown in the filter examples.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filter_insource_ions(
  mpactr_object,
  cluster_threshold = 0.95,
  copy_object = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mpactr_object</code></td>
<td>
<p>An <code>mpactr_object</code>. See <code>import_data()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_threshold</code></td>
<td>
<p>Cluster threshold for ion deconvolution.
Default = 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copy_object</code></td>
<td>
<p>A <code>boolean</code> parameter that allows users to return
a copied object instead of modifying the object.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an <code>mpactr_object</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data &lt;- import_data(example("coculture_peak_table.csv"),
  example("metadata.csv"),
  format = "Progenesis"
)

data_filter &lt;- filter_insource_ions(data,
  cluster_threshold = 0.95
)

</code></pre>


</div>