<div class="container">

<table style="width: 100%;"><tr>
<td>link_db</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Link two sensors OR one sensor and an external data frame using an mpathsenser database</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>
</p>
<p>This function is specific to mpathsenser databases. It is a wrapper around <code>link()</code> but
extracts data in the database for you. It is now soft deprecated as I feel this function's use
is limited in comparison to <code>link()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">link_db(
  db,
  sensor_one,
  sensor_two = NULL,
  external = NULL,
  external_time = "time",
  offset_before = 0,
  offset_after = 0,
  add_before = FALSE,
  add_after = FALSE,
  participant_id = NULL,
  start_date = NULL,
  end_date = NULL,
  reverse = FALSE,
  ignore_large = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>A database connection to an m-Path Sense database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensor_one</code></td>
<td>
<p>The name of a primary sensor. See sensors for a list of
available sensors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensor_two</code></td>
<td>
<p>The name of a secondary sensor. See sensors for a list of
available sensors. Cannot be used together with <code>external</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>external</code></td>
<td>
<p>Optionally, specify an external data frame. Cannot be used at the same time as a
second sensor. This data frame must have a column called <code>time</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>external_time</code></td>
<td>
<p>The name of the column containing the timestamps in <code>external</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset_before</code></td>
<td>
<p>The time before each measurement in <code>x</code> that denotes the period in which <code>y</code>
is matched. Must be convertible to a period by <code>lubridate::as.period()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset_after</code></td>
<td>
<p>The time after each measurement in <code>x</code> that denotes the period in which <code>y</code>
is matched. Must be convertible to a period by <code>lubridate::as.period()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_before</code></td>
<td>
<p>Logical value. Do you want to add the last measurement before the start of each
interval?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_after</code></td>
<td>
<p>Logical value. Do you want to add the first measurement after the end of each
interval?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>participant_id</code></td>
<td>
<p>A character string identifying a single participant. Use
<code>get_participants</code> to retrieve all participants from the database.
Leave empty to get data for all participants.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Optional search window specifying date where to begin search. Must be
convertible to date using as.Date. Use first_date to find the
date of the first entry for a participant.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>Optional search window specifying date where to end search. Must be convertible
to date using as.Date. Use last_date to find the date of the
last entry for a participant.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>Switch <code>sensor_one</code> with either <code>sensor_two</code> or <code>external</code>? Particularly useful in
combination with <code>external</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_large</code></td>
<td>
<p>Safety override to prevent long wait times. Set to <code>TRUE</code> to do this function
on lots of data.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble with the data of <code>sensor_one</code> with a new column <code>data</code> with the matched data of
either <code>sensor_two</code> or <code>external</code> according to <code>offset_before</code> or <code>offset_after</code>. The other way
around when <code>reverse = TRUE</code>.
</p>


<h3>See Also</h3>

<p><code>link()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Open a database
db &lt;- open_db("path/to/db")

# Link two sensors
link_db(db, "accelerometer", "gyroscope", offset_before = 300, offset_after = 300)

# Link a sensor with an external data frame
link_db(db, "accelerometer",
  external = my_external_data,
  external_time = "time", offset_before = 300, offset_after = 300
)

## End(Not run)
</code></pre>


</div>