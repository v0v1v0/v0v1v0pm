<div class="container">

<table style="width: 100%;"><tr>
<td>compute_mpi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Multidimensional Poverty Index (MPI)</h2>

<h3>Description</h3>

<p>This function uses the Alkire-Foster (AF) counting method developed by Sabina Alkire and James Foster. It requires a deprivation profile created using the (<code>define_deprivation</code>) fuction containing all indicators defined in the specification files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_mpi(
  .data,
  .deprivation_profile,
  ...,
  .mpi_specs = getOption("mpi_specs"),
  .include_deprivation_matrix = TRUE,
  .generate_output = FALSE,
  .formatted_output = TRUE,
  .mpi_output_filename = NULL,
  .include_table_summary = TRUE,
  .include_specs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A tidy data frame where each observation is the unit of analysis defined in <code>define_mpi_specs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.deprivation_profile</code></td>
<td>
<p>list of deprivation profile created using <code>define_deprivation</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Grouping columns (supports tidyselect), e.g. area (country, urbanity, region, province), sex, ethnic group, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.mpi_specs</code></td>
<td>
<p>MPI specifications defined in <code>define_mpi_specs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.include_deprivation_matrix</code></td>
<td>
<p>Whether to include deprivation matrix in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.generate_output</code></td>
<td>
<p>Whether to generate an output (Excel file) as side effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.formatted_output</code></td>
<td>
<p>NOT YET IMPLEMENTED. Whether formatting is to be applied to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.mpi_output_filename</code></td>
<td>
<p>Output filename.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.include_table_summary</code></td>
<td>
<p>NOT YET IMPLEMENTED. Whether to include summary information in the generated output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.include_specs</code></td>
<td>
<p>NOT YET IMPLEMENTED. Whether to include MPI specification in the generated output.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns list of objects: <code>index</code> (the MPI), <code>contribution</code> (contribution by dimension), <code>headcount_ratio</code> (censored and uncensored), and <code>deprivation_matrix</code> (censored and uncensored). If <code>poverty_cutoffs</code> defined in <code>define_mpi_specs</code> contain more than one (1) value, <code>index</code> and <code>contribution</code> object will output each cutoff in a separate table.
</p>


<h3>References</h3>

<p><a href="https://ophi.org.uk/research/multidimensional-poverty/alkire-foster-method/">Alkire-Foster Method</a> <br><a href="https://ophi.org.uk/research/multidimensional-poverty/how-to-apply-alkire-foster/">How to Apply the Alkire-Foster Method</a>
</p>


<h3>See Also</h3>

<p>define_mpi_specs, define_deprivation, save_mpi
</p>


<h3>Examples</h3>

<pre><code class="language-R"># ----------------------------------
# Load MPI specs from the built-in specs file
specs_file &lt;- system.file("extdata", "global-mpi-specs.csv", package = "mpindex")
mpi_specs &lt;- define_mpi_specs(specs_file, .uid = 'uuid')

# ----------------------------------
# Create an empty list to store deprivation profile for each indicator
deprivation_profile &lt;- list()

deprivation_profile$nutrition &lt;- df_household_roster |&gt;
 define_deprivation(
   .indicator = nutrition,
   .cutoff = undernourished == 1 &amp; age &lt; 70,
   .collapse = TRUE
 )
deprivation_profile$child_mortality &lt;- df_household |&gt;
 define_deprivation(
   .indicator = child_mortality,
   .cutoff = with_child_died == 1
 )
deprivation_profile$year_schooling &lt;- df_household_roster |&gt;
 define_deprivation(
   .indicator = year_schooling,
   .cutoff = completed_6yrs_schooling == 2,
   .collapse = TRUE
 )
deprivation_profile$school_attendance &lt;- df_household_roster |&gt;
 define_deprivation(
   .indicator = school_attendance,
   .cutoff = attending_school == 2 &amp; age %in% c(5:24),
   .collapse = TRUE
 )
deprivation_profile$cooking_fuel &lt;- df_household |&gt;
 define_deprivation(
   .indicator = cooking_fuel,
   .cutoff = cooking_fuel %in% c(4:6, 9)
 )
deprivation_profile$sanitation &lt;- df_household |&gt;
 define_deprivation(
   .indicator = sanitation,
   .cutoff = toilet &gt; 1
 )
deprivation_profile$drinking_water &lt;- df_household |&gt;
 define_deprivation(
   .indicator = drinking_water,
   .cutoff = drinking_water == 2
 )
deprivation_profile$electricity &lt;- df_household |&gt;
 define_deprivation(
   .indicator = electricity,
   .cutoff = electricity == 2
 )
deprivation_profile$housing &lt;- df_household |&gt;
 define_deprivation(
   .indicator = housing,
   .cutoff = roof %in% c(5, 7, 9) | walls %in% c(5, 8, 9, 99) == 2 | floor %in% c(5, 6, 9)
 )
deprivation_profile$assets &lt;- df_household |&gt;
 dplyr::mutate_at(dplyr::vars(dplyr::starts_with('asset_')), ~ dplyr::if_else(. &gt; 0, 1L, 0L)) |&gt;
 dplyr::mutate(
   asset_phone = dplyr::if_else(
     (asset_telephone + asset_mobile_phone) &gt; 0,
     1L,
     0L
   )
 ) |&gt;
 dplyr::mutate(
   with_hh_conveniences = (
     asset_tv + asset_phone + asset_computer +
       asset_animal_cart + asset_bicycle +
       asset_motorcycle + asset_refrigerator) &gt; 1,
   with_mobility_assets = (asset_car + asset_truck) &gt; 0
 ) |&gt;
 define_deprivation(
   .indicator = assets,
   .cutoff = !(with_hh_conveniences &amp; with_mobility_assets)
 )

# ----------------------------------
# Compute the MPI
mpi_result &lt;- df_household |&gt;
  compute_mpi(deprivation_profile)

# ----------------------------------
# You may also save your output into an Excel file
## Not run: 
save_mpi(mpi_result, .filename = 'MPI Sample Output')

## End(Not run)
</code></pre>


</div>