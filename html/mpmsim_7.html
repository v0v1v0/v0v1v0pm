<div class="container">

<table style="width: 100%;"><tr>
<td>generate_mpm_set</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate lists of Lefkovitch matrix population models (MPMs) based on life
history archetypes</h2>

<h3>Description</h3>

<p>This function is deprecated. Use <code>rand_lefko_set</code> instead.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_mpm_set(
  n = 10,
  n_stages = 3,
  archetype = 1,
  fecundity = 1.5,
  split = TRUE,
  by_type = TRUE,
  as_compadre = TRUE,
  max_surv = 0.99,
  constraint = NULL,
  attempts = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>The number of MPMs to generate. Default is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_stages</code></td>
<td>
<p>The number of stages for the MPMs. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>archetype</code></td>
<td>
<p>The archetype of the MPMs. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fecundity</code></td>
<td>
<p>A vector of fecundities for the MPMs. Default is 1.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split</code></td>
<td>
<p>A logical indicating whether to split into submatrices. Default
is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_type</code></td>
<td>
<p>A logical indicating whether the matrices should be returned
in a list by type (A, U, F, C). If split is <code>FALSE</code>, then <code>by_type</code> must
is coerced to be <code>FALSE</code>. Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_compadre</code></td>
<td>
<p>A logical indicating whether the matrices should be
returned as a <code>CompadreDB</code> object. Default is <code>TRUE</code>. If <code>FALSE</code>, the
function returns a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_surv</code></td>
<td>
<p>The maximum acceptable survival value, calculated across all
transitions from a stage. Defaults to 0.99. This is only used if <code>split = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint</code></td>
<td>
<p>An optional data frame with 4 columns named <code>fun</code>, <code>arg</code>,
<code>lower</code> and <code>upper</code>. These columns specify (1) a function that outputs a
metric derived from an A matrix and (2) an argument for the function (<code>NA</code>,
if no argument supplied) (3) the lower acceptable bound for the metric and
(4) upper acceptable bound for the metric. This could be used to specify</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attempts</code></td>
<td>
<p>An integer indicating the number of attempts To be made when
simulating matrix model. The default is 1000. If it takes more than 1000
attempts to make a matrix that satisfies the conditions set by the other
arguments, then a warning is produced.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function generates a list of <code>n</code> MPMs according to the specified
criteria. Criteria include the <code>archetype</code>, and the acceptable constraining
criteria, which could include lambda, generation time or any other metric
derived from an A matrix.
The function attempts to find matrices that fulfil the criteria, discarding
unacceptable matrices. By default, if it takes more than 1000 attempts to
find a suitable matrix model, then an error is produced. However, the number
of attempts can be altered with the <code>attempts</code> parameter.
</p>


<h3>Value</h3>

<p>A list of MPMs that meet the specified criteria.
</p>


<h3>Author(s)</h3>

<p>Owen Jones <a href="mailto:jones@biology.sdu.dk">jones@biology.sdu.dk</a>
</p>


<h3>See Also</h3>

<p><code>random_mpm()</code> which this function is essentially a wrapper for.
</p>
<p>Other Lefkovitch matrices: 
<code>rand_lefko_mpm()</code>,
<code>rand_lefko_set()</code>,
<code>random_mpm()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(42) # set seed for repeatability

# Basic operation, without splitting matrices and with no constraints
generate_mpm_set(
  n = 10, n_stages = 5, fecundity = c(0, 0, 4, 8, 10),
  archetype = 4, split = FALSE, by_type = FALSE, as_compadre = FALSE
)

# Constrain outputs to A matrices with lambda between 0.9 and 1.1
library(popbio)
constrain_df &lt;- data.frame(
  fun = "lambda", arg = NA, lower = 0.9, upper =
    1.1
)
generate_mpm_set(
  n = 10, n_stages = 5, fecundity = c(0, 0, 4, 8, 10),
  archetype = 4, constraint = constrain_df, as_compadre = FALSE
)

# As above, but using popdemo::eigs function instead of popbio::lambda
# to illustrate use of argument
library(popdemo)
constrain_df &lt;- data.frame(
  fun = "eigs", arg = "lambda", lower = 0.9, upper =
    1.1
)
generate_mpm_set(
  n = 10, n_stages = 5, fecundity = c(0, 0, 4, 8, 10),
  archetype = 4, constraint = constrain_df, as_compadre = FALSE
)

# Multiple constraints
# Constrain outputs to A matrices with lambda between 0.9 and 1.1, generation
# time between 3 and 5 and damping ratio between 1 and 7.
library(popbio)
constrain_df &lt;- data.frame(
  fun = c("lambda", "generation.time", "damping.ratio"),
  arg = c(NA, NA, NA),
  lower = c(0.9, 3.0, 1.0),
  upper = c(1.1, 5.0, 7.0)
)
generate_mpm_set(
  n = 10, n_stages = 5, fecundity = c(0, 0, 4, 8, 10),
  archetype = 4, constraint = constrain_df, as_compadre = FALSE
)

</code></pre>


</div>