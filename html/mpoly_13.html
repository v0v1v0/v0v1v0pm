<div class="container">

<table style="width: 100%;"><tr>
<td>as.mpoly</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert an object to an mpoly</h2>

<h3>Description</h3>

<p>mpoly is the most basic function used to create objects of class mpoly.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.mpoly(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to pass to methods</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the object formated as a mpoly object.
</p>


<h3>Author(s)</h3>

<p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a>
</p>


<h3>See Also</h3>

<p><code>mp()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(ggplot2); theme_set(theme_classic())
library(dplyr)

n &lt;- 101
s &lt;- seq(-5, 5, length.out = n)



# one dimensional case

df &lt;- data.frame(x = seq(-5, 5, length.out = n)) %&gt;%
  mutate(y = -x^2 + 2*x - 3 + rnorm(n, 0, 2))

(mod &lt;- lm(y ~ x + I(x^2), data = df))
(p &lt;- as.mpoly(mod))
qplot(x, y, data = df) +
  stat_function(fun = as.function(p), colour = "red", size = 1)

(mod &lt;- lm(y ~ poly(x, 2, raw = TRUE), data = df))
(p &lt;- as.mpoly(mod))
qplot(x, y, data = df) +
  stat_function(fun = as.function(p), colour = "red", size = 1)

(mod &lt;- lm(y ~ poly(x, 1, raw = TRUE), data = df))
(p &lt;- as.mpoly(mod))
qplot(x, y, data = df) +
  stat_function(fun = as.function(p), colour = "red", size = 1)



# two dimensional case with ggplot2

df &lt;- expand.grid(x = s, y = s) %&gt;%
  mutate(z = x^2 - y^2 + 3*x*y + rnorm(n^2, 0, 3))
qplot(x, y, data = df, geom = "raster", fill = z)

(mod &lt;- lm(z ~ x + y + I(x^2) + I(y^2) + I(x*y), data = df))
(mod &lt;- lm(z ~ poly(x, y, degree = 2, raw = TRUE), data = df))
(p &lt;- as.mpoly(mod))
df$fit &lt;- apply(df[,c("x","y")], 1, as.function(p))

qplot(x, y, data = df, geom = "raster", fill = fit)

qplot(x, y, data = df, geom = "raster", fill = z - fit) # residuals







</code></pre>


</div>