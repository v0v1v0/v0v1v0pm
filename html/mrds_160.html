<div class="container">

<table style="width: 100%;"><tr>
<td>process.data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process data for fitting distance sampling detection function</h2>

<h3>Description</h3>

<p>Sets up dataframe and does some basic error checking. Adds needed fields to
dataframe and to <code>meta.data</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">process.data(data, meta.data = list(), check = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataframe object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta.data</code></td>
<td>
<p>meta.data options; see <code>ddf</code> for a description</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>if <code>TRUE</code> check data for errors in the mrds structure; for
<code>method="ds" check=FALSE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function does a number of error checking tasks, creating fields and
adding to <code>meta.data</code> including:
</p>
<p>1) If <code>check=TRUE</code>, check to make sure the record structure is okay for
mrds data. The number of primary records (observer=1) must equal the number
of secondary records (observer=2). Also, a field in the dataframe is created
<code>timesseen</code> which counts the number of times an object was detected
0,1,2; if <code>timesseen=0</code> then the record is tossed from the analysis.
Also if there are differences in the data (distance, size, covariates) for
observer 1 and 2 a warning is issued that the analysis may fail.  The code
assumes these values are the same for both observers.
</p>
<p>2) Based on the presence of fields <code>distbegin</code> and <code>distend</code>, a
determination is made of whether the data analysis should be based on binned
distances and a field <code>binned</code> is created, which is <code>TRUE</code> if the
distance for the observation is binned.  By assigning for each observation
this allows an analysis of a mixture of binned and unbinned distances.
</p>
<p>4) Data are restricted such that distances are not greater than <code>width</code>
and not less than <code>left</code> if those values are specified in
<code>meta.data</code>.  If they are not specified then <code>left</code> defaults to 0
and <code>width</code> defaults to the largest distance measurement.
</p>
<p>5) Determine if an integration range (<code>int.begin</code> and <code>int.end</code>
has been specified for the observations.  If it has, add the structure to
<code>meta.data</code>.  The integration range is typically used for aerial
surveys in which the altitude varies such that the strip width (left to
width) changes with a change in altitude.
</p>
<p>6) Fields defined as factors are cleaned up such that any unused levels are
eliminated.
</p>
<p>7) If the restrictions placed on the data, eliminated all of the data, the
function stops with an error message
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xmat</code></td>
<td>
<p>processed <code>data.frame</code> with added fields</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta.data</code></td>
<td>
<p>meta.data list</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Jeff Laake
</p>


</div>