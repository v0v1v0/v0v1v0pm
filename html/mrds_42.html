<div class="container">

<table style="width: 100%;"><tr>
<td>create.varstructure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates structures needed to compute abundance and variance</h2>

<h3>Description</h3>

<p>Creates samples and obs dataframes used to compute abundance and its
variance based on a structure of geographic regions and samples within each
region.  The intent is to generalize this routine to work with other
sampling structures.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create.varstructure(model, region, sample, obs, dht.se)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>fitted ddf object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region</code></td>
<td>
<p>region table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>sample table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>table of object #'s and links to sample and region table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dht.se</code></td>
<td>
<p>is uncertainty going to be calculated later?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function performs the following tasks: 1)tests to make sure that region
labels are unique, 2) merges sample and region tables into a samples table
and issue a warning if not all samples were used, 3) if some regions have no
samples or if some values of Area were not valid areas given then issue
error and stop, then an error is given and the code stops, 4) creates a
unique region/sample label in samples and in obs, 5) merges observations
with sample and issues a warning if not all observations were used, 6) sorts
regions by its label and merges the values with the predictions from the
fitted model based on the object number and limits it to the data that is
appropriate for the fitted detection function.
</p>


<h3>Value</h3>

<p>List with 2 elements: </p>
<table>
<tr style="vertical-align: top;">
<td><code>samples </code></td>
<td>
<p>merged dataframe containing
region and sample info - one record per sample</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>merged
observation data and links to region and samples</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Internal function called by <code>dht</code>
</p>


<h3>Author(s)</h3>

<p>Jeff Laake
</p>


</div>