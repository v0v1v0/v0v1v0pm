<div class="container">

<table style="width: 100%;"><tr>
<td>new_stream</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a stream of outputs and inputs</h2>

<h3>Description</h3>

<p>By stream we mean a list that pre-specifies the output file names,
replicate numbers and possibly input objects for a simulation. Passing
<code>locker</code> initiates a call to <code>setup_locker()</code>, which sets up or resets
the output directories.
</p>
<p>For the <code>data.frame</code> method, the data are chunked into a list by columns
listed in <code>cols</code>. Ideally, this is a singlel column that operates as
a unique <code>ID</code> across the data set and is used by <code>chunk_by_id()</code> to
form the chunks. Alternatively, <code>cols</code> can be multiple column names which
are pasted together to form a unique <code>ID</code> that is used for splitting
via <code>chunk_by_cols()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">new_stream(x, ...)

## S3 method for class 'list'
new_stream(x, locker = NULL, format = NULL, ...)

## S3 method for class 'data.frame'
new_stream(x, nchunk, cols = "ID", locker = NULL, format = NULL, ...)

## S3 method for class 'numeric'
new_stream(x, ...)

## S3 method for class 'character'
new_stream(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A list or vector to template the stream; for the <code>numeric</code> method,
passing a single number will fill <code>x</code> with a sequence of that length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>file_set()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locker</code></td>
<td>
<p>Passed to <code>setup_locker()</code> as <code>dir</code>; important to note that the
directory will be unlinked if it exists and is an established locker
directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>Passed to <code>format_stream()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nchunk</code></td>
<td>
<p>The number of chunks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>The name(s) of the column(s) specifying unique IDs to use to
split the <code>data.frame</code> into chunks; this could be a unique <code>ID</code> or a
combination of columns that when pasted together form a unique ID.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the following elements:
</p>

<ul>
<li> <p><code>i</code> the position number
</p>
</li>
<li> <p><code>file</code> the output file name
</p>
</li>
<li> <p><code>x</code> the input object.
</p>
</li>
</ul>
<p>The list has class <code>file_stream</code> as well as <code>locker_stream</code> (if <code>locker</code> was
passed) and a class attribute for the output if <code>format</code> was passed.
</p>


<h3>See Also</h3>

<p><code>format_stream()</code>, <code>locate_stream()</code>, <code>ext_stream()</code>, <code>file_stream()</code>,
<code>file_set()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- new_stream(3)
x[[1]]

new_stream(2, locker = file.path(tempdir(), "foo"))

df &lt;- data.frame(ID = c(1,2,3,4))
x &lt;- new_stream(df, nchunk = 2)
x[[2]]

format_is_set(x[[2]])

x &lt;- new_stream(3, format = "fst")
format_is_set(x[[2]])

</code></pre>


</div>