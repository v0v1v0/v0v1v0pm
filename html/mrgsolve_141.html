<div class="container">

<table style="width: 100%;"><tr>
<td>idata_set</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select and modify a idata set for simulation</h2>

<h3>Description</h3>

<p>The individual data set (<code>idata_set</code>) is a data frame with one 
row for each individual in a population, specifying parameters and 
other individual-level data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">idata_set(x, data, ...)

## S4 method for signature 'mrgmod,data.frame'
idata_set(
  x,
  data,
  .subset = TRUE,
  .select = TRUE,
  object = NULL,
  need = NULL,
  ...
)

## S4 method for signature 'mrgmod,ANY'
idata_set(x, data, ...)

## S4 method for signature 'mrgmod,missing'
idata_set(x, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data set that can be coerced to data.frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed along</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.subset</code></td>
<td>
<p>an unquoted expression passed to 
<code>dplyr::filter</code>; retain only certain rows in the data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.select</code></td>
<td>
<p>passed to <code>dplyr::select</code>; retain only certain 
columns in the data set; this should be the result of a call to 
<code>dplyr::vars()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>character name of an object existing in <code>$ENV</code> 
to use for the data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>need</code></td>
<td>
<p>passed to <code>inventory</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>idata_set</code> is a data.frame that specifies individual-level 
data for the problem.  An  <code>ID</code> column is required and there 
can be no more than one row in the data frame for each individual.  
</p>
<p>In most cases, the columns in the <code>idata_set</code> have the same names
as parameters in the <code>param</code> list.  When this is the case, 
the parameter set is updated as the simulation proceeds once at the 
start of each individual.  The 'idata_set' can also be used to 
set initial conditions for each individual: for a compartment called
<code>CMT</code>, make a column in <code>idata_set</code> called <code>CMT_0</code> and 
make the value the desired initial value for that compartment.  Note that 
this initial condition will be over-ridden if you also set the <code>CMT_0</code> 
in <code>$MAIN</code>.
</p>
<p>The most common application of <code>idata_set</code> is to specify a population
or batch of simulations to do.  We commonly use <code>idata_set</code> with an 
event object (see <code>ev</code>).  In that case, the event gets applied
to each individual in the <code>idata_set</code>.  
</p>
<p>It is also possible to provide both a <code>data_set</code> and a <code>idata_set</code>.  
In this case, the <code>idata_set</code> is used as a parameter lookup for <code>IDs</code>
found in the <code>data_set</code>.  Remember in this case, it is the <code>data_set</code>
(not the <code>idata_set</code>) that determines the number of individuals in the
simulation.
</p>
<p>An error will be generated if any parameter columns in the 
input idata set contain <code>NA</code>.
</p>


<h3>See Also</h3>

<p><code>data_set</code>, <code>ev</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">mod &lt;- mrgsolve::house()

data(exidata)

exidata

mod %&gt;% 
  idata_set(exidata, ID &lt;= 2) %&gt;% 
  ev(amt = 100) %&gt;%
  mrgsim() %&gt;% 
  plot()

mod %&gt;% 
  idata_set(exidata) %&gt;% 
  ev(amt = 100) %&gt;%
  mrgsim()

mod %&gt;% ev(amt = 100) %&gt;% mrgsim(idata=exidata) 

</code></pre>


</div>