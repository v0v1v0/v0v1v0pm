<div class="container">

<table style="width: 100%;"><tr>
<td>realize_addl</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make addl doses explicit in an event object or data set</h2>

<h3>Description</h3>

<p>When doses are scheduled with <code>ii</code> and <code>addl</code>, the object is expanded to
include one record for every dose. In the result, no record with have
<code>ii</code> or <code>addl</code> set to non-zero value.
</p>


<h3>Usage</h3>

<pre><code class="language-R">realize_addl(x, ...)

## S3 method for class 'data.frame'
realize_addl(
  x,
  warn = FALSE,
  mark_new = FALSE,
  fill = c("inherit", "na", "locf"),
  ...
)

## S3 method for class 'ev'
realize_addl(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>data_set</code> data frame or an event object (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn</code></td>
<td>
<p>if <code>TRUE</code> a warning is issued if no <code>ADDL</code> or
<code>addl</code> column is found</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mark_new</code></td>
<td>
<p>if <code>TRUE</code>, a flag is added to indicate new columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>specifies how to handle non-dose related data columns
in new data set records; this option is critical when handling
data sets with time-varying, non-dose-related data items; see details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If no <code>addl</code> column is found the data frame is returned and
a warning is issued if <code>warn</code> is true. If <code>ii</code>,
<code>time</code>, or <code>evid</code> are missing, an error is generated.
</p>
<p>If a grouped data.frame (via <code>dplyr::group_by()</code>) is passed, it will be
ungrouped.
</p>
<p>Use caution when passing in data that has non-dose-related data
columns that vary within a subject and pay special attention
to the <code>fill</code> argument. By definition, <code>realize_addl</code>
will add new rows to your data frame and it is not obvious
how the non-dose-related data should be handled in these new
rows.  When <code>inherit</code> is chosen, the new records have
non-dose-related data that is identical to the originating
dose record. This should be fine when these data items are not
varying with time, but will present a problem when the data
are varying with time.  When <code>locf</code> is chosen,
the missing data are filled in with <code>NA</code> and an
last observation carry forward operation is applied to
<strong>every</strong> column in the data set.  This may not be what
you want if you already had missing values in the input
data set and want to preserve that missingness. When <code>na</code>
is chosen, the missing data are filled in with <code>NA</code> and
no <code>locf</code> operation is applied.  But note that these
missing values may be problematic for a mrgsolve simulation
run. If you have any time-varying columns or missing data
in your data set, be sure to check that the output from
this function is what you were expecting.
</p>


<h3>Value</h3>

<p>A <code>data_set</code> data.frame or event object, consistent with the type of <code>x</code>.
The <code>ii</code> and <code>addl</code> columns will all be set to zero. The result is always
ungrouped.
</p>


<h3>Examples</h3>

<pre><code class="language-R">e &lt;- ev(amt = 100, ii = 12, addl = 3)

realize_addl(e)

a &lt;- ev(amt = 100, ii = 12, addl = 2, WT = 69)
b &lt;- ev(amt = 200, ii = 24, addl = 2, WT = 70)
c &lt;- ev(amt =  50, ii =  6, addl = 2, WT = 71) 

e &lt;- ev_seq(a,b,c)
realize_addl(e, mark_new = TRUE)

</code></pre>


</div>