<div class="container">

<table style="width: 100%;"><tr>
<td>data_set</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select and modify a data set for simulation</h2>

<h3>Description</h3>

<p>The input data set (<code>data_set</code>) is a data frame that specifies
observations, model events, and / or parameter values for a population
of individuals.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data_set(x, data, ...)

## S4 method for signature 'mrgmod,data.frame'
data_set(
  x,
  data,
  .subset = TRUE,
  .select = TRUE,
  object = NULL,
  need = NULL,
  ...
)

## S4 method for signature 'mrgmod,ANY'
data_set(x, data, ...)

## S4 method for signature 'mrgmod,ev'
data_set(x, data, ...)

## S4 method for signature 'mrgmod,missing'
data_set(x, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed along</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.subset</code></td>
<td>
<p>an unquoted expression passed to 
<code>dplyr::filter</code>; retain only certain rows in the data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.select</code></td>
<td>
<p>passed to <code>dplyr::select</code>; retain only certain 
columns in the data set; this should be the result of a call to 
<code>dplyr::vars()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>character name of an object existing in <code>$ENV</code> 
to use for the data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>need</code></td>
<td>
<p>passed to <code>inventory</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Input data sets are <code>R</code> data frames that can include columns 
with any valid name, however columns with selected names are 
treated specially by <code>mrgsolve</code> and incorporated into the 
simulation.
</p>
<p><code>ID</code> specifies the subject ID and is required for every 
input data set.
</p>
<p>When columns have the same name as parameters (<code>$PARAM</code> in 
the model specification file), the values in those columns will 
be used to update the corresponding parameter as the simulation 
progresses.
</p>
<p>Input data set may include the following columns related to 
PK dosing events: <code>time</code>, <code>cmt</code>, <code>amt</code>, <code>rate</code>,
<code>ii</code>, <code>addl</code>, <code>ss</code>.  Along with <code>ID</code>, <code>time</code> 
is a required column in the input data set unless <code>$PRED</code> is in 
use.  Upper case PK dosing column names including
<code>TIME</code>, <code>CMT</code>, <code>AMT</code>, <code>RATE</code>, <code>II</code>,
<code>ADDL</code>, <code>SS</code> are also recognized.  However, an 
error will be generated if a mix of upper case and lower
case columns in this family are found.
</p>
<p><code>time</code> is the observation or event time, <code>cmt</code> 
is the compartment number (see <code>init</code>), <code>amt</code> 
is the dosing amount, <code>rate</code> is the infusion rate, 
<code>ii</code> is the dosing interval, <code>addl</code> specifies 
additional doses to administer, and <code>ss</code> is a flag 
for steady state dosing.  These column names operate 
similarly to other non-linear mixed effects modeling 
software. 
</p>
<p>An error will be generated when mrgsolve detects that the data set
is not sorted by <code>time</code> within an individual.  
</p>
<p>Only numeric data can be brought in to the problem.  
Any non-numeric data columns will be dropped with warning.  
See <code>numerics_only</code>, which is used 
to prepare the data set. 
</p>
<p>An error will be generated if any parameter columns in the 
input data set contain <code>NA</code>.  Likewise, and error will 
be generated if missing values are found in the following
columns: <code>ID</code>, <code>time</code>/<code>TIME</code>, <code>rate</code>/<code>RATE</code>. 
</p>
<p>See <code>exdatasets</code> for different example data sets.
</p>


<h3>See Also</h3>

<p><code>idata_set</code>, <code>ev</code>, 
<code>valid_data_set</code>, <code>valid_idata_set</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
mod &lt;- mrgsolve::house()

data &lt;- expand.ev(ID=seq(3), amt=c(10, 20))

mod %&gt;% data_set(data, ID &gt; 1) %&gt;% mrgsim()

data(extran1)
head(extran1)

mod %&gt;% data_set(extran1) %&gt;% mrgsim()
mod %&gt;% mrgsim(data = extran1)

</code></pre>


</div>