<div class="container">

<table style="width: 100%;"><tr>
<td>mrfrequentist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fitting frequentist linear models using Merge and Reduce</h2>

<h3>Description</h3>

<p><code>mrfrequentist</code> is used to conduct frequentist linear
regression on very large data sets using Merge and Reduce as
described in Geppert et al. (2020).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mrfrequentist(
  formula,
  fileMr = NULL,
  dataMr = NULL,
  obsPerBlock,
  approach = c("1", "3"),
  sep = "auto",
  dec = ".",
  header = TRUE,
  naStrings = "NA",
  colNames = NULL,
  naAction = na.fail
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p><code>(formula)</code> <br>
See <code>formula</code>. Note that <code>mrfrequentist</code> currently
supports numeric predictors only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileMr</code></td>
<td>
<p>(<code>character</code>) <br> The name of a file, including the
filepath, to be read in blockwise. Either <code>fileMr</code> or <code>dataMr</code>
needs to be specified. When using this argument, the arguments <code>sep</code>, 
<code>dec</code>, <code>header</code>, <code>naStrings</code>, <code>colNames</code> (as in <code>fread</code>) 
are of relevance. Further options from <code>fread</code> are currently not supported.
Also note that defaults might differ. In case the data to be read in has row names,
note that these will be read in as regular column. This may need
special treatment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataMr</code></td>
<td>
<p>(<code>data.frame</code>) <br> The data to be used for the regression
analysis. Either <code>fileMr</code> or <code>dataMr</code> needs to be specified.
Note that the arguments <code>sep</code>, <code>dec</code>, <code>header</code>, <code>naStrings</code>, 
and <code>colNames</code> are ignored when <code>dataMr</code> is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obsPerBlock</code></td>
<td>
<p><code>(numeric)</code> <br> Value specifying the number of
observations in each block. This number has to be larger than the number of 
regression coefficients. Moreover, for approach 1 the recommended ratio of 
observations per regression coefficient is larger than 25 (Geppert et al., 2020). 
Note that the last block may contain less observations than specified 
depending on the sample size. If the number of observations in this last 
block is too small it is not included in the model and a warning is 
issued.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>approach</code></td>
<td>
<p><code>(character)</code> <br> Approach specifying the merge
technique. One of either "1" or "3". Approach "1" is based on a weighted
mean procedure whereas approach "3" is an exact method based on blockwise 
calculations of X'X, y'X and y'y. See Geppert et al. (2020) for details on 
the approaches and section Details below for comments on approach "3".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>See documentation of <code>fread</code>. Default is
"auto". Ignored when <code>dataMr</code> is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>See documentation of <code>fread</code>. Default is 
".". Ignored when <code>dataMr</code> is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p><code>(logical)</code> <br> See documentation of
<code>fread</code>. Defaults to <code>TRUE</code>. Ignored when
<code>dataMr</code> is specified. If <code>header</code> is set to <code>FALSE</code> and no 
<code>colNames</code> are given, then column names default to "V" followed by the 
column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naStrings</code></td>
<td>
<p><code>(character)</code> <br> Optional argument.
See argument na.strings of <code>fread</code>.
Default is "NA". Ignored when <code>dataMr</code> is specified and optional
when <code>fileMr</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colNames</code></td>
<td>
<p><code>(character vector)</code> <br> Same as argument
col.names of <code>fread</code>. Ignored when <code>dataMr</code> is
specified and optional when <code>fileMr</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naAction</code></td>
<td>
<p><code>(function)</code> <br> Action to be taken when missing values
are present in the data. Currently only <code>na.fail</code> is 
supported.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an object of class <code>"mrfrequentist"</code> which is a list
containing the following components <strong>for both approaches "1" and "3":</strong>
</p>
<table>
<tr style="vertical-align: top;">
<td><code>approach</code></td>
<td>
<p>The approach used for merging the models. Either "1" or "3".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>The model's <code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Number of level of the final model in Merge and Reduce. This is equal
to <code class="reqn">\lceil \log_2{(\code{numberObs}/\code{obsPerBlock})} \rceil + 1</code> 
and corresponds to the number of buckets in Figure 1 of Geppert et al. (2020).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numberObs</code></td>
<td>
<p>The total number of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summaryStats</code></td>
<td>
<p>Summary statistics reporting the estimated regression coefficients 
and their unbiased standard errors. Estimates are based
on the merge technique as specified in the argument <code>approach</code>.
For approach "1" the estimates of the standard errors are corrected
dividing by <code class="reqn"> \sqrt \lceil \code{numberObs /  obsPerBlock} \rceil
  </code>. For further details see Geppert et al. (2020).
For approach "3" the unbiased estimates of the standard errors are given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataHead</code></td>
<td>
<p>First six rows of the data in the first block. This serves
as a sanity check, especially when using the argument <code>fileMr</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>terms</code></td>
<td>
<p>Terms object.</p>
</td>
</tr>
</table>
<p><strong>Additionally for approach "3" only:</strong>
</p>
<table>
<tr style="vertical-align: top;">
<td><code>XTX</code></td>
<td>
<p>The final model's <code>crossprod(X, X)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yTX</code></td>
<td>
<p>The final model's <code>crossprod(y, X)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yTy</code></td>
<td>
<p>The final model's <code>crossprod(y, y)</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In approach "3" the estimated regression coefficients and their unbiased standard errors
are calculated via qr decompositions on X'X (as in <code>speedlm</code> 
with argument <code>method = "qr"</code>). Moreover, the merge step uses the same 
idea of blockwise addition for X'X, y'y and y'X as <code>speedglm</code>'s updating 
procedure <code>updateWithMoreData</code>. Conceptually though, 
Merge and Reduce is not an updating algorithm as it merges models based on 
a comparable amount of data along a tree structure to obtain a final model.
</p>


<h3>References</h3>

<p>Geppert, L.N., Ickstadt, K., Munteanu, A., &amp; Sohler, C. (2020).
Streaming statistical models via Merge &amp; Reduce. International Journal
of Data Science and Analytics, 1-17, <br>
doi: https://doi.org/10.1007/s41060-020-00226-0
</p>


<h3>Examples</h3>

<pre><code class="language-R">## run mrfrequentist() with dataMr
data(exampleData)
fit1 = mrfrequentist(dataMr = exampleData, approach = "1", obsPerBlock = 300,
formula = V11 ~ .)

## run mrfrequentist() with fileMr
filepath = system.file("extdata", "exampleFile.txt", package = "mrregression")
fit2 = mrfrequentist(fileMr = filepath, approach = "3", header = TRUE,
obsPerBlock = 100, formula = y ~ .)
</code></pre>


</div>