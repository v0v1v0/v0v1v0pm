<div class="container">

<table style="width: 100%;"><tr>
<td>asir</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate age-standardized incidence rates</h2>

<h3>Description</h3>

<p>Calculate age-standardized incidence rates
</p>


<h3>Usage</h3>

<pre><code class="language-R">asir(
  df,
  dattype = NULL,
  std_pop = "ESP2013",
  truncate_std_pop = FALSE,
  futime_src = "refpop",
  summarize_groups = "none",
  count_var,
  stdpop_df = standard_population,
  refpop_df = population,
  region_var = NULL,
  age_var = NULL,
  sex_var = NULL,
  year_var = NULL,
  site_var = NULL,
  futime_var = NULL,
  pyar_var = NULL,
  alpha = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>dataframe in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dattype</code></td>
<td>
<p>can be "zfkd" or "seer" or NULL. Will set default variable names if dattype is "seer" or "zfkd". Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std_pop</code></td>
<td>
<p>can be either "ESP2013, ESP1976, WHO1960, WHO2000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncate_std_pop</code></td>
<td>
<p>if TRUE standard population will be truncated for all age-groups that do not occur in df</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>futime_src</code></td>
<td>
<p>can be either "refpop" or "cohort". Default is "refpop".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summarize_groups</code></td>
<td>
<p>option to define summarizing stratified groups. Default is "none".
If you want to define variables that should be summarized into one group, you can chose from region_var, sex_var, year_var.
Define multiple summarize variables by summarize_groups = c("region", "sex", "year")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>count_var</code></td>
<td>
<p>variable to be counted as observed case. Should be 1 for case to be counted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stdpop_df</code></td>
<td>
<p>df where standard population is defined. It is assumed that stdpop_df has the columns "sex" for biological sex, "age" for age-groups,
"standard_pop" for name of standard population (e.g. "European Standard Population 2013) and "population_n" for size of standard population age-group.
stdpop_df must use the same category coding of age and sex as age_var and sex_var.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refpop_df</code></td>
<td>
<p>df where reference population data is defined. Only required if option futime = "refpop" is chosen. It is assumed that refpop_df has the columns
"region" for region, "sex" for biological sex, "age" for age-groups (can be single ages or 5-year brackets), "year" for time period (can be single year or 5-year brackets),
"population_pyar" for person-years at risk in the respective age/sex/year cohort.
refpop_df must use the same category coding of age, sex, region, year and site as age_var, sex_var, region_var, year_var and site_var.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region_var</code></td>
<td>
<p>variable in df that contains information on region where case was incident. Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_var</code></td>
<td>
<p>variable in df that contains information on age-group. Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sex_var</code></td>
<td>
<p>variable in df that contains information on biological sex. Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year_var</code></td>
<td>
<p>variable in df that contains information on year or year-period when case was incident. Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site_var</code></td>
<td>
<p>variable in df that contains information on ICD code of case diagnosis. Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>futime_var</code></td>
<td>
<p>variable in df that contains follow-up time per person (in years) in cohort (can only be used with futime_src = "cohort"). Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pyar_var</code></td>
<td>
<p>variable in refpop_df that contains person-years-at-risk in reference population (can only be used with futime_src = "refpop") Default is set if dattype is given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>significance level for confidence interval calculations. Default is alpha = 0.05 which will give 95 percent confidence intervals.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>df
</p>


<h3>Examples</h3>

<pre><code class="language-R">#load sample data
data("us_second_cancer")
data("standard_population")
data("population_us")

#make wide data as this is the required format
usdata_wide &lt;- us_second_cancer %&gt;%
                    #only use sample
                    dplyr::filter(as.numeric(fake_id) &lt; 200000) %&gt;%
                    msSPChelpR::reshape_wide_tidyr(case_id_var = "fake_id", 
                    time_id_var = "SEQ_NUM", timevar_max = 2)
                    
#create count variable
usdata_wide &lt;- usdata_wide %&gt;%
                    dplyr::mutate(count_spc = dplyr::case_when(is.na(t_site_icd.2)   ~ 1,
                    TRUE ~ 0))
 
#remove cases for which no reference population exists
usdata_wide &lt;- usdata_wide %&gt;%
                    dplyr::filter(t_yeardiag.2 %in% c("1990 - 1994", "1995 - 1999", "2000 - 2004",
                                                       "2005 - 2009", "2010 - 2014"))
                    

#now we can run the function
msSPChelpR::asir(usdata_wide,
      dattype = "seer",
      std_pop = "ESP2013",
      truncate_std_pop = FALSE,
      futime_src = "refpop",
      summarize_groups = "none",
      count_var = "count_spc",
      refpop_df = population_us,
      region_var = "registry.1", 
      age_var = "fc_agegroup.1",
      sex_var = "sex.1",
      year_var = "t_yeardiag.2", 
      site_var = "t_site_icd.2",
      pyar_var = "population_pyar")


</code></pre>


</div>