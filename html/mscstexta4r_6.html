<div class="container">

<table style="width: 100%;"><tr>
<td>textaDetectTopicsStatus</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieves the status of a topic detection operation submitted for
processing.</h2>

<h3>Description</h3>

<p>This function retrieves the status of an asynchronous topic
detection operation previously submitted for processing. If the operation
has reached a 'Succeeded' state, this function will also return the results.
</p>
<p>Internally, this function invokes the Microsoft Cognitive Services Text
Analytics REST API documented at <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation">https://www.microsoft.com/cognitive-services/en-us/text-analytics/documentation</a>.
</p>
<p>You MUST have a valid Microsoft Cognitive Services account and an API key for
this function to work properly. See <a href="https://www.microsoft.com/cognitive-services/en-us/pricing">https://www.microsoft.com/cognitive-services/en-us/pricing</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">textaDetectTopicsStatus(operation, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>operation</code></td>
<td>
<p>(textatopics) textatopics S3 object returned by the original
call to <code>textaDetectTopics</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>(logical) If set to TRUE, print poll status to stdout.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S3 object of the class <code>textatopics</code> with the results
of the topic detection operation. See <code>textatopics</code> for details.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
 load("./data/yelpChineseRestaurantReviews.rda")
 set.seed(1234)
 documents &lt;- sample(yelpChReviews$text, 1000)

 tryCatch({

   # Start async topic detection
   operation &lt;- textaDetectTopics(
     documents,                  # At least 100 docs/sentences
     stopWords = NULL,           # Stop word list (optional)
     topicsToExclude = NULL,     # Topics to exclude (optional)
     minDocumentsPerWord = NULL, # Threshold to exclude rare topics (optional)
     maxDocumentsPerWord = NULL, # Threshold to exclude ubiquitous topics (optional)
     resultsPollInterval = 0L    # Poll interval (in s, default: 30s, use 0L for async)
   )

   # Poll the servers until the work completes or until we time out
   resultsPollInterval &lt;- 60L
   resultsTimeout &lt;- 1200L
   startTime &lt;- Sys.time()
   endTime &lt;- startTime + resultsTimeout

   while (Sys.time() &lt;= endTime) {
     sleepTime &lt;- startTime + resultsPollInterval - Sys.time()
     if (sleepTime &gt; 0)
       Sys.sleep(sleepTime)
     startTime &lt;- Sys.time()

     # Poll for results
     topics &lt;- textaDetectTopicsStatus(operation)
     if (topics$status != "NotStarted" &amp;&amp; topics$status != "Running")
       break;
   }

   # Class and structure of topics
   class(topics)
   #&gt; [1] "textatopics"

   str(topics, max.level = 1)
   #&gt; List of 8
   #&gt; $ status          : chr "Succeeded"
   #&gt; $ operationId     : chr "30334a3e1e28406a80566bb76ff04884"
   #&gt; $ operationType   : chr "topics"
   #&gt; $ documents       :'data.frame':  1000 obs. of  2 variables:
   #&gt; $ topics          :'data.frame':  71 obs. of  3 variables:
   #&gt; $ topicAssignments:'data.frame':  502 obs. of  3 variables:
   #&gt; $ json            : chr "{\"status\":\"Succeeded\",\"createdDateTime\": __truncated__ }
   #&gt; $ request         :List of 7
   #&gt; ..- attr(*, "class")= chr "request"
   #&gt; - attr(*, "class")= chr "textatopics"

   # Print results
   topics
   #&gt; textatopics [https://westus.api.cognitive.microsoft.com/text/analytics/ __truncated__ ]
   #&gt; status: Succeeded
   #&gt; operationId: 30334a3e1e28406a80566bb76ff04884
   #&gt; operationType: topics
   #&gt; topics (first 20):
   #&gt; ------------------------
   #&gt;    keyPhrase      score
   #&gt; ---------------- -------
   #&gt;     portions       35
   #&gt;   noodle soup      30
   #&gt;    vegetables      20
   #&gt;       tofu         19
   #&gt;      garlic        17
   #&gt;     Eggplant       15
   #&gt;       Pad          15
   #&gt;      combo         13
   #&gt; Beef Noodle Soup   13
   #&gt;      House         12
   #&gt;      entree        12
   #&gt;     wontons        12
   #&gt;     Pei Wei        12
   #&gt;  mongolian beef    11
   #&gt;       crab         11
   #&gt;      Panda         11
   #&gt;       bean         10
   #&gt;    dumplings        9
   #&gt;     veggies         9
   #&gt;      decor          9
   #&gt; ------------------------

 }, error = function(err) {

   # Print error
   geterrmessage()

 })

## End(Not run)
</code></pre>


</div>