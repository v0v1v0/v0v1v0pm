<div class="container">

<table style="width: 100%;"><tr>
<td>mscsweblm4r</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R Client for the Microsoft Cognitive Services Web Language Model REST API</h2>

<h3>Description</h3>

<p><span class="pkg">mscsweblm4r</span> is a client/wrapper/interface for the Microsoft
Cognitive Services (MSCS) Web Language Model (Web LM) REST API. To use this
package, you MUST have a valid account with <a href="https://www.microsoft.com/cognitive-services">https://www.microsoft.com/cognitive-services</a>.
Once you have an account, Microsoft will provide you with a (free) API key
you can use with this package.
</p>


<h3>The MSCS Web LM REST API</h3>

<p>Microsoft Cognitive Services – formerly known as Project Oxford – are a set
of APIs, SDKs and services that developers can use to add AI features to
their apps. Those features include emotion and video detection; facial,
speech and vision recognition; and speech and language understanding.
</p>
<p>The Web Language Model REST API provides tools for natural language
processing and is documented at <a href="https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation">https://www.microsoft.com/cognitive-services/en-us/web-language-model-api/documentation</a>.
Per Microsoft's website, this API uses smoothed backoff N-gram language models
(supporting Markov order up to 5) that were trained on four web-scale American
English corpora collected by Bing (web page body, title, anchor and query).
</p>
<p>The MSCS Web LM REST API supports the following lookup operations:
</p>

<ul>
<li>
<p> Insert spaces into a string of words adjoined together without any spaces (hashtags, URLs, etc.).
</p>
</li>
<li>
<p> Calculate the joint probability that a sequence of words will appear together.
</p>
</li>
<li>
<p> Compute the conditional probability that a specific word will follow an existing sequence of words.
</p>
</li>
<li>
<p> Get the list of words (completions) most likely to follow a given sequence of words.
</p>
</li>
<li>
<p> Retrieve the list of supported language models.
</p>
</li>
</ul>
<h3>
<span class="pkg">mscsweblm4r</span> Functions</h3>

<p>The following five <span class="pkg">mscsweblm4r</span> core functions are used to wrap the
MSCS Web LM REST API:
</p>

<ul>
<li>
<p> Word breaking - <code>weblmBreakIntoWords</code> function
</p>
</li>
<li>
<p> Joint probability - <code>weblmCalculateJointProbability</code> function
</p>
</li>
<li>
<p> Conditional probability - <code>weblmCalculateConditionalProbability</code> function
</p>
</li>
<li>
<p> Sequence completions - <code>weblmGenerateNextWords</code> function
</p>
</li>
<li>
<p> Models list - <code>weblmListAvailableModels</code> function
</p>
</li>
</ul>
<p>The <code>weblmInit</code> configuration function is used to set the REST
API URL and the private API key. It needs to be called <em>only once</em>,
after package load, or the core functions will not work properly.
</p>


<h3>Package Loading and Configuration</h3>

<p>After loading the <span class="pkg">mscsweblm4r</span> package with the <code>library()</code> function,
you must call the <code>weblmInit</code> before you can call any of
the core <span class="pkg">mscsweblm4r</span> functions.
</p>
<p>The <code>weblmInit</code> configuration function will first check to see
if the variable <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> exists in the system
environment. If it does, the package will use that as the path to the
configuration file.
</p>
<p>If <code>MSCS_WEBLANGUAGEMODEL_CONFIG_FILE</code> doesn't exist, it will look for
the file <code>.mscskeys.json</code> in the current user's home directory (that's
<code>~/.mscskeys.json</code> on Linux, and something like <code>C:/Users/Phil/Documents/.mscskeys.json</code>
on Windows). If the file is found, the package will load the API key and URL
from it.
</p>
<p>If using a file, please make sure it has the following structure:
</p>
<pre>
{
  "weblanguagemodelurl": "https://api.projectoxford.ai/text/weblm/v1.0/",
  "weblanguagemodelkey": "...MSCS Web Language Model API key goes here..."
}
</pre>
<p>If no configuration file is found, <code>weblmInit</code> will attempt to
pick up its configuration information from two Sys env variables instead:
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_URL</code> - the URL for the Web LM REST API.
</p>
<p><code>MSCS_WEBLANGUAGEMODEL_KEY</code> - your personal Web LM REST API key.
</p>


<h3>S3 Object of the Class <code>weblm</code>
</h3>

<p>The five core functions of the <span class="pkg">mscsweblm4r</span> package return S3 objects
of the class <code>weblm</code>. Those objects expose formatted results, the REST
API JSON response, and the HTTP request.
</p>


<h3>Error Handling</h3>

<p>The MSCS Web LM API is a REST API. HTTP requests over a network and the
Internet can fail because of congestion, because the web site is down for
maintenance, because of firewall configuration issues, etc.
</p>
<p>The API can also fail if you've exhausted your call volume quota or are
exceeding the API calls rate limit. Unfortunately, MSCS does not expose an
API you can query to check if you're about to exceed your quota for instance.
The only way you'll know for sure is by looking at the error code returned
after an API call has failed.
</p>
<p>To help with error handling, we recommend the systematic use of
<code>tryCatch()</code> when calling <span class="pkg">mscsweblm4r</span>'s core functions. Its
mechanism may appear a bit daunting at first, but it is well documented at <a href="http://www.inside-r.org/r-doc/base/signalCondition">http://www.inside-r.org/r-doc/base/signalCondition</a>.
We use it in many of the code examples.
</p>


<h3>Author(s)</h3>

<p>Phil Ferriere <a href="mailto:pferriere@hotmail.com">pferriere@hotmail.com</a>
</p>


</div>