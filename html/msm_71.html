<div class="container">

<table style="width: 100%;"><tr>
<td>plot.survfit.msm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot empirical and fitted survival curves</h2>

<h3>Description</h3>

<p>Plot a Kaplan-Meier estimate of the survival probability and compare it with
the fitted survival probability from a <code>msm</code> model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'survfit.msm'
plot(
  x,
  from = 1,
  to = NULL,
  range = NULL,
  covariates = "mean",
  interp = c("start", "midpoint"),
  ci = c("none", "normal", "bootstrap"),
  B = 100,
  legend.pos = NULL,
  xlab = "Time",
  ylab = "Survival probability",
  lty = 1,
  lwd = 1,
  col = "red",
  lty.ci = 2,
  lwd.ci = 1,
  col.ci = "red",
  mark.time = TRUE,
  col.surv = "blue",
  lty.surv = 2,
  lwd.surv = 1,
  survdata = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Output from <code>msm</code>, representing a fitted multi-state
model object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>Non-absorbing state from which to consider survival.  Defaults
to state 1.  The fitted probabilities will then be calculated as the
transition probabilities from this state to <code>to</code>.  The empirical
survival curve plots survival from the first observation of <code>from</code>
(where this exists) to the first entry time into <code>to</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>Absorbing state to consider. Defaults to the highest-labelled
absorbing state.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>Vector of two elements, giving the range of times to plot for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>Covariate values for which to evaluate the expected
probabilities.  This can either be:<br></p>
<p>the string <code>"mean"</code>, denoting the means of the covariates in the data
(this is the default),<br></p>
<p>the number <code>0</code>, indicating that all the covariates should be set to
zero,<br></p>
<p>or a list of values, with optional names. For example
</p>
<p><code>list (60, 1)</code>
</p>
<p>where the order of the list follows the order of the covariates originally
given in the model formula, or a named list,
</p>
<p><code>list (age = 60, sex = 1)</code>
</p>
<p>but note the empirical curve is plotted for the full population.  To
consider subsets for the empirical curve, set <code>survdata=TRUE</code> to
extract the survival data and build a survival plot by hand using
<code>plot.survfit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interp</code></td>
<td>
<p>If <code>interp="start"</code> (the default) then the entry time
into the absorbing state is assumed to be the time it is first observed in
the data.
</p>
<p>If <code>interp="midpoint"</code> then the entry time into the absorbing state is
assumed to be halfway between the time it is first observed and the previous
observation time. This is generally more reasonable for "progressive" models
with observations at arbitrary times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>If <code>"none"</code> (the default) no confidence intervals are
plotted.  If <code>"normal"</code> or <code>"bootstrap"</code>, confidence intervals are
plotted based on the respective method in <code>pmatrix.msm</code>. This is
very computationally-intensive, since intervals must be computed at a series
of times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of bootstrap or normal replicates for the confidence
interval.  The default is 100 rather than the usual 1000, since these plots
are for rough diagnostic purposes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.pos</code></td>
<td>
<p>Vector of the <code class="reqn">x</code> and <code class="reqn">y</code> position, respectively,
of the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>x axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>y axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>Line type for the fitted curve. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>Line width for the fitted curve. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Colour for the fitted curve. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty.ci</code></td>
<td>
<p>Line type for the fitted curve confidence limits. See
<code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd.ci</code></td>
<td>
<p>Line width for the fitted curve confidence limits. See
<code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.ci</code></td>
<td>
<p>Colour for the fitted curve confidence limits. See
<code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mark.time</code></td>
<td>
<p>Mark the empirical survival curve at each censoring point,
see <code>lines.survfit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.surv</code></td>
<td>
<p>Colour for the empirical survival curve, passed to
<code>lines.survfit</code>. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty.surv</code></td>
<td>
<p>Line type for the empirical survival curve, passed to
<code>lines.survfit</code>. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd.surv</code></td>
<td>
<p>Line width for the empirical survival curve, passed to
<code>lines.survfit</code>. See <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survdata</code></td>
<td>
<p>Set to <code>TRUE</code> to return the survival data frame
constructed when plotting the empirical curve.  This can be used for
constructing survival plots by hand using
<code>plot.survfit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to be passed to the <code>plot</code> function
which draws the fitted curve, or the <code>lines.survfit</code>
function which draws the empirical curve.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the data represent observations of the process at arbitrary times, then
the first occurrence of the absorbing state in the data will usually be
greater than the actual first transition time to that state.  Therefore the
Kaplan-Meier estimate of the survival probability will be an overestimate.
</p>
<p>The method of Turnbull (1976) could be used to give a non-parametric
estimate of the time to an interval-censored event, and compared to the
equivalent estimate from a multi-state model.  This is implemented in the
CRAN package <span class="pkg">interval</span> (Fay and Shaw 2010).
</p>
<p>This currently only handles time-homogeneous models.
</p>


<h3>References</h3>

<p>Turnbull, B. W. (1976) The empirical distribution function with
arbitrarily grouped, censored and truncated data. J. R. Statist. Soc. B 38,
290-295.
</p>
<p>Fay, MP and Shaw, PA (2010). Exact and Asymptotic Weighted Logrank Tests for
Interval Censored Data: The interval R package. Journal of Statistical
Software. http://www.jstatsoft.org/v36/ i02/. 36 (2):1-34.
</p>


<h3>See Also</h3>

<p><code>survfit</code>,
<code>plot.survfit</code>, <code>plot.prevalence.msm</code>
</p>


</div>