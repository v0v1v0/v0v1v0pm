<div class="container">

<table style="width: 100%;"><tr>
<td>polish</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remove observations with different states occurring at the same time</h2>

<h3>Description</h3>

<p>Fast algorithm to get rid of transitions to different states occurring at
the same exact time in an augmented data structure as computed by
<code>augment</code> (see 'Details').
</p>


<h3>Usage</h3>

<pre><code class="language-R">polish(
  data,
  data_key,
  pattern,
  time,
  check_NA = FALSE,
  convert = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.table</code> or <code>data.frame</code> object in longitudinal
format where each row represents an observation in which the exact starting
and ending time of the process are known and recorded. If <code>data</code> is a
<code>data.frame</code>, then <code>augment</code> internally casts it to a <code>data.table</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_key</code></td>
<td>
<p>A keying variable which <code>augment</code> uses to define a key
for <code>data</code>. This represents the subject ID (see
<code>setkey</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>Either an integer, a factor or a character with 2 or 3 unique
values which provides the ID status at the end of the study. <code>pattern</code>
has a predefined structure. When 2 values are detected, they must be in the
format: 0 = "alive", 1 = "dead". When 3 values are detected, then the format
must be: 0 = "alive", 1 = "dead during a transition", 2 = "dead after a
transition has ended" (see 'Details').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The target time variable to check duplicates. By default it is set
to 'augmented_int'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_NA</code></td>
<td>
<p>If <code>TRUE</code>, then arguments <code>data_key</code>,
<code>pattern</code>, and <code>time</code> are looked up for any missing data and if
the function finds any, it stops with error. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convert</code></td>
<td>
<p>If <code>TRUE</code>, then the returned object is automatically
converted to the class <code>data.frame</code>. This is done in place and comes
at very low cost both from running time and memory consumption
(see <code>setDF</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>FALSE</code>, all information produced by <code>print</code>,
<code>cat</code> and <code>message</code> are suppressed. Default is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function finds all those cases where two subsequent events for
a given subject land on different states but occur at the same time.
When this happens, the whole subject, as identified by <code>data_key</code>, is
removed from the data. The total number of subjects to be removed is
printed out in order to be more informative.
</p>


<h3>Author(s)</h3>

<p>Francesco Grossetti <a href="mailto:francesco.grossetti@unibocconi.it">francesco.grossetti@unibocconi.it</a>.
</p>


<h3>See Also</h3>

<p><code>augment</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# loading data
data( hosp )

# augmenting longitudinal data
hosp_aug = augment( data = hosp, data_key = subj, n_events = adm_number,
                    pattern = label_3, t_start = dateIN, t_end = dateOUT,
                    t_cens = dateCENS )

# cleaning any targeted occurrence
hosp_aug_clean = polish( data = hosp_aug, data_key = subj, pattern = label_3 )

</code></pre>


</div>