<div class="container">

<table style="width: 100%;"><tr>
<td>genPolyMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Item bank generation (polytomous models)</h2>

<h3>Description</h3>

<p>This command generates an item bank from prespecified parent distributions for use with polytomous IRT models. Subgroups of items can also be specified for content balancing purposes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">genPolyMatrix(items = 100, nrCat = 3, model = "GRM", seed = 1, same.nrCat = FALSE)
 </code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>items</code></td>
<td>
<p>integer: the number of items to generate (default is 100).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrCat</code></td>
<td>
<p>integer: the (maximum) number of response categories to generate (default is 3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>character: the type of polytomous IRT model. Possible values are <code>"GRM"</code> (default), <code>"MGRM"</code>, <code>"PCM"</code>, <code>"GPCM"</code> and <code>"NRM"</code>. See <b>Details</b>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>numeric: the random seed for item parameter generation (default is 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>same.nrCat</code></td>
<td>
<p>logical: should all items have the same number of response categories? (default is <code>FALSE</code>. Ignored if <code>model</code> is either <code>"MGRM"</code> or <code>"RSM"</code>. See <b>Details</b>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>genPolyMatrix</code> permits to quickly generate a polytomous item bank in suitable format for further use in e.g. computing item response propbabilities with the <code>Pi</code>. 
</p>
<p>The six polytomous IRT models that are supported are: 
</p>

<ol>
<li>
<p>the <em>Graded Response Model</em> (GRM; Samejima, 1969);
</p>
</li>
<li>
<p>the <em>Modified Graded Response Model</em> (MGRM; Muraki, 1990);
</p>
</li>
<li>
<p>the <em>Partial Credit Model</em> (PCM; Masters, 1982);
</p>
</li>
<li>
<p>the <em>Generalized Partial Credit Model</em> (GPCM; Muraki, 1992);
</p>
</li>
<li>
<p>the <em>Rating Scale Model</em> (RSM; Andrich, 1978);
</p>
</li>
<li>
<p>the <em>Nominal Response Model</em> (NRM; Bock, 1972).
</p>
</li>
</ol>
<p>Each model is specified through the <code>model</code> argument, with its accronym surrounded by double quotes (i.e. <code>"GRM"</code> for GRM, <code>"PCM"</code> for PCM, etc.). The default value is <code>"GRM"</code>.
</p>
<p>For any item <code class="reqn">j</code>, set <code class="reqn">(0, ..., g_j)</code> as the <code class="reqn">g_j+1</code> possible response categories. The maximum number of response categories can differ across items under the GRM, PCM, GPCM and NRM, but they are obviously equal across items under the MGRM and RSM. In the latter, set <code class="reqn">g</code> as the (same) number of response categories for all items. It is possible however to require all items to have the same number of response categories, by fixing the <code>same.nrCat</code> argument to <code>TRUE</code>.
</p>
<p>In case of GRM, PCM, GPCM or NRM with <code>same.nrCat</code> being <code>FALSE</code>, the number of response categories <code class="reqn">g_j+1</code> per item is drawn from a Poisson distribution with parameter <code>nrCat</code>, and this number is restricted to the interval [2; <code>nrCat</code>]. This ensure at least two response categories and at most <code>nrCat</code> categories. In all other cases, each <code class="reqn">g_j+1</code> is trivially fixed to <code class="reqn">g+1 = </code> <code>nrCat</code>.
</p>
<p>Denote further <code class="reqn">P_{jk}(\theta)</code> as the probability of answering response category <code class="reqn">k \in \{0, ..., g_j\}</code> of item <code class="reqn">j</code>. For GRM and MGRM, response probabilities <code class="reqn">P_{jk}(\theta)</code> are defined through cumulative probabilities, while for PCM, GPCM, RSM and NRM they are directly computed.
</p>
<p>For GRM and MGRM, set <code class="reqn">P_{jk}^*(\theta)</code> as the (cumulative) probability of asnwering response category <code class="reqn">k</code> or "above", that is <code class="reqn">P_{jk}^*(\theta) = Pr(X_j \geq k | \theta)</code> where <code class="reqn">X_j</code> is the item response. It follows obviously that for any <code class="reqn">\theta</code>, <code class="reqn">P_{j0}^*(\theta) = 1</code> and <code class="reqn">P_{jk}^*(\theta) = 0</code> when <code class="reqn">k&gt;g_j</code>. Furthermore, response category probabilities are found back by the relationship <code class="reqn">P_{jk}(\theta)= P_{jk}^*(\theta)-P_{j,k+1}^*(\theta)</code>. Then, the GRM is defined by (Samejima, 1969)
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}^*(\theta)=\frac{\exp\,[\alpha_j\,(\theta-\beta_{jk})]}{1+\exp\,[\alpha_j\,(\theta-\beta_{jk})]}</code>
</p>
 
<p>and the MGRM by (Muraki, 1990)
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}^*(\theta)=\frac{\exp\,[\alpha_j\,(\theta-b_j+c_k)]}{1+\exp\,[\alpha_j\,(\theta-b_j+c_k)]}.</code>
</p>

<p>The PCM, GPCM, RSM and NRM are defined as "divide-by-total" models (Embretson and Reise, 2000). The PCM has following response category probability (Masters, 1982):
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}(\theta)=\frac{\exp\,\sum_{t=0}^k (\theta-\delta_{jt})}{\sum_{r=0}^{g_j}\,\exp\, \sum_{t=0}^r (\theta-\delta_{jt})}\quad \mbox{with} \quad  \sum_{t=0}^0 (\theta-\delta_{jt})=0.</code>
</p>

<p>The GPCM has following response category probability (Muraki, 1992):
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}(\theta)=\frac{\exp\,\sum_{t=0}^k \alpha_j\,(\theta-\delta_{jt})}{\sum_{r=0}^{g_j}\,\exp\, \sum_{t=0}^r \alpha_j\,(\theta-\delta_{jt})}\quad \mbox{with} \quad  \sum_{t=0}^0 \alpha_j\,(\theta-\delta_{jt})=0.</code>
</p>

<p>The RSM has following response category probability (Andrich, 1978):
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}(\theta)=\frac{\exp\,\sum_{t=0}^k [\theta-(\lambda_j+\delta_t)]}{\sum_{r=0}^{g_j}\,\exp\, \sum_{t=0}^r [\theta-(\lambda_j+\delta_t)]}\quad \mbox{with} \quad  \sum_{t=0}^0 [\theta-(\lambda_j+\delta_t)]=0.</code>
</p>

<p>Finally, the NRM has following response category probability (Bock, 1972):
</p>
<p style="text-align: center;"><code class="reqn">P_{jk}(\theta)=\frac{\exp (\alpha_{jk}\,\theta+c_{jk})}{\sum_{r=0}^{g_j} \exp (\alpha_{jr}\,\theta+c_{jr})}\quad \mbox{with} \quad  \alpha_{j0}\,\theta+c_{j0}=0.</code>
</p>

<p>The following parent distributions are considered to generate the different item parameters. The <code class="reqn">\alpha_j</code> parameters of GRM, MGRM and GPCM, as well as the <code class="reqn">\alpha_{jk}</code> parameters of the NRM, are drawn from a log-normal distribution with mean 0 and standard deviation 0.1225. All other parameters are drawn from a standard normal distribution. Moreover, the <code class="reqn">\beta_{jk}</code> parameters of the GRM and the <code class="reqn">c_k</code> parameters of the MGRM are sorted respectively in increasing and decreasing order of <code class="reqn">k</code>, to ensure decreasing trend in the cumulative <code class="reqn">P_{jk}^*(\theta)</code> probabilities.
</p>
<p>The output is a matrix with one row per item and as many columns as required to hold all item parameters. In case of missing response categories, the corresponding parameters are replaced by <code>NA</code> values. Column names refer to the corresponding model parameters. See <b>Details</b> for further explanations and <b>Examples</b> for illustrative examples.
</p>


<h3>Value</h3>

<p>A matrix with <code>items</code> rows and as many columns as required for the considered IRT model: 
</p>

<ul>
<li>
<p><code class="reqn">\max_j \,g_j+1</code> columns, holding parameters <code class="reqn">(\alpha_j, \beta_{j1}, ..., \beta_{j,g_j})</code> if <code>model</code> is <code>"GRM"</code>;
</p>
</li>
<li>
<p><code class="reqn">g+2</code> columns, holding parameters <code class="reqn">(\alpha_j, b_j, c_1, ..., c_g)</code> if <code>model</code> is <code>"MGRM"</code>;
</p>
</li>
<li>
<p><code class="reqn">\max_j \,g_j</code> columns, holding parameters <code class="reqn">(\delta_{j1}, ..., \delta_{j,g_j})</code>  if <code>model</code> is <code>"PCM"</code>;
</p>
</li>
<li>
<p><code class="reqn">\max_j \,g_j+1</code> columns, holding parameters <code class="reqn">(\alpha_j, \delta_{j1}, ..., \delta_{j,g_j})</code> if <code>model</code> is <code>"GPCM"</code>;
</p>
</li>
<li>
<p><code class="reqn">g+1</code> columns, holding parameters <code class="reqn">(\lambda_j, \delta_1, ..., \delta_g)</code> if <code>model</code> is <code>"RSM"</code>;
</p>
</li>
<li>
<p><code class="reqn">2\,\max_j\, g_j</code> columns, holding parameters <code class="reqn">(\alpha_{j1}, c_{j1}, \alpha_{j2}, c_{j2}, ..., \alpha_{j,g_j}, c_{j, g_j})</code> if <code>model</code> is <code>"NRM"</code>.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>David Magis <br>
Department of Psychology, University of Liege, Belgium <br><a href="mailto:david.magis@uliege.be">david.magis@uliege.be</a>
</p>


<h3>References</h3>

<p>Andrich, D. (1978). A rating formulation for ordered response categories. <em>Psychometrika, 43</em>, 561-573. doi: 10.1007/BF02293814
</p>
<p>Bock, R. D. (1972). Estimating item parameters and latent ability when responses are scored in two or more nominal categories. <em>Psychometrika, 37</em>, 29-51. doi: 10.1007/BF02291411
</p>
<p>Embretson, S. E., and Reise, S. P. (2000). <em>Item response theory for psychologists</em>. Mahwah, NJ: Lawrence Erlbaum Associates.
</p>
<p>Magis, D., and Raiche, G. (2012). Random Generation of Response Patterns under Computerized Adaptive Testing with the R Package <em>catR</em>. <em>Journal of Statistical Software</em>, <em>48 (8)</em>, 1-31. URL <a href="http://www.jstatsoft.org/v48/i08/">http://www.jstatsoft.org/v48/i08/</a>
</p>
<p>Masters, G. N. (1982). A Rasch model for partial credit scoring. <em>Psychometrika, 47</em>, 149-174. doi: 10.1007/BF02296272
</p>
<p>Muraki, E. (1990). Fitting a polytomous item response model to Likert-type data. <em>Applied Psychological Measurement, 14</em>, 59-71. doi: 10.1177/014662169001400106
</p>
<p>Muraki, E. (1992). A generalized partial credit model: Application of an EM algorithm. <em>Applied Psychological Measurement, 16</em>, 19-176. doi: 10.1177/014662169201600206
</p>
<p>Samejima, F. (1969). <em>Estimation of latent ability using a response pattern of graded scores</em>. Psychometrika Monograph (vol. 17).
</p>


<h3>See Also</h3>

<p><code>Pi</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# All generated item banks have 10 items and at most four response categories

 # GRM 
 genPolyMatrix(10, 4, model = "GRM")

 # GRM with same number of response categories
 genPolyMatrix(10, 4, model = "GRM", same.nrCat = TRUE)

 # MGRM 
 genPolyMatrix(10, 4, model = "MGRM")

 # MGRM with same number of response categories
 genPolyMatrix(10, 4, model = "MGRM", same.nrCat = TRUE) # same result

 # PCM 
 genPolyMatrix(10, 4, model = "PCM")

 # PCM with same number of response categories
 genPolyMatrix(10, 4, model = "PCM", same.nrCat = TRUE) 

 # GPCM 
 genPolyMatrix(10, 4, model = "GPCM")

 # GPCM with same number of response categories
 genPolyMatrix(10, 4, model = "GPCM", same.nrCat = TRUE) 

 # RSM 
 genPolyMatrix(10, 4, model = "RSM")

 # RSM with same number of response categories
 genPolyMatrix(10, 4, model = "RSM", same.nrCat = TRUE) # same result

 # NRM 
 genPolyMatrix(10, 4, model = "NRM")

 # NRM with same number of response categories
 genPolyMatrix(10, 4, model = "NRM", same.nrCat = TRUE)  
 </code></pre>


</div>