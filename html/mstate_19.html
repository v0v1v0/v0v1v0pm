<div class="container">

<table style="width: 100%;"><tr>
<td>etm2msdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Converts between etm and msdata format</h2>

<h3>Description</h3>

<p>Converts multi-state data back and forth between etm and msdata formats.
Covariates have to be dealt with separately.
</p>


<h3>Usage</h3>

<pre><code class="language-R">etm2msdata(etmdata, id, tra, covs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>etmdata</code></td>
<td>
<p>Multi-state data in <code>etm</code> format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Column name identifying the subject id</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tra</code></td>
<td>
<p>Transition matrix in <code>etm</code> format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covs</code></td>
<td>
<p>Vector of column names containing covariates to be included</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>msdata2etm</code> will convert from <code>msdata</code> format to <code>etm</code>
format; <code>etm2msdata</code> will convert from <code>etm</code> format to
<code>msdata</code> format. Both <code>msdata2etm</code> and <code>etm2msdata</code> work with
basic time-fixed covariates. Time-dependent covariates are not supported.
The function <code>msdata2etm</code> will work for transition-specific covariates,
but the result does not really make much sense when used in etm.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Transition matrix for illness-death model
tmat &lt;- trans.illdeath()
# Data in wide format, for transition 1 this is dataset E1 of
# Therneau &amp; Grambsch (T&amp;G)
tg &lt;- data.frame(id=1:6,illt=c(1,1,6,6,8,9),ills=c(1,0,1,1,0,1),
                 dt=c(5,1,9,7,8,12),ds=c(1,1,1,1,1,1),
                 x1=c(1,1,1,0,0,0),x2=c(6:1))
# Data in long format using msprep
tglong &lt;- msprep(time=c(NA,"illt","dt"),status=c(NA,"ills","ds"),
                 data=tg,keep=c("x1","x2"),trans=tmat, id="id")
# Same thing in etm format
tra &lt;- trans2tra(tmat)
tgetm &lt;- msdata2etm(tglong, id="id")
tgetm &lt;- msdata2etm(tglong, id="id", covs=c("x1", "x2")) # with covariates
# And back
etm2msdata(tgetm, id="id", tra=tra)
etm2msdata(tgetm, id="id", tra=tra, covs=c("x1", "x2")) # with covariates
</code></pre>


</div>