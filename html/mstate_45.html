<div class="container">

<table style="width: 100%;"><tr>
<td>plot.probtrans</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot method for a probtrans object</h2>

<h3>Description</h3>

<p>Plot method for an object of class 'probtrans'. It plots the transition
probabilities as estimated by <code>probtrans</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'probtrans'
plot(
  x,
  from = 1,
  type = c("filled", "single", "separate", "stacked"),
  ord,
  cols,
  xlab = "Time",
  ylab = "Probability",
  xlim,
  ylim,
  lwd,
  lty,
  cex,
  legend,
  legend.pos = "right",
  bty = "n",
  xaxs = "i",
  yaxs = "i",
  use.ggplot = FALSE,
  conf.int = 0.95,
  conf.type = c("log", "plain", "none"),
  label,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object of class 'probtrans', containing estimated transition
probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>The starting state from which the probabilities are used to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>One of <code>"stacked"</code> (default), <code>"filled"</code>,
<code>"single"</code> or <code>"separate"</code>; in case of <code>"stacked"</code>, the
transition probabilities are stacked and the distance between two adjacent
curves indicates the probability, this is also true for <code>"filled"</code>, but
the space between adjacent curves are filled, in case of <code>"single"</code>,
the probabilities are shown as different curves in a single plot, in case of
<code>"separate"</code>, separate plots are shown for the estimated transition
probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ord</code></td>
<td>
<p>A vector of length equal to the number of states, specifying the
order of plotting in case type=<code>"stacked"</code> or <code>"filled"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>A vector specifying colors for the different transitions;
default is a palette from green to red, when type=<code>"filled"</code> (reordered
according to <code>ord</code>, and 1 (black), otherwise</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>A title for the x-axis; default is <code>"Time"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>A title for the y-axis; default is <code>"Probability"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>The x limits of the plot(s), default is range of time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>The y limits of the plot(s); if ylim is specified for
type="separate", then all plots use the same ylim for y limits</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>The line width, see <code>par</code>; default is 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>The line type, see <code>par</code>; default is 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>Character size, used in text; only used when
type=<code>"stacked"</code> or <code>"filled"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>Character vector of length equal to the number of transitions,
to be used in a legend; if missing, numbers will be used; this and the
legend arguments following are ignored when type="separate"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.pos</code></td>
<td>
<p>The position of the legend, see <code>legend</code>;
default is <code>"topleft"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bty</code></td>
<td>
<p>The box type of the legend, see <code>legend</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxs</code></td>
<td>
<p>See <code>par</code>, default is "i", for type=<code>"stacked"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yaxs</code></td>
<td>
<p>See <code>par</code>, default is "i", for type=<code>"stacked"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.ggplot</code></td>
<td>
<p>Default FALSE, set TRUE for ggplot version of plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>Confidence level (%) from 0-1 for probabilities, 
default is 0.95 (95% CI). Setting to 0 removes the CIs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.type</code></td>
<td>
<p>Type of confidence interval - either "log" or "plain" . See
function details for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>Only relevant for type = "filled" or "stacked", set to 
"annotate" to have state labels on plot, or leave unspecified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to plot</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Regarding confidence intervals: let <code class="reqn">p</code> denote a predicted probability,
<code class="reqn">\sigma</code> its estimated standard error,
and <code class="reqn">z_{\alpha/2}</code> denote the critical value of the standard normal 
distribution at confidence level <code class="reqn">1 - \alpha</code>.
</p>
<p>The confidence interval of type "plain" is then
</p>
<p style="text-align: center;"><code class="reqn">p \pm z_{\alpha/2} * \sigma</code>
</p>

<p>The confidence interval of type "log", based on the Delta method, is then
</p>
<p style="text-align: center;"><code class="reqn">\exp(\log(p) \pm z_{\alpha/2} * \sigma / p)</code>
</p>



<h3>Value</h3>

<p>No return value
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>
<p>Edouard F. Bonneville <a href="mailto:e.f.bonneville@lumc.nl">e.f.bonneville@lumc.nl</a>
</p>


<h3>See Also</h3>

<p><code>probtrans</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# transition matrix for illness-death model
tmat &lt;- trans.illdeath()
# data in wide format, for transition 1 this is dataset E1 of
# Therneau and Grambsch (2000)
tg &lt;- data.frame(illt=c(1,1,6,6,8,9),ills=c(1,0,1,1,0,1),
        dt=c(5,1,9,7,8,12),ds=c(1,1,1,1,1,1),
        x1=c(1,1,1,0,0,0),x2=c(6:1))
# data in long format using msprep
tglong &lt;- msprep(time=c(NA,"illt","dt"),status=c(NA,"ills","ds"),
		data=tg,keep=c("x1","x2"),trans=tmat)
# events
events(tglong)
table(tglong$status,tglong$to,tglong$from)
# expanded covariates
tglong &lt;- expand.covs(tglong,c("x1","x2"))
# Cox model with different covariate
cx &lt;- coxph(Surv(Tstart,Tstop,status)~x1.1+x2.2+strata(trans),
	data=tglong,method="breslow")
summary(cx)
# new data, to check whether results are the same for transition 1 as
# those in appendix E.1 of Therneau and Grambsch (2000)
newdata &lt;- data.frame(trans=1:3,x1.1=c(0,0,0),x2.2=c(0,1,0),strata=1:3)
msf &lt;- msfit(cx,newdata,trans=tmat)
# probtrans
pt &lt;- probtrans(msf,predt=0)
# default plot
plot(pt,ord=c(2,3,1),lwd=2,cex=0.75)
# filled plot
plot(pt,type="filled",ord=c(2,3,1),lwd=2,cex=0.75)
# single plot
plot(pt,type="single",lwd=2,col=rep(1,3),lty=1:3,legend.pos=c(8,1))
# separate plots
par(mfrow=c(2,2))
plot(pt,type="sep",lwd=2)
par(mfrow=c(1,1))

# ggplot version - see vignette for details
library(ggplot2)
plot(pt, ord=c(2,3,1), use.ggplot = TRUE)

</code></pre>


</div>