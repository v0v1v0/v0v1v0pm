<div class="container">

<table style="width: 100%;"><tr>
<td>Cube</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract a MicroStrategy cube into a R Data.Frame</h2>

<h3>Description</h3>

<p>Access, filter, publish, and extract data from MicroStrategy in-memory cubes
</p>
<p>Create a Cube object to load basic information on a cube dataset. Specify subset of cube to
be fetched through apply_filters() and clear_filters(). Fetch dataset through to_dataframe() method.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>connection</code></dt>
<dd>
<p>MicroStrategy connection object</p>
</dd>
<dt><code>cube_id</code></dt>
<dd>
<p>Identifier of a report.</p>
</dd>
<dt><code>parallel</code></dt>
<dd>
<p>If TRUE, downloads cube data asynchronously. FALSE by default.</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>Cube name.</p>
</dd>
<dt><code>owner_id</code></dt>
<dd>
<p>ID of Cube owner.</p>
</dd>
<dt><code>path</code></dt>
<dd>
<p>Exact path of the cube location.</p>
</dd>
<dt><code>last_modified</code></dt>
<dd>
<p>Date of latest Cube modification.</p>
</dd>
<dt><code>size</code></dt>
<dd>
<p>Cube size.</p>
</dd>
<dt><code>status</code></dt>
<dd>
<p>Cube status.</p>
</dd>
<dt><code>attributes</code></dt>
<dd>
<p>Cube attributes.</p>
</dd>
<dt><code>metrics</code></dt>
<dd>
<p>Cube metrics</p>
</dd>
<dt><code>attr_elements</code></dt>
<dd>
<p>Cube attribute elements.</p>
</dd>
<dt><code>selected_attributes</code></dt>
<dd>
<p>Attributes selected for filtering.</p>
</dd>
<dt><code>selected_metrics</code></dt>
<dd>
<p>Metrics selected for filtering.</p>
</dd>
<dt><code>selected_attr_elements</code></dt>
<dd>
<p>Attribute elements selected for filtering.</p>
</dd>
<dt><code>dataframe</code></dt>
<dd>
<p>Dataframe containing data fetched from the Cube.</p>
</dd>
<dt><code>dataframe_list</code></dt>
<dd>
<p>List of dataframes split to match tables in Cube.</p>
</dd>
<dt><code>instance_id</code></dt>
<dd>
<p>Identifier of an instance if cube instance has been already initialized.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>Cube$new()</code></a>
</p>
</li>
<li> <p><a href="#method-to_dataframe"><code>Cube$to_dataframe()</code></a>
</p>
</li>
<li> <p><a href="#method-apply_filters"><code>Cube$apply_filters()</code></a>
</p>
</li>
<li> <p><a href="#method-clear_filters"><code>Cube$clear_filters()</code></a>
</p>
</li>
<li> <p><a href="#method-get_attr_elements"><code>Cube$get_attr_elements()</code></a>
</p>
</li>
<li> <p><a href="#method-update"><code>Cube$update()</code></a>
</p>
</li>
<li> <p><a href="#method-save_as"><code>Cube$save_as()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>Cube$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialize an instance of a cube.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$new(connection, cube_id, instance_id = NULL, parallel = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>connection</code></dt>
<dd>
<p>MicroStrategy connection object. See Connection class.</p>
</dd>
<dt><code>cube_id</code></dt>
<dd>
<p>Identifier of a pre-existing cube containing the required data.</p>
</dd>
<dt><code>instance_id</code></dt>
<dd>
<p>Identifier of an instance if cube instance has been already initialized, NULL by default.</p>
</dd>
<dt><code>parallel</code></dt>
<dd>
<p>(bool, optional):  If True, utilize optimal number of threads to increase the download
speed. If False (default), this feature will be disabled.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-to_dataframe"></a>



<h4>Method <code>to_dataframe()</code>
</h4>

<p>Extract contents of a cube into a R Data Frame.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$to_dataframe(limit = NULL, multi_df = FALSE, callback = function(x, y) {
})</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>limit</code></dt>
<dd>
<p>(int, optional): Used to control data extraction behaviour on cubes with a large number of rows. By
default the limit is calculated automatically. If TRUE, overrides automatic limit.</p>
</dd>
<dt><code>multi_df</code></dt>
<dd>
<p>If True (default), returns a list of dataframes resembling the table structure of the cube. If
FALSE, returns one dataframe.</p>
</dd>
<dt><code>callback</code></dt>
<dd>
<p>used by the GUI to extract the progress information.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Dataframe with data fetched from the given Cube.
</p>


<hr>
<a id="method-apply_filters"></a>



<h4>Method <code>apply_filters()</code>
</h4>

<p>Apply filters on the cube data so only the chosen attributes, metrics, and attribute elements are
retrieved from the Intelligence Server.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$apply_filters(
  attributes = NULL,
  metrics = NULL,
  attr_elements = NULL,
  operator = "In"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>attributes</code></dt>
<dd>
<p>(list or None, optional): ID numbers of attributes to be included in the filter. If list is
empty, no attributes will be selected and metric data will be aggregated.</p>
</dd>
<dt><code>metrics</code></dt>
<dd>
<p>(list or None, optional): ID numbers of metrics to be included in the filter. If list is empty,
no metrics will be selected.</p>
</dd>
<dt><code>attr_elements</code></dt>
<dd>
<p>(list or None, optional): Attributes' elements to be included in the filter.</p>
</dd>
<dt><code>operator</code></dt>
<dd>
<p>(character, optional): Supported view filter operators are either "In" or "NotIn". This defines
whether data will include ("In") or exclude ("NotIn") the supplied attr_elements values.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-clear_filters"></a>



<h4>Method <code>clear_filters()</code>
</h4>

<p>Clear previously set filters, allowing all attributes, metrics, and attribute elements to be retrieved.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$clear_filters()</pre></div>


<hr>
<a id="method-get_attr_elements"></a>



<h4>Method <code>get_attr_elements()</code>
</h4>

<p>Load all attribute elements of the Cube. Accessible via Cube$attr_elements
Fetching attriubte elements will also allow for validating attriute elements by the filter object.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$get_attr_elements(limit = 50000, verbose = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>verbose</code></dt>
<dd>
<p>If TRUE, displays list of attribute elements.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-update"></a>



<h4>Method <code>update()</code>
</h4>

<p>Update single-table cube easily with the data frame stored in the Cube instance (cube$dataframe).
Before the update, make sure that the data frame has been modified.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$update(update_policy = "update")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>update_policy</code></dt>
<dd>
<p>(character) Update operation to perform. One of 'add' (inserts new, unique rows), 'update'
(updates data in existing rows and columns), 'upsert' (updates existing data and inserts new rows), or 'replace'
(replaces the existing data with new data).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-save_as"></a>



<h4>Method <code>save_as()</code>
</h4>

<p>Creates a new single-table cube with the data frame stored in the Cube instance (cube$dataframe).
Before the update, make sure that the data exists.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$save_as(name, description = NULL, folder_id = NULL, table_name = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>(character): Name of the dataset. Must be less than or equal to 250 characters.</p>
</dd>
<dt><code>description</code></dt>
<dd>
<p>(character, optional): Description of the dataset. Must be less than or equal to 250 characters.</p>
</dd>
<dt><code>folder_id</code></dt>
<dd>
<p>ID of the shared folder that the dataset should be created within. If 'None',
defaults to the user's My Reports folder.</p>
</dd>
<dt><code>table_name</code></dt>
<dd>
<p>(character, optional) Name of the table. If NULL, the first table name of the original cube will
be used.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Cube$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Create a connection object.
connection = Connection$new(base_url, username, password, project_name)

# Create a cube object.
my_cube &lt;- Cube$new(connection=conn, cube_id="...")

# See attributes and metrics in the report.
my_cube$attributes
my_cube$metrics
my_cube$attr_elements

# Specify attributes and metrics (columns) to be fetched.
my_cube$apply_filters(attributes = my_report$attributes[1:2],
                         metrics = my_report$metrics[1:2])

# See the selection of attributes, metrics and attribute elements.
my_cube$selected_attributes
my_cube$selected_metrics
my_cube$selected_attr_elements

# Clear filtering to load a full dataset.
my_cube$clear_filters()

# Fetch data from the Intelligence Server.
my_cube$to_dataframe()

# See the dataframe.
my_cube$dataframe

## End(Not run)
</code></pre>


</div>