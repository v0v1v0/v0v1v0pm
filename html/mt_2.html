<div class="container">

<table style="width: 100%;"><tr>
<td>accest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate Classification Accuracy By Resampling Method</h2>

<h3>Description</h3>

<p>Estimate classification accuracy rate by resampling method. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">accest(dat, ...)

## Default S3 method:
accest(dat, cl, method, pred.func=predict,pars = valipars(), 
       tr.idx = NULL, ...) 

## S3 method for class 'formula'
accest(formula, data = NULL, ..., subset, na.action = na.omit)

aam.cl(x,y,method, pars = valipars(),...)

aam.mcl(x,y,method, pars = valipars(),...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>A formula of the form <code>groups ~ x1 + x2 + ...</code>  That is, the
response is the grouping factor and the right hand side specifies
the (non-factor) discriminators.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data frame from which variables specified in <code>formula</code> are
preferentially to be taken.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat,x</code></td>
<td>

<p>A matrix or data frame containing the explanatory variables if no
formula is given as the principal argument.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl,y</code></td>
<td>

<p>A factor specifying the class for each observation if no formula
principal argument is given.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>Classification method whose accuracy rate is to be estimated, such as 
<code>randomForest</code>, <code>svm</code>, <code>knn</code> and <code>lda</code>. 
For details, see <code>note</code> below. Either a function or a character 
string naming the function to be called.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred.func</code></td>
<td>

<p>Predict method (default is <code>predict</code>). Either a function or a
character string naming the function to be called.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>

<p>A list of parameters using by the resampling method such as 
<em>Leave-one-out cross-validation</em>, <em>Cross-validation</em>, 
<em>Bootstrap</em> and <em>Randomised validation (holdout)</em>.
See <code>valipars</code> for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tr.idx</code></td>
<td>

<p>User defined index of training samples. Can be generated by <code>trainind</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to <code>method</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>Optional vector, specifying a subset of observations to be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>

<p>Function which indicates what should happen when the data
contains <code>NA</code>'s, defaults to <code>na.omit</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The accuracy rates of classification are estimated by techniques such
as <em>Random Forest</em>, <em>Support Vector Machine</em>,
<em>k-Nearest Neighbour Classification</em> and <em>Linear
Discriminant Analysis</em> based on resampling methods, including
<em>Leave-one-out cross-validation</em>, <em>Cross-validation</em>,
<em>Bootstrap</em> and <em>Randomised validation (holdout)</em>.
</p>


<h3>Value</h3>

<p><code>accest</code> returns an object including the components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Classification method used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc</code></td>
<td>
<p>Overall accuracy rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc.iter</code></td>
<td>
<p>Average accuracy rate for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc.all</code></td>
<td>
<p>Accuracy rate for each iteration and replication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc</code></td>
<td>
<p>Overall area under receiver operating curve (AUC).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc.iter</code></td>
<td>
<p>Average AUC for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc.all</code></td>
<td>
<p>AUC for each iteration and replication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>Overall prediction margin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar.iter</code></td>
<td>
<p>Average prediction margin for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar.all</code></td>
<td>
<p>Prediction margin for each iteration and replication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err</code></td>
<td>
<p>Overall error rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err.iter</code></td>
<td>
<p>Average error rate for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err.all</code></td>
<td>
<p>Error rate for each iteration and replication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampling</code></td>
<td>
<p>Sampling scheme used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niter</code></td>
<td>
<p>Number of iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nreps</code></td>
<td>
<p>Number of replications in each iteration if resampling is 
not <code>loocv</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>Overall confusion matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res.all</code></td>
<td>
<p>All results which can be further processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acc.boot</code></td>
<td>
<p> A list of bootstrap accuracy such as <code>.632</code> and
<code>.632+</code> if the resampling method is bootstrap.
</p>
</td>
</tr>
</table>
<p><code>aam.cl</code> returns a vector with <code>acc</code> (accuracy), 
<code>auc</code>(area under ROC curve) and <code>mar</code>(class margin).
</p>
<p><code>aam.mcl</code> returns a matrix with columns of <code>acc</code> (accuracy), 
<code>auc</code>(area under ROC curve) and <code>mar</code>(class margin).
</p>


<h3>Note</h3>

<p>The <code>accest</code> can take any classification models if their argument
format is <code>model(formula, data, subset, na.action, ...)</code> and
their corresponding method <code>predict.model(object, newdata, ...)</code>
can either return the only predicted class label or a list with a
component called <code>class</code>, such as <code>lda</code> and <code>pcalda</code>.
</p>
<p>If classifier <code>method</code> provides posterior probabilities, the
prediction margin <code>mar</code> will be generated, otherwise <code>NULL</code>.
</p>
<p>If classifier <code>method</code> provides posterior probabilities and the
classification is for two-class problem, <code>auc</code> will be generated,
otherwise <code>NULL</code>.
</p>
<p><code>aam.cl</code> is a wrapper function of <code>accest</code>, returning
accuracy rate, AUC and classification margin. <code>aam.mcl</code> accepts
multiple classifiers in one running.
</p>


<h3>Author(s)</h3>

<p>Wanchang Lin
</p>


<h3>See Also</h3>

<p><code>binest</code>, <code>maccest</code>, <code>valipars</code>, 
<code>trainind</code>, <code>classifier</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Iris data
data(iris)
# Use KNN classifier and bootstrap for resampling
acc &lt;- accest(Species~., data = iris, method = "knn",
              pars = valipars(sampling = "boot",niter = 2, nreps=5))
acc
summary(acc)
acc$acc.boot

# alternatively the traditional interface:
x &lt;- subset(iris, select = -Species)
y &lt;- iris$Species

## -----------------------------------------------------------------------
# Random Forest with 5-fold stratified cv 
pars   &lt;- valipars(sampling = "cv",niter = 4, nreps=5, strat=TRUE)
tr.idx &lt;- trainind(y,pars=pars)
acc1   &lt;- accest(x, y, method = "randomForest", pars = pars, tr.idx=tr.idx)
acc1
summary(acc1)
# plot the accuracy in each iteration
plot(acc1)

## -----------------------------------------------------------------------
# Forensic Glass data in chap.12 of MASS
data(fgl, package = "MASS")    # in MASS package
# Randomised validation (holdout) of SVM for fgl data
acc2 &lt;- accest(type~., data = fgl, method = "svm", cost = 100, gamma = 1, 
              pars = valipars(sampling = "rand",niter = 10, nreps=4,div = 2/3) )
              
acc2
summary(acc2)
# plot the accuracy in each iteration
plot(acc2)

## -----------------------------------------------------------------------
## Examples of amm.cl and aam.mcl
aam.1 &lt;- aam.cl(x,y,method="svm",pars=pars)
aam.2 &lt;- aam.mcl(x,y,method=c("svm","randomForest"),pars=pars)

## If use two classes, AUC will be calculated
idx &lt;- (y == "setosa")
aam.3 &lt;- aam.cl(x[!idx,],factor(y[!idx]),method="svm",pars=pars)
aam.4 &lt;- aam.mcl(x[!idx,],factor(y[!idx]),method=c("svm","randomForest"),pars=pars)

</code></pre>


</div>