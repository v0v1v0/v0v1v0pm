<div class="container">

<table style="width: 100%;"><tr>
<td>frankvali</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Estimates Feature Ranking Error Rate with Resampling
</h2>

<h3>Description</h3>

<p>Estimates error rate of feature ranking with resampling methods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">frankvali(dat, ...)
## Default S3 method:
frankvali(dat,cl,cl.method = "svm", fs.method="fs.auc",
          fs.order=NULL, fs.len="power2", pars = valipars(),
          tr.idx=NULL,...)

## S3 method for class 'formula'
frankvali(formula, data = NULL, ..., subset, na.action = na.omit)

fs.cl(dat,cl,fs.order=colnames(dat), fs.len=1:ncol(dat), 
      cl.method = "svm", pars = valipars(), all.fs=FALSE, ...)
        
fs.cl.1(dat,cl,fs.order=colnames(dat), cl.method = "svm", 
        pars = valipars(), agg_f=FALSE,...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>A formula of the form <code>groups ~ x1 + x2 + ...</code>  That is, the
response is the grouping factor and the right hand side specifies
the (non-factor) discriminators.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data frame from which variables specified in <code>formula</code> are
preferentially to be taken.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>

<p>A matrix or data frame containing the explanatory variables if no formula is
given as the principal argument.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl</code></td>
<td>

<p>A factor specifying the class for each observation if no formula principal 
argument is given.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl.method</code></td>
<td>

<p>Classification method to be used. Any classification methods can be employed 
if they have method <code>predict</code> (except <code>knn</code>) with output of predicted class
label or one component with name of <code>class</code> in the returned list, such as 
<code>randomForest</code>, <code>svm</code>, <code>knn</code> and <code>lda</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.method</code></td>
<td>

<p>Feature ranking method to be used.  If <code>fs.order</code> is not <code>NULL</code>, it will be
overridden. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.order</code></td>
<td>

<p>A vector of ordered feature order. In <code>frankvali</code> its default is <code>NULL</code> and then the 
feature selection will be performed on the training data. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.len</code></td>
<td>

<p>Feature length used for validation. For details, see <code>get.fs.len</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>

<p>A list of resampling scheme method such as <em>Cross-validation</em>,
<em>Stratified cross-validation</em>, <em>Leave-one-out cross-validation</em>, 
<em>Randomised validation (holdout)</em>, <em>Bootstrap</em>, <em>.632 bootstrap</em>
and <em>.632 plus bootstrap</em>, and control parameters for the calculation of accuracy. 
See <code>valipars</code> for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tr.idx</code></td>
<td>

<p>User defined index of training samples. Can be generated by <code>trainind</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all.fs</code></td>
<td>
 
<p>A logical value indicating whether all features should be used for evaluation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agg_f</code></td>
<td>
 
<p>A logical value indicating whether aggregated features should be used for 
evaluation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to <code>fs.method</code> or <code>cl.method</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>Optional vector, specifying a subset of observations to be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>

<p>Function which indicates what should happen when the data
contains <code>NA</code>'s, defaults to <code>na.omit</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions validate the selected feature subsets by classification and resampling methods.  
</p>
<p>It can take any classification model if its argument format 
is <code>model(formula, data, subset, ...)</code> and their corresponding 
method <code>predict.model(object, newdata, ...)</code> can either return the only 
predicted class label or in a list with name as <code>class</code>, such as 
<code>lda</code> and <code>pcalda</code>.  
</p>
<p>The resampling method can be one of <code>cv</code>, <code>scv</code>, <code>loocv</code>, 
<code>boot</code>, <code>632b</code> and <code>632pb</code>.
</p>
<p>The feature ranking method can take one of <code>fs.rf</code>, <code>fs.auc</code>, <code>fs.welch</code>, 
<code>fs.anova</code>, <code>fs.bw</code>, <code>fs.snr</code>, <code>fs.kruskal</code>, <code>fs.relief</code> and <code>fs.rfe</code>. 
</p>


<h3>Value</h3>

<p><code>frankvali</code> returns an object of class including the components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>fs.method</code></td>
<td>
<p>Feature ranking method used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl.method</code></td>
<td>
<p>Classification method used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.len</code></td>
<td>
<p>Feature lengths used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.rank</code></td>
<td>
<p>Final feature ranking. It is obtained based on <code>fs.list</code>
by Borda vote method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err.all</code></td>
<td>
<p>Error rate for all computation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err.iter</code></td>
<td>
<p>Error rate for each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err.avg</code></td>
<td>
<p>Average error rate for all iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampling</code></td>
<td>
<p>Sampling scheme used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niter</code></td>
<td>
<p>Number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nboot</code></td>
<td>

<p>Number of bootstrap replications if the sampling method is 
one of <code>boot</code>, <code>632b</code> and <code>632pb</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold</code></td>
<td>
<p>Fold of cross-validations if the sampling is <code>cv</code> or <code>scv</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrand</code></td>
<td>
<p>Number of replications if the sampling is <code>random</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs.list</code></td>
<td>
<p>Feature list of all computation if <code>fs.order</code> is <code>NULL</code>.</p>
</td>
</tr>
</table>
<p><code>fs.cl</code> and <code>fs.cl.1</code> return a matrix with columns of <code>acc</code> (accuracy), 
<code>auc</code>(area under ROC curve) and <code>mar</code>(class margin).
</p>


<h3>Note</h3>

<p><code>fs.cl</code> is the simplified version of <code>frankvali</code>. Both <code>frankvali</code>
and <code>fs.cl</code> are used for validation of aggregated features from top to
bottom only, but <code>fs.cl.1</code> can be used for validation of either individual 
or aggregated features.
</p>


<h3>Author(s)</h3>

<p>Wanchang Lin 
</p>


<h3>See Also</h3>

<p><code>feat.rank.re</code>, <code>frank.err</code>, <code>valipars</code>, 
<code>boxplot.frankvali</code>, <code>get.fs.len</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(abr1)
dat &lt;- abr1$pos
x   &lt;- preproc(dat[,110:500], method="log10")  
y   &lt;- factor(abr1$fact$class)        

dat &lt;- dat.sel(x, y, choices=c("1","2"))
x.1 &lt;- dat[[1]]$dat
y.1 &lt;- dat[[1]]$cls

len  &lt;- c(1:20,seq(25,50,5),seq(60,90,10),seq(100,300,50))
pars &lt;- valipars(sampling="boot",niter=2, nreps=4)
res  &lt;- frankvali(x.1,y.1,cl.method = "knn", fs.method="fs.auc",
                  fs.len=len, pars = pars)
res
summary(res)
boxplot(res)  

## Not run: 
## or apply feature selection with re-sampling procedure at first
fs  &lt;- feat.rank.re(x.1,y.1,method="fs.auc",pars = pars)

## then estimate error of feature selection.
res.1  &lt;- frankvali(x.1,y.1,cl.method = "knn", fs.order=fs$fs.order,
                    fs.len=len, pars = pars)
res.1

## use formula
data.bin &lt;- data.frame(y.1,x.1)

pars &lt;- valipars(sampling="cv",niter=2,nreps=4)
res.2  &lt;- frankvali(y.1~., data=data.bin,fs.method="fs.rfe",fs.len=len, 
                    cl.method = "knn",pars = pars)
res.2

## examples of fs.cl and fs.cl.1
fs &lt;- fs.rf(x.1, y.1)
res.3 &lt;- fs.cl(x.1,y.1,fs.order=fs$fs.order, fs.len=len,
               cl.method = "svm", pars = pars, all.fs=TRUE)

ord &lt;- fs$fs.order[1:50]
## aggregated features
res.4 &lt;- fs.cl.1(x.1,y.1,fs.order=ord, cl.method = "svm", pars = pars,
                 agg_f=TRUE)
               
## individual feature
res.5 &lt;- fs.cl.1(x.1,y.1,fs.order=ord, cl.method = "svm", pars = pars,
                 agg_f=FALSE)
                 

## End(Not run)
</code></pre>


</div>