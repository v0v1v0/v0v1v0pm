<div class="container">

<table style="width: 100%;"><tr>
<td>mlpsa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>This function will perform phase II of the multilevel propensity score analysis.</h2>

<h3>Description</h3>

<p>TODO: Need more details
</p>


<h3>Usage</h3>

<pre><code class="language-R">mlpsa(response, treatment = NULL, strata = NULL, level2 = NULL,
  minN = 5, reverse = FALSE, ci.level = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>vector containing the response values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>vector containing the treatment conditions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>vector containing the strata for each response</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level2</code></td>
<td>
<p>vector containing the level 2 specifications</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minN</code></td>
<td>
<p>the minimum number of subjects per strata for that strata to be 
included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>reverse the order of treatment and control for the difference
calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.level</code></td>
<td>
<p>the confidence level to use for confidence intervals. Defaults
to a 95% confidence level.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The ci.adjust provides a Bonferroni-Sidak adjusted confidence intervals based
on the number of levels/clusters.
</p>


<h3>Value</h3>

<p>a mlpsa class
</p>


<h3>See Also</h3>

<p><code>mlpsa.ctree</code> <code>mlpsa.logistic</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
require(multilevelPSA)
require(party)
data(pisana)
data(pisa.colnames)
data(pisa.psa.cols)
mlctree = mlpsa.ctree(pisana[,c('CNT','PUBPRIV',pisa.psa.cols)], formula=PUBPRIV ~ ., level2='CNT')
student.party = getStrata(mlctree, pisana, level2='CNT')
student.party$mathscore = apply(student.party[,paste0('PV', 1:5, 'MATH')], 1, sum) / 5
results.psa.math = mlpsa(response=student.party$mathscore, 
       treatment=student.party$PUBPRIV, 
       strata=student.party$strata, 
       level2=student.party$CNT, minN=5)
results.psa.math
summary(results.psa.math)

## End(Not run)
</code></pre>


</div>