<div class="container">

<table style="width: 100%;"><tr>
<td>acfByID</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the autocorrelation by unit (ID)</h2>

<h3>Description</h3>

<p>This function estimates the autocorrelation over time in a time
series by a higher level unit, given by ID.
</p>


<h3>Usage</h3>

<pre><code class="language-R">acfByID(
  xvar,
  timevar,
  idvar,
  data,
  lag.max = 10L,
  na.function = c("na.approx", "na.spline", "na.locf"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xvar</code></td>
<td>
<p>A character string giving the variable name of
the variable to calculate autocorrelations on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timevar</code></td>
<td>
<p>A character string giving the variable name of
the time variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvar</code></td>
<td>
<p>A character string giving the variable name of
the ID variable.  Can be missing if only one time series
provided, in which case one will be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.table containing the variables
used in the formula.  This is a required argument.
If a data.frame, it will silently coerce to a data.table.
If not a data.table or data.frame, it will attempt to coerce,
with a message.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag.max</code></td>
<td>
<p>An integer of the maximum lag to estimate. Must be
equal to or greater than the number of observations
for all IDs in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.function</code></td>
<td>
<p>A character string giving the name of the function
to use to address any missing data.  Functions come from the
<span class="pkg">zoo</span> package, and must be one of:
“na.approx”, “na.spline”, “na.locf”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>zoo</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data.table of the estimated autocorrelations by ID and lag
</p>


<h3>Examples</h3>

<pre><code class="language-R">## example 1
dat &lt;- data.table::data.table(
  x = sin(1:30),
  time = 1:30,
  id = 1)
acfByID("x", "time", "id", data = dat)

## example 2
dat2 &lt;- data.table::data.table(
  x = c(sin(1:30), sin((1:30)/10)),
  time = c(1:30, 1:30),
  id = rep(1:2, each = 30))
dat2$x[4] &lt;- NA

res &lt;- acfByID("x", "time", "id", data = dat2, na.function = "na.approx")

ggplot2::ggplot(res, ggplot2::aes(factor(Lag), AutoCorrelation)) +
  ggplot2::geom_boxplot()

## clean up
rm(dat, dat2, res)
</code></pre>


</div>