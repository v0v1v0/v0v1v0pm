<div class="container">

<table style="width: 100%;"><tr>
<td>complr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Indices from a (dataset of) Multilevel Composition(s)</h2>

<h3>Description</h3>

<p>Compute sets of compositions and log ratio transformation for multilevel compositional data
</p>


<h3>Usage</h3>

<pre><code class="language-R">complr(data, parts, sbp = NULL, total = 1, idvar = NULL, transform = "ilr")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> or <code>data.table</code>
containing data of all variables used in the analysis.
It must include a composition and a ID variable. Required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parts</code></td>
<td>
<p>A character vector specifying the names of compositional variables to be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sbp</code></td>
<td>
<p>A signary matrix indicating sequential binary partition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total</code></td>
<td>
<p>A numeric value of the total amount to which the compositions should be closed.
Default is <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvar</code></td>
<td>
<p>Only for multilevel data, a character string specifying the name of the variable containing IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>A character value naming a log ratio transformation to be applied on compositional data.
Can be either <code>"ilr"</code> (isometric logratio), <code>"alr"</code> (additive logratio), or <code>"clr"</code> (centered logratio).
Default is <code>"ilr"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <em>ilr</em>-transform maps the D-part compositional data from the simplex into non-overlapping
subgroups in the (D-1)-dimension Euclidean space isometrically by using an orthonormal basis,
thereby preserving the compositional properties and yielding a full-rank covariance matrix.
<em>ilr</em> transformation should be preferred.
However, the <em>alr</em> and <em>clr</em> are alternatives.
The <em>alr</em>-transform maps a D-part composition
in the Aitchison-simplex non-isometrically to a
(D-1)-dimension Euclidian vectors,
commonly treating the last part as the common denominator of the others.
<em>alr</em> transformation does not rely on distance which breaks
the constraint of compositional data.
<em>clr</em>-transform maps a D-part composition in the Aitchison-simplex
isometrically to a D-dimensional Euclidian vector subspace.
<em>clr</em> transformation is not injetive,
resulting in singular covariance matrices.
</p>


<h3>Value</h3>

<p>A <code>complr</code> object with at least the following elements.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>comp</code></td>
<td>
<p> A vector of class <code>acomp</code> representing one closed composition
or a matrix of class <code>acomp</code> representing multiple closed  compositions each in one row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>between_comp</code></td>
<td>
<p> A vector of class <code>acomp</code> representing one closed between-person composition
or a matrix of class <code>acomp</code> representing multiple closed between-person compositions each in one row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>within_comp</code></td>
<td>
<p> A vector of class <code>acomp</code> representing one closed within-person composition
or a matrix of class <code>acomp</code> representing multiple closed within-person compositions each in one row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logratio</code></td>
<td>
<p> Log ratio transform of composition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>between_logratio</code></td>
<td>
<p> Log ratio transform of between-person composition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>within_logratio</code></td>
<td>
<p> Log ratio transform of within-person composition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p> The user's dataset or imputed dataset if the input data contains zeros.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p> Type of transform applied on compositional data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parts</code></td>
<td>
<p> Names of compositional variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvar</code></td>
<td>
<p> Name of the variable containing IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total</code></td>
<td>
<p> Total amount to which the compositions is closed.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">cilr &lt;- complr(data = mcompd, sbp = sbp,
                parts = c("TST", "WAKE", "MVPA", "LPA", "SB"),
                idvar = "ID", total = 1440)
str(cilr)

calr &lt;- complr(data = mcompd, sbp = sbp,
                parts = c("TST", "WAKE", "MVPA", "LPA", "SB"),
                idvar = "ID",
                transform = "alr")
str(calr)

cclr &lt;- complr(data = mcompd, sbp = sbp,
                parts = c("TST", "WAKE", "MVPA", "LPA", "SB"),
                idvar = "ID",
                 transform = "clr")
str(cclr)

cilr_wide &lt;- complr(data = mcompd[!duplicated(ID)], sbp = sbp,
                parts = c("TST", "WAKE", "MVPA", "LPA", "SB"))
str(cilr_wide)
</code></pre>


</div>