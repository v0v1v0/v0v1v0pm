<div class="container">

<table style="width: 100%;"><tr>
<td>bootresid.modmed.mlm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Custom function for residual bootstrap for (moderated) multilevel mediation</h2>

<h3>Description</h3>

<p>Custom function for residual bootstrap for (moderated) multilevel mediation
</p>


<h3>Usage</h3>

<pre><code class="language-R">bootresid.modmed.mlm(
  data,
  L2ID,
  R = 1000,
  X,
  Y,
  M,
  moderator = NULL,
  covars.m = NULL,
  covars.y = NULL,
  ...,
  type = "all",
  modval1 = NULL,
  modval2 = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame in long format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L2ID</code></td>
<td>
<p>Name of column that contains grouping variable in 'data' (e.g., "SubjectID")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>Number of resamples</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>(Character) Name of column that contains the X independent variable in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>(Character) Name of column that contains the Y dependent variable in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>(Character) Name of column that contains the M mediating variable in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>moderator</code></td>
<td>
<p>Optional Character that contains name of column that contains the moderator variable in <code>data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covars.m</code></td>
<td>
<p>(Character vector) Optional covariates to include in the model for M.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covars.y</code></td>
<td>
<p>(Character vector) Optional covariates to include in the model for Y.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>modmed.mlm</code> to define the mediation analysis model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character that defines what information to extract from the model. Default and options are in <code>extract.modmed.mlm</code>.
As examples, "indirect" will compute the indirect effect, "all" will save all random and fixed effects for possible additional
computations, "indirect.diff" will compute the difference in the indirect effect at two values of a possible moderating variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modval1</code></td>
<td>
<p>(Optional) Numeric. If the model has a moderator, this value will be passed to <code>extract.modmed.mlm</code>
to compute the indirect effect or other effects at that value. See <code>extract.modmed.mlm</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modval2</code></td>
<td>
<p>(Optional). If the model has a moderator, it is possible to compute the difference in the indirect
at two values of the moderator. If given and an appropriate option for such a difference is chosen for <code>type</code>,
this value and that of <code>modval1</code> will be passed to <code>extract.modmed.mlm</code> to compute and save the difference.
This is useful for obtaining a CI for the difference in the indirect effect at two different levels of the moderator.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function restructures data following Bauer, Pearcher, &amp; Gil (2006) and then conducts residual-based
bootstrapping in order to later obtain confidence intervals for the indirect effect and other coefficients.
The residual-based bootstrap is described in Falk, Vogel, Hammami, &amp; Miočević's manuscript (in press), but
generally follows the procedure by Carpenter, Goldstein, &amp; Rashbash (2003; See also Lai, 2021). Currently this function
does not support parallel processing. See the newer <code>boot.modmed.mlm.custom</code> version for a re-write that does.
</p>


<h3>Value</h3>

<p>A list with the following elements. Note that <code>t0</code> and <code>t</code> are intended to trick the <code>boot</code>
package into working with some if its functions.
</p>

<ul>
<li>
<p><code>t0</code> Parameter estimates based on the dataset.
</p>
</li>
<li>
<p><code>t</code> Bootstrap distribution of all parameter estimates.
</p>
</li>
<li>
<p><code>model</code> Fitted model to restructured data as one would obtain from <code>modmed.mlm</code>.
</p>
</li>
<li>
<p><code>call</code> Call/arguments used when invoking this function. Useful for later extracting things like indirect effect.
</p>
</li>
</ul>
<h3>References</h3>

<p>Bauer, D. J., Preacher, K. J., &amp; Gil, K. M. (2006). Conceptualizing and testing random indirect		effects and moderated mediation in multilevel models: new procedures and	recommendations. Psychological Methods, 11(2), 142-163. <a href="https://doi.org/10.1037/1082-989X.11.2.142">doi:10.1037/1082-989X.11.2.142</a>
</p>
<p>Carpenter, J. R., Goldstein, H., &amp; Rasbash, J. (2003). A novel bootstrap procedure for assessing the relationship between class size and achievement. Applied Statistics, 52(4), 431-443.
</p>
<p>Falk, C. F., Vogel, T., Hammami, S., &amp; Miočević, M. (in press). Multilevel mediation analysis in R: A comparison of bootstrap and Bayesian approaches. Behavior Research Methods. <a href="https://doi.org/10.3758/s13428-023-02079-4">doi:10.3758/s13428-023-02079-4</a>  Preprint: <a href="https://doi.org/10.31234/osf.io/ync34">doi:10.31234/osf.io/ync34</a>
</p>
<p>Lai, M. (2021). Bootstrap confidence intervals for multilevel standardized effect size. Multivariate Behavioral Research, 56(4), 558-578. <a href="https://doi.org/10.1080/00273171.2020.1746902">doi:10.1080/00273171.2020.1746902</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Example data for 1-1-1 w/o moderation
data(BPG06dat)

# Note that R should be set to something MUCH larger, such as 1000 or greater.
# A low number here is chosen only so testing this example code goes relatively
# quickly
bootresid &lt;- bootresid.modmed.mlm(BPG06dat,L2ID="id", X="x", Y="y", M="m",
  R=5, random.a=TRUE, random.b=TRUE, random.cprime=TRUE,
  control=list(opt="nlm")
  )

extract.boot.modmed.mlm(bootresid, type="indirect")



</code></pre>


</div>