<div class="container">

<table style="width: 100%;"><tr>
<td>multi_panel_figure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>multi_panel_figure</h2>

<h3>Description</h3>

<p>A convenience function building <code>gtable</code>-based
infrastructure for the assembly of multipanel figures.
</p>


<h3>Usage</h3>

<pre><code class="language-R">multi_panel_figure(
  width = "auto",
  columns = NULL,
  height = "auto",
  rows = NULL,
  row_spacing = NaN,
  column_spacing = NaN,
  unit = "mm",
  figure_name = "FigureX",
  panel_label_type = c("upper-alpha", "lower-alpha", "decimal", "upper-roman",
    "lower-roman", "upper-greek", "lower-greek", "none"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p><code>numeric</code> or <code>link[grid]{unit}</code> defining the
width(s) of the resulting <code>gtable</code> if
<code>length(width) == 1</code> or individual column widths. Units depends on
<code>unit</code> if not provided as <code>unit</code> object. The default
'<code>auto</code>' sets the parameter to the width of the currently used device.
See 'Details' for dependent and interfering parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>Single <code>numeric</code> defining the number of columns in
the resulting <code>gtable</code>. See 'Details' for dependent and
interfering parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p><code>numeric</code> or <code>link[grid]{unit}</code> defining the
height of the resulting <code>gtable</code> if
<code>length(height) == 1</code> or individual row heights.nits depends on
<code>unit</code> if not provided as <code>unit</code> object. The default
'<code>auto</code>' sets the parameter to the height of the currently used device.
See 'Details' for dependent and interfering parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p>Single <code>numeric</code> defining the number of rows in
the resulting <code>gtable</code>. See 'Details' for dependent and
interfering parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_spacing</code></td>
<td>
<p><code>numeric</code> or #' <code>unit</code>
defining the amount of white space automatically inserted between row panels.
Defaults to <code>5 mm</code> unless explicitly given, in which case the value may
depend on the <code>unit</code> parameter. Recycled to the number of rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column_spacing</code></td>
<td>
<p><code>numeric</code> or <code>unit</code>
defining the amount of white space automatically inserted between column
panels. Defaults to <code>5 mm</code> unless explicitly given, in which case the
value may depends on the <code>unit</code> parameter. Recycled to the number of
columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>Single <code>character</code> object defining the unit of all
dimensions defined. Must satisfy <code>grid:::valid.units</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>figure_name</code></td>
<td>
<p>Single <code>character</code> object defining the name of
the resulting <code>gtable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel_label_type</code></td>
<td>
<p>A string specifying the marker style for the panel labels
used for automated annotation.  Defaults to uppercase Latin letters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Argument to accomodate deprecated arguments <code>widths</code> and
<code>heights</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>gtable</code> may be constructed in two ways:
</p>

<ol>
<li>
<p>Based on explicit width/height definitions for individual panels.
</p>
</li>
<li>
<p>Based on total figure/<code>gtable</code> dimensions given by
<code>width</code> and <code>height</code> together with the number of <code>columns</code>
and <code>rows</code> requested.</p>
</li>
</ol>
<p>The function automatically inserts whitespace of width
<code>column_spacing</code> before column panels (and of height
<code>row_spacing</code> before row panels), which has to be considered
for the total dimensions of the resulting <code>gtable</code>. Width
of the <code>gtable</code> in the former case, for example may be
calculated
</p>
<p style="text-align: center;"><code class="reqn">W[total] = sum(width) + length(width) * column_spacing</code>
</p>

<p>while width of resulting panels in the latter table construction approach may
be calculated
</p>
<p style="text-align: center;"><code class="reqn">W[panel] = (width - columns * column_spacing) / columns</code>
</p>

<p><code>width</code>, <code>height</code>, <code>column_spacing</code> and
<code>row_spacing</code> may be defined numerically or as
<code>unit</code> objects.
</p>
<p>Earlier implementations used parameters <code>widhts</code> and <code>heights</code> as
synonyms for <code>width</code> and <code>height</code> with length greater than one.
These parameters have been deprecated. They continue to work, but produce
a warning.
</p>
<p>The two approaches to <code>gtable</code> construction require
interdepending parameter sets:
</p>

<dl>
<dt>Individual definition of panel dimensions:</dt>
<dd>
<p>Requires <code>width</code> and
<code>height</code> of lengths corresponding to the number of columns/rows
requested. Excludes the use of <code>columns</code> and <code>rows</code>.</p>
</dd>
<dt>Definition of global <code>gtable</code>/figure dimensions:</dt>
<dd>
<p>Requires <code>width</code>, <code>columns</code>, <code>height</code> and <code>rows</code> of
length 1.</p>
</dd>
</dl>
<h3>Value</h3>

<p>Returns an object of class <code>multipanelfigure</code> as well as
<code>gtable</code> object with the following additional attributes:
</p>

<dl>
<dt>
<code>multipanelfigure.panelsFree</code>:</dt>
<dd>
<p>A <code>logical</code>
<code>matrix</code> with the dimensions of the <code>gtable</code>
indicating occupancy of the panels in the table.</p>
</dd>
<dt>
<code>multipanelfigure.panellabelsfree</code>:</dt>
<dd>
<p>A <code>character</code>
<code>vector</code> indicative of the <code>panel_labels</code> still available.</p>
</dd>
<dt>
<code>multipanelfigure.unit</code>:</dt>
<dd>
<p>A single <code>character</code>
object storing the corresponding value given during object creation.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Johannes Graumann
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code>fill_panel</code> for more examples of filling panels
<code>figure_width</code> for inspecting figure dimensions
<code>capture_base_plot</code> for including plots created using base graphics
<code>gtable</code> for the underlying structure of a figure
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Figure construction based on the dimensions of the current device
figure1 &lt;- multi_panel_figure(
   columns = 2,
   rows = 2,
   figure_name = "figure1")

# With no panels, printing shows the layout
figure1

# Figure construction based on overall dimensions
figure2 &lt;- multi_panel_figure(
   width = 100,
   columns = 4,
   height = 90,
   rows = 6,
   figure_name = "figure2")

# Still no panels ...
figure2

# Figure construction based on individual panel dimensions
(figure3 &lt;- multi_panel_figure(
   width = c(40,30),
   height = c(40,60),
   row_spacing = c(5, 1),
   column_spacing = c(0, 10),
   figure_name = "figure3"))

# A more involved example including filling and printing to device ...
# Make a simple ggplot object to fill panels
ggp &lt;- ggplot2::ggplot(mtcars, ggplot2::aes(wt, mpg)) +
  ggplot2::geom_point()
# Fill panels
# ggplots and lattice plot objects are added directly
# The default position is the top-left panel
figure3 &lt;- fill_panel(figure3, ggp)
# Raster images are added by passing the path to their file
jpg &lt;- system.file("extdata/rhino.jpg", package = "multipanelfigure")
figure3 &lt;- fill_panel(figure3, jpg, column = 2)
# Plots can take up multiple panels
figure3 &lt;- fill_panel(figure3, ggp, row = 2, column = 1:2)
# Plot to appropriately sized png device
tmpFile &lt;- tempfile(fileext = ".png")
ggplot2::ggsave(
  tmpFile, figure3,
  width = figure_width(figure3, "in"),
  height = figure_height(figure3, "in"))
message(
  paste0("Now have a look at '",tmpFile,"' - nicely sized PNG output."))
\donttest{ # Not testing due to use of external software
utils::browseURL(tmpFile)
}

## End(Not run)
</code></pre>


</div>