<div class="container">

<table style="width: 100%;"><tr>
<td>multipleOutcomes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fitting Regression Models for Multiple Outcomes and Returning the Matrix of
Covariance</h2>

<h3>Description</h3>

<p><code>multipleOutcomes</code> can fit different types of models for multiple outcomes
simultaneously and return model parameters and variance-covariance matrix
for further analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">multipleOutcomes(..., family, data, data_index = NULL, score_epsilon = 1e-06)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>formulas of models to be fitted, or moment functions for gmm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>a character vector of families to be used in the models.
Currently only <code>gaussian</code>, <code>binomial</code>, <code>coxph</code> and <code>gmm</code> are supported.
<code>long</code> for longitudinal data may be supported in the future.
<code>family</code> can be of length 1 if all models are fitted in the
same family; otherwise family should be specified for each of the models in <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame if all models are fitted on the same dataset;
otherwise a list of data frames for fitting models in <code>...</code>. Note that a
dataset can be used to fit multiple models, thus, <code>length(data)</code> is unnecessary
to be equal to the number of models in <code>...</code>. The row names in a data frame
are treated as sample IDs. Consequently, for any two records in different
data frames that correspond to the same sample, their row names should be
consistent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_index</code></td>
<td>
<p><code>NULL</code> if <code>data</code> is a data frame; otherwise, a vector in
integer specifying mapping a model in <code>...</code> to a data frame in <code>data</code> (a list).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score_epsilon</code></td>
<td>
<p>whatever.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>It returns an object of class "multipleOutcomes", which is a list
containing the following components:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>coefficients</code> </td>
<td style="text-align: left;"> an unnamed vector of coefficients of all fitted models.
Use <code>id_map</code> for variable mapping. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>mcov</code> </td>
<td style="text-align: left;"> a unnamed matrix of covariance of <code>coefficients</code>. Use <code>id_map</code>
for variable mapping. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>id_map</code> </td>
<td style="text-align: left;"> a list mapping the elements in <code>coefficients</code> and <code>mcov</code> to
variable names. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>n_shared_sample_sizes</code> </td>
<td style="text-align: left;"> a matrix of shared sample sizes between datasets
being used to fit the models. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>call</code> </td>
<td style="text-align: left;"> the matched call.</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## More examples can be found in the vignettes.
library(mvtnorm)
genData &lt;- function(seed = NULL){

  set.seed(seed)
  n &lt;- 400
  sigma &lt;- matrix(c(1, .6, .6, 1), 2)
  x &lt;- rmvnorm(n, sigma = sigma)
  gam &lt;- c(.1, -.2)
  z &lt;- rbinom(n, 1, plogis(1-1/(1+exp(-.5+x%*%gam+.1*rnorm(n)))))

  bet &lt;- c(-.2,.2)
  #y &lt;- rbinom(n, 1, plogis(1-1/(1+exp(-.5+x%*%bet + .2*z-.3*rnorm(n)))))
  y &lt;- -.5+x%*%bet + .2*z-.3*rnorm(n)

  data.frame(y = y, z = z, x1 = x[, 1], x2 = x[, 2])

}

dat &lt;- genData(123456)
dat1 &lt;- head(dat,200)
dat2 &lt;- tail(dat,200)
## fitting four models simultaneously.
fit &lt;-
  multipleOutcomes(
    y ~ z + x1 - 1,
    z ~ x1 + x2,
    z ~ x1 - 1,
    y ~ x2,
    ## z can be fitted with a linear or logistic regression
    family = c('gaussian', 'binomial', 'gaussian','gaussian'),
    data = list(dat1, dat2),
    ## each dataset is used to fit two models
    data_index = c(1, 1, 2, 2)
  )

  ## unnamed coefficients of all model parameters
  coef(fit)

  ## named coefficients of a specific model
  coef(fit, 2)

  ## unnamed covariance matrix of all model parameters
  vcov(fit)

  ## named covariance matrix of a specific model
  vcov(fit, 1)

  ## summary of all parameter estimates
  summary(fit)

  ## summary of parameters in a specific model
  summary(fit, 4)

</code></pre>


</div>