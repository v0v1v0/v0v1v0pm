<div class="container">

<table style="width: 100%;"><tr>
<td>constructModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct an object of class multivar</h2>

<h3>Description</h3>

<p>Construct an object of class multivar
</p>


<h3>Usage</h3>

<pre><code class="language-R">constructModel(
  data = NULL,
  lag = 1,
  horizon = 0,
  t1 = NULL,
  t2 = NULL,
  lambda1 = NULL,
  lambda2 = NULL,
  nlambda1 = 30,
  nlambda2 = 30,
  depth = 1000,
  tol = 1e-04,
  window = 1,
  standardize = T,
  weightest = "lasso",
  canonical = FALSE,
  threshold = FALSE,
  lassotype = "adaptive",
  intercept = FALSE,
  W = NULL,
  ratios = NULL,
  cv = "blocked",
  nfolds = 10,
  thresh = 0,
  lamadapt = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>List. A list (length = k) of T by d multivariate time series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>Numeric. The VAR order. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horizon</code></td>
<td>
<p>Numeric. Desired forecast horizon. Default is 1. ZF Note: Should probably be zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t1</code></td>
<td>
<p>Numeric. Index of time series in which to start cross validation. If NULL, default is floor(nrow(n)/3) where nk is the time series length for individual k.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t2</code></td>
<td>
<p>Numeric. Index of times series in which to end cross validation. If NULL, default is floor(2*nrow(n)/3) where nk is the time series length for individual k.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda1</code></td>
<td>
<p>Matrix. Regularization parameter 1. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda2</code></td>
<td>
<p>Matrix. Regularization parameter 2. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlambda1</code></td>
<td>
<p>Numeric. Number of lambda1 values to search over. Default is 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlambda2</code></td>
<td>
<p>Numeric. Number of lambda2 values to search over. Default is 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>Numeric. Depth of grid construction. Default is 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Numeric. Optimization tolerance (default 1e-4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>Numeric. Size of rolling window.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardize</code></td>
<td>
<p>Logical. Default is true. Whether to standardize the individual data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weightest</code></td>
<td>
<p>Character. Default is "mlr" for multiple linear regression. "sls" for simple linear regression also available. How to estimate the first-stage weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canonical</code></td>
<td>
<p>Logical. Default is false. If true, individual datasets are fit to a VAR(1) model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Logical. Default is false. If true, and canonical is true, individual transition matrices are thresholded based on significance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lassotype</code></td>
<td>
<p>Character. Default is "adaptive". Choices are "standard" or "adaptive" lasso.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intercept</code></td>
<td>
<p>Logical. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>Matrix. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratios</code></td>
<td>
<p>Numeric vector. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv</code></td>
<td>
<p>Character. Default is "rolling" for rolling window cross-validation. "blocked" is also available for blocked folds cross-validation. If "blocked" is selected the nfolds argument should bbe specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfolds</code></td>
<td>
<p>Numeric. The number of folds for use with "blocked" cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p>Numeric. Post-estimation threshold for setting the individual-level coefficients to zero if their absolute value is smaller than the value provided. Default is zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lamadapt</code></td>
<td>
<p>Logical. Should the lambdas be calculated adaptively. Default is FALSE.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
sim  &lt;- multivar_sim(
  k = 2,  # individuals
  d = 3,  # number of variables
  n = 20, # number of timepoints
  prop_fill_com = 0.1, # proportion of paths common
  prop_fill_ind = 0.1, # proportion of paths unique
  lb = 0.1,  # lower bound on coefficient magnitude
  ub = 0.9,  # upper bound on coefficient magnitude
  sigma = diag(3) # noise
)

plot_sim(sim, plot_type = "common")

model &lt;- constructModel(data = sim$data, weightest = "ols")

</code></pre>


</div>