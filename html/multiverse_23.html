<div class="container">

<table style="width: 100%;"><tr>
<td>export_json</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Exporting results from a multiverse analysis to JSON</h2>

<h3>Description</h3>

<p>Exports the results of the multiverse analysis to JSON in a format which is compatible with the multiverse visualisation tool
</p>


<h3>Usage</h3>

<pre><code class="language-R">export_results_json(x, term, mean, sd, dist, filename)

export_results_dist_json(x, term, dist, filename)

export_code_json(x, filename)

export_data_json(x, filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a tidy tibble or data frame which contains summary statistics or distributional information 
of each regression coefficient parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term</code></td>
<td>
<p>column in the data frame, x, which contains the name of the coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>column in the data frame, x, which contains the mean estimate for each coefficient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd</code></td>
<td>
<p>column in the data frame, x, which contains the standard error estimate for each coefficient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>column in the data frame, x, which contains vectorised distributionsâ€”an object of class 
'distribution' for each coefficient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>filename on disk (as a character string)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>## results JSON file schema
It consists of a list of objects (where each object corresponds to one analysis in the multiverse). 
Within this object, the results attribute contains a(nother) list of objects corresponding to each outcome variable. 
For e.g., here we have four coefficients (see the results of the regression model), and thus the results attribute will contain four objects. 
Each object has the following attributes:
- 'term': name of the outcome variable
- 'estimate': mean / median point estimate i.e., <code class="reqn">\mathbb{E}(\mu)</code> for any parameter <code class="reqn">\mu</code>.
- 'std.error': standard error for the point estimate i.e., <code class="reqn">\sqrt{\text{var}(\mu)}</code>
- 'cdf.x': a list of quantiles
- 'cdf.y': a list of cumulative probability density estimates corresponding to the quantiles
</p>
<p>In addition, it also contains the following attributes, but these are not currently used by Milliways:
- 'statistic'
- 'p.value'
- 'conf.low'
- 'conf.high'
</p>
<p>## code JSON file schema
It consists of two attributes: 'code' and 'parameters'. 
'code' is a list of strings consisting of the R and multiverse syntax used to implement the analysis. For readability, we
use [styler] to break up the declared code.
'parameters' is an object listing the parameter names and the corresponding options for each of the parameters declared in the analysis.
</p>
<p>## data JSON file schema
It consists of a list of objects, each with two attributes: 'field' and 'values'. 
'field' is the name of a column corresponding to a variable in the dataset. 
'values' are a list of values for that variable in the dataset.
</p>


<h3>Value</h3>

<p>a JSON file or (if a filepath is not specified) a dataframe for the results file and a list for the code file
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)
library(tidyr)

M = multiverse()

inside(M, {
  df = tibble(
    x = rnorm(100),
    y = x * 0.5 + rnorm(100, 0, 2)
 )
 
 # alternatives to remove outlier
 df.filtered = df %&gt;%
   filter(
     branch(outlier_exclusion,
        "2SD" ~ abs(y - mean(y)) &gt; 2*sd(y),
        "3SD" ~ abs(y - mean(y)) &gt; 3*sd(y)
     )
 )
  
  fit = lm(y ~ x, data = df)
  res = broom::tidy(fit)
})

execute_multiverse(M)

multiverse::expand(M) %&gt;%
  extract_variables(res) %&gt;%
  unnest(res) %&gt;%
  export_results_json(term, estimate, std.error) 
 


</code></pre>


</div>