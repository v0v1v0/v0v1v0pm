<div class="container">

<table style="width: 100%;"><tr>
<td>prepare_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepares the data to be used by the <code>mutual</code> function</h2>

<h3>Description</h3>

<p>Receives the data that is later used in the <code>mutual</code> function.
Generates a <code>data.table</code> with the entry variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepare_data(data, vars, fw = NULL, col.order = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A tabular format object (<code>data.frame</code>, <code>data.table</code>, <code>tibble</code>). The data
expected is microdata or frequency weight data for each combination of variables. The variables must be
of "factor" class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>A vector of variable names or vector of columns numbers contained in <code>data</code>. Also can be
used "all_vars" to select all variables contained in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fw</code></td>
<td>
<p>Variable name or column number contained in <code>data</code> that contains frecuency weight for
each combination of variables of the dataset. If this variable exists then the function will change its
original name to <code>fw</code>. If this variable does not exist or is <code>NULL</code>, then the function will compute the
frecuency weight given the combination of variables of <code>vars</code> and will create a new variable called
<code>fw</code>. By default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.order</code></td>
<td>
<p>A variable name or vector of variables names contained in <code>vars</code>, or a column
number or vector of column numbers contained in <code>vars</code>. Selects the columns to sort the dataset. By
default is <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <code>data.table</code> of class "data.table" "data.frame" "mutual.data".
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Using some variable names in 'data' with explicit 'fw'.
my_data &lt;- prepare_data(data = DF_Seg_Chile, vars = c("csep", "ethnicity", "school", "district"),
fw = "nobs")

# Using some column numbers in 'data' and explicit 'fw' as another column number.
my_data &lt;- prepare_data(data = DF_Seg_Chile, vars = c(4, 5, 2, 3), fw = 11)

# Using all variables of 'data' with explicit 'fw'.
my_data &lt;- prepare_data(data = DF_Seg_Chile, vars = "all_vars", fw = "nobs")

# Using some variable names in 'data' and 'fw' does not exist (in this case, the new 'fw' will
# be equal to 1 for all variable combinations as 'data' already has a frequency weights variable)
my_data &lt;- prepare_data(data = DF_Seg_Chile, vars = c("csep", "ethnicity", "school", "district"))

# Using the 'col.order' option to sort data according to the 'csep' column.
my_data &lt;- prepare_data(data = DF_Seg_Chile, vars = c("csep", "ethnicity", "school", "district"),
fw = "nobs", col.order = "csep")

# The class of the resulting object in all cases must be "data.table", "data.frame" and
# "mutual.data".
class(my_data)
</code></pre>


</div>