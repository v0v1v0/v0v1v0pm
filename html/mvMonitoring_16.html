<div class="container">

<table style="width: 100%;"><tr>
<td>mspWarning</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process Alarms</h2>

<h3>Description</h3>

<p>Trigger an alarm, if necessary, for incoming multivariate
process observations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mspWarning(mspMonitor_object, faultsToTriggerAlarm = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mspMonitor_object</code></td>
<td>
<p>An xts matrix returned by the mspMonitor() function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>faultsToTriggerAlarm</code></td>
<td>
<p>Specifies how many sequential faults will cause
an alarm to trigger. Defaults to 5.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function and the mspMonitor() function are designed to be ran
via a scheduled task through Windows "Task Scheduler" or Macintosh OX
"launchd" application suites. The file flow is as follows: at each time
interval, run the mspMonitor() function on the matrix of daily observations
to add a flag status to the most recent incoming observation in the matrix,
and return this new xts matrix. Then, pass this updated daily observation
matrix to the mspWarning() function, which will check if the process has
recorded five or more sequential monitoring statistic flags in a row. Of
note, because these functions are expected to be repeatedly called in real
time, this function will only check for an alarm within the last row of the
xts matrix. To check multiple rows for an alarm state, please use the
mspTrain() function, which was designed to check multiple past
observations.
</p>
<p>This function requires an xts matrix returned by the mspMonitor() function.
</p>


<h3>Value</h3>

<p>An xts matrix of the same dimensions as mspMonitor_object, with a
recorded negative or positive and type-specific alarm status. Alarm codes
are: 0 = no alarm, 1 = Hotelling's T2 alarm, 2 = Squared Prediction Error
alarm, and 3 = both alarms.
</p>


<h3>See Also</h3>

<p>Pipe flow: <code>mspTrain</code> into <code>mspMonitor</code>
into <code>mspWarning</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: # cut down on R CMD check time

  nrml &lt;- mspProcessData(faults = "NOC")
  n &lt;- nrow(nrml)

  # Calculate the training summary, but save five observations for monitoring.
  trainResults_ls &lt;- mspTrain(data = nrml[1:(n - 5), -1],
                              labelVector = nrml[1:(n - 5), 1],
                              trainObs = 4320)

  # While training, we included 1 lag (the default), so we will also lag the
  #   observations we will test.
  testObs &lt;- nrml[(n - 6):n, -1]
  testObs &lt;- xts:::lag.xts(testObs, 0:1)
  testObs &lt;- testObs[-1,]
  testObs &lt;- cbind(nrml[(n - 5):n, 1], testObs)

  # Run the monitoring function.
  dataAndFlags &lt;- mspMonitor(observations = testObs[, -1],
                             labelVector = testObs[, 1],
                             trainingSummary = trainResults_ls$TrainingSpecs)

  # Alarm check the last row of the matrix returned by the mspMonitor
  #   function
  mspWarning(dataAndFlags)


## End(Not run)

</code></pre>


</div>