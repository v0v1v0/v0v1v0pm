<div class="container">

<table style="width: 100%;"><tr>
<td>faultDetect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process Fault Detection</h2>

<h3>Description</h3>

<p>Detect if a single multivariate observation is beyond normal
operating conditions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">faultDetect(threshold_object, observation, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>threshold_object</code></td>
<td>
<p>An object of classes "threshold" and "pca" returned
by the internal threshold() function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observation</code></td>
<td>
<p>A single row of an xts data matrix (a 1 x p matrix) to
compare against the thresholds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Lazy dots for additional internal arguments</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function takes in a threshold object returned by the
threshold() function and a single observation as a matrix or xts row.
Internally, the function multiplies the observation by the projection
matrix returned within the threshold object, calculates the SPE and T2
process monitoring statistics for that observation, and compares these
statistics against their corresponding threshold values to determine if the
observation lies outside the expected boundaries. The function then returns
a row vector of the SPE test statistic, a logical indicator marking if this
statistic is beyond the threshold, the Hotelling's T2 statistic, and an
indicator if this statistic is beyond the threshold. Observations with
monitoring statistics beyond the calculated threshold are marked with a 1,
while observations within normal operating conditions are marked with a 0.
These threshold values are passed from the threshold() function through
this function via a returned threshold object. This object will be used in
higher function calls.
</p>
<p>This internal function is called by faultFilter().
</p>


<h3>Value</h3>

<p>A named 1 x 4 matrix with the following entries for the single row
observation passed to this function:
</p>

<dl>
<dt>SPE – </dt>
<dd>
<p>the SPE statistic value</p>
</dd>
<dt>SPE_Flag – </dt>
<dd>
<p>the SPE fault indicator, where 1 represents a flag and
0 marks that the observation is within the normal operating conditions</p>
</dd>
<dt>T2 – </dt>
<dd>
<p>the T2 statistic value</p>
</dd>
<dt>T2_Flag – </dt>
<dd>
<p>the T2 fault indicator, defined the same as SPE_Flag</p>
</dd>
</dl>
<h3>See Also</h3>

<p>Called by <code>faultFilter</code> and <code>mspMonitor</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">nrml &lt;- mspProcessData(faults = "NOC")
scaledData &lt;- scale(nrml[,-1])
pca_obj &lt;- pca(scaledData)
thresh_obj &lt;- threshold(pca_object = pca_obj)

faultDetect(threshold_object = thresh_obj,
            observation = scaledData[1,])

</code></pre>


</div>