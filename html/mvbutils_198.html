<div class="container">

<table style="width: 100%;"><tr>
<td>write.sourceable.function</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sourceable code for functions (and more) with flat-format documentation</h2>

<h3>Description</h3>

<p>Works like <code>write</code> for functions without flat documentation (i.e. without a "doc" attribute). If a "doc" attribute exists, the file is written in a form allowing it to be edited and then read back in with "source.mvb"; the "doc" attribute is given as free-form text following the function definition. If applied to a non-function with a "source" attribute, just the source attribute is printed; the idea is that this could be read back by <code>source</code> (or <code>source.mvb</code>), probably in the course of <code>FF</code> after <code>fixr</code>, to regenerate the non-function object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">write.sourceable.function( x, con, append=FALSE, print.name=FALSE,
    doc.special=TRUE, xn=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code> x</code></td>
<td>
<p>function or other object, or the name thereof, that is to be written. If <code>x</code> is not a function, then it must have an attribute "source".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> con</code></td>
<td>
<p>a connection or filename</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> append</code></td>
<td>
<p>if "con" is not already open, should it be appended to rather than overwritten?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> print.name</code></td>
<td>
<p>should output start with <code>"NAME" &lt;-</code> (where NAME is deduced from <code>x</code>)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> doc.special</code></td>
<td>
<p>TRUE if <code>doc</code> attribute is to be printed as flat docâ€“ assumes readback via <code>source.mvb</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> xn</code></td>
<td>
<p>(string) can set this to be the name of the function if <code>print.name</code> is TRUE</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>x</code> is unquoted and <code>print.name=TRUE</code>, the name is obtained from <code>deparse( substitute( x))</code>. If <code>x</code> is a character string, the name is <code>x</code> itself and the function printed is <code>get(x)</code>.
</p>
<p>The real criterion for an attribute to be output in <code>flatdoc</code>-style, is not whether the attribute is called <code>doc</code>, but rather whether it is a character-mode object of class <code>docattr</code>. You can use this to force <code>flatdoc</code>-style output of several <code>doc</code>-like attributes.
</p>
<p>The default EOF line for an attribute is &lt;&lt;end of doc&gt;&gt;, but this will be adjusted if it appears in the attribute itself.
</p>


<h3>See Also</h3>

<p><code>source.mvb</code>, <code>readLines.mvb</code>, <code>flatdoc</code>, the file "demostuff/original.dochelp.rrr", the demo in "flatdoc.demo.r"
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
write.sourceable.function( write.sourceable.function, "wsf.r")
# To dump all functions and their documentation in a workspace into a single sourceable file:
cat( "", file="allfuns.r")
sapply( find.funs(), write.sourceable.function, file="allfuns.r", append=TRUE, print.name=TRUE)
# A non-function
scrunge &lt;- c( 1:7, 11)
attr( scrunge, "source") &lt;- c( "# Another way:", "c( 1:4, c( 5:7, 11))")
scrunge # [1] 1 2 3 4 5 6 7 11
write.sourceable.function( scrunge, stdout()) # source
fixr( scrunge) # source

## End(Not run)
</code></pre>


</div>