<div class="container">

<table style="width: 100%;"><tr>
<td>library.dynam.reg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Auto-registration and loading of dynamic library</h2>

<h3>Description</h3>

<p>A bit like <code>useDynLib</code> but for direct use in your own package's <code>.onLoad</code>, this loads a DLL and creates objects that allow the DLL routines to be called directly. If your package "Splendid" calls <code>library.dynam.reg</code> in its <code>.onLoad()</code> to load a DLL "speedoo" which contains routines "whoosh" and "zoom", then an environment "C_speedoo" will be created in the <code>asNamespace("Splendid")</code>, and the environment will contain objects <code>whoosh</code> and <code>zoom</code>. R-code routines in "Splendid" can then call e.g.
</p>
<pre>
  .C( C_speedo$whoosh, ....)
</pre>
<p>You can only call <code>library.dynam.reg</code> inside <code>.onLoad</code>, because after that the namespace will be sealed so you can't poke more objects into it.
</p>


<h4>Note</h4>

<p>Currently, <em>all</em> routines go into <code>C_speedoo</code>, regardless of how they are meant to be called (<code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, or <code>.External</code>). It's up to you to call them the right way. I might change this to create separate <code>Call_speedoo</code> etc.
</p>



<h4>Note2</h4>

<p>As of R3.1.1 at least, it's possible that "recent" changes to the <code>useDynLib</code> directive in a package namespace might obviate the need for this function. In particular, <code>useDynLib</code> can now create an environment/list that refers directly to DLL, containing references to individual routines (which will be slightly slowed because they need to be looked up each time). Also, <code>useDynLib</code> can automatically register its routines. What's not obvious is whether it can yet do both these things together— which is what <code>library.dynam.reg</code> is aimed at.
</p>



<h3>Usage</h3>

<pre><code class="language-R"># Only inside a '.onLoad', where you will already know "package" and "lib.loc"
library.dynam.reg(chname, package, lib.loc, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code> chname</code></td>
<td>
<p>DLL name, a string— <em>without</em> any path</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> package, lib.loc</code></td>
<td>
<p>strings as for <code>library.dynam</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> ...</code></td>
<td>
<p>other args to <code>library.dynam</code></p>
</td>
</tr>
</table>
</div>