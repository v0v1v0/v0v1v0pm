<div class="container">

<table style="width: 100%;"><tr>
<td>extract_spatial_summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarise spatial data in mxFDA object</h2>

<h3>Description</h3>

<p>Summarise spatial data in mxFDA object
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_spatial_summary(mxFDAobject, columns, grouping_columns = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mxFDAobject</code></td>
<td>
<p>object of class <code>mxFDA</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>character vector for column heading for cells to summarise</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouping_columns</code></td>
<td>
<p>character vector of other columns to use as grouping, such as region classification column</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>Currently this function is experimental as it only handles data that has text in the columns. Eventually,
will be able to handle any data inputs such as those from HALO where cells are designated as positive (1) or
negative (0) for a cell phenotypes.
</p>


<h3>Value</h3>

<p>data frame with percent of total points per spatial sample <code>columns</code>.
If multiple levels are present in <code>columns</code> columns, multiple output columns will be provided.
</p>


<h3>Author(s)</h3>

<p>Alex Soupir <a href="mailto:alex.soupir@moffitt.org">alex.soupir@moffitt.org</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#load data
data(lung_df)

#create data frames for `mxFDA` object
clinical = lung_df %&gt;%
  dplyr::select(image_id, patient_id, patientImage_id, gender,
         age, survival_days, survival_status, stage) %&gt;%
  dplyr::distinct()
#make small, just need to make sure it runs
spatial = lung_df %&gt;%
  dplyr::select(-image_id, -gender, -age, -survival_days, -survival_status, -stage) %&gt;%
  dplyr::filter(patientImage_id %in% clinical$patientImage_id[1:10])

#create `mxFDA` object
mxFDAobject = make_mxfda(metadata = clinical,
                         spatial = spatial,
                         subject_key = "patient_id",
                         sample_key = "patientImage_id")

#get markers
markers = colnames(mxFDAobject@Spatial) %&gt;%
  grep("pheno", ., value = TRUE)

#extract summary
df = extract_spatial_summary(mxFDAobject, markers)

</code></pre>


</div>