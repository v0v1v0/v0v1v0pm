<div class="container">

<table style="width: 100%;"><tr>
<td>extract_surface</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Surface</h2>

<h3>Description</h3>

<p>Function that transforms functional models from linear or additive functional cox models into <code>afcmSurface</code> or <code>lfcmSurface</code> objects to be plotted.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_surface(
  mxFDAobject,
  metric,
  model = NULL,
  r = "r",
  value = "fundiff",
  grid_length = 100,
  analysis_vars,
  p = 0.05,
  filter_cols = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mxFDAobject</code></td>
<td>
<p>object of class <code>mxFDA</code> with model <code>model</code> calculated wihtin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>spatial summary function to extract surface for</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>character string for the name of the model for <code>metric</code> data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Character string, the name of the variable that identifies the function domain (usually a radius for spatial summary functions). Default is "r".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>Character string, the name of the variable that identifies the spatial summary function values. Default is "fundiff".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_length</code></td>
<td>
<p>Length of grid on which to evaluate coefficient functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analysis_vars</code></td>
<td>
<p>Other variables used in modeling FCM fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>numeric p-value used for predicting significant AFCM surface</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_cols</code></td>
<td>
<p>a named vector of factors to filter summary functions to in <code>c(Derived_Column = "Level_to_Filter")</code> format</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a 4 element list of either class <code>lfcmSurface</code> or <code>afcmSurface</code> depending on the class of model
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Surface</code></td>
<td>
<p><code>data.frame</code> for term predictions for the surface of the metric * radius area</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Prediction</code></td>
<td>
<p><code>data.frame</code> for standard error of the terms for the above surface. AFCM models use the <code>p</code> to set the upper and lower standard errors of <code class="reqn">\beta_1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Metric</code></td>
<td>
<p>character of the spatial summary function used; helps keep track if running many models</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P-value</code></td>
<td>
<p>a numeric value of the input p-value</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Julia Wrobel <a href="mailto:julia.wrobel@emory.edu">julia.wrobel@emory.edu</a>
</p>
<p>Alex Soupir <a href="mailto:alex.soupir@moffitt.org">alex.soupir@moffitt.org</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#load ovarian mxFDA object
data('ovarian_FDA')

#run the lfcm model
ovarian_FDA = run_fcm(ovarian_FDA, model_name = "fit_lfcm",
                      formula = survival_time ~ age, event = "event",
                      metric = "uni g", r = "r", value = "fundiff",
                      analysis_vars = c("age", "survival_time"),
                      afcm = FALSE)

#extract surface
model_surface = extract_surface(ovarian_FDA, metric = 'uni g',
                                model = 'fit_lfcm',
                                analysis_vars = 'age') #variables in model

</code></pre>


</div>