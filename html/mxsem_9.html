<div class="container">

<table style="width: 100%;"><tr>
<td>mxsem_group_by</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>mxsem_group_by</h2>

<h3>Description</h3>

<p>creates a multi-group model from an OpenMx model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mxsem_group_by(
  mxModel,
  grouping_variables,
  parameters = c(".*"),
  use_grepl = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mxModel</code></td>
<td>
<p>mxModel with the entire data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouping_variables</code></td>
<td>
<p>Variables used to split the data in groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>the parameters that should be group specific. By default
all parameters are group specific.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_grepl</code></td>
<td>
<p>if set to TRUE, grepl is used to check which parameters are
group specific. For instance, if parameters = "a" and use_grepl = TRUE, all parameters
whose label contains the letter "a" will be group specific. If use_grep = FALSE
only the parameter that has the label "a" is group specific.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>mxsem_group_by creates a multi-group model by splitting the data found
in an mxModel object using dplyr's group_by function. The general idea is
as follows:
</p>
<p>1. The function extracts the data from mxModel
2. The data is split using the group_by function of dplyr with the variables
in grouping_variables
3. a separate model is set up for each group. All parameters that match
those specified in the parameters argument are group specific
</p>
<p>**Warning**: The multi-group model may differ from **lavaan**! For instance,
**lavaan** will automatically set the latent variances for all but the first
group free if the loadings are fixed to equality. Such automatic procedures
are not yet implemented in **mxsem**.
</p>


<h3>Value</h3>

<p>mxModel with multiple groups. Use get_groups to extract the groups
</p>


<h3>Examples</h3>

<pre><code class="language-R"># THE FOLLOWING EXAMPLE IS ADAPTED FROM
# https://openmx.ssri.psu.edu/docs/OpenMx/latest/_static/Rdoc/mxModel.html
library(mxsem)

model &lt;- 'spatial =~ visual + cubes + paper
          verbal  =~ general + paragrap + sentence
          math    =~ numeric + series + arithmet'

mg_model &lt;- mxsem(model = model,
                  data  = OpenMx::HS.ability.data) |&gt;
  # we want separate models for all combinations of grades and schools:
  mxsem_group_by(grouping_variables = "school") |&gt;
  mxTryHard()

# let's summarize the results:
summarize_multi_group_model(mg_model)
</code></pre>


</div>