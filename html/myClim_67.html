<div class="container">

<table style="width: 100%;"><tr>
<td>mc_join</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Joining time-series from repeated downloads</h2>

<h3>Description</h3>

<p>The function is designed to merge time-series data obtained through
repeated downloads in the same location. Within a specific locality,
the function performs the merging based on logger type,
physical element, and sensor height
</p>


<h3>Usage</h3>

<pre><code class="language-R">mc_join(data, comp_sensors = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>myClim object in Raw-format. see myClim-package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp_sensors</code></td>
<td>
<p>senors for compare and select source logger; If NULL then first is used. (default NULL)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Joining is restricted to the myClim Raw-format (refer to myClim-package).
Loggers need to be organized within localities. The simplest method is to use mc_read_data,
providing both <code>files_table</code> and <code>localities_table</code>. When using mc_read_files
without metadata, a bit more coding is needed. In this case, you can create
multiple myClim objects and specify correct locality names afterwards,
then merge these objects using mc_prep_merge, which groups loggers
based on identical locality names.
</p>
<p>The joining function operates seamlessly without user intervention
in two scenarios:
</p>

<ol>
<li>
<p> when the start of a newer time series aligns with the end of an older one, and
</p>
</li>
<li>
<p> when the two time-series share identical values during the overlap.
</p>
</li>
</ol>
<p>However, if values differ during the overlap, the user is prompted to
interactively choose which time-series to retain and which to discard.
myClim provides information about differing time-series in the console,
including locality ID, problematic interval (start-end),
older logger ID and its time series start-end, and newer logger ID and
its time series start-end. Additionally, an interactive graphical
window (plotly) displays conflicting time series, allowing the user to
zoom in and explore values. In case of multiple conflicts, myClim
sequentially asks the user for decisions.
</p>
<p>Users have seven options for handling overlap conflicts, six of which are pre-defined.
The seventh option allows the user to specify the exact time
to trim the older time-series and use the newer one. The options include:
</p>

<ul>
<li>
<p> 1: using the older logger (to resolve this conflict),
</p>
</li>
<li>
<p> 2: using the newer logger (to resolve this conflict),
</p>
</li>
<li>
<p> 3: skip this join (same type loggers in locality aren't joined),
</p>
</li>
<li>
<p> 4: always using the older logger (to resolve this and all other conflicts),
</p>
</li>
<li>
<p> 5: always using the newer logger (to resolve this and all other conflicts)
</p>
</li>
<li>
<p> 6: exit joining process.
</p>
</li>
</ul>
<p>Users must press the number key, hit Return/Enter,
or write in console the exact date in the format <code style="white-space: pre;">⁠YYYY-MM-DD hh:mm⁠</code>
to trim the older series and continue with the newer series.
</p>
<p>Loggers with multiple sensors are joined based on one or
more selected sensors (see parameter comp_sensors).
The name of the resulting joined sensor is taken from the logger with
the oldest data. If serial_number is not equal during logger joining,
the resulting serial_number is NA. Clean info is changed to NA except
for the step. When joining a non-calibrated sensor with a calibrated one,
the calibration information must be empty in the non-calibrated sensor.
</p>
<p>For example of joining see <a href="http://labgis.ibot.cas.cz/myclim/articles/myclim-demo.html">myClim vignette</a>.
</p>
<p><strong>WARNING</strong>
</p>
<p><code>mc_join</code> expects a maximum of one logger of a certain type
and height measuring certain elements in one locality.
In other words, if you use multiple logger of identical type
at identical heights in one locality, you cannot use
<code>mc_join</code> directly; you have to split your locality into sub-localities.
</p>


<h3>Value</h3>

<p>myClim object with joined loggers.
</p>


</div>